import{d as Ue,e as Ke,a as se,t as ye,s as pe,b as on,c as Be}from"../chunks/CF_PhKuc.js";import"../chunks/CEJQm8eT.js";import{ah as Da,_ as Ta,ai as ln,p as $a,H as je,I as sn,G as un,g as l,K as cn,L as Ia,M as ma,N as xa,R as la,ar as dn,O as Ua,P as Ka,Q as fn,aw as ya,au as Xa,ax as Va,ay as vn,a8 as pn,az as gn,aA as bn,a7 as hn,al as _n,a4 as mn,v as xn,y as yn,aB as wa,aC as Fa,a5 as kn,j as Pa,aD as Ya,aE as An,aF as Nn,ak as En,aG as $n,b as qa,x as Wa,z as Ve,ae as Qe,l as v,aH as Xe,D as y,F as A,E as x,B as Ee,C as Pe,ag as N,aI as ba,A as Oe}from"../chunks/Bf27f5Ts.js";import{p as ra,i as Te}from"../chunks/y_7jc0in.js";import{p as $,b as Le}from"../chunks/Bwo36f8E.js";import{c as Sn,z as Ja,r as aa,d as Ce,t as ue,b as ua,s as Za,e as Cn,a as Ha,i as wn}from"../chunks/D5wU_ylY.js";import{i as Fn}from"../chunks/9dEYUNHJ.js";function Ln(e){var t=ln,n=$a;Da(null),Ta(null);try{return e()}finally{Da(t),Ta(n)}}function Qa(e,t,n,r=n){e.addEventListener(t,()=>Ln(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Sn()}function fa(e,t){return t}function Rn(e,t,n,r){for(var i=[],o=t.length,c=0;c<o;c++)vn(t[c].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var p=n.parentNode;pn(p),p.append(n),r.clear(),Ze(e,t[0].prev,t[o-1].next)}gn(i,()=>{for(var b=0;b<o;b++){var h=t[b];a||(r.delete(h.k),Ze(e,h.prev,h.next)),bn(h.e,!a)}})}function va(e,t,n,r,i,o=null){var c=e,a={flags:t,items:new Map,first:null},p=(t&Ya)!==0;if(p){var b=e;c=je?ma(hn(b)):b.appendChild(_n())}je&&sn();var h=null,C=!1,m=mn(()=>{var E=n();return xn(E)?E:E==null?[]:Xa(E)});un(()=>{var E=l(m),_=E.length;if(C&&_===0)return;C=_===0;let B=!1;if(je){var O=c.data===cn;O!==(_===0)&&(c=Ia(),ma(c),xa(!1),B=!0)}if(je){for(var F=null,T,z=0;z<_;z++){if(la.nodeType===8&&la.data===dn){c=la,B=!0,xa(!1);break}var k=E[z],S=r(k,z);T=et(la,a,F,null,k,S,z,i,t,n),a.items.set(S,T),F=T}_>0&&ma(Ia())}je||Dn(E,a,c,i,t,r,n),o!==null&&(_===0?h?Ua(h):h=Ka(()=>o(c)):h!==null&&fn(h,()=>{h=null})),B&&xa(!0),l(m)}),je&&(c=la)}function Dn(e,t,n,r,i,o,c){var H,Z,ee,U;var a=(i&An)!==0,p=(i&(wa|Fa))!==0,b=e.length,h=t.items,C=t.first,m=C,E,_=null,B,O=[],F=[],T,z,k,S;if(a)for(S=0;S<b;S+=1)T=e[S],z=o(T,S),k=h.get(z),k!==void 0&&((H=k.a)==null||H.measure(),(B??(B=new Set)).add(k));for(S=0;S<b;S+=1){if(T=e[S],z=o(T,S),k=h.get(z),k===void 0){var I=m?m.e.nodes_start:n;_=et(I,t,_,_===null?t.first:_.next,T,z,S,r,i,c),h.set(z,_),O=[],F=[],m=_.next;continue}if(p&&Tn(k,T,S,i),k.e.f&ya&&(Ua(k.e),a&&((Z=k.a)==null||Z.unfix(),(B??(B=new Set)).delete(k))),k!==m){if(E!==void 0&&E.has(k)){if(O.length<F.length){var ae=F[0],W;_=ae.prev;var te=O[0],w=O[O.length-1];for(W=0;W<O.length;W+=1)Ma(O[W],ae,n);for(W=0;W<F.length;W+=1)E.delete(F[W]);Ze(t,te.prev,w.next),Ze(t,_,te),Ze(t,w,ae),m=ae,_=w,S-=1,O=[],F=[]}else E.delete(k),Ma(k,m,n),Ze(t,k.prev,k.next),Ze(t,k,_===null?t.first:_.next),Ze(t,_,k),_=k;continue}for(O=[],F=[];m!==null&&m.k!==z;)m.e.f&ya||(E??(E=new Set)).add(m),F.push(m),m=m.next;if(m===null)continue;k=m}O.push(k),_=k,m=k.next}if(m!==null||E!==void 0){for(var M=E===void 0?[]:Xa(E);m!==null;)m.e.f&ya||M.push(m),m=m.next;var j=M.length;if(j>0){var Q=i&Ya&&b===0?n:null;if(a){for(S=0;S<j;S+=1)(ee=M[S].a)==null||ee.measure();for(S=0;S<j;S+=1)(U=M[S].a)==null||U.fix()}Rn(t,M,Q,h)}}a&&yn(()=>{var V;if(B!==void 0)for(k of B)(V=k.a)==null||V.apply()}),$a.first=t.first&&t.first.e,$a.last=_&&_.e}function Tn(e,t,n,r){r&wa&&Va(e.v,t),r&Fa?Va(e.i,n):e.i=n}function et(e,t,n,r,i,o,c,a,p,b){var h=(p&wa)!==0,C=(p&Nn)===0,m=h?C?kn(i):Pa(i):i,E=p&Fa?Pa(c):c,_={i:E,v:m,k:o,a:null,e:null,prev:n,next:r};try{return _.e=Ka(()=>a(e,m,E,b),je),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Ma(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var c=En(o);i.before(o),o=c}}function Ze(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ke(e,t,n=t){var r=$n();Qa(e,"input",i=>{var o=i?e.defaultValue:e.value;if(o=ka(e)?Aa(o):o,n(o),r&&o!==(o=t())){var c=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(a,e.value.length))}}),(je&&e.defaultValue!==e.value||qa(t)==null&&e.value)&&n(ka(e)?Aa(e.value):e.value),Wa(()=>{var i=t();ka(e)&&i===Aa(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function La(e,t,n=t){Qa(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(je&&e.defaultChecked!==e.checked||qa(t)==null)&&n(e.checked),Wa(()=>{var r=t();e.checked=!!r})}function ka(e){var t=e.type;return t==="number"||t==="range"}function Aa(e){return e===""?null:+e}const In=!0,Hl=Object.freeze(Object.defineProperty({__proto__:null,prerender:In},Symbol.toStringTag,{value:"Module"}));function le(e){return parseInt(e,16)}function da(e){return Math.floor(e).toString(16).padStart(2,"0").toUpperCase()}function Na(e,t,n){const r=e>t;let i=t,o=e;r&&(i=e,o=t);const a=(i-o)/n;let p=o;const b=[o];for(let h=1;h<n;h++)p+=a,b.push(p);return b[n-1]=i,r&&b.reverse(),b}const Vn=/^(\(.*\)|\\?.)$/,ea=e=>{const t=e.toString();return Vn.test(t)?t:`(?:${t})`},Pn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Hn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,K=e=>{const t=n=>K(`(?<${n}>${`${e}`.replace(Pn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>K(`${e}${f(...n)}`),{referenceTo:n=>K(`${e}\\k<${n}>`)}),or:(...n)=>K(`(?:${e}|${f(...n)})`),after:(...n)=>K(`(?<=${f(...n)})${e}`),before:(...n)=>K(`${e}(?=${f(...n)})`),notAfter:(...n)=>K(`(?<!${f(...n)})${e}`),notBefore:(...n)=>K(`${e}(?!${f(...n)})`),times:Object.assign(n=>K(`${ea(e)}{${n}}`),{any:()=>K(`${ea(e)}*`),atLeast:n=>K(`${ea(e)}{${n},}`),atMost:n=>K(`${ea(e)}{0,${n}}`),between:(n,r)=>K(`${ea(e)}{${n},${r}}`)}),optionally:()=>K(`${ea(e)}?`),as:t,groupedAs:t,grouped:()=>K(`${e}`.replace(Hn,"($1$3)$2")),at:{lineStart:()=>K(`^${e}`),lineEnd:()=>K(`${e}$`)}}},Mn=/[.*+?^${}()|[\]\\/]/g,we=e=>K(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`),Bn=(...e)=>K(`(?:${e.map(t=>f(t)).join("|")})`),On=K(".");K("\\b\\w+\\b");K("\\w");K("\\b");const Ie=K("\\d");K("\\s");const zn=Object.assign(K("[a-zA-Z]"),{lowercase:K("[a-z]"),uppercase:K("[A-Z]")});K("\\t");K("\\n");K("\\r");K("\\W+"),K("\\W"),K("\\B"),K("\\D"),K("\\S"),Object.assign(K("[^a-zA-Z]"),{lowercase:K("[^a-z]"),uppercase:K("[^A-Z]")}),K("[^\\t]"),K("[^\\n]"),K("[^\\r]");const f=(...e)=>K(e.map(t=>typeof t=="string"?t.replace(Mn,"\\$&"):t).join("")),ve=(...e)=>K(`${ea(f(...e))}+`),D=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(f(...e).toString(),[...t||""].join(""))},Gn=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,jn=/^[^\\]+/g,at=/(?<sil>(?:sha|shi|shu|she|sho|cha|chi|chu|che|cho|tsu|kya|kyi|kyu|kye|kyo|gya|gyi|gyu|gye|gyo|sya|syu|syi|sye|syo|zya|zyu|zyi|zye|zyo|jya|jyu|jyi|jye|jyo|tya|tyi|tyu|tye|tyo|dya|dyi|dyu|dye|dyo|nya|nyi|nyu|nye|nyo|hya|hyi|hyu|hye|hyo|fya|fyi|fyu|fye|fyo|bya|byi|byu|bye|byo|pya|pyi|pyu|pye|pyo|mya|myi|myu|mye|myo|rya|ryi|ryu|rye|ryo|vya|vyi|vyu|vye|vyo|ka|ki|ku|ke|ko|ga|gi|gu|ge|go|sa|su|si|se|so|za|zu|zi|ze|zo|ja|ju|ji|je|jo|ta|ti|tu|te|to|da|di|du|de|do|na|ni|nu|ne|no|ha|hi|hu|he|ho|fa|fi|fu|fe|fo|ba|bi|bu|be|bo|pa|pi|pu|pe|po|ma|mi|mu|me|mo|ya|yi|yu|ye|yo|ra|ri|ru|re|ro|wa|wo|va|vi|vu|ve|vo|a|i|u|e|o|n|t)[^a-zA-Z\d\s:]*\s?)/g,Ba=ve(Ie).and(f(":")).and(Ie.times(2)).and(f(":")).and(Ie.times(2)).and(f(".")).and(Ie.times(2)),Un=Bn("Dialogue","Comment").groupedAs("type").and(f(": ")).and(ve(Ie).optionally().groupedAs("layer")).and(f(",")).and(Ba.optionally().groupedAs("start")).and(f(",")).and(Ba.optionally().groupedAs("end")).and(f(",")).and(ve(we(",").optionally()).groupedAs("style")).and(f(",")).and(ve(we(",")).optionally().groupedAs("actor")).and(f(",")).and(ve(Ie).optionally().groupedAs("marginLeft")).and(f(",")).and(ve(Ie).optionally().groupedAs("marginRight")).and(f(",")).and(ve(Ie).optionally().groupedAs("marginVertical")).and(f(",")).and(ve(we(",")).optionally().groupedAs("effect")).and(f(",")).and(ve(On).optionally().groupedAs("content")),Kn=D(Un),Xn=f("-").optionally().and(ve(Ie)),P=Xn.and(f(".").and(ve(Ie)).optionally()),tt=f("\\").and("a").and(P.groupedAs("a_value")),Yn=D(tt),Ne=zn.or(Ie).times(2),nt=f("&H").and(Ne.groupedAs("color_bgr_blue")).and(Ne.groupedAs("color_bgr_green")).and(Ne.groupedAs("color_bgr_red")).and(f("&")),rt=f("\\c").and(nt),ot=f("\\1c").and(f("&H")).and(Ne.groupedAs("color1_bgr_blue")).and(Ne.groupedAs("color1_bgr_green")).and(Ne.groupedAs("color1_bgr_red")).and(f("&")),lt=f("\\2c").and(f("&H")).and(Ne.groupedAs("color2_bgr_blue")).and(Ne.groupedAs("color2_bgr_green")).and(Ne.groupedAs("color2_bgr_red")).and(f("&")),st=f("\\3c").and(f("&H")).and(Ne.groupedAs("color3_bgr_blue")).and(Ne.groupedAs("color3_bgr_green")).and(Ne.groupedAs("color3_bgr_red")).and(f("&")),it=f("\\4c").and(f("&H")).and(Ne.groupedAs("color4_bgr_blue")).and(Ne.groupedAs("color4_bgr_green")).and(Ne.groupedAs("color4_bgr_red")).and(f("&")),qn=D(nt),Wn=D(rt),Jn=D(ot),Zn=D(lt),Qn=D(st),er=D(it),ut=f("\\").and("alpha").and(ve(we("\\")).groupedAs("alpha_value")),ar=D(ut),ct=f("\\").and("1a").and(ve(we("\\")).groupedAs("alpha1_value")),tr=D(ct),dt=f("\\").and("2a").and(ve(we("\\")).groupedAs("alpha2_value")),nr=D(dt),ft=f("\\").and("3a").and(ve(we("\\")).groupedAs("alpha3_value")),rr=D(ft),vt=f("\\").and("4a").and(ve(we("\\")).groupedAs("alpha4_value")),or=D(vt),pt=f("\\").and("k").and(P.groupedAs("k_lower_case_value")),lr=D(pt),gt=f("\\").and("K").and(P.groupedAs("k_upper_case_value")),sr=D(gt),bt=f("\\").and("kf").and(P.groupedAs("kf_value")),ir=D(bt),ht=f("\\").and("ko").and(P.groupedAs("ko_value")),ur=D(ht),_t=f("\\").and("q").and(P.groupedAs("q_value")),cr=D(_t),mt=f("\\").and("s").and(P.groupedAs("s_value")),dr=D(mt),xt=f("\\").and("u").and(P.groupedAs("u_value")),fr=D(xt),yt=f("\\").and("r").and(ve(we("\\")).groupedAs("r_value")),vr=D(yt),kt=f("\\").and("fe").and(P.groupedAs("fe_value")),pr=D(kt),At=f("\\").and("fn").and(ve(we("\\")).groupedAs("fn_value")),gr=D(At),Nt=f("\\").and("p").and(P.groupedAs("p_value")),br=D(Nt),Et=f("\\").and("pbo").and(P.groupedAs("pbo_value")),hr=D(Et),$t=f("\\").and("an").and(P.groupedAs("an_value")),_r=D($t),St=f("\\").and("b").and(P.groupedAs("b_value")),mr=D(St),Ct=f("\\").and("be").and(P.groupedAs("be_value")),xr=D(Ct),wt=f("\\").and("blur").and(P.groupedAs("blur_value")),yr=D(wt),Ft=f("\\").and("bord").and(P.groupedAs("bord_value")),kr=D(Ft),Lt=f("\\").and("xbord").and(P.groupedAs("xbord_value")),Ar=D(Lt),Rt=f("\\").and("ybord").and(P.groupedAs("ybord_value")),Nr=D(Rt),Dt=f("\\").and("shad").and(P.groupedAs("shad_value")),Er=D(Dt),Tt=f("\\").and("xshad").and(P.groupedAs("xshad_value")),$r=D(Tt),It=f("\\").and("yshad").and(P.groupedAs("yshad_value")),Sr=D(It),Vt=f("\\").and("fax").and(P.groupedAs("fax_value")),Cr=D(Vt),Pt=f("\\").and("fay").and(P.groupedAs("fay_value")),wr=D(Pt),Ht=f("\\").and("fscx").and(P.groupedAs("fscx_value")),Fr=D(Ht),Mt=f("\\").and("fscy").and(P.groupedAs("fscy_value")),Lr=D(Mt),Bt=f("\\").and("fsp").and(P.groupedAs("fsp_value")),Rr=D(Bt),Ot=f("\\").and("fr").and(P.groupedAs("fr_value")),Dr=D(Ot),zt=f("\\").and("frx").and(P.groupedAs("frx_value")),Tr=D(zt),Gt=f("\\").and("fry").and(P.groupedAs("fry_value")),Ir=D(Gt),jt=f("\\").and("frz").and(P.groupedAs("frz_value")),Vr=D(jt),Ut=f("\\").and("i").and(f("1").or("0").groupedAs("i_value")),Pr=D(Ut),Kt=f("\\").and("fs").and(P.groupedAs("fs_value")),Hr=D(Kt),Xt=f("\\").and("pos").and(f("(")).and(P.groupedAs("pos_x")).and(f(",")).and(P.groupedAs("pos_y")).and(f(")")),Mr=D(Xt),Yt=f("\\").and("org").and(f("(")).and(P.groupedAs("org_x")).and(f(",")).and(P.groupedAs("org_y")).and(f(")")),Br=D(Yt),qt=f("\\").and("fad").and(f("(")).and(P.groupedAs("in")).and(f(",")).and(P.groupedAs("out")).and(f(")")),Or=D(qt),Wt=f("\\").and("fade").and(f("(")).and(P.groupedAs("fade_alpha1")).and(f(",")).and(P.groupedAs("fade_alpha2")).and(f(",")).and(P.groupedAs("fade_alpha3")).and(f(",")).and(P.groupedAs("fade_t1")).and(f(",")).and(P.groupedAs("fade_t2")).and(f(",")).and(P.groupedAs("fade_t3")).and(f(",")).and(P.groupedAs("fade_t4")).and(f(")")),zr=D(Wt),Gr=f(",").and(P.groupedAs("move_t1")).and(f(",")).and(P.groupedAs("move_t2")).optionally(),Jt=f("\\").and("move").and(f("(")).and(P.groupedAs("move_x1")).and(f(",")).and(P.groupedAs("move_y1")).and(f(",")).and(P.groupedAs("move_x2")).and(f(",")).and(P.groupedAs("move_y2")).and(Gr).and(f(")")),jr=D(Jt),Zt=f("\\").and("clip").and(f("(")).and(ve(we(")")).groupedAs("clip_args")).and(f(")")),Ur=D(Zt),Qt=f("\\").and("iclip").and(f("(")).and(ve(we(")")).groupedAs("iclip_args")).and(f(")")),Kr=D(Qt),Xr=f("\\").and(ve(we("\\")).groupedAs("unknown_value")),en=Ct.or(ut).or(Lt).or(Rt).or(Tt).or(It).or(Qt).or(Jt).or(wt).or(Ft).or(Dt).or(Ht).or(Mt).or(Wt).or(Zt).or(Bt).or(Xt).or(Yt).or(qt).or(Et).or(zt).or(Gt).or(jt).or(Vt).or(Pt).or(ht).or(bt).or(Ot).or(Kt).or(kt).or(At).or($t).or(ot).or(lt).or(st).or(it).or(ct).or(dt).or(ft).or(vt).or(rt).or(_t).or(xt).or(mt).or(Nt).or(yt).or(Ut).or(St).or(tt).or(pt).or(gt).or(Xr),Yr=f("\\").at.lineStart().and("t").and(f("(")).and(P.groupedAs("arg1").and(f(",")).optionally()).and(P.groupedAs("arg2").and(f(",")).optionally()).and(P.groupedAs("arg3").and(f(",")).optionally()).and(ve(en).groupedAs("tags")).and(f(")")),qr=D(en),an=D(Yr);function Ea(e){const t=Math.floor(e/3600),n=Math.floor((e/3600-t)*60);return e=e-t*3600-n*60,{hours:t,minutes:n,seconds:e}}function Oa(e){var a,p,b;const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=e.match(t);if(!n||n.length===0)return null;const r=Math.floor(Number(((a=n.groups)==null?void 0:a.h)??"0")),i=Math.floor(Number(((p=n.groups)==null?void 0:p.m)??"0")),o=Number(((b=n.groups)==null?void 0:b.s)??"0"),c={hours:r,minutes:i,seconds:o};return Ra(c),c}function Ra(e){e.seconds>=60&&(e.seconds-=60,e.minutes++),e.minutes>=60&&(e.minutes-=60,e.hours++),e.hours>=9&&(e.hours=9,e.minutes=59,e.seconds=59.99)}function za(e){Ra(e);const t=e.hours.toFixed(0),n=e.minutes.toFixed(0).padStart(2,"0"),r=e.seconds.toFixed(2).padStart(5,"0");return`${t}:${n}:${r}`}function pa(e){return Ra(e),e.hours*3600+e.minutes*60+e.seconds}var Sa;(function(e){e[e.DOWN_LEFT=1]="DOWN_LEFT",e[e.DOWN_CENTER=2]="DOWN_CENTER",e[e.DOWN_RIGHT=3]="DOWN_RIGHT",e[e.CENTER_LEFT=4]="CENTER_LEFT",e[e.CENTER_CENTER=5]="CENTER_CENTER",e[e.CENTER_RIGHT=6]="CENTER_RIGHT",e[e.UP_LEFT=7]="UP_LEFT",e[e.UP_CENTER=8]="UP_CENTER",e[e.UP_RIGHT=9]="UP_RIGHT"})(Sa||(Sa={}));const Wr=Ja.nativeEnum(Sa);var Ca;(function(e){e[e.ANSI=0]="ANSI",e[e.DEFAULT=1]="DEFAULT",e[e.SYMBOL=2]="SYMBOL",e[e.MAC=77]="MAC",e[e.SHIFT_JIS=128]="SHIFT_JIS",e[e.HANGEUL=129]="HANGEUL",e[e.JOHAB=130]="JOHAB",e[e.GB2312=134]="GB2312",e[e.CHINESE_BIG5=136]="CHINESE_BIG5",e[e.GREEK=161]="GREEK",e[e.TURKISH=162]="TURKISH",e[e.VIETNAMESE=163]="VIETNAMESE",e[e.HEBREW=177]="HEBREW",e[e.ARAB=178]="ARAB",e[e.BALTIC=186]="BALTIC",e[e.RUSSIAN=204]="RUSSIAN",e[e.THAI=222]="THAI",e[e.EASTERN_EUROPE=238]="EASTERN_EUROPE",e[e.OEM=255]="OEM"})(Ca||(Ca={}));const Jr=Ja.nativeEnum(Ca);function Zr(){return{format:"Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text",lines:[]}}function Qr(){return{data:[]}}function eo(){return{files:[]}}function ao(){return{files:[]}}function to(){return{comments:[],properties:new Map}}function no(){return{comments:[],properties:new Map}}function ro(){return{format:"Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding",styles:[]}}const oo="[Script Info]",lo="[Aegisub Project Garbage]",so="[V4+ Styles]",io="[Graphics]",uo="[Fonts]",co="[Events]",fo="[Aegisub Extradata]",ga="; ",Ga="Data: ";function vo(e){const t={scriptInfo:no(),aegisubProjectGarbage:to(),styles:ro(),fonts:eo(),graphics:ao(),events:Zr(),extraData:Qr()},n="scriptInfo",r="projectGarbage",i="styles",o="fonts",c="graphics",a="events",p="extraData";let b="",h="";const C=e.split(`
`);for(let m=0;m<C.length;m++){const E=m+1,_=po(C[m]);if(_.length===0)continue;switch(_){case oo:b=n;continue;case lo:b=r;continue;case so:b=i;continue;case uo:b=o;continue;case io:b=c;continue;case co:b=a;continue;case fo:b=p;continue}let B="";switch(b){case n:B=go(t,_);break;case r:B=bo(t,_);break;case i:B=ho(t,_);break;case o:h=_o(t,_,h);break;case c:h=mo(t,_,h);break;case a:B=xo(t,_);break;case p:yo(t,_);break;default:console.error(`failed to parse line ${E}`);break}if(B.length>0)return console.error(`failed to parse ass file at line ${E}: ${B}
Line:
${_}`),null}return t}function po(e){return e=e.replaceAll("\\uFEFF",""),e=e.replaceAll("\r",""),e}function ha(e){var i,o;const t=/(?<key>.+):\s+(?<value>.*)\s*/,n={key:"",value:""},r=e.match(t);return!r||r.length===0?[n,`not a key-value pair: ${e}`]:(n.key=((i=r.groups)==null?void 0:i.key)??"",n.value=((o=r.groups)==null?void 0:o.value)??"",[n,""])}function go(e,t){if(t.startsWith(ga)){const i=t.substring(ga.length);return e.scriptInfo.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.scriptInfo.properties.set(n.key,n.value),"")}function bo(e,t){if(t.startsWith(ga)){const i=t.substring(ga.length);return e.aegisubProjectGarbage.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.aegisubProjectGarbage.properties.set(n.key,n.value),"")}function ho(e,t){const n=/Style: (?<name>.*)\s*,\s*(?<fontName>.*)\s*,\s*(?<fontSize>\d+(?:\.\d+)?)\s*,\s*&H(?<alpha1>[A-Fa-f0-9]{2})(?<color1>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha2>[A-Fa-f0-9]{2})(?<color2>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha3>[A-Fa-f0-9]{2})(?<color3>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha4>[A-Fa-f0-9]{2})(?<color4>[A-Fa-f0-9]{6})\s*,\s*(?<bold>0|-1)\s*,\s*(?<italic>0|-1)\s*,\s*(?<underline>0|-1)\s*,\s*(?<strikeout>0|-1)\s*,\s*(?<scaleX>\d+(?:\.\d+)?)\s*,\s*(?<scaleY>\d+(?:\.\d+)?)\s*,\s*(?<spacing>\d+(?:\.\d+)?)\s*,\s*(?<angle>-?\d+(?:\.\d+)?)\s*,\s*(?<borderStyle>\d+)\s*,\s*(?<outline>\d+(?:\.\d+)?)\s*,\s*(?<shadow>\d+(?:\.\d+)?)\s*,\s*(?<alignment>[1-9])\s*,\s*(?<marginLeft>\d+)\s*,\s*(?<marginRight>\d+)\s*,\s*(?<marginVertical>\d+)\s*,\s*(?<encoding>\d+)/;if(!t.startsWith("Style: "))return"";const r=t.match(n);if(!r||r.length===0||!r.groups)return`failed to parse style: not a style: ${t}`;const i=Wr.safeParse(Number(r.groups.alignment));if(!i.success)return`failed to parse style: invalid alignment: ${t}`;const o=i.data,c=Jr.safeParse(Number(r.groups.encoding));if(!c.success)return`failed to parse style: invalid encoding: ${r.groups.encoding}`;const a=c.data,p={name:r.groups.name??"",fontName:r.groups.fontName??"",fontSize:Number(r.groups.fontSize??"0"),primaryAlpha:r.groups.alpha1,primaryColor:r.groups.color1,secondaryAlpha:r.groups.alpha2,secondaryColor:r.groups.color2,outlineAlpha:r.groups.alpha3,outlineColor:r.groups.color3,backAlpha:r.groups.alpha4,backColor:r.groups.color4,bold:Number(r.groups.bold),italic:Number(r.groups.italic),underline:Number(r.groups.underline),strikeOut:Number(r.groups.strikeout),scaleX:Number(r.groups.scaleX),scaleY:Number(r.groups.scaleY),spacing:Number(r.groups.spacing),angle:Number(r.groups.angle),borderStyle:Number(r.groups.borderStyle),outline:Number(r.groups.outline),shadow:Number(r.groups.shadow),alignment:o,marginLeft:Number(r.groups.marginLeft),marginRight:Number(r.groups.marginRight),marginVertical:Number(r.groups.marginVertical),encoding:a};return e.styles.styles.push(p),""}function _o(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="fontname"){const a=r.value;let p={name:"",data:[]},b=e.fonts.files.findIndex(h=>h.name===a);return e.fonts.files.push(p),b=e.fonts.files.length-1,p=e.fonts.files[b],p.name=a,n=a,a}const o=e.fonts.files.findLastIndex(a=>a.name==n);return o<0?"":(e.fonts.files[o].data.push(t),n)}function mo(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="filename"){const a=r.value;let p={name:"",data:[]},b=e.graphics.files.findIndex(h=>h.name===a);return e.graphics.files.push(p),b=e.graphics.files.length-1,p=e.graphics.files[b],p.name=a,n=a,a}const o=e.graphics.files.findLastIndex(a=>a.name==n);return o<0?"":(e.graphics.files[o].data.push(t),n)}function xo(e,t){if(t.startsWith("Format:"))return e.events.format=t,"";const n=Ge(t);return n==null?`not a event (dialogue / comment): ${n}`:(e.events.lines.push(n),"")}function yo(e,t){if(!t.startsWith(Ga))return;const n=t.substring(Ga.length);e.extraData.data.push(n)}function ko(e){const t=[],n=e.content.split(" ");for(let p=0;p<n.length;p++){const b=n[p];if(Ao(b)){const h=b.matchAll(at);for(const C of h)t.push({text:C[1],durationInMs:0})}else t.push({text:b,durationInMs:0});p!=n.length-1&&(t[t.length-1].text+=" ")}const r=Mo(e),i=Math.floor(Math.round(r*100/t.length)),o=t.length*i;for(const p of t)p.durationInMs=i;if(!(o===r*100)){const b=r*100-o;t[t.length-1].durationInMs+=b}const a=[];for(const p of t)a.push({name:"effect",tags:[{name:g.kf,value:p.durationInMs}]},{name:"text",value:p.text});e.content=me(a)}function Ao(e){for(;e.length>0;){const t=e.match(at);if(!t||t.length===0)return!1;e=e.substring(t[0].length)}return!0}var g;(function(e){e.a="a",e.alpha="alpha",e.alpha1="1a",e.alpha2="2a",e.alpha3="3a",e.alpha4="4a",e.an="an",e.b="b",e.be="be",e.blur="blur",e.bord="bord",e.clip="clip",e.color="c",e.color1="1c",e.color2="2c",e.color3="3c",e.color4="4c",e.fad="fad",e.fade="fade",e.fax="fax",e.fay="fay",e.fe="fe",e.fn="fn",e.fr="fr",e.frx="frx",e.fry="fry",e.frz="frz",e.fs="fs",e.fscx="fscx",e.fscy="fscy",e.fsp="fsp",e.i="i",e.iclip="iclip",e.kLowerCase="k",e.kUpperCase="K",e.kf="kf",e.ko="ko",e.move="move",e.org="org",e.p="p",e.pbo="pbo",e.pos="pos",e.q="q",e.r="r",e.s="s",e.shad="shad",e.t="t",e.text="text",e.u="u",e.unknown="unknown",e.xbord="xbord",e.xshad="xshad",e.ybord="ybord",e.yshad="yshad"})(g||(g={}));function ca(e,t){var h,C,m,E,_,B,O,F,T,z,k,S,I,ae,W,te,w,M,j,Q,H,Z,ee,U,V,X,re,ne,de,fe,ce,Y,ie,be,De,$e,Ae,Fe,ta,Ye,He,qe,na,We,Je,u,he,L,R,G,q;const n=e.substring(1),r=e.match(an);if(r&&r.length>0)return No(e,t,n,r);const i=e.match(jn);if(i&&i.length>0){const s=i[0];return t.push({name:g.text,value:s}),e=e.substring(s.length),e.length>0&&ca(e,t),t}const o=e.match(qr);if(!o||o.length==0)return t;function c(s,d,J){return s.push(d),e=e.substring(J),e.length>0&&ca(e,s),s}let a=(h=o[0].match(jr))==null?void 0:h.groups;if(a!=null){const s=Number((a==null?void 0:a.move_x1)??"0"),d=Number((a==null?void 0:a.move_y1)??"0"),J=Number((a==null?void 0:a.move_x2)??"0"),oe=Number((a==null?void 0:a.move_y2)??"0"),_e=a!=null&&a.move_t1?Number(a.move_t1):null,Se=a!=null&&a.move_t2?Number(a.move_t2):null,_a={name:g.move,x1:s,y1:d,x2:J,y2:oe,t1:_e,t2:Se};return c(t,_a,o[0].length)}if(a=(C=o[0].match(ar))==null?void 0:C.groups,a!=null){const s=(a==null?void 0:a.alpha_value)??"",d={name:g.alpha,value:s};return c(t,d,o[0].length)}if(a=(m=o[0].match(Ar))==null?void 0:m.groups,a!=null){const s=Number((a==null?void 0:a.xbord_value)??"0"),d={name:g.xbord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(E=o[0].match(Nr))==null?void 0:E.groups,a!=null){const s=Number((a==null?void 0:a.ybord_value)??"0"),d={name:g.ybord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(_=o[0].match($r))==null?void 0:_.groups,a!=null){const s=Number((a==null?void 0:a.xshad_value)??"0"),d={name:g.xshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(B=o[0].match(Sr))==null?void 0:B.groups,a!=null){const s=Number((a==null?void 0:a.yshad_value)??"0"),d={name:g.yshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(O=o[0].match(Kr))==null?void 0:O.groups,a!=null){const s=(a==null?void 0:a.iclip_args)??"",d={name:g.iclip,drawCommands:s};return c(t,d,o[0].length)}if(a=(F=o[0].match(yr))==null?void 0:F.groups,a!=null){const s=Number((a==null?void 0:a.blur_value)??"0"),d={name:g.blur,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(T=o[0].match(kr))==null?void 0:T.groups,a!=null){const s=Number((a==null?void 0:a.bord_value)??"0"),d={name:g.bord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(z=o[0].match(Er))==null?void 0:z.groups,a!=null){const s=Number((a==null?void 0:a.shad_value)??"0"),d={name:g.shad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(k=o[0].match(Fr))==null?void 0:k.groups,a!=null){const s=Number((a==null?void 0:a.fscx_value)??"0"),d={name:g.fscx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(S=o[0].match(Lr))==null?void 0:S.groups,a!=null){const s=Number((a==null?void 0:a.fscy_value)??"0"),d={name:g.fscy,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(I=o[0].match(zr))==null?void 0:I.groups,a!=null){const s=Number((a==null?void 0:a.fade_alpha1)??"0"),d=Number((a==null?void 0:a.fade_alpha2)??"0"),J=Number((a==null?void 0:a.fade_alpha3)??"0"),oe=Number((a==null?void 0:a.fade_t1)??"0"),_e=Number((a==null?void 0:a.fade_t2)??"0"),Se=Number((a==null?void 0:a.fade_t3)??"0"),_a=Number((a==null?void 0:a.fade_t4)??"0"),rn={name:g.fade,alpha1:s,alpha2:d,alpha3:J,t1:oe,t2:_e,t3:Se,t4:_a};return c(t,rn,o[0].length)}if(a=(ae=o[0].match(Ur))==null?void 0:ae.groups,a!=null){const s=(a==null?void 0:a.clip_args)??"",d={name:g.clip,drawCommands:s};return c(t,d,o[0].length)}if(a=(W=o[0].match(Rr))==null?void 0:W.groups,a!=null){const s=Number((a==null?void 0:a.fsp_value)??"0"),d={name:g.fsp,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(te=o[0].match(Mr))==null?void 0:te.groups,a!=null){const s=Number((a==null?void 0:a.pos_x)??"0"),d=Number((a==null?void 0:a.pos_y)??"0"),J={name:g.pos,x:s,y:d};return c(t,J,o[0].length)}if(a=(w=o[0].match(Br))==null?void 0:w.groups,a!=null){const s=Number((a==null?void 0:a.org_x)??"0"),d=Number((a==null?void 0:a.org_y)??"0"),J={name:g.org,x:s,y:d};return c(t,J,o[0].length)}if(a=(M=o[0].match(Or))==null?void 0:M.groups,a!=null){const s=Number((a==null?void 0:a.in)??"0"),d=Number((a==null?void 0:a.out)??"0"),J={name:g.fad,in:s,out:d};return c(t,J,o[0].length)}if(a=(j=o[0].match(Tr))==null?void 0:j.groups,a!=null){const s=Number((a==null?void 0:a.frx_value)??"0"),d={name:g.frx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Q=o[0].match(Ir))==null?void 0:Q.groups,a!=null){const s=Number((a==null?void 0:a.fry_value)??"0"),d={name:g.fry,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(H=o[0].match(Vr))==null?void 0:H.groups,a!=null){const s=Number((a==null?void 0:a.frz_value)??"0"),d={name:g.frz,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Z=o[0].match(Cr))==null?void 0:Z.groups,a!=null){const s=Number((a==null?void 0:a.fax_value)??"0"),d={name:g.fax,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ee=o[0].match(wr))==null?void 0:ee.groups,a!=null){const s=Number((a==null?void 0:a.fay_value)??"0"),d={name:g.fay,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(U=o[0].match(hr))==null?void 0:U.groups,a!=null){const s=Number((a==null?void 0:a.pbo_value)??"0"),d={name:g.pbo,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(V=o[0].match(pr))==null?void 0:V.groups,a!=null){const s=Number((a==null?void 0:a.fe_value)??"0"),d={name:g.fe,encodingId:Number(s)};return c(t,d,o[0].length)}if(a=(X=o[0].match(gr))==null?void 0:X.groups,a!=null){const s=(a==null?void 0:a.fn_value)??"",d={name:g.fn,font:s};return c(t,d,o[0].length)}if(a=(re=o[0].match(_r))==null?void 0:re.groups,a!=null){const s=Number((a==null?void 0:a.an_value)??"0"),d={name:g.an,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ne=o[0].match(xr))==null?void 0:ne.groups,a!=null){const s=Number((a==null?void 0:a.be_value)??"0"),d={name:g.be,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(de=o[0].match(Dr))==null?void 0:de.groups,a!=null){const s=Number((a==null?void 0:a.fr_value)??"0"),d={name:g.fr,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(fe=o[0].match(Hr))==null?void 0:fe.groups,a!=null){const s=Number((a==null?void 0:a.fs_value)??"0"),d={name:g.fs,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ce=o[0].match(ur))==null?void 0:ce.groups,a!=null){const s=Number((a==null?void 0:a.ko_value)??"0"),d={name:g.ko,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Y=o[0].match(ir))==null?void 0:Y.groups,a!=null){const s=Number((a==null?void 0:a.kf_value)??"0"),d={name:g.kf,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ie=o[0].match(Jn))==null?void 0:ie.groups,a!=null){const s=Number(le((a==null?void 0:a.color1_bgr_blue)??"0")),d=Number(le((a==null?void 0:a.color1_bgr_green)??"0")),J=Number(le((a==null?void 0:a.color1_bgr_red)??"0")),oe={name:g.color1,blue:s,green:d,red:J};return c(t,oe,o[0].length)}if(a=(be=o[0].match(Zn))==null?void 0:be.groups,a!=null){const s=Number(le((a==null?void 0:a.color2_bgr_blue)??"0")),d=Number(le((a==null?void 0:a.color2_bgr_green)??"0")),J=Number(le((a==null?void 0:a.color2_bgr_red)??"0")),oe={name:g.color2,blue:s,green:d,red:J};return c(t,oe,o[0].length)}if(a=(De=o[0].match(Qn))==null?void 0:De.groups,a!=null){const s=Number(le((a==null?void 0:a.color3_bgr_blue)??"0")),d=Number(le((a==null?void 0:a.color3_bgr_green)??"0")),J=Number(le((a==null?void 0:a.color3_bgr_red)??"0")),oe={name:g.color3,blue:s,green:d,red:J};return c(t,oe,o[0].length)}if(a=($e=o[0].match(er))==null?void 0:$e.groups,a!=null){const s=Number(le((a==null?void 0:a.color4_bgr_blue)??"0")),d=Number(le((a==null?void 0:a.color4_bgr_green)??"0")),J=Number(le((a==null?void 0:a.color4_bgr_red)??"0")),oe={name:g.color4,blue:s,green:d,red:J};return c(t,oe,o[0].length)}if(a=(Ae=o[0].match(tr))==null?void 0:Ae.groups,a!=null){const s=a.alpha1_value??"",d={name:g.alpha1,value:s};return c(t,d,o[0].length)}if(a=(Fe=o[0].match(nr))==null?void 0:Fe.groups,a!=null){const s=a.alpha2_value??"",d={name:g.alpha2,value:s};return c(t,d,o[0].length)}if(a=(ta=o[0].match(rr))==null?void 0:ta.groups,a!=null){const s=a.alpha3_value??"",d={name:g.alpha3,value:s};return c(t,d,o[0].length)}if(a=(Ye=o[0].match(or))==null?void 0:Ye.groups,a!=null){const s=a.alpha4_value??"",d={name:g.alpha4,value:s};return c(t,d,o[0].length)}if(a=(He=o[0].match(lr))==null?void 0:He.groups,a!=null){const s=Number((a==null?void 0:a.k_lower_case_value)??"0"),d={name:g.kLowerCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(qe=o[0].match(sr))==null?void 0:qe.groups,a!=null){const s=Number((a==null?void 0:a.k_upper_case_value)??"0"),d={name:g.kUpperCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(na=o[0].match(cr))==null?void 0:na.groups,a!=null){const s=Number((a==null?void 0:a.q_value)??"0"),d={name:g.q,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(We=o[0].match(dr))==null?void 0:We.groups,a!=null){const s=Number((a==null?void 0:a.s_value)??"0"),d={name:g.s,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Je=o[0].match(fr))==null?void 0:Je.groups,a!=null){const s=Number((a==null?void 0:a.u_value)??"0"),d={name:g.u,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(u=o[0].match(vr))==null?void 0:u.groups,a!=null){const s=(a==null?void 0:a.r_value)??"",d={name:g.r,style:s};return c(t,d,o[0].length)}if(a=(he=o[0].match(br))==null?void 0:he.groups,a!=null){const s=Number((a==null?void 0:a.p_value)??"0"),d={name:g.p,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(L=o[0].match(Pr))==null?void 0:L.groups,a!=null){const s=Number((a==null?void 0:a.i_value)??"0"),d={name:g.i,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(R=o[0].match(Wn))==null?void 0:R.groups,a!=null){const s=Number(le((a==null?void 0:a.color_bgr_blue)??"0")),d=Number(le((a==null?void 0:a.color_bgr_green)??"0")),J=Number(le((a==null?void 0:a.color_bgr_red)??"0")),oe={name:g.color,blue:s,green:d,red:J};return c(t,oe,o[0].length)}if(a=(G=o[0].match(mr))==null?void 0:G.groups,a!=null){const s=Number((a==null?void 0:a.b_value)??"0"),d={name:g.b,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(q=o[0].match(Yn))==null?void 0:q.groups,a!=null){const s=Number((a==null?void 0:a.a_value)??"0"),d={name:g.a,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}const p=o[0],b={name:g.unknown,value:p};return c(t,b,o[0].length)}function No(e,t,n,r){var i;if(n.startsWith(g.t)){const o=(i=r[0].match(an))==null?void 0:i.groups,c=(o==null?void 0:o.tags)??"",a=[];ca(c,a);const p=o!=null&&o.arg1?Number(o.arg1):null,b=o!=null&&o.arg2?Number(o.arg2):null,h=o!=null&&o.arg3?Number(o.arg3):null,C={name:g.t,accel:null,t1:null,t2:null,tags:a};p!==null&&b!==null&&h!==null?(C.t1=p,C.t2=b,C.accel=h):p!==null&&b!==null&&h===null?(C.t1=p,C.t2=b,C.accel=null):p!==null&&(C.accel=p),t.push(C)}return e=e.substring(r[0].length),e.length>0&&ca(e,t),t}function ge(e){var r,i,o;const t=[],n=e.matchAll(Gn);for(const c of n){if((r=c.groups)!=null&&r.fx){const a=c.groups.fx.substring(1,c.groups.fx.length-1),p=[];ca(a,p),t.push({name:"effect",tags:p});continue}if((i=c.groups)!=null&&i.txt){t.push({name:"text",value:(o=c.groups)==null?void 0:o.txt});continue}}return t}function tn(e){let t="";for(const n of e.tags)switch(n.name){case g.t:{const r={name:"effect",tags:n.tags},i=tn(r);n.t1!==null&&n.t2!==null&&n.accel!==null?t+=`\\t(${n.t1},${n.t2},${n.accel},${i})`:n.t1!==null&&n.t2!==null&&n.accel===null?t+=`\\t(${n.t1},${n.t2},${i})`:n.accel!==null?t+=`\\t(${n.accel},${i})`:t+=`\\t(${i})`;break}case g.pos:case g.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case g.move:t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null&&(t+=`,${n.t1},${n.t2}`),t+=")";break;case g.clip:case g.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case g.fad:t+=`\\fad(${n.in},${n.out})`;break;case g.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case g.fe:t+=`\\fe${n.encodingId}`;break;case g.fn:t+=`\\fn${n.font}`;break;case g.r:t+=`\\r${n.style}`;break;case g.color:case g.color1:case g.color2:case g.color3:case g.color4:{const r=da(n.blue),i=da(n.green),o=da(n.red);t+=`\\${n.name}&H${r}${i}${o}&`;break}case g.text:case g.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function me(e){let t="";for(const n of e){if(n.name=="text"){t+=n.value;continue}t+="{"+tn(n)+"}"}return t}function ja(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(r.name!="effect")continue;const i=e[n+1];if(i.name!="effect"){n++;continue}if(i==null)break;r.tags.push(...i.tags),t.push(n+1)}for(const n of t)e.splice(n,1)}function oa(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.pos,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function Eo(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.move,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function $o(e,t,n,r){const i={name:g.color,blue:t,green:n,red:r},[o,c]=Re(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function So(e,t,n,r){const i={name:g.color1,blue:t,green:n,red:r},[o,c]=Re(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Co(e,t,n,r){const i={name:g.color2,blue:t,green:n,red:r},[o,c]=Re(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function wo(e,t,n,r){const i={name:g.color3,blue:t,green:n,red:r},[o,c]=Re(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Fo(e,t,n,r){const i={name:g.color4,blue:t,green:n,red:r},[o,c]=Re(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Lo(e,t){const n={name:g.alpha,value:t},[r,i]=Re(e,n.name,n);return r||(i.value=t),i}function Ro(e,t){const n={name:g.alpha1,value:t},[r,i]=Re(e,n.name,n);return r||(i.value=t),i}function Do(e,t){const n={name:g.alpha2,value:t},[r,i]=Re(e,n.name,n);return r||(i.value=t),i}function To(e,t){const n={name:g.alpha3,value:t},[r,i]=Re(e,n.name,n);return r||(i.value=t),i}function Io(e,t){const n={name:g.alpha4,value:t},[r,i]=Re(e,n.name,n);return r||(i.value=t),i}function Vo(e,t,n){const r={name:g.pos,x:t,y:n},[i,o]=Re(e,r.name,r);return i||(o.x=t,o.y=n),o}function Po(e,t,n,r,i,o=null,c=null){const a={name:g.move,x1:t,y1:n,x2:r,y2:i,t1:o,t2:c},[p,b]=Re(e,a.name,a);return p||(b.x1=t,b.y1=n,b.x2=r,b.y2=i,b.t1=o,b.t2=c),b}function Re(e,t,n){const r=e.find(o=>o.name=="effect");if((r==null?void 0:r.name)!="effect")return e.unshift({name:"effect",tags:[n]}),[!0,n];const i=r.tags.find(o=>o.name==t);return(i==null?void 0:i.name)!=t?(r.tags.push(n),[!0,n]):[!1,i]}function Ho(e,t){const n=e.find(i=>i.name=="effect");if((n==null?void 0:n.name)!="effect")return;const r=n.tags.findIndex(i=>i.name===t);r<0||n.tags.splice(r,1)}function Ge(e){const t=e.match(Kn);if(t==null)return null;const n=t.groups,r=Oa((n==null?void 0:n.start)??"");if(r==null)return null;const i=Oa((n==null?void 0:n.end)??"");return i==null?null:{type:(n==null?void 0:n.type)??"",layer:Number((n==null?void 0:n.layer)??"0"),start:r,end:i,style:(n==null?void 0:n.style)??"",actor:(n==null?void 0:n.actor)??"",marginLeft:Number((n==null?void 0:n.marginLeft)??"0"),marginRight:Number((n==null?void 0:n.marginRight)??"0"),marginVertical:Number((n==null?void 0:n.marginVertical)??"0"),effect:(n==null?void 0:n.effect)??"",content:(n==null?void 0:n.content)??""}}function xe(e){let t=e.type;return t+=": ",t+=Math.floor(e.layer),t+=",",t+=za(e.start),t+=",",t+=za(e.end),t+=",",t+=e.style,t+=",",t+=e.actor,t+=",",t+=Math.floor(e.marginLeft),t+=",",t+=Math.floor(e.marginRight),t+=",",t+=Math.floor(e.marginVertical),t+=",",t+=e.effect,t+=",",t+=e.content,t}function Mo(e){return pa(e.end)-pa(e.start)}function Me(e){const t=e.match(qn);if(t==null)return null;const n=t.groups;return{blue:le((n==null?void 0:n.color_bgr_blue)??""),green:le((n==null?void 0:n.color_bgr_green)??""),red:le((n==null?void 0:n.color_bgr_red)??"")}}var Bo=(e,t)=>t(),Oo=(e,t)=>t(),zo=()=>{},Go=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function jo(e,t){Ve(t,!0);const n=ue.copiarMovimiento;let r=N("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),i=N(""),o=N("");function c(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const w=l(i).split(`
`);console.log(w);const M=Ge(l(r));if(M==null){console.error("invalid base line",l(r));return}const j=ge(M.content),Q=Eo(j);if(Q==null){console.error("base move not found");return}const H=Q.x2-Q.x1,Z=Q.y2-Q.y1;let ee="";for(let U=0;U<w.length;U++){const V=w[U];if(V.length==0)continue;const X=Ge(V);if(X==null){console.error(`line ${U+1}: invalid line`);break}const re=ge(X.content),ne=oa(re);if(ne==null){console.error(`line ${U+1}: pos not found`);break}Ho(re,g.pos);const de=ne.x,fe=ne.y,ce=ne.x+H,Y=ne.y+Z;Po(re,de,fe,ce,Y,Q.t1,Q.t2);const ie=me(re);X.content=ie;const be=xe(X);console.log(be),U>0&&(ee+=`
`),ee+=be}v(o,$(ee))}async function a(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{for(let w=1;w<=10;w++){const M=182+w*5,j=421+w*7;v(i,l(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${M},${j})}LINEA ${w}
`)}});var p=Go();Ke(w=>{Xe.title=n});var b=y(p);b.textContent=n;var h=A(b,2),C=A(y(h),2),m=y(C);aa(m),x(C),x(h);var E=A(h,2),_=y(E),B=y(_,!0);x(_);var O=A(_,2),F=y(O);Ce(F),x(O),x(E);var T=A(E,2);T.__click=[Bo,c];var z=y(T,!0);x(T);var k=A(T,2),S=y(k),I=y(S),ae=A(I);ae.__click=[Oo,a],ae.__keydown=[zo],x(S);var W=A(S,2),te=y(W);Ce(te),x(W),x(k),x(p),Ee(()=>{pe(B,ue.subtitulos),pe(z,ue.copiarMovimiento),pe(I,`${ue.resultado} `)}),ke(m,()=>l(r),w=>v(r,w)),ke(F,()=>l(i),w=>v(i,w)),ke(te,()=>l(o),w=>v(o,w)),se(e,p),Pe()}Ue(["click","keydown"]);var Uo=ye(`<div class="text-column"><h1></h1> <div class="kagamin svelte-i9q0t3"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-i9q0t3"></div> <p class="mt-2">Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- [GX] Gonxas: hardcore testing y script para crear AVS.</li> <li>- [Sr] Hell: servicio de host.</li> <li>- [EC] DarkAngel: idea para separar sílabas en karaokes.</li></ul> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <p class="mt-2">Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Ko(e,t){Ve(t,!1);const n=ue.acercaDe;Fn();var r=Uo();Ke(o=>{Xe.title=n});var i=y(r);i.textContent=n,ba(16),x(r),se(e,r),Pe()}var Xo=ye('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Yo(e){var t=Xo();Ke(n=>{Xe.title="Asu"}),se(e,t)}var qo=(e,t)=>t(),Wo=ye("<b> </b>"),Jo=ye('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function ze(e,t){Ve(t,!0);let n=ra(t,"label",3,""),r=ra(t,"disabled",15,!1),i=ra(t,"startValue",15,""),o=ra(t,"endValue",15,""),c=ra(t,"startPlaceholder",3,""),a=ra(t,"endPlaceholder",3,""),p=N(void 0);function b(){var w;if((w=l(p))!=null&&w.checked){h();return}C()}function h(){r()&&(r(!1),l(p)&&(l(p).checked=!0),t.onEnabled&&t.onEnabled())}function C(){r()||(r(!0),l(p)&&(l(p).checked=!1),t.onDisabled&&t.onDisabled())}Qe(()=>{l(p)&&(l(p).checked=!r())});var m=Jo(),E=y(m),_=y(E),B=y(_);B.__change=[qo,b],Le(B,w=>v(p,w),()=>l(p));var O=A(B,2);{var F=w=>{var M=on();Ee(()=>pe(M,`${n()??""}
                (deshabilitado)`)),se(w,M)},T=w=>{var M=Wo(),j=y(M,!0);x(M),Ee(()=>pe(j,n())),se(w,M)};Te(O,w=>{r()?w(F):w(T,!1)})}x(_),x(E);var z=A(E,2),k=y(z),S=A(y(k),2),I=y(S);aa(I),x(S),x(k);var ae=A(k,2),W=A(y(ae),2),te=y(W);return aa(te),x(W),x(ae),x(z),x(m),Ee(()=>{ua(I,"placeholder",c()),I.disabled=r(),ua(te,"placeholder",a()),te.disabled=r()}),ke(I,i),ke(te,o),se(e,m),Pe({enable:h,disable:C})}Ue(["change"]);function sa(e,t){const n=[];for(let r=e;r<=t;r++){const i=da(r);n.push(i)}return n}function ia(e,t,n){const r=Array(n),i=Na(e.blue,t.blue,n);if(i.length!==n)return console.error(`ERROR: blue interpolated values ${i.length} don't match intervals ${n}`),[];const o=Na(e.green,t.green,n);if(o.length!==n)return console.error(`ERROR: green interpolated values ${o.length} don't match intervals ${n}`),[];const c=Na(e.red,t.red,n);if(c.length!==n)return console.error(`ERROR: red interpolated values ${c.length} don't match intervals ${n}`),[];for(var a=0;a<n;a++){const p=Math.floor(i[a]),b=Math.floor(o[a]),h=Math.floor(c[a]);r[a]={blue:p,green:b,red:h}}return r}var Zo=(e,t)=>t(),Qo=()=>{},el=ye('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function nn(e,t){Ve(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ue.lineasCopiadas)}var r=el();r.__click=[Zo,n],r.__keydown=[Qo],Ee(()=>ua(r,"title",ue.copiar)),se(e,r),Pe()}Ue(["click","keydown"]);var al=(e,t)=>t(),tl=ye('<section class="svelte-do1mnp"><h1 class="title is-5"></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function nl(e,t){Ve(t,!0);const n=ue.aplicarAlpha,r="0",i="FF";let o=N(""),c=N(""),a=N("0"),p=N("FF"),b=N("0"),h=N("FF"),C=N("0"),m=N("FF"),E=N("0"),_=N("FF"),B=N("0"),O=N("FF"),F=N(!1),T=N(!0),z=N(!0),k=N(!0),S=N(!0),I=N(void 0),ae=N(void 0),W=N(void 0),te=N(void 0),w=N(void 0),M=N(!1);function j(){var u,he,L,R;(u=l(ae))==null||u.disable(),(he=l(W))==null||he.disable(),(L=l(te))==null||L.disable(),(R=l(w))==null||R.disable()}function Q(){var u,he,L,R;l(T)&&l(z)&&l(k)&&l(S)&&((u=l(ae))==null||u.enable(),(he=l(W))==null||he.disable(),(L=l(te))==null||L.disable(),(R=l(w))==null||R.disable())}function H(){var u;(u=l(I))==null||u.disable()}function Z(){var u;l(T)&&l(z)&&l(k)&&l(S)&&((u=l(I))==null||u.enable())}function ee(){const u=[],he=l(o).split(`
`);for(const L of he){if(L.length==0)continue;const R=Ge(L);R!=null&&u.push(R)}if(!l(F)){const L=le(l(a)),R=le(l(p));if(L>=R){alert("El inicio de alpha total debe ser menor al fin.");return}if(L<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(R>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const G=sa(L,R);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){let d=Math.floor(G.length*s/u.length);d>=G.length&&(d=G.length-1);const oe=`&H${G[d]}&`,_e=ge(u[s].content);Lo(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(q+=`
`),q+=Se}v(c,$(q));return}if(!l(T)){const L=le(l(b)),R=le(l(h));if(L>=R){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(L<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(R>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const G=sa(L,R);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){let d=Math.floor(G.length*s/u.length);d>=G.length&&(d=G.length-1);const oe=`&H${G[d]}&`,_e=ge(u[s].content);Ro(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(q+=`
`),q+=Se}v(c,$(q))}if(!l(z)){const L=le(l(C)),R=le(l(m));if(L>=R){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(L<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(R>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const G=sa(L,R);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){let d=Math.floor(G.length*s/u.length);d>=G.length&&(d=G.length-1);const oe=`&H${G[d]}&`,_e=ge(u[s].content);Do(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(q+=`
`),q+=Se}v(c,$(q))}if(!l(k)){const L=le(l(E)),R=le(l(_));if(L>=R){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(L<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(R>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const G=sa(L,R);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){let d=Math.floor(G.length*s/u.length);d>=G.length&&(d=G.length-1);const oe=`&H${G[d]}&`,_e=ge(u[s].content);To(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(q+=`
`),q+=Se}v(c,$(q))}if(!l(S)){const L=le(l(B)),R=le(l(O));if(L>=R){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(L<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(R>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const G=sa(L,R);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){let d=Math.floor(G.length*s/u.length);d>=G.length&&(d=G.length-1);const oe=`&H${G[d]}&`,_e=ge(u[s].content);Io(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(q+=`
`),q+=Se}v(c,$(q))}}Qe(()=>{for(let u=1;u<=10;u++)v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${u}
`)});var U=tl();Ke(u=>{Xe.title=n});var V=y(U);V.textContent=n;var X=A(V,4);Le(ze(X,{label:"Alpha total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>j(),onDisabled:()=>Q(),get startValue(){return l(a)},set startValue(u){v(a,$(u))},get endValue(){return l(p)},set endValue(u){v(p,$(u))},get disabled(){return l(F)},set disabled(u){v(F,$(u))}}),u=>v(I,$(u)),()=>l(I));var re=A(X,2);Le(ze(re,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(b)},set startValue(u){v(b,$(u))},get endValue(){return l(h)},set endValue(u){v(h,$(u))},get disabled(){return l(T)},set disabled(u){v(T,$(u))}}),u=>v(ae,$(u)),()=>l(ae));var ne=A(re,2);Le(ze(ne,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(C)},set startValue(u){v(C,$(u))},get endValue(){return l(m)},set endValue(u){v(m,$(u))},get disabled(){return l(z)},set disabled(u){v(z,$(u))}}),u=>v(W,$(u)),()=>l(W));var de=A(ne,2);Le(ze(de,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(E)},set startValue(u){v(E,$(u))},get endValue(){return l(_)},set endValue(u){v(_,$(u))},get disabled(){return l(k)},set disabled(u){v(k,$(u))}}),u=>v(te,$(u)),()=>l(te));var fe=A(de,2);Le(ze(fe,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(B)},set startValue(u){v(B,$(u))},get endValue(){return l(O)},set endValue(u){v(O,$(u))},get disabled(){return l(S)},set disabled(u){v(S,$(u))}}),u=>v(w,$(u)),()=>l(w));var ce=A(fe,2),Y=y(ce);aa(Y),ba(),x(ce);var ie=A(ce,2),be=y(ie),De=y(be,!0);x(be);var $e=A(be,2),Ae=y($e);Ce(Ae),x($e),x(ie);var Fe=A(ie,2);Fe.__click=[al,ee];var ta=y(Fe,!0);x(Fe);var Ye=A(Fe,2),He=y(Ye),qe=y(He),na=A(qe);nn(na,{get rawResultLines(){return l(c)}}),x(He);var We=A(He,2),Je=y(We);Ce(Je),x(We),x(Ye),x(U),Ee(()=>{pe(De,ue.subtitulos),pe(ta,ue.aplicarAlpha),pe(qe,`${ue.resultado} `)}),La(Y,()=>l(M),u=>v(M,u)),ke(Ae,()=>l(o),u=>v(o,u)),ke(Je,()=>l(c),u=>v(c,u)),se(e,U),Pe()}Ue(["click"]);var rl=(e,t)=>t(),ol=ye('<section class="svelte-do1mnp"><h1 class="title is-5"></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ll(e,t){Ve(t,!0);const n=ue.aplicarColor,r="&HFFFFFF&",i="&H000000&";let o=N(""),c=N(""),a=N(r),p=N(i),b=N(r),h=N(i),C=N(r),m=N(i),E=N(r),_=N(i),B=N(r),O=N(i),F=N(!1),T=N(!0),z=N(!0),k=N(!0),S=N(!0),I=N(void 0),ae=N(void 0),W=N(void 0),te=N(void 0),w=N(void 0),M=N(!1);function j(){var u,he,L,R;(u=l(ae))==null||u.disable(),(he=l(W))==null||he.disable(),(L=l(te))==null||L.disable(),(R=l(w))==null||R.disable()}function Q(){var u,he,L,R;l(T)&&l(z)&&l(k)&&l(S)&&((u=l(ae))==null||u.enable(),(he=l(W))==null||he.disable(),(L=l(te))==null||L.disable(),(R=l(w))==null||R.disable())}function H(){var u;(u=l(I))==null||u.disable()}function Z(){var u;l(T)&&l(z)&&l(k)&&l(S)&&((u=l(I))==null||u.enable())}function ee(){const u=[],he=l(o).split(`
`);for(const L of he){if(L.length==0)continue;const R=Ge(L);R!=null&&u.push(R)}if(!l(F)){const L=Me(l(a));if(L==null){alert(`Color total de inicio inválido: ${l(a)}`);return}const R=Me(l(p));if(R==null){alert(`Color total de fin inválido: ${l(p)}`);return}const G=ia(L,R,u.length);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){const d=G[s],J=ge(u[s].content);$o(J,d.blue,d.green,d.red),u[s].content=me(J);const oe=xe(u[s]);s>0&&(q+=`
`),q+=oe}v(c,$(q));return}if(!l(T)){const L=Me(l(b));if(L==null){alert(`Color 1 de inicio inválido: ${l(b)}`);return}const R=Me(l(h));if(R==null){alert(`Color 1 de fin inválido: ${l(h)}`);return}const G=ia(L,R,u.length);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){const d=G[s],J=ge(u[s].content);So(J,d.blue,d.green,d.red),u[s].content=me(J);const oe=xe(u[s]);s>0&&(q+=`
`),q+=oe}v(c,$(q))}if(!l(z)){const L=Me(l(C));if(L==null){alert(`Color 2 de inicio inválido: ${l(C)}`);return}const R=Me(l(m));if(R==null){alert(`Color 2 de fin inválido: ${l(m)}`);return}const G=ia(L,R,u.length);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){const d=G[s],J=ge(u[s].content);Co(J,d.blue,d.green,d.red),u[s].content=me(J);const oe=xe(u[s]);s>0&&(q+=`
`),q+=oe}v(c,$(q))}if(!l(k)){const L=Me(l(E));if(L==null){alert(`Color 3 de inicio inválido: ${l(E)}`);return}const R=Me(l(_));if(R==null){alert(`Color 3 de fin inválido: ${l(_)}`);return}const G=ia(L,R,u.length);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){const d=G[s],J=ge(u[s].content);wo(J,d.blue,d.green,d.red),u[s].content=me(J);const oe=xe(u[s]);s>0&&(q+=`
`),q+=oe}v(c,$(q))}if(!l(S)){const L=Me(l(B));if(L==null){alert(`Color 4 de inicio inválido: ${l(B)}`);return}const R=Me(l(O));if(R==null){alert(`Color 4 de fin inválido: ${l(O)}`);return}const G=ia(L,R,u.length);l(M)&&G.reverse();let q="";for(let s=0;s<u.length;s++){const d=G[s],J=ge(u[s].content);Fo(J,d.blue,d.green,d.red),u[s].content=me(J);const oe=xe(u[s]);s>0&&(q+=`
`),q+=oe}v(c,$(q))}}Qe(()=>{v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var U=ol();Ke(u=>{Xe.title=n});var V=y(U);V.textContent=n;var X=A(V,4);Le(ze(X,{label:"Color total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>j(),onDisabled:()=>Q(),get startValue(){return l(a)},set startValue(u){v(a,$(u))},get endValue(){return l(p)},set endValue(u){v(p,$(u))},get disabled(){return l(F)},set disabled(u){v(F,$(u))}}),u=>v(I,$(u)),()=>l(I));var re=A(X,2);Le(ze(re,{label:"Color 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(b)},set startValue(u){v(b,$(u))},get endValue(){return l(h)},set endValue(u){v(h,$(u))},get disabled(){return l(T)},set disabled(u){v(T,$(u))}}),u=>v(ae,$(u)),()=>l(ae));var ne=A(re,2);Le(ze(ne,{label:"Color 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(C)},set startValue(u){v(C,$(u))},get endValue(){return l(m)},set endValue(u){v(m,$(u))},get disabled(){return l(z)},set disabled(u){v(z,$(u))}}),u=>v(W,$(u)),()=>l(W));var de=A(ne,2);Le(ze(de,{label:"Color 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(E)},set startValue(u){v(E,$(u))},get endValue(){return l(_)},set endValue(u){v(_,$(u))},get disabled(){return l(k)},set disabled(u){v(k,$(u))}}),u=>v(te,$(u)),()=>l(te));var fe=A(de,2);Le(ze(fe,{label:"Color 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>H(),onDisabled:()=>Z(),get startValue(){return l(B)},set startValue(u){v(B,$(u))},get endValue(){return l(O)},set endValue(u){v(O,$(u))},get disabled(){return l(S)},set disabled(u){v(S,$(u))}}),u=>v(w,$(u)),()=>l(w));var ce=A(fe,2),Y=y(ce);aa(Y),ba(),x(ce);var ie=A(ce,2),be=y(ie),De=y(be,!0);x(be);var $e=A(be,2),Ae=y($e);Ce(Ae),x($e),x(ie);var Fe=A(ie,2);Fe.__click=[rl,ee];var ta=y(Fe,!0);x(Fe);var Ye=A(Fe,2),He=y(Ye),qe=y(He),na=A(qe);nn(na,{get rawResultLines(){return l(c)}}),x(He);var We=A(He,2),Je=y(We);Ce(Je),x(We),x(Ye),x(U),Ee(()=>{pe(De,ue.subtitulos),pe(ta,ue.aplicarColor),pe(qe,`${ue.resultado} `)}),La(Y,()=>l(M),u=>v(M,u)),ke(Ae,()=>l(o),u=>v(o,u)),ke(Je,()=>l(c),u=>v(c,u)),se(e,U),Pe()}Ue(["click"]);var sl=(e,t)=>t(),il=(e,t)=>t(),ul=()=>{},cl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function dl(e,t){Ve(t,!0);const n=ue.aplicarSecuenciaPosiciones;let r=N(""),i=N(""),o=N(""),c=N(!1);function a(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const H=[];{const U=l(r).split(`
`);for(const V of U){if(V.length==0)continue;const X=Ge(V);if(X==null)continue;const re=ge(X.content);if(oa(re)==null){alert(`Línea base sin \\pos copiada: '${V}'`),console.log(V);return}H.push(X)}}const Z=[];{const U=l(i).split(`
`);for(const V of U){if(V.length==0)continue;const X=Ge(V);if(X==null)continue;const re=ge(X.content);if(oa(re)==null){alert(`Línea objetivo sin \\pos: '${V}'`),console.log(V);return}Z.push(X)}}let ee="";for(let U=0;U<Z.length;U++){const V=Z[U],X=ge(V.content),re=oa(X);if(re==null){const Y=xe(V);alert(`Línea objetivo sin \\pos: '${Y}'`),console.log(Y);return}let ne=re.x,de=re.y;l(c)&&H.reverse();const fe=p(H),ce=[];for(let Y=0;Y<H.length;Y++){const ie=fe[Y][0],be=fe[Y][1],De=ne+ie,$e=de+be;ne=De,de=$e,Vo(X,De,$e),V.content=me(X);const Ae=H[Y];V.start=Ae.start,V.end=Ae.end,ce.push(structuredClone(V))}l(c)&&(H.reverse(),ce.reverse());for(const Y of ce)ee+=xe(Y)+`
`}v(o,$(ee))}function p(H){const ee=[[0,0]];for(let U=0;U<H.length-1;U++){const V=H[U],X=H[U+1],re=ge(V.content),ne=oa(re);if(ne==null)return alert(`Línea base sin \\pos: '${xe(V)}'`),console.log(V),[];const de=ge(X.content),fe=oa(de);if(fe==null)return alert(`Línea base sin \\pos: '${xe(X)}'`),console.log(X),[];const ce=fe.x-ne.x,Y=fe.y-ne.y;ee.push([ce,Y])}return ee}async function b(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),v(r,l(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),v(i,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var h=cl();Ke(H=>{Xe.title=n});var C=y(h);C.textContent=n;var m=A(C,2),E=A(y(m),2),_=y(E);Ce(_),x(E),x(m);var B=A(m,2),O=y(B);aa(O),ba(),x(B);var F=A(B,2),T=y(F),z=y(T,!0);x(T);var k=A(T,2),S=y(k);Ce(S),x(k),x(F);var I=A(F,2);I.__click=[sl,a];var ae=y(I,!0);x(I);var W=A(I,2),te=y(W),w=y(te),M=A(w);M.__click=[il,b],M.__keydown=[ul],x(te);var j=A(te,2),Q=y(j);Ce(Q),x(j),x(W),x(h),Ee(()=>{pe(z,ue.subtitulos),pe(ae,ue.aplicarSecuenciaPosiciones),pe(w,`${ue.resultado} `)}),ke(_,()=>l(r),H=>v(r,H)),La(O,()=>l(c),H=>v(c,H)),ke(S,()=>l(i),H=>v(i,H)),ke(Q,()=>l(o),H=>v(o,H)),se(e,h),Pe()}Ue(["click","keydown"]);var fl=(e,t)=>t(),vl=(e,t)=>t(),pl=()=>{},gl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function bl(e,t){Ve(t,!0);const n=ue.dividirSilabas;let r=N(""),i=N("");function o(){if(l(r).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const I=l(r).split(`
`);let ae="";for(let W=0;W<I.length;W++){const te=I[W];if(te.length==0)continue;const w=Ge(te);if(w==null){console.error(`line ${W+1}: invalid line`);break}ko(w);const M=xe(w);W>0&&(ae+=`
`),ae+=M}v(i,$(ae))}async function c(){await navigator.clipboard.writeText(l(i)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),v(r,l(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),v(r,l(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`)});var a=gl();Ke(I=>{Xe.title=n});var p=y(a);p.textContent=n;var b=A(p,2),h=y(b),C=y(h);x(h);var m=A(h,2),E=y(m);Ce(E),x(m),x(b);var _=A(b,2);_.__click=[fl,o];var B=y(_,!0);x(_);var O=A(_,2),F=y(O),T=y(F),z=A(T);z.__click=[vl,c],z.__keydown=[pl],x(F);var k=A(F,2),S=y(k);Ce(S),x(k),x(O),x(a),Ee(()=>{pe(C,`${ue.subtitulos} (romaji)`),pe(B,ue.dividirSilabas),pe(T,`${ue.resultado} `)}),ke(E,()=>l(r),I=>v(r,I)),ke(S,()=>l(i),I=>v(i,I)),se(e,a),Pe()}Ue(["click","keydown"]);var hl=(e,t)=>t(),_l=ye("<button> </button>"),ml=ye('<p class="preview"> <b> </b></p>'),xl=(e,t)=>t(),yl=()=>{},kl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <button class="button is-link is-fullwidth">Actualizar karaoke</button> <div class="mb-2"><label class="label" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Al(e,t){Ve(t,!0);const n=ue.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let i=N(r),o=N($([])),c=N(""),a=N($([])),p=N(0);function b(){const j=Ge(l(i));if(j==null)return;const Q=ge(j.content);ja(Q);const H=0;let Z=l(a)[l(p)].index+1,ee=0;for(let Y=0;Y<=l(p);Y++){const ie=l(a)[Y];ie.centiseconds!=null&&(ee+=ie.centiseconds)}const U=pa(j.start),V=pa(j.end),X=Q.slice(H,Z);j.content=me(X);const re=ee/100;j.end=Ea(U+re),v(c,$(xe(j)));let ne=!0,de=0;for(;ne;){const Y=Q[Z+1];if((Y==null?void 0:Y.name)!="text"){ne=!1;break}if(ne=Y.value.replaceAll(" ","").length===0,ne&&(Z+=2,de++),de>l(a).length)break}let fe=0;for(let Y=l(p)+1+de;Y<l(a).length;Y++){const ie=l(a)[Y];ie.centiseconds!=null&&(fe+=ie.centiseconds)}const ce=Q.slice(Z);j.end=Ea(V),j.start=Ea(V-fe/100),j.content=me(ce),v(c,l(c)+(`
`+xe(j))),v(o,$([me(X.filter(Y=>Y.name=="text")),me(ce.filter(Y=>Y.name=="text"))]))}async function h(){await navigator.clipboard.writeText(l(c)),alert("¡Líneas copiadas al portapapeles!")}function C(){v(a,$([]));const j=Ge(l(i));if(j==null)return[];const Q=ge(j.content);ja(Q);for(let H=0;H<Q.length;H++){const Z=Q[H];if(Z.name!="text")continue;l(a).push({index:H,text:Z.value.replaceAll(" ",""),centiseconds:null});const ee=H-1;if(ee<0)continue;const U=Q[ee];if(U.name!="effect")continue;const V=U.tags.find(re=>re.name===g.kLowerCase||re.name===g.kUpperCase||re.name===g.kf||re.name===g.ko);V==null||!(V.name===g.kLowerCase||V.name===g.kUpperCase||V.name===g.kf||V.name===g.ko)||(l(a)[l(a).length-1].centiseconds=V.value)}return v(p,$(Math.floor(l(a).length/2))),l(a)}Qe(()=>{C(),b()});var m=kl();Ke(j=>{Xe.title=n});var E=y(m);E.textContent=n;var _=A(E,2),B=A(y(_),2),O=y(B);aa(O),ua(O,"placeholder",r),x(B),x(_);var F=A(_,2);F.__click=[hl,C];var T=A(F,2),z=A(y(T),2);va(z,21,()=>l(a),fa,(j,Q,H)=>{var Z=Be(),ee=Oe(Z);{var U=V=>{var X=_l();X.__click=()=>{v(p,$(H)),b()};var re=y(X,!0);x(X),Ee(()=>{Za(X,`button ${(H===l(p)?"is-link":"")??""}`),ua(X,"title",`${l(Q).text}: ${l(Q).centiseconds} centésimas`),pe(re,l(Q).text)}),se(V,X)};Te(ee,V=>{l(Q).text.replaceAll(" ","").length>0&&V(U)})}se(j,Z)}),x(z),x(T);var k=A(T,2),S=A(y(k),2);va(S,17,()=>l(o),fa,(j,Q,H)=>{var Z=ml(),ee=y(Z);ee.nodeValue=`Línea ${H+1}: `;var U=A(ee),V=y(U,!0);x(U),x(Z),Ee(()=>pe(V,l(Q))),se(j,Z)}),x(k);var I=A(k,2),ae=y(I),W=y(ae),te=A(W);te.__click=[xl,h],te.__keydown=[yl],x(ae);var w=A(ae,2),M=y(w);Ce(M),x(w),x(I),x(m),Ee(()=>pe(W,`${ue.resultado} `)),ke(O,()=>l(i),j=>v(i,j)),ke(M,()=>l(c),j=>v(c,j)),se(e,m),Pe()}Ue(["click","keydown"]);async function Nl(e,t,n,r){var o;const i=[...((o=l(t))==null?void 0:o.files)??[]];v(n,$([]));for(const c of i){const a=await c.text(),p=vo(a);if(p==null){console.error("archivo inválido",c.name);continue}const b=r(p);l(n).push({fileName:c.name,errors:b})}l(t)!=null&&(l(t).value="")}var El=ye('<span class="file-error svelte-h9vvhw"> <textarea class="textarea is-danger svelte-h9vvhw" readonly="" rows="1"></textarea></span>'),$l=ye('<div class="result svelte-h9vvhw"><span> </span> <div class="file-errors svelte-h9vvhw"></div></div>'),Sl=ye('<section class="svelte-h9vvhw"><h1 class="title is-5"></h1> <input type="file" accept=".ass" multiple> <!></section>');function Cl(e,t){Ve(t,!0);const n=ue.validarDialogos;let r=N(void 0),i=N($([]));function o(h){const C=[],m=h.scriptInfo.properties.get("WrapStyle")??"",E="0";m!==E&&C.push({location:"Script info, wrap style",error:`Se esperaba "${E}", pero se encontró "${m}"`,text:m});const _=h.scriptInfo.properties.get("ScaledBorderAndShadow")??"",B="yes";_!==B&&C.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${B}", pero se encontró "${_}"`,text:_});for(let O=0;O<h.events.lines.length;O++){const F=h.events.lines[O],T=O+1;if(F.content==="")continue;h.styles.styles.some(I=>F.style===I.name)||C.push({location:`Línea ${T}`,error:`Estilo "${F.style}" no encontrado`,text:""});const z=ge(F.content),k=me(z.filter(I=>I.name==="text")),S=[".",",","...","!","?",":"];S.some(I=>k.endsWith(I))||C.push({location:`Línea ${T}`,error:`No tiene un fin de línea válido: ${S.map(I=>`"${I}"`).join(", ")}`,text:F.content})}return C}var c=Sl();Ke(h=>{Xe.title=n});var a=y(c);a.textContent=n;var p=A(a,2);p.__change=[Nl,r,i,o],Le(p,h=>v(r,h),()=>l(r));var b=A(p,2);va(b,17,()=>l(i),fa,(h,C)=>{var m=$l(),E=y(m),_=y(E,!0);x(E);var B=A(E,2);va(B,21,()=>l(C).errors,fa,(O,F)=>{var T=El(),z=y(T),k=A(z);Ce(k),x(T),Ee(()=>{pe(z,`${l(F).location??""}: ${l(F).error??""} `),Cn(k,l(F).text)}),se(O,T)}),x(B),x(m),Ee(()=>{Za(E,`name ${(l(C).errors.length==0?"success":"failed")??""} svelte-h9vvhw`),pe(_,l(C).fileName)}),se(h,m)}),x(c),se(e,c),Pe()}Ue(["change"]);function wl(e,t){Ve(t,!0);let n=N("");Qe(()=>{Ha.subscribe(h=>{h!=null&&v(n,$(h))});const p=new URLSearchParams(location.search).get("pagina")??"",b=wn(p)?p:"inicio";Ha.set(b)});var r=Be(),i=Oe(r);{var o=a=>{Yo(a)},c=a=>{var p=Be(),b=Oe(p);{var h=m=>{jo(m,{})},C=m=>{var E=Be(),_=Oe(E);{var B=F=>{dl(F,{})},O=F=>{var T=Be(),z=Oe(T);{var k=I=>{nl(I,{})},S=I=>{var ae=Be(),W=Oe(ae);{var te=M=>{ll(M,{})},w=M=>{var j=Be(),Q=Oe(j);{var H=ee=>{Cl(ee,{})},Z=ee=>{var U=Be(),V=Oe(U);{var X=ne=>{Al(ne,{})},re=ne=>{var de=Be(),fe=Oe(de);{var ce=ie=>{bl(ie,{})},Y=ie=>{var be=Be(),De=Oe(be);{var $e=Ae=>{Ko(Ae,{})};Te(De,Ae=>{l(n)=="acercaDe"&&Ae($e)},!0)}se(ie,be)};Te(fe,ie=>{l(n)=="karaokes.dividirSilabas"?ie(ce):ie(Y,!1)},!0)}se(ne,de)};Te(V,ne=>{l(n)=="karaokes.dividirKaraoke"?ne(X):ne(re,!1)},!0)}se(ee,U)};Te(Q,ee=>{l(n)=="dialogos.validarDialogos"?ee(H):ee(Z,!1)},!0)}se(M,j)};Te(W,M=>{l(n)=="carteles.aplicarColor"?M(te):M(w,!1)},!0)}se(I,ae)};Te(z,I=>{l(n)=="carteles.aplicarAlpha"?I(k):I(S,!1)},!0)}se(F,T)};Te(_,F=>{l(n)=="carteles.aplicarSecuenciaPosiciones"?F(B):F(O,!1)},!0)}se(m,E)};Te(b,m=>{l(n)=="carteles.copiarMovimiento"?m(h):m(C,!1)},!0)}se(a,p)};Te(i,a=>{l(n)=="inicio"?a(o):a(c,!1)})}se(e,r),Pe()}var Fl=ye('<section class="svelte-70scd4"><!></section>');function Ml(e){var t=Fl(),n=y(t);wl(n,{}),x(t),se(e,t)}export{Ml as component,Hl as universal};
