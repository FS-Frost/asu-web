import{d as je,t as de,e as Ke,s as ie,a as ne,b as Wa,c as He}from"../chunks/D2WU8rJl.js";import"../chunks/DMrv3Caa.js";import{ae as Pa,af as Ha,ag as dn,p as $a,M as ka,H as Ue,a4 as fn,aj as vn,I as pn,G as gn,g as o,W as bn,K as hn,L as Ma,N as Aa,R as sa,aq as _n,O as Ya,P as Za,Q as mn,av as Ja,at as Qa,v as xn,Z as yn,j as Ba,aw as Na,y as kn,ax as Fa,ay as An,az as Da,aA as za,aB as Nn,a5 as En,aC as Sn,aD as wn,aE as Cn,ai as $n,aF as Ln,b as et,x as at,w as tt,z as Te,ab as Xe,l as v,ac as N,aG as qe,D as y,F as A,E as m,B as he,C as Ie,aH as pa,A as De,ad as Rn}from"../chunks/Do9vYUIT.js";import{p as ea,i as ke}from"../chunks/C7nfSpJA.js";import{i as Fn,p as w,b as $e}from"../chunks/CZcxkmuL.js";import{c as Dn,z as nt,t as ce,r as ta,d as Le,b as la,s as ga,e as Tn,a as Oa,i as In}from"../chunks/CdgjIzdS.js";import{i as Vn}from"../chunks/CfsJnK_O.js";function Pn(e){var t=dn,n=$a;Pa(null),Ha(null);try{return e()}finally{Pa(t),Ha(n)}}function Ta(e,t,n,l=n){e.addEventListener(t,()=>Pn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),l(!0)}:e.__on_r=()=>l(!0),Dn()}function ca(e,t){return t}function Hn(e,t,n,l){for(var i=[],r=t.length,u=0;u<r;u++)Nn(t[u].e,i,!0);var a=r>0&&i.length===0&&n!==null;if(a){var p=n.parentNode;En(p),p.append(n),l.clear(),Qe(e,t[0].prev,t[r-1].next)}Sn(i,()=>{for(var h=0;h<r;h++){var g=t[h];a||(l.delete(g.k),Qe(e,g.prev,g.next)),wn(g.e,!a)}})}function da(e,t,n,l,i,r=null){var u=e,a={items:new Map,first:null},p=(t&Ja)!==0;if(p){var h=e;u=Ue?ka(fn(h)):h.appendChild(vn())}Ue&&pn();var g=null,S=!1,x=bn(()=>{var L=n();return xn(L)?L:L==null?[]:Qa(L)});gn(()=>{var L=o(x),_=L.length;if(S&&_===0)return;S=_===0;let C=!1;if(Ue){var V=u.data===hn;V!==(_===0)&&(u=Ma(),ka(u),Aa(!1),C=!0)}if(Ue){for(var $=null,D,B=0;B<_;B++){if(sa.nodeType===8&&sa.data===_n){u=sa,C=!0,Aa(!1);break}var E=L[B],T=l(E,B);D=rt(sa,a,$,null,E,T,B,i,t,n),a.items.set(T,D),$=D}_>0&&ka(Ma())}Ue||Mn(L,a,u,i,t,l,n),r!==null&&(_===0?g?Ya(g):g=Za(()=>r(u)):g!==null&&mn(g,()=>{g=null})),C&&Aa(!0),o(x)}),Ue&&(u=sa)}function Mn(e,t,n,l,i,r,u){var F,Z,te,z;var a=(i&An)!==0,p=(i&(Da|Fa))!==0,h=e.length,g=t.items,S=t.first,x=S,L,_=null,C,V=[],$=[],D,B,E,T;if(a)for(T=0;T<h;T+=1)D=e[T],B=r(D,T),E=g.get(B),E!==void 0&&((F=E.a)==null||F.measure(),(C??(C=new Set)).add(E));for(T=0;T<h;T+=1){if(D=e[T],B=r(D,T),E=g.get(B),E===void 0){var K=x?x.e.nodes_start:n;_=rt(K,t,_,_===null?t.first:_.next,D,B,T,l,i,u),g.set(B,_),V=[],$=[],x=_.next;continue}if(p&&Bn(E,D,T,i),E.e.f&Na&&(Ya(E.e),a&&((Z=E.a)==null||Z.unfix(),(C??(C=new Set)).delete(E))),E!==x){if(L!==void 0&&L.has(E)){if(V.length<$.length){var ae=$[0],j;_=ae.prev;var X=V[0],k=V[V.length-1];for(j=0;j<V.length;j+=1)Ga(V[j],ae,n);for(j=0;j<$.length;j+=1)L.delete($[j]);Qe(t,X.prev,k.next),Qe(t,_,X),Qe(t,k,ae),x=ae,_=k,T-=1,V=[],$=[]}else L.delete(E),Ga(E,x,n),Qe(t,E.prev,E.next),Qe(t,E,_===null?t.first:_.next),Qe(t,_,E),_=E;continue}for(V=[],$=[];x!==null&&x.k!==B;)x.e.f&Na||(L??(L=new Set)).add(x),$.push(x),x=x.next;if(x===null)continue;E=x}V.push(E),_=E,x=E.next}if(x!==null||L!==void 0){for(var R=L===void 0?[]:Qa(L);x!==null;)x.e.f&Na||R.push(x),x=x.next;var O=R.length;if(O>0){var U=i&Ja&&h===0?n:null;if(a){for(T=0;T<O;T+=1)(te=R[T].a)==null||te.measure();for(T=0;T<O;T+=1)(z=R[T].a)==null||z.fix()}Hn(t,R,U,g)}}a&&kn(()=>{var I;if(C!==void 0)for(E of C)(I=E.a)==null||I.apply()}),$a.first=t.first&&t.first.e,$a.last=_&&_.e}function Bn(e,t,n,l){l&Da&&za(e.v,t),l&Fa?za(e.i,n):e.i=n}function rt(e,t,n,l,i,r,u,a,p,h){var g=(p&Da)!==0,S=(p&Cn)===0,x=g?S?yn(i):Ba(i):i,L=p&Fa?Ba(u):u,_={i:L,v:x,k:r,a:null,e:null,prev:n,next:l};try{return _.e=Za(()=>a(e,x,L,h),Ue),_.e.prev=n&&n.e,_.e.next=l&&l.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),l!==null&&(l.prev=_,l.e.prev=_.e),_}finally{}}function Ga(e,t,n){for(var l=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,r=e.e.nodes_start;r!==l;){var u=$n(r);i.before(r),r=u}}function Qe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ne(e,t,n=t){var l=Ln();Ta(e,"input",i=>{var r=i?e.defaultValue:e.value;if(r=Ea(e)?Sa(r):r,n(r),l&&r!==(r=t())){var u=e.selectionStart,a=e.selectionEnd;e.value=r??"",a!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(a,e.value.length))}}),(Ue&&e.defaultValue!==e.value||et(t)==null&&e.value)&&n(Ea(e)?Sa(e.value):e.value),at(()=>{var i=t();Ea(e)&&i===Sa(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Ia(e,t,n=t){Ta(e,"change",l=>{var i=l?e.defaultChecked:e.checked;n(i)}),(Ue&&e.defaultChecked!==e.checked||et(t)==null)&&n(e.checked),at(()=>{var l=t();e.checked=!!l})}function Ea(e){var t=e.type;return t==="number"||t==="range"}function Sa(e){return e===""?null:+e}function ot(e,t,n){if(e.multiple)return Gn(e,t);for(var l of e.options){var i=fa(l);if(Fn(i,t)){l.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function zn(e,t){tt(()=>{var n=new MutationObserver(()=>{var l=e.__value;ot(e,l)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function On(e,t,n=t){var l=!0;Ta(e,"change",i=>{var r=i?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(r),fa);else{var a=e.querySelector(r)??e.querySelector("option:not([disabled])");u=a&&fa(a)}n(u)}),tt(()=>{var i=t();if(ot(e,i,l),l&&i===void 0){var r=e.querySelector(":checked");r!==null&&(i=fa(r),n(i))}e.__value=i,l=!1}),zn(e)}function Gn(e,t){for(var n of e.options)n.selected=~t.indexOf(fa(n))}function fa(e){return"__value"in e?e.__value:e.value}const jn=!0,gs=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));function se(e){return parseInt(e,16)}function ba(e){return Math.floor(e).toString(16).padStart(2,"0").toUpperCase()}function wa(e,t,n){const l=e>t;let i=t,r=e;l&&(i=e,r=t);const a=(i-r)/n;let p=r;const h=[r];for(let g=1;g<n;g++)p+=a,h.push(p);return h[n-1]=i,l&&h.reverse(),h}const Un=/^(\(.*\)|\\?.)$/,aa=e=>{const t=e.toString();return Un.test(t)?t:`(?:${t})`},Kn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Xn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,Y=e=>{const t=n=>Y(`(?<${n}>${`${e}`.replace(Kn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>Y(`${e}${f(...n)}`),{referenceTo:n=>Y(`${e}\\k<${n}>`)}),or:(...n)=>Y(`(?:${e}|${f(...n)})`),after:(...n)=>Y(`(?<=${f(...n)})${e}`),before:(...n)=>Y(`${e}(?=${f(...n)})`),notAfter:(...n)=>Y(`(?<!${f(...n)})${e}`),notBefore:(...n)=>Y(`${e}(?!${f(...n)})`),times:Object.assign(n=>Y(`${aa(e)}{${n}}`),{any:()=>Y(`${aa(e)}*`),atLeast:n=>Y(`${aa(e)}{${n},}`),atMost:n=>Y(`${aa(e)}{0,${n}}`),between:(n,l)=>Y(`${aa(e)}{${n},${l}}`)}),optionally:()=>Y(`${aa(e)}?`),as:t,groupedAs:t,grouped:()=>Y(`${e}`.replace(Xn,"($1$3)$2")),at:{lineStart:()=>Y(`^${e}`),lineEnd:()=>Y(`${e}$`)}}},qn=/[.*+?^${}()|[\]\\/]/g,Re=e=>Y(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`),Wn=(...e)=>Y(`(?:${e.map(t=>f(t)).join("|")})`),Yn=Y(".");Y("\\b\\w+\\b");Y("\\w");Y("\\b");const Me=Y("\\d");Y("\\s");const Zn=Object.assign(Y("[a-zA-Z]"),{lowercase:Y("[a-z]"),uppercase:Y("[A-Z]")});Y("\\t");Y("\\n");Y("\\r");Y("\\W+"),Y("\\W"),Y("\\B"),Y("\\D"),Y("\\S"),Object.assign(Y("[^a-zA-Z]"),{lowercase:Y("[^a-z]"),uppercase:Y("[^A-Z]")}),Y("[^\\t]"),Y("[^\\n]"),Y("[^\\r]");const f=(...e)=>Y(e.map(t=>typeof t=="string"?t.replace(qn,"\\$&"):t).join("")),ge=(...e)=>Y(`${aa(f(...e))}+`),M=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(f(...e).toString(),[...t||""].join(""))},Jn=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,Qn=/^[^\\]+/g,lt=/(?<sil>(?:sha|shi|shu|she|sho|cha|chi|chu|che|cho|tsu|kya|kyi|kyu|kye|kyo|gya|gyi|gyu|gye|gyo|sya|syu|syi|sye|syo|zya|zyu|zyi|zye|zyo|jya|jyu|jyi|jye|jyo|tya|tyi|tyu|tye|tyo|dya|dyi|dyu|dye|dyo|nya|nyi|nyu|nye|nyo|hya|hyi|hyu|hye|hyo|fya|fyi|fyu|fye|fyo|bya|byi|byu|bye|byo|pya|pyi|pyu|pye|pyo|mya|myi|myu|mye|myo|rya|ryi|ryu|rye|ryo|vya|vyi|vyu|vye|vyo|ka|ki|ku|ke|ko|ga|gi|gu|ge|go|sa|su|si|se|so|za|zu|zi|ze|zo|ja|ju|ji|je|jo|ta|ti|tu|te|to|da|di|du|de|do|na|ni|nu|ne|no|ha|hi|hu|he|ho|fa|fi|fu|fe|fo|ba|bi|bu|be|bo|pa|pi|pu|pe|po|ma|mi|mu|me|mo|ya|yi|yu|ye|yo|ra|ri|ru|re|ro|wa|wo|va|vi|vu|ve|vo|a|i|u|e|o|n|t)[^a-zA-Z\d\s:]*\s?)/g,ja=ge(Me).and(f(":")).and(Me.times(2)).and(f(":")).and(Me.times(2)).and(f(".")).and(Me.times(2)),er=Wn("Dialogue","Comment").groupedAs("type").and(f(": ")).and(ge(Me).optionally().groupedAs("layer")).and(f(",")).and(ja.optionally().groupedAs("start")).and(f(",")).and(ja.optionally().groupedAs("end")).and(f(",")).and(ge(Re(",").optionally()).groupedAs("style")).and(f(",")).and(ge(Re(",")).optionally().groupedAs("actor")).and(f(",")).and(ge(Me).optionally().groupedAs("marginLeft")).and(f(",")).and(ge(Me).optionally().groupedAs("marginRight")).and(f(",")).and(ge(Me).optionally().groupedAs("marginVertical")).and(f(",")).and(ge(Re(",")).optionally().groupedAs("effect")).and(f(",")).and(ge(Yn).optionally().groupedAs("content")),ar=M(er),tr=f("-").optionally().and(ge(Me)),G=tr.and(f(".").and(ge(Me)).optionally()),st=f("\\").and("a").and(G.groupedAs("a_value")),nr=M(st),Se=Zn.or(Me).times(2),it=f("&H").and(Se.groupedAs("color_bgr_blue")).and(Se.groupedAs("color_bgr_green")).and(Se.groupedAs("color_bgr_red")).and(f("&")),ut=f("\\c").and(it),ct=f("\\1c").and(f("&H")).and(Se.groupedAs("color1_bgr_blue")).and(Se.groupedAs("color1_bgr_green")).and(Se.groupedAs("color1_bgr_red")).and(f("&")),dt=f("\\2c").and(f("&H")).and(Se.groupedAs("color2_bgr_blue")).and(Se.groupedAs("color2_bgr_green")).and(Se.groupedAs("color2_bgr_red")).and(f("&")),ft=f("\\3c").and(f("&H")).and(Se.groupedAs("color3_bgr_blue")).and(Se.groupedAs("color3_bgr_green")).and(Se.groupedAs("color3_bgr_red")).and(f("&")),vt=f("\\4c").and(f("&H")).and(Se.groupedAs("color4_bgr_blue")).and(Se.groupedAs("color4_bgr_green")).and(Se.groupedAs("color4_bgr_red")).and(f("&")),rr=M(it),or=M(ut),lr=M(ct),sr=M(dt),ir=M(ft),ur=M(vt),pt=f("\\").and("alpha").and(ge(Re("\\")).groupedAs("alpha_value")),cr=M(pt),gt=f("\\").and("1a").and(ge(Re("\\")).groupedAs("alpha1_value")),dr=M(gt),bt=f("\\").and("2a").and(ge(Re("\\")).groupedAs("alpha2_value")),fr=M(bt),ht=f("\\").and("3a").and(ge(Re("\\")).groupedAs("alpha3_value")),vr=M(ht),_t=f("\\").and("4a").and(ge(Re("\\")).groupedAs("alpha4_value")),pr=M(_t),mt=f("\\").and("k").and(G.groupedAs("k_lower_case_value")),gr=M(mt),xt=f("\\").and("K").and(G.groupedAs("k_upper_case_value")),br=M(xt),yt=f("\\").and("kf").and(G.groupedAs("kf_value")),hr=M(yt),kt=f("\\").and("ko").and(G.groupedAs("ko_value")),_r=M(kt),At=f("\\").and("q").and(G.groupedAs("q_value")),mr=M(At),Nt=f("\\").and("s").and(G.groupedAs("s_value")),xr=M(Nt),Et=f("\\").and("u").and(G.groupedAs("u_value")),yr=M(Et),St=f("\\").and("r").and(ge(Re("\\")).groupedAs("r_value")),kr=M(St),wt=f("\\").and("fe").and(G.groupedAs("fe_value")),Ar=M(wt),Ct=f("\\").and("fn").and(ge(Re("\\")).groupedAs("fn_value")),Nr=M(Ct),$t=f("\\").and("p").and(G.groupedAs("p_value")),Er=M($t),Lt=f("\\").and("pbo").and(G.groupedAs("pbo_value")),Sr=M(Lt),Rt=f("\\").and("an").and(G.groupedAs("an_value")),wr=M(Rt),Ft=f("\\").and("b").and(G.groupedAs("b_value")),Cr=M(Ft),Dt=f("\\").and("be").and(G.groupedAs("be_value")),$r=M(Dt),Tt=f("\\").and("blur").and(G.groupedAs("blur_value")),Lr=M(Tt),It=f("\\").and("bord").and(G.groupedAs("bord_value")),Rr=M(It),Vt=f("\\").and("xbord").and(G.groupedAs("xbord_value")),Fr=M(Vt),Pt=f("\\").and("ybord").and(G.groupedAs("ybord_value")),Dr=M(Pt),Ht=f("\\").and("shad").and(G.groupedAs("shad_value")),Tr=M(Ht),Mt=f("\\").and("xshad").and(G.groupedAs("xshad_value")),Ir=M(Mt),Bt=f("\\").and("yshad").and(G.groupedAs("yshad_value")),Vr=M(Bt),zt=f("\\").and("fax").and(G.groupedAs("fax_value")),Pr=M(zt),Ot=f("\\").and("fay").and(G.groupedAs("fay_value")),Hr=M(Ot),Gt=f("\\").and("fscx").and(G.groupedAs("fscx_value")),Mr=M(Gt),jt=f("\\").and("fscy").and(G.groupedAs("fscy_value")),Br=M(jt),Ut=f("\\").and("fsp").and(G.groupedAs("fsp_value")),zr=M(Ut),Kt=f("\\").and("fr").and(G.groupedAs("fr_value")),Or=M(Kt),Xt=f("\\").and("frx").and(G.groupedAs("frx_value")),Gr=M(Xt),qt=f("\\").and("fry").and(G.groupedAs("fry_value")),jr=M(qt),Wt=f("\\").and("frz").and(G.groupedAs("frz_value")),Ur=M(Wt),Yt=f("\\").and("i").and(f("1").or("0").groupedAs("i_value")),Kr=M(Yt),Zt=f("\\").and("fs").and(G.groupedAs("fs_value")),Xr=M(Zt),Jt=f("\\").and("pos").and(f("(")).and(G.groupedAs("pos_x")).and(f(",")).and(G.groupedAs("pos_y")).and(f(")")),qr=M(Jt),Qt=f("\\").and("org").and(f("(")).and(G.groupedAs("org_x")).and(f(",")).and(G.groupedAs("org_y")).and(f(")")),Wr=M(Qt),en=f("\\").and("fad").and(f("(")).and(G.groupedAs("in")).and(f(",")).and(G.groupedAs("out")).and(f(")")),Yr=M(en),an=f("\\").and("fade").and(f("(")).and(G.groupedAs("fade_alpha1")).and(f(",")).and(G.groupedAs("fade_alpha2")).and(f(",")).and(G.groupedAs("fade_alpha3")).and(f(",")).and(G.groupedAs("fade_t1")).and(f(",")).and(G.groupedAs("fade_t2")).and(f(",")).and(G.groupedAs("fade_t3")).and(f(",")).and(G.groupedAs("fade_t4")).and(f(")")),Zr=M(an),Jr=f(",").and(G.groupedAs("move_t1")).and(f(",")).and(G.groupedAs("move_t2")).optionally(),tn=f("\\").and("move").and(f("(")).and(G.groupedAs("move_x1")).and(f(",")).and(G.groupedAs("move_y1")).and(f(",")).and(G.groupedAs("move_x2")).and(f(",")).and(G.groupedAs("move_y2")).and(Jr).and(f(")")),Qr=M(tn),nn=f("\\").and("clip").and(f("(")).and(ge(Re(")")).groupedAs("clip_args")).and(f(")")),eo=M(nn),rn=f("\\").and("iclip").and(f("(")).and(ge(Re(")")).groupedAs("iclip_args")).and(f(")")),ao=M(rn),to=f("\\").and(ge(Re("\\")).groupedAs("unknown_value")),on=Dt.or(pt).or(Vt).or(Pt).or(Mt).or(Bt).or(rn).or(tn).or(Tt).or(It).or(Ht).or(Gt).or(jt).or(an).or(nn).or(Ut).or(Jt).or(Qt).or(en).or(Lt).or(Xt).or(qt).or(Wt).or(zt).or(Ot).or(kt).or(yt).or(Kt).or(Zt).or(wt).or(Ct).or(Rt).or(ct).or(dt).or(ft).or(vt).or(gt).or(bt).or(ht).or(_t).or(ut).or(At).or(Et).or(Nt).or($t).or(St).or(Yt).or(Ft).or(st).or(mt).or(xt).or(to),no=f("\\").at.lineStart().and("t").and(f("(")).and(G.groupedAs("arg1").and(f(",")).optionally()).and(G.groupedAs("arg2").and(f(",")).optionally()).and(G.groupedAs("arg3").and(f(",")).optionally()).and(ge(on).groupedAs("tags")).and(f(")")),ro=M(on),ln=M(no);function Ca(e){const t=Math.floor(e/3600),n=Math.floor((e/3600-t)*60);return e=e-t*3600-n*60,{hours:t,minutes:n,seconds:e}}function Ua(e){var a,p,h;const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=e.match(t);if(!n||n.length===0)return null;const l=Math.floor(Number(((a=n.groups)==null?void 0:a.h)??"0")),i=Math.floor(Number(((p=n.groups)==null?void 0:p.m)??"0")),r=Number(((h=n.groups)==null?void 0:h.s)??"0"),u={hours:l,minutes:i,seconds:r};return Va(u),u}function Va(e){e.seconds>=60&&(e.seconds-=60,e.minutes++),e.minutes>=60&&(e.minutes-=60,e.hours++),e.hours>=9&&(e.hours=9,e.minutes=59,e.seconds=59.99)}function Ka(e){Va(e);const t=e.hours.toFixed(0),n=e.minutes.toFixed(0).padStart(2,"0"),l=e.seconds.toFixed(2).padStart(5,"0");return`${t}:${n}:${l}`}function ha(e){return Va(e),e.hours*3600+e.minutes*60+e.seconds}var La;(function(e){e[e.DOWN_LEFT=1]="DOWN_LEFT",e[e.DOWN_CENTER=2]="DOWN_CENTER",e[e.DOWN_RIGHT=3]="DOWN_RIGHT",e[e.CENTER_LEFT=4]="CENTER_LEFT",e[e.CENTER_CENTER=5]="CENTER_CENTER",e[e.CENTER_RIGHT=6]="CENTER_RIGHT",e[e.UP_LEFT=7]="UP_LEFT",e[e.UP_CENTER=8]="UP_CENTER",e[e.UP_RIGHT=9]="UP_RIGHT"})(La||(La={}));const oo=nt.nativeEnum(La);var Ra;(function(e){e[e.ANSI=0]="ANSI",e[e.DEFAULT=1]="DEFAULT",e[e.SYMBOL=2]="SYMBOL",e[e.MAC=77]="MAC",e[e.SHIFT_JIS=128]="SHIFT_JIS",e[e.HANGEUL=129]="HANGEUL",e[e.JOHAB=130]="JOHAB",e[e.GB2312=134]="GB2312",e[e.CHINESE_BIG5=136]="CHINESE_BIG5",e[e.GREEK=161]="GREEK",e[e.TURKISH=162]="TURKISH",e[e.VIETNAMESE=163]="VIETNAMESE",e[e.HEBREW=177]="HEBREW",e[e.ARAB=178]="ARAB",e[e.BALTIC=186]="BALTIC",e[e.RUSSIAN=204]="RUSSIAN",e[e.THAI=222]="THAI",e[e.EASTERN_EUROPE=238]="EASTERN_EUROPE",e[e.OEM=255]="OEM"})(Ra||(Ra={}));const lo=nt.nativeEnum(Ra);function so(){return{format:"Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text",lines:[]}}function io(){return{data:[]}}function uo(){return{files:[]}}function co(){return{files:[]}}function fo(){return{comments:[],properties:new Map}}function vo(){return{comments:[],properties:new Map}}function po(){return{format:"Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding",styles:[]}}const go="[Script Info]",bo="[Aegisub Project Garbage]",ho="[V4+ Styles]",_o="[Graphics]",mo="[Fonts]",xo="[Events]",yo="[Aegisub Extradata]",_a="; ",Xa="Data: ";function ko(e){const t={scriptInfo:vo(),aegisubProjectGarbage:fo(),styles:po(),fonts:uo(),graphics:co(),events:so(),extraData:io()},n="scriptInfo",l="projectGarbage",i="styles",r="fonts",u="graphics",a="events",p="extraData";let h="",g="";const S=e.split(`
`);for(let x=0;x<S.length;x++){const L=x+1,_=No(S[x]);if(_.length===0)continue;switch(_){case go:h=n;continue;case bo:h=l;continue;case ho:h=i;continue;case mo:h=r;continue;case _o:h=u;continue;case xo:h=a;continue;case yo:h=p;continue}let C="";switch(h){case n:C=Eo(t,_);break;case l:C=So(t,_);break;case i:C=wo(t,_);break;case r:g=Co(t,_,g);break;case u:g=$o(t,_,g);break;case a:C=Lo(t,_);break;case p:Ro(t,_);break;default:console.error(`failed to parse line ${L}`);break}if(C.length>0)return console.error(`failed to parse ass file at line ${L}: ${C}
Line:
${_}`),null}return t}function Ao(e){const t=/Style: (?<name>.*)\s*,\s*(?<fontName>.*)\s*,\s*(?<fontSize>\d+(?:\.\d+)?)\s*,\s*&H(?<alpha1>[A-Fa-f0-9]{2})(?<color1>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha2>[A-Fa-f0-9]{2})(?<color2>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha3>[A-Fa-f0-9]{2})(?<color3>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha4>[A-Fa-f0-9]{2})(?<color4>[A-Fa-f0-9]{6})\s*,\s*(?<bold>0|-1)\s*,\s*(?<italic>0|-1)\s*,\s*(?<underline>0|-1)\s*,\s*(?<strikeout>0|-1)\s*,\s*(?<scaleX>\d+(?:\.\d+)?)\s*,\s*(?<scaleY>\d+(?:\.\d+)?)\s*,\s*(?<spacing>\d+(?:\.\d+)?)\s*,\s*(?<angle>-?\d+(?:\.\d+)?)\s*,\s*(?<borderStyle>\d+)\s*,\s*(?<outline>\d+(?:\.\d+)?)\s*,\s*(?<shadow>\d+(?:\.\d+)?)\s*,\s*(?<alignment>[1-9])\s*,\s*(?<marginLeft>\d+)\s*,\s*(?<marginRight>\d+)\s*,\s*(?<marginVertical>\d+)\s*,\s*(?<encoding>\d+)/;if(!e.startsWith("Style: "))return[void 0,""];const n=e.match(t);if(!n||n.length===0||!n.groups)return[void 0,`failed to parse style: not a style: ${e}`];const l=oo.safeParse(Number(n.groups.alignment));if(!l.success)return[void 0,`failed to parse style: invalid alignment: ${e}`];const i=l.data,r=lo.safeParse(Number(n.groups.encoding));if(!r.success)return[void 0,`failed to parse style: invalid encoding: ${n.groups.encoding}`];const u=r.data;return[{name:n.groups.name??"",fontName:n.groups.fontName??"",fontSize:Number(n.groups.fontSize??"0"),primaryAlpha:n.groups.alpha1,primaryColor:n.groups.color1,secondaryAlpha:n.groups.alpha2,secondaryColor:n.groups.color2,outlineAlpha:n.groups.alpha3,outlineColor:n.groups.color3,backAlpha:n.groups.alpha4,backColor:n.groups.color4,bold:Number(n.groups.bold),italic:Number(n.groups.italic),underline:Number(n.groups.underline),strikeOut:Number(n.groups.strikeout),scaleX:Number(n.groups.scaleX),scaleY:Number(n.groups.scaleY),spacing:Number(n.groups.spacing),angle:Number(n.groups.angle),borderStyle:Number(n.groups.borderStyle),outline:Number(n.groups.outline),shadow:Number(n.groups.shadow),alignment:i,marginLeft:Number(n.groups.marginLeft),marginRight:Number(n.groups.marginRight),marginVertical:Number(n.groups.marginVertical),encoding:u},""]}function No(e){return e=e.replaceAll("\\uFEFF",""),e=e.replaceAll("\r",""),e}function xa(e){var i,r;const t=/(?<key>.+):\s+(?<value>.*)\s*/,n={key:"",value:""},l=e.match(t);return!l||l.length===0?[n,`not a key-value pair: ${e}`]:(n.key=((i=l.groups)==null?void 0:i.key)??"",n.value=((r=l.groups)==null?void 0:r.value)??"",[n,""])}function Eo(e,t){if(t.startsWith(_a)){const i=t.substring(_a.length);return e.scriptInfo.comments.push(i),""}const[n,l]=xa(t);return l.length>0?`failed to parse script info line: ${l}`:(e.scriptInfo.properties.set(n.key,n.value),"")}function So(e,t){if(t.startsWith(_a)){const i=t.substring(_a.length);return e.aegisubProjectGarbage.comments.push(i),""}const[n,l]=xa(t);return l.length>0?`failed to parse script info line: ${l}`:(e.aegisubProjectGarbage.properties.set(n.key,n.value),"")}function wo(e,t){const[n,l]=Ao(t);return l===""&&n!=null&&e.styles.styles.push(n),l}function Co(e,t,n){const[l,i]=xa(t);if(i.length===0&&l.key=="fontname"){const a=l.value;let p={name:"",data:[]},h=e.fonts.files.findIndex(g=>g.name===a);return e.fonts.files.push(p),h=e.fonts.files.length-1,p=e.fonts.files[h],p.name=a,n=a,a}const r=e.fonts.files.findLastIndex(a=>a.name==n);return r<0?"":(e.fonts.files[r].data.push(t),n)}function $o(e,t,n){const[l,i]=xa(t);if(i.length===0&&l.key=="filename"){const a=l.value;let p={name:"",data:[]},h=e.graphics.files.findIndex(g=>g.name===a);return e.graphics.files.push(p),h=e.graphics.files.length-1,p=e.graphics.files[h],p.name=a,n=a,a}const r=e.graphics.files.findLastIndex(a=>a.name==n);return r<0?"":(e.graphics.files[r].data.push(t),n)}function Lo(e,t){if(t.startsWith("Format:"))return e.events.format=t,"";const n=Ge(t);return n==null?`not a event (dialogue / comment): ${n}`:(e.events.lines.push(n),"")}function Ro(e,t){if(!t.startsWith(Xa))return;const n=t.substring(Xa.length);e.extraData.data.push(n)}function Fo(e){const t=[],n=e.content.split(" ");for(let p=0;p<n.length;p++){const h=n[p];if(Do(h)){const g=h.matchAll(lt);for(const S of g)t.push({text:S[1],durationInMs:0})}else t.push({text:h,durationInMs:0});p!=n.length-1&&(t[t.length-1].text+=" ")}const l=Yo(e),i=Math.floor(Math.round(l*100/t.length)),r=t.length*i;for(const p of t)p.durationInMs=i;if(!(r===l*100)){const h=l*100-r;t[t.length-1].durationInMs+=h}const a=[];for(const p of t)a.push({name:"effect",tags:[{name:b.kf,value:p.durationInMs}]},{name:"text",value:p.text});e.content=_e(a)}function Do(e){for(;e.length>0;){const t=e.match(lt);if(!t||t.length===0)return!1;e=e.substring(t[0].length)}return!0}var b;(function(e){e.a="a",e.alpha="alpha",e.alpha1="1a",e.alpha2="2a",e.alpha3="3a",e.alpha4="4a",e.an="an",e.b="b",e.be="be",e.blur="blur",e.bord="bord",e.clip="clip",e.color="c",e.color1="1c",e.color2="2c",e.color3="3c",e.color4="4c",e.fad="fad",e.fade="fade",e.fax="fax",e.fay="fay",e.fe="fe",e.fn="fn",e.fr="fr",e.frx="frx",e.fry="fry",e.frz="frz",e.fs="fs",e.fscx="fscx",e.fscy="fscy",e.fsp="fsp",e.i="i",e.iclip="iclip",e.kLowerCase="k",e.kUpperCase="K",e.kf="kf",e.ko="ko",e.move="move",e.org="org",e.p="p",e.pbo="pbo",e.pos="pos",e.q="q",e.r="r",e.s="s",e.shad="shad",e.t="t",e.text="text",e.u="u",e.unknown="unknown",e.xbord="xbord",e.xshad="xshad",e.ybord="ybord",e.yshad="yshad"})(b||(b={}));function va(e,t){var g,S,x,L,_,C,V,$,D,B,E,T,K,ae,j,X,k,R,O,U,F,Z,te,z,I,W,re,oe,ve,pe,fe,J,ue,me,Pe,we,Ee,Fe,na,We,Be,Ye,ra,Ze,Je,c,xe,P,H,q,Q;const n=e.substring(1),l=e.match(ln);if(l&&l.length>0)return To(e,t,n,l);const i=e.match(Qn);if(i&&i.length>0){const s=i[0];return t.push({name:b.text,value:s}),e=e.substring(s.length),e.length>0&&va(e,t),t}const r=e.match(ro);if(!r||r.length==0)return t;function u(s,d,ee){return s.push(d),e=e.substring(ee),e.length>0&&va(e,s),s}let a=(g=r[0].match(Qr))==null?void 0:g.groups;if(a!=null){const s=Number((a==null?void 0:a.move_x1)??"0"),d=Number((a==null?void 0:a.move_y1)??"0"),ee=Number((a==null?void 0:a.move_x2)??"0"),le=Number((a==null?void 0:a.move_y2)??"0"),ye=a!=null&&a.move_t1?Number(a.move_t1):null,Ce=a!=null&&a.move_t2?Number(a.move_t2):null,ya={name:b.move,x1:s,y1:d,x2:ee,y2:le,t1:ye,t2:Ce};return u(t,ya,r[0].length)}if(a=(S=r[0].match(cr))==null?void 0:S.groups,a!=null){const s=(a==null?void 0:a.alpha_value)??"",d={name:b.alpha,value:s};return u(t,d,r[0].length)}if(a=(x=r[0].match(Fr))==null?void 0:x.groups,a!=null){const s=Number((a==null?void 0:a.xbord_value)??"0"),d={name:b.xbord,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(L=r[0].match(Dr))==null?void 0:L.groups,a!=null){const s=Number((a==null?void 0:a.ybord_value)??"0"),d={name:b.ybord,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(_=r[0].match(Ir))==null?void 0:_.groups,a!=null){const s=Number((a==null?void 0:a.xshad_value)??"0"),d={name:b.xshad,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(C=r[0].match(Vr))==null?void 0:C.groups,a!=null){const s=Number((a==null?void 0:a.yshad_value)??"0"),d={name:b.yshad,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(V=r[0].match(ao))==null?void 0:V.groups,a!=null){const s=(a==null?void 0:a.iclip_args)??"",d={name:b.iclip,drawCommands:s};return u(t,d,r[0].length)}if(a=($=r[0].match(Lr))==null?void 0:$.groups,a!=null){const s=Number((a==null?void 0:a.blur_value)??"0"),d={name:b.blur,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(D=r[0].match(Rr))==null?void 0:D.groups,a!=null){const s=Number((a==null?void 0:a.bord_value)??"0"),d={name:b.bord,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(B=r[0].match(Tr))==null?void 0:B.groups,a!=null){const s=Number((a==null?void 0:a.shad_value)??"0"),d={name:b.shad,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(E=r[0].match(Mr))==null?void 0:E.groups,a!=null){const s=Number((a==null?void 0:a.fscx_value)??"0"),d={name:b.fscx,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(T=r[0].match(Br))==null?void 0:T.groups,a!=null){const s=Number((a==null?void 0:a.fscy_value)??"0"),d={name:b.fscy,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(K=r[0].match(Zr))==null?void 0:K.groups,a!=null){const s=Number((a==null?void 0:a.fade_alpha1)??"0"),d=Number((a==null?void 0:a.fade_alpha2)??"0"),ee=Number((a==null?void 0:a.fade_alpha3)??"0"),le=Number((a==null?void 0:a.fade_t1)??"0"),ye=Number((a==null?void 0:a.fade_t2)??"0"),Ce=Number((a==null?void 0:a.fade_t3)??"0"),ya=Number((a==null?void 0:a.fade_t4)??"0"),cn={name:b.fade,alpha1:s,alpha2:d,alpha3:ee,t1:le,t2:ye,t3:Ce,t4:ya};return u(t,cn,r[0].length)}if(a=(ae=r[0].match(eo))==null?void 0:ae.groups,a!=null){const s=(a==null?void 0:a.clip_args)??"",d={name:b.clip,drawCommands:s};return u(t,d,r[0].length)}if(a=(j=r[0].match(zr))==null?void 0:j.groups,a!=null){const s=Number((a==null?void 0:a.fsp_value)??"0"),d={name:b.fsp,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(X=r[0].match(qr))==null?void 0:X.groups,a!=null){const s=Number((a==null?void 0:a.pos_x)??"0"),d=Number((a==null?void 0:a.pos_y)??"0"),ee={name:b.pos,x:s,y:d};return u(t,ee,r[0].length)}if(a=(k=r[0].match(Wr))==null?void 0:k.groups,a!=null){const s=Number((a==null?void 0:a.org_x)??"0"),d=Number((a==null?void 0:a.org_y)??"0"),ee={name:b.org,x:s,y:d};return u(t,ee,r[0].length)}if(a=(R=r[0].match(Yr))==null?void 0:R.groups,a!=null){const s=Number((a==null?void 0:a.in)??"0"),d=Number((a==null?void 0:a.out)??"0"),ee={name:b.fad,in:s,out:d};return u(t,ee,r[0].length)}if(a=(O=r[0].match(Gr))==null?void 0:O.groups,a!=null){const s=Number((a==null?void 0:a.frx_value)??"0"),d={name:b.frx,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(U=r[0].match(jr))==null?void 0:U.groups,a!=null){const s=Number((a==null?void 0:a.fry_value)??"0"),d={name:b.fry,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(F=r[0].match(Ur))==null?void 0:F.groups,a!=null){const s=Number((a==null?void 0:a.frz_value)??"0"),d={name:b.frz,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(Z=r[0].match(Pr))==null?void 0:Z.groups,a!=null){const s=Number((a==null?void 0:a.fax_value)??"0"),d={name:b.fax,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(te=r[0].match(Hr))==null?void 0:te.groups,a!=null){const s=Number((a==null?void 0:a.fay_value)??"0"),d={name:b.fay,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(z=r[0].match(Sr))==null?void 0:z.groups,a!=null){const s=Number((a==null?void 0:a.pbo_value)??"0"),d={name:b.pbo,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(I=r[0].match(Ar))==null?void 0:I.groups,a!=null){const s=Number((a==null?void 0:a.fe_value)??"0"),d={name:b.fe,encodingId:Number(s)};return u(t,d,r[0].length)}if(a=(W=r[0].match(Nr))==null?void 0:W.groups,a!=null){const s=(a==null?void 0:a.fn_value)??"",d={name:b.fn,font:s};return u(t,d,r[0].length)}if(a=(re=r[0].match(wr))==null?void 0:re.groups,a!=null){const s=Number((a==null?void 0:a.an_value)??"0"),d={name:b.an,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(oe=r[0].match($r))==null?void 0:oe.groups,a!=null){const s=Number((a==null?void 0:a.be_value)??"0"),d={name:b.be,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(ve=r[0].match(Or))==null?void 0:ve.groups,a!=null){const s=Number((a==null?void 0:a.fr_value)??"0"),d={name:b.fr,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(pe=r[0].match(Xr))==null?void 0:pe.groups,a!=null){const s=Number((a==null?void 0:a.fs_value)??"0"),d={name:b.fs,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(fe=r[0].match(_r))==null?void 0:fe.groups,a!=null){const s=Number((a==null?void 0:a.ko_value)??"0"),d={name:b.ko,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(J=r[0].match(hr))==null?void 0:J.groups,a!=null){const s=Number((a==null?void 0:a.kf_value)??"0"),d={name:b.kf,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(ue=r[0].match(lr))==null?void 0:ue.groups,a!=null){const s=Number(se((a==null?void 0:a.color1_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color1_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color1_bgr_red)??"0")),le={name:b.color1,blue:s,green:d,red:ee};return u(t,le,r[0].length)}if(a=(me=r[0].match(sr))==null?void 0:me.groups,a!=null){const s=Number(se((a==null?void 0:a.color2_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color2_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color2_bgr_red)??"0")),le={name:b.color2,blue:s,green:d,red:ee};return u(t,le,r[0].length)}if(a=(Pe=r[0].match(ir))==null?void 0:Pe.groups,a!=null){const s=Number(se((a==null?void 0:a.color3_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color3_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color3_bgr_red)??"0")),le={name:b.color3,blue:s,green:d,red:ee};return u(t,le,r[0].length)}if(a=(we=r[0].match(ur))==null?void 0:we.groups,a!=null){const s=Number(se((a==null?void 0:a.color4_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color4_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color4_bgr_red)??"0")),le={name:b.color4,blue:s,green:d,red:ee};return u(t,le,r[0].length)}if(a=(Ee=r[0].match(dr))==null?void 0:Ee.groups,a!=null){const s=a.alpha1_value??"",d={name:b.alpha1,value:s};return u(t,d,r[0].length)}if(a=(Fe=r[0].match(fr))==null?void 0:Fe.groups,a!=null){const s=a.alpha2_value??"",d={name:b.alpha2,value:s};return u(t,d,r[0].length)}if(a=(na=r[0].match(vr))==null?void 0:na.groups,a!=null){const s=a.alpha3_value??"",d={name:b.alpha3,value:s};return u(t,d,r[0].length)}if(a=(We=r[0].match(pr))==null?void 0:We.groups,a!=null){const s=a.alpha4_value??"",d={name:b.alpha4,value:s};return u(t,d,r[0].length)}if(a=(Be=r[0].match(gr))==null?void 0:Be.groups,a!=null){const s=Number((a==null?void 0:a.k_lower_case_value)??"0"),d={name:b.kLowerCase,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(Ye=r[0].match(br))==null?void 0:Ye.groups,a!=null){const s=Number((a==null?void 0:a.k_upper_case_value)??"0"),d={name:b.kUpperCase,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(ra=r[0].match(mr))==null?void 0:ra.groups,a!=null){const s=Number((a==null?void 0:a.q_value)??"0"),d={name:b.q,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(Ze=r[0].match(xr))==null?void 0:Ze.groups,a!=null){const s=Number((a==null?void 0:a.s_value)??"0"),d={name:b.s,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(Je=r[0].match(yr))==null?void 0:Je.groups,a!=null){const s=Number((a==null?void 0:a.u_value)??"0"),d={name:b.u,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(c=r[0].match(kr))==null?void 0:c.groups,a!=null){const s=(a==null?void 0:a.r_value)??"",d={name:b.r,style:s};return u(t,d,r[0].length)}if(a=(xe=r[0].match(Er))==null?void 0:xe.groups,a!=null){const s=Number((a==null?void 0:a.p_value)??"0"),d={name:b.p,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(P=r[0].match(Kr))==null?void 0:P.groups,a!=null){const s=Number((a==null?void 0:a.i_value)??"0"),d={name:b.i,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(H=r[0].match(or))==null?void 0:H.groups,a!=null){const s=Number(se((a==null?void 0:a.color_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color_bgr_red)??"0")),le={name:b.color,blue:s,green:d,red:ee};return u(t,le,r[0].length)}if(a=(q=r[0].match(Cr))==null?void 0:q.groups,a!=null){const s=Number((a==null?void 0:a.b_value)??"0"),d={name:b.b,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}if(a=(Q=r[0].match(nr))==null?void 0:Q.groups,a!=null){const s=Number((a==null?void 0:a.a_value)??"0"),d={name:b.a,value:Number.isNaN(s)?0:s};return u(t,d,r[0].length)}const p=r[0],h={name:b.unknown,value:p};return u(t,h,r[0].length)}function To(e,t,n,l){var i;if(n.startsWith(b.t)){const r=(i=l[0].match(ln))==null?void 0:i.groups,u=(r==null?void 0:r.tags)??"",a=[];va(u,a);const p=r!=null&&r.arg1?Number(r.arg1):null,h=r!=null&&r.arg2?Number(r.arg2):null,g=r!=null&&r.arg3?Number(r.arg3):null,S={name:b.t,accel:null,t1:null,t2:null,tags:a};p!==null&&h!==null&&g!==null?(S.t1=p,S.t2=h,S.accel=g):p!==null&&h!==null&&g===null?(S.t1=p,S.t2=h,S.accel=null):p!==null&&(S.accel=p),t.push(S)}return e=e.substring(l[0].length),e.length>0&&va(e,t),t}function be(e){var l,i,r;const t=[],n=e.matchAll(Jn);for(const u of n){if((l=u.groups)!=null&&l.fx){const a=u.groups.fx.substring(1,u.groups.fx.length-1),p=[];va(a,p),t.push({name:"effect",tags:p});continue}if((i=u.groups)!=null&&i.txt){t.push({name:"text",value:(r=u.groups)==null?void 0:r.txt});continue}}return t}function sn(e){let t="";for(const n of e.tags)switch(n.name){case b.t:{const l={tags:n.tags},i=sn(l);n.t1!==null&&n.t2!==null&&n.accel!==null?t+=`\\t(${n.t1},${n.t2},${n.accel},${i})`:n.t1!==null&&n.t2!==null&&n.accel===null?t+=`\\t(${n.t1},${n.t2},${i})`:n.accel!==null?t+=`\\t(${n.accel},${i})`:t+=`\\t(${i})`;break}case b.pos:case b.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case b.move:t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null&&(t+=`,${n.t1},${n.t2}`),t+=")";break;case b.clip:case b.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case b.fad:t+=`\\fad(${n.in},${n.out})`;break;case b.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case b.fe:t+=`\\fe${n.encodingId}`;break;case b.fn:t+=`\\fn${n.font}`;break;case b.r:t+=`\\r${n.style}`;break;case b.color:case b.color1:case b.color2:case b.color3:case b.color4:{const l=ba(n.blue),i=ba(n.green),r=ba(n.red);t+=`\\${n.name}&H${l}${i}${r}&`;break}case b.text:case b.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function _e(e){let t="";for(const n of e){if(n.name=="text"){t+=n.value;continue}t+="{"+sn(n)+"}"}return t}function qa(e){const t=[];for(let n=0;n<e.length;n++){const l=e[n];if(l.name!="effect")continue;const i=e[n+1];if(i.name!="effect"){n++;continue}if(i==null)break;l.tags.push(...i.tags),t.push(n+1)}for(const n of t)e.splice(n,1)}function oa(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=b.pos,l=t.tags.find(i=>i.name==n);return(l==null?void 0:l.name)!=n?null:l}function Io(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=b.move,l=t.tags.find(i=>i.name==n);return(l==null?void 0:l.name)!=n?null:l}function Vo(e,t,n,l){const i={name:b.color,blue:t,green:n,red:l},[r,u]=Ve(e,i.name,i);return r||(u.blue=t,u.green=n,u.red=l),u}function Po(e,t,n,l){const i={name:b.color1,blue:t,green:n,red:l},[r,u]=Ve(e,i.name,i);return r||(u.blue=t,u.green=n,u.red=l),u}function Ho(e,t,n,l){const i={name:b.color2,blue:t,green:n,red:l},[r,u]=Ve(e,i.name,i);return r||(u.blue=t,u.green=n,u.red=l),u}function Mo(e,t,n,l){const i={name:b.color3,blue:t,green:n,red:l},[r,u]=Ve(e,i.name,i);return r||(u.blue=t,u.green=n,u.red=l),u}function Bo(e,t,n,l){const i={name:b.color4,blue:t,green:n,red:l},[r,u]=Ve(e,i.name,i);return r||(u.blue=t,u.green=n,u.red=l),u}function zo(e,t){const n={name:b.alpha,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Oo(e,t){const n={name:b.alpha1,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Go(e,t){const n={name:b.alpha2,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function jo(e,t){const n={name:b.alpha3,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Uo(e,t){const n={name:b.alpha4,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Ko(e,t,n){const l={name:b.pos,x:t,y:n},[i,r]=Ve(e,l.name,l);return i||(r.x=t,r.y=n),r}function Xo(e,t,n,l,i,r=null,u=null){const a={name:b.move,x1:t,y1:n,x2:l,y2:i,t1:r,t2:u},[p,h]=Ve(e,a.name,a);return p||(h.x1=t,h.y1=n,h.x2=l,h.y2=i,h.t1=r,h.t2=u),h}function Ve(e,t,n){const l=e.find(r=>r.name=="effect");if((l==null?void 0:l.name)!="effect")return e.unshift({name:"effect",tags:[n]}),[!0,n];const i=l.tags.find(r=>r.name==t);return(i==null?void 0:i.name)!=t?(l.tags.push(n),[!0,n]):[!1,i]}function qo(e,t){const n=e.find(i=>i.name=="effect");if((n==null?void 0:n.name)!="effect")return;const l=n.tags.findIndex(i=>i.name===t);l<0||n.tags.splice(l,1)}const Wo="Dialogue",ma="Comment";function Ge(e){const t=e.match(ar);if(t==null)return null;const n=t.groups,l=Ua((n==null?void 0:n.start)??"");if(l==null)return null;const i=Ua((n==null?void 0:n.end)??"");return i==null?null:{type:(n==null?void 0:n.type)===ma?ma:Wo,layer:Number((n==null?void 0:n.layer)??"0"),start:l,end:i,style:(n==null?void 0:n.style)??"",actor:(n==null?void 0:n.actor)??"",marginLeft:Number((n==null?void 0:n.marginLeft)??"0"),marginRight:Number((n==null?void 0:n.marginRight)??"0"),marginVertical:Number((n==null?void 0:n.marginVertical)??"0"),effect:(n==null?void 0:n.effect)??"",content:(n==null?void 0:n.content)??""}}function Ae(e){let t=e.type;return t+=": ",t+=Math.floor(e.layer),t+=",",t+=Ka(e.start),t+=",",t+=Ka(e.end),t+=",",t+=e.style,t+=",",t+=e.actor,t+=",",t+=Math.floor(e.marginLeft),t+=",",t+=Math.floor(e.marginRight),t+=",",t+=Math.floor(e.marginVertical),t+=",",t+=e.effect,t+=",",t+=e.content,t}function Yo(e){return ha(e.end)-ha(e.start)}function ze(e){const t=e.match(rr);if(t==null)return null;const n=t.groups;return{blue:se((n==null?void 0:n.color_bgr_blue)??""),green:se((n==null?void 0:n.color_bgr_green)??""),red:se((n==null?void 0:n.color_bgr_red)??"")}}var Zo=(e,t)=>t(),Jo=(e,t)=>t(),Qo=()=>{},el=de('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function al(e,t){Te(t,!0);const n=ce.copiarMovimiento;let l=N("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),i=N(""),r=N("");function u(){if(o(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const k=o(i).split(`
`);console.log(k);const R=Ge(o(l));if(R==null){console.error("invalid base line",o(l));return}const O=be(R.content),U=Io(O);if(U==null){console.error("base move not found");return}const F=U.x2-U.x1,Z=U.y2-U.y1;let te="";for(let z=0;z<k.length;z++){const I=k[z];if(I.length==0)continue;const W=Ge(I);if(W==null){console.error(`line ${z+1}: invalid line`);break}const re=be(W.content),oe=oa(re);if(oe==null){console.error(`line ${z+1}: pos not found`);break}qo(re,b.pos);const ve=oe.x,pe=oe.y,fe=oe.x+F,J=oe.y+Z;Xo(re,ve,pe,fe,J,U.t1,U.t2);const ue=_e(re);W.content=ue;const me=Ae(W);console.log(me),z>0&&(te+=`
`),te+=me}v(r,w(te))}async function a(){await navigator.clipboard.writeText(o(r)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{for(let k=1;k<=10;k++){const R=182+k*5,O=421+k*7;v(i,o(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${R},${O})}LINEA ${k}
`)}});var p=el();Ke(k=>{qe.title=n});var h=y(p);h.textContent=n;var g=A(h,2),S=A(y(g),2),x=y(S);ta(x),m(S),m(g);var L=A(g,2),_=y(L),C=y(_,!0);m(_);var V=A(_,2),$=y(V);Le($),m(V),m(L);var D=A(L,2);D.__click=[Zo,u];var B=y(D,!0);m(D);var E=A(D,2),T=y(E),K=y(T),ae=A(K);ae.__click=[Jo,a],ae.__keydown=[Qo],m(T);var j=A(T,2),X=y(j);Le(X),m(j),m(E),m(p),he(()=>{ie(C,ce.subtitulos),ie(B,ce.copiarMovimiento),ie(K,`${ce.resultado} `)}),Ne(x,()=>o(l),k=>v(l,k)),Ne($,()=>o(i),k=>v(i,k)),Ne(X,()=>o(r),k=>v(r,k)),ne(e,p),Ie()}je(["click","keydown"]);var tl=de(`<div class="text-column"><h1></h1> <div class="kagamin svelte-eb8v8f"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-eb8v8f"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-eb8v8f"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-eb8v8f"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function nl(e,t){Te(t,!1);const n=ce.acercaDe;Vn();var l=tl();Ke(r=>{qe.title=n});var i=y(l);i.textContent=n,pa(20),m(l),ne(e,l),Ie()}var rl=de('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function ol(e){var t=rl();Ke(n=>{qe.title="Asu"}),ne(e,t)}var ll=(e,t)=>t(),sl=de("<b> </b>"),il=de('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Oe(e,t){Te(t,!0);let n=ea(t,"label",3,""),l=ea(t,"disabled",15,!1),i=ea(t,"startValue",15,""),r=ea(t,"endValue",15,""),u=ea(t,"startPlaceholder",3,""),a=ea(t,"endPlaceholder",3,""),p=N(void 0);function h(){var k;if((k=o(p))!=null&&k.checked){g();return}S()}function g(){l()&&(l(!1),o(p)&&(o(p).checked=!0),t.onEnabled&&t.onEnabled())}function S(){l()||(l(!0),o(p)&&(o(p).checked=!1),t.onDisabled&&t.onDisabled())}Xe(()=>{o(p)&&(o(p).checked=!l())});var x=il(),L=y(x),_=y(L),C=y(_);C.__change=[ll,h],$e(C,k=>v(p,k),()=>o(p));var V=A(C,2);{var $=k=>{var R=Wa();he(()=>ie(R,`${n()??""}
                (deshabilitado)`)),ne(k,R)},D=k=>{var R=sl(),O=y(R,!0);m(R),he(()=>ie(O,n())),ne(k,R)};ke(V,k=>{l()?k($):k(D,!1)})}m(_),m(L);var B=A(L,2),E=y(B),T=A(y(E),2),K=y(T);ta(K),m(T),m(E);var ae=A(E,2),j=A(y(ae),2),X=y(j);return ta(X),m(j),m(ae),m(B),m(x),he(()=>{la(K,"placeholder",u()),K.disabled=l(),la(X,"placeholder",a()),X.disabled=l()}),Ne(K,i),Ne(X,r),ne(e,x),Ie({enable:g,disable:S})}je(["change"]);function ia(e,t){const n=[];for(let l=e;l<=t;l++){const i=ba(l);n.push(i)}return n}function ua(e,t,n){const l=Array(n),i=wa(e.blue,t.blue,n);if(i.length!==n)return console.error(`ERROR: blue interpolated values ${i.length} don't match intervals ${n}`),[];const r=wa(e.green,t.green,n);if(r.length!==n)return console.error(`ERROR: green interpolated values ${r.length} don't match intervals ${n}`),[];const u=wa(e.red,t.red,n);if(u.length!==n)return console.error(`ERROR: red interpolated values ${u.length} don't match intervals ${n}`),[];for(var a=0;a<n;a++){const p=Math.floor(i[a]),h=Math.floor(r[a]),g=Math.floor(u[a]);l[a]={blue:p,green:h,red:g}}return l}var ul=(e,t)=>t(),cl=()=>{},dl=de('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function un(e,t){Te(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ce.lineasCopiadas)}var l=dl();l.__click=[ul,n],l.__keydown=[cl],he(()=>la(l,"title",ce.copiar)),ne(e,l),Ie()}je(["click","keydown"]);var fl=(e,t)=>t(),vl=de('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function pl(e,t){Te(t,!0);const n=ce.aplicarAlpha,l="0",i="FF";let r=N(""),u=N(""),a=N("0"),p=N("FF"),h=N("0"),g=N("FF"),S=N("0"),x=N("FF"),L=N("0"),_=N("FF"),C=N("0"),V=N("FF"),$=N(!1),D=N(!0),B=N(!0),E=N(!0),T=N(!0),K=N(void 0),ae=N(void 0),j=N(void 0),X=N(void 0),k=N(void 0),R=N(!1);function O(){var c,xe,P,H;(c=o(ae))==null||c.disable(),(xe=o(j))==null||xe.disable(),(P=o(X))==null||P.disable(),(H=o(k))==null||H.disable()}function U(){var c,xe,P,H;o(D)&&o(B)&&o(E)&&o(T)&&((c=o(ae))==null||c.enable(),(xe=o(j))==null||xe.disable(),(P=o(X))==null||P.disable(),(H=o(k))==null||H.disable())}function F(){var c;(c=o(K))==null||c.disable()}function Z(){var c;o(D)&&o(B)&&o(E)&&o(T)&&((c=o(K))==null||c.enable())}function te(){const c=[],xe=o(r).split(`
`);for(const P of xe){if(P.length==0)continue;const H=Ge(P);H!=null&&c.push(H)}if(!o($)){const P=se(o(a)),H=se(o(p));if(P>=H){alert("El inicio de alpha total debe ser menor al fin.");return}if(P<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(H>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const q=ia(P,H);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){let d=Math.floor(q.length*s/c.length);d>=q.length&&(d=q.length-1);const le=`&H${q[d]}&`,ye=be(c[s].content);zo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(Q+=`
`),Q+=Ce}v(u,w(Q));return}if(!o(D)){const P=se(o(h)),H=se(o(g));if(P>=H){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(P<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(H>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const q=ia(P,H);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){let d=Math.floor(q.length*s/c.length);d>=q.length&&(d=q.length-1);const le=`&H${q[d]}&`,ye=be(c[s].content);Oo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(Q+=`
`),Q+=Ce}v(u,w(Q))}if(!o(B)){const P=se(o(S)),H=se(o(x));if(P>=H){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(P<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(H>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const q=ia(P,H);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){let d=Math.floor(q.length*s/c.length);d>=q.length&&(d=q.length-1);const le=`&H${q[d]}&`,ye=be(c[s].content);Go(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(Q+=`
`),Q+=Ce}v(u,w(Q))}if(!o(E)){const P=se(o(L)),H=se(o(_));if(P>=H){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(P<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(H>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const q=ia(P,H);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){let d=Math.floor(q.length*s/c.length);d>=q.length&&(d=q.length-1);const le=`&H${q[d]}&`,ye=be(c[s].content);jo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(Q+=`
`),Q+=Ce}v(u,w(Q))}if(!o(T)){const P=se(o(C)),H=se(o(V));if(P>=H){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(P<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(H>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const q=ia(P,H);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){let d=Math.floor(q.length*s/c.length);d>=q.length&&(d=q.length-1);const le=`&H${q[d]}&`,ye=be(c[s].content);Uo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(Q+=`
`),Q+=Ce}v(u,w(Q))}}Xe(()=>{for(let c=1;c<=10;c++)v(r,o(r)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${c}
`)});var z=vl();Ke(c=>{qe.title=n});var I=y(z);I.textContent=n;var W=A(I,4);$e(Oe(W,{label:"Alpha total",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>O(),onDisabled:()=>U(),get startValue(){return o(a)},set startValue(c){v(a,w(c))},get endValue(){return o(p)},set endValue(c){v(p,w(c))},get disabled(){return o($)},set disabled(c){v($,w(c))}}),c=>v(K,w(c)),()=>o(K));var re=A(W,2);$e(Oe(re,{label:"Alpha 1",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(h)},set startValue(c){v(h,w(c))},get endValue(){return o(g)},set endValue(c){v(g,w(c))},get disabled(){return o(D)},set disabled(c){v(D,w(c))}}),c=>v(ae,w(c)),()=>o(ae));var oe=A(re,2);$e(Oe(oe,{label:"Alpha 2",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(S)},set startValue(c){v(S,w(c))},get endValue(){return o(x)},set endValue(c){v(x,w(c))},get disabled(){return o(B)},set disabled(c){v(B,w(c))}}),c=>v(j,w(c)),()=>o(j));var ve=A(oe,2);$e(Oe(ve,{label:"Alpha 3",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(L)},set startValue(c){v(L,w(c))},get endValue(){return o(_)},set endValue(c){v(_,w(c))},get disabled(){return o(E)},set disabled(c){v(E,w(c))}}),c=>v(X,w(c)),()=>o(X));var pe=A(ve,2);$e(Oe(pe,{label:"Alpha 4",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(C)},set startValue(c){v(C,w(c))},get endValue(){return o(V)},set endValue(c){v(V,w(c))},get disabled(){return o(T)},set disabled(c){v(T,w(c))}}),c=>v(k,w(c)),()=>o(k));var fe=A(pe,2),J=y(fe);ta(J),pa(),m(fe);var ue=A(fe,2),me=y(ue),Pe=y(me,!0);m(me);var we=A(me,2),Ee=y(we);Le(Ee),m(we),m(ue);var Fe=A(ue,2);Fe.__click=[fl,te];var na=y(Fe,!0);m(Fe);var We=A(Fe,2),Be=y(We),Ye=y(Be),ra=A(Ye);un(ra,{get rawResultLines(){return o(u)}}),m(Be);var Ze=A(Be,2),Je=y(Ze);Le(Je),m(Ze),m(We),m(z),he(()=>{ie(Pe,ce.subtitulos),ie(na,ce.aplicarAlpha),ie(Ye,`${ce.resultado} `)}),Ia(J,()=>o(R),c=>v(R,c)),Ne(Ee,()=>o(r),c=>v(r,c)),Ne(Je,()=>o(u),c=>v(u,c)),ne(e,z),Ie()}je(["click"]);var gl=(e,t)=>t(),bl=de('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function hl(e,t){Te(t,!0);const n=ce.aplicarColor,l="&HFFFFFF&",i="&H000000&";let r=N(""),u=N(""),a=N(l),p=N(i),h=N(l),g=N(i),S=N(l),x=N(i),L=N(l),_=N(i),C=N(l),V=N(i),$=N(!1),D=N(!0),B=N(!0),E=N(!0),T=N(!0),K=N(void 0),ae=N(void 0),j=N(void 0),X=N(void 0),k=N(void 0),R=N(!1);function O(){var c,xe,P,H;(c=o(ae))==null||c.disable(),(xe=o(j))==null||xe.disable(),(P=o(X))==null||P.disable(),(H=o(k))==null||H.disable()}function U(){var c,xe,P,H;o(D)&&o(B)&&o(E)&&o(T)&&((c=o(ae))==null||c.enable(),(xe=o(j))==null||xe.disable(),(P=o(X))==null||P.disable(),(H=o(k))==null||H.disable())}function F(){var c;(c=o(K))==null||c.disable()}function Z(){var c;o(D)&&o(B)&&o(E)&&o(T)&&((c=o(K))==null||c.enable())}function te(){const c=[],xe=o(r).split(`
`);for(const P of xe){if(P.length==0)continue;const H=Ge(P);H!=null&&c.push(H)}if(!o($)){const P=ze(o(a));if(P==null){alert(`Color total de inicio inválido: ${o(a)}`);return}const H=ze(o(p));if(H==null){alert(`Color total de fin inválido: ${o(p)}`);return}const q=ua(P,H,c.length);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){const d=q[s],ee=be(c[s].content);Vo(ee,d.blue,d.green,d.red),c[s].content=_e(ee);const le=Ae(c[s]);s>0&&(Q+=`
`),Q+=le}v(u,w(Q));return}if(!o(D)){const P=ze(o(h));if(P==null){alert(`Color 1 de inicio inválido: ${o(h)}`);return}const H=ze(o(g));if(H==null){alert(`Color 1 de fin inválido: ${o(g)}`);return}const q=ua(P,H,c.length);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){const d=q[s],ee=be(c[s].content);Po(ee,d.blue,d.green,d.red),c[s].content=_e(ee);const le=Ae(c[s]);s>0&&(Q+=`
`),Q+=le}v(u,w(Q))}if(!o(B)){const P=ze(o(S));if(P==null){alert(`Color 2 de inicio inválido: ${o(S)}`);return}const H=ze(o(x));if(H==null){alert(`Color 2 de fin inválido: ${o(x)}`);return}const q=ua(P,H,c.length);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){const d=q[s],ee=be(c[s].content);Ho(ee,d.blue,d.green,d.red),c[s].content=_e(ee);const le=Ae(c[s]);s>0&&(Q+=`
`),Q+=le}v(u,w(Q))}if(!o(E)){const P=ze(o(L));if(P==null){alert(`Color 3 de inicio inválido: ${o(L)}`);return}const H=ze(o(_));if(H==null){alert(`Color 3 de fin inválido: ${o(_)}`);return}const q=ua(P,H,c.length);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){const d=q[s],ee=be(c[s].content);Mo(ee,d.blue,d.green,d.red),c[s].content=_e(ee);const le=Ae(c[s]);s>0&&(Q+=`
`),Q+=le}v(u,w(Q))}if(!o(T)){const P=ze(o(C));if(P==null){alert(`Color 4 de inicio inválido: ${o(C)}`);return}const H=ze(o(V));if(H==null){alert(`Color 4 de fin inválido: ${o(V)}`);return}const q=ua(P,H,c.length);o(R)&&q.reverse();let Q="";for(let s=0;s<c.length;s++){const d=q[s],ee=be(c[s].content);Bo(ee,d.blue,d.green,d.red),c[s].content=_e(ee);const le=Ae(c[s]);s>0&&(Q+=`
`),Q+=le}v(u,w(Q))}}Xe(()=>{v(r,o(r)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(r,o(r)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var z=bl();Ke(c=>{qe.title=n});var I=y(z);I.textContent=n;var W=A(I,4);$e(Oe(W,{label:"Color total",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>O(),onDisabled:()=>U(),get startValue(){return o(a)},set startValue(c){v(a,w(c))},get endValue(){return o(p)},set endValue(c){v(p,w(c))},get disabled(){return o($)},set disabled(c){v($,w(c))}}),c=>v(K,w(c)),()=>o(K));var re=A(W,2);$e(Oe(re,{label:"Color 1",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(h)},set startValue(c){v(h,w(c))},get endValue(){return o(g)},set endValue(c){v(g,w(c))},get disabled(){return o(D)},set disabled(c){v(D,w(c))}}),c=>v(ae,w(c)),()=>o(ae));var oe=A(re,2);$e(Oe(oe,{label:"Color 2",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(S)},set startValue(c){v(S,w(c))},get endValue(){return o(x)},set endValue(c){v(x,w(c))},get disabled(){return o(B)},set disabled(c){v(B,w(c))}}),c=>v(j,w(c)),()=>o(j));var ve=A(oe,2);$e(Oe(ve,{label:"Color 3",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(L)},set startValue(c){v(L,w(c))},get endValue(){return o(_)},set endValue(c){v(_,w(c))},get disabled(){return o(E)},set disabled(c){v(E,w(c))}}),c=>v(X,w(c)),()=>o(X));var pe=A(ve,2);$e(Oe(pe,{label:"Color 4",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>F(),onDisabled:()=>Z(),get startValue(){return o(C)},set startValue(c){v(C,w(c))},get endValue(){return o(V)},set endValue(c){v(V,w(c))},get disabled(){return o(T)},set disabled(c){v(T,w(c))}}),c=>v(k,w(c)),()=>o(k));var fe=A(pe,2),J=y(fe);ta(J),pa(),m(fe);var ue=A(fe,2),me=y(ue),Pe=y(me,!0);m(me);var we=A(me,2),Ee=y(we);Le(Ee),m(we),m(ue);var Fe=A(ue,2);Fe.__click=[gl,te];var na=y(Fe,!0);m(Fe);var We=A(Fe,2),Be=y(We),Ye=y(Be),ra=A(Ye);un(ra,{get rawResultLines(){return o(u)}}),m(Be);var Ze=A(Be,2),Je=y(Ze);Le(Je),m(Ze),m(We),m(z),he(()=>{ie(Pe,ce.subtitulos),ie(na,ce.aplicarColor),ie(Ye,`${ce.resultado} `)}),Ia(J,()=>o(R),c=>v(R,c)),Ne(Ee,()=>o(r),c=>v(r,c)),Ne(Je,()=>o(u),c=>v(u,c)),ne(e,z),Ie()}je(["click"]);var _l=(e,t)=>t(),ml=(e,t)=>t(),xl=()=>{},yl=de('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function kl(e,t){Te(t,!0);const n=ce.aplicarSecuenciaPosiciones;let l=N(""),i=N(""),r=N(""),u=N(!1);function a(){if(o(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const F=[];{const z=o(l).split(`
`);for(const I of z){if(I.length==0)continue;const W=Ge(I);if(W==null)continue;const re=be(W.content);if(oa(re)==null){alert(`Línea base sin \\pos copiada: '${I}'`),console.log(I);return}F.push(W)}}const Z=[];{const z=o(i).split(`
`);for(const I of z){if(I.length==0)continue;const W=Ge(I);if(W==null)continue;const re=be(W.content);if(oa(re)==null){alert(`Línea objetivo sin \\pos: '${I}'`),console.log(I);return}Z.push(W)}}let te="";for(let z=0;z<Z.length;z++){const I=Z[z],W=be(I.content),re=oa(W);if(re==null){const J=Ae(I);alert(`Línea objetivo sin \\pos: '${J}'`),console.log(J);return}let oe=re.x,ve=re.y;o(u)&&F.reverse();const pe=p(F),fe=[];for(let J=0;J<F.length;J++){const ue=pe[J][0],me=pe[J][1],Pe=oe+ue,we=ve+me;oe=Pe,ve=we,Ko(W,Pe,we),I.content=_e(W);const Ee=F[J];I.start=Ee.start,I.end=Ee.end,fe.push(structuredClone(I))}o(u)&&(F.reverse(),fe.reverse());for(const J of fe)te+=Ae(J)+`
`}v(r,w(te))}function p(F){const te=[[0,0]];for(let z=0;z<F.length-1;z++){const I=F[z],W=F[z+1],re=be(I.content),oe=oa(re);if(oe==null)return alert(`Línea base sin \\pos: '${Ae(I)}'`),console.log(I),[];const ve=be(W.content),pe=oa(ve);if(pe==null)return alert(`Línea base sin \\pos: '${Ae(W)}'`),console.log(W),[];const fe=pe.x-oe.x,J=pe.y-oe.y;te.push([fe,J])}return te}async function h(){await navigator.clipboard.writeText(o(r)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{v(l,o(l)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),v(l,o(l)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),v(l,o(l)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),v(i,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var g=yl();Ke(F=>{qe.title=n});var S=y(g);S.textContent=n;var x=A(S,2),L=A(y(x),2),_=y(L);Le(_),m(L),m(x);var C=A(x,2),V=y(C);ta(V),pa(),m(C);var $=A(C,2),D=y($),B=y(D,!0);m(D);var E=A(D,2),T=y(E);Le(T),m(E),m($);var K=A($,2);K.__click=[_l,a];var ae=y(K,!0);m(K);var j=A(K,2),X=y(j),k=y(X),R=A(k);R.__click=[ml,h],R.__keydown=[xl],m(X);var O=A(X,2),U=y(O);Le(U),m(O),m(j),m(g),he(()=>{ie(B,ce.subtitulos),ie(ae,ce.aplicarSecuenciaPosiciones),ie(k,`${ce.resultado} `)}),Ne(_,()=>o(l),F=>v(l,F)),Ia(V,()=>o(u),F=>v(u,F)),Ne(T,()=>o(i),F=>v(i,F)),Ne(U,()=>o(r),F=>v(r,F)),ne(e,g),Ie()}je(["click","keydown"]);var Al=(e,t)=>t(),Nl=(e,t)=>t(),El=()=>{},Sl=de('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function wl(e,t){Te(t,!0);const n=ce.dividirSilabas;let l=N(""),i=N("");function r(){if(o(l).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const K=o(l).split(`
`);let ae="";for(let j=0;j<K.length;j++){const X=K[j];if(X.length==0)continue;const k=Ge(X);if(k==null){console.error(`line ${j+1}: invalid line`);break}Fo(k);const R=Ae(k);j>0&&(ae+=`
`),ae+=R}v(i,w(ae))}async function u(){await navigator.clipboard.writeText(o(i)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{v(l,o(l)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),v(l,o(l)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),v(l,o(l)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`)});var a=Sl();Ke(K=>{qe.title=n});var p=y(a);p.textContent=n;var h=A(p,2),g=y(h),S=y(g);m(g);var x=A(g,2),L=y(x);Le(L),m(x),m(h);var _=A(h,2);_.__click=[Al,r];var C=y(_,!0);m(_);var V=A(_,2),$=y(V),D=y($),B=A(D);B.__click=[Nl,u],B.__keydown=[El],m($);var E=A($,2),T=y(E);Le(T),m(E),m(V),m(a),he(()=>{ie(S,`${ce.subtitulos} (romaji)`),ie(C,ce.dividirSilabas),ie(D,`${ce.resultado} `)}),Ne(L,()=>o(l),K=>v(l,K)),Ne(T,()=>o(i),K=>v(i,K)),ne(e,a),Ie()}je(["click","keydown"]);var Cl=(e,t)=>t(),$l=de("<button> </button>"),Ll=de('<p class="preview"> <b> </b></p>'),Rl=(e,t)=>t(),Fl=()=>{},Dl=de('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <button class="button is-link is-fullwidth">Actualizar karaoke</button> <div class="mb-2"><label class="label" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Tl(e,t){Te(t,!0);const n=ce.dividirKaraoke,l="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let i=N(l),r=N(w([])),u=N(""),a=N(w([])),p=N(0);function h(){const O=Ge(o(i));if(O==null)return;const U=be(O.content);qa(U);const F=0;let Z=o(a)[o(p)].index+1,te=0;for(let J=0;J<=o(p);J++){const ue=o(a)[J];ue.centiseconds!=null&&(te+=ue.centiseconds)}const z=ha(O.start),I=ha(O.end),W=U.slice(F,Z);O.content=_e(W);const re=te/100;O.end=Ca(z+re),v(u,w(Ae(O)));let oe=!0,ve=0;for(;oe;){const J=U[Z+1];if((J==null?void 0:J.name)!="text"){oe=!1;break}if(oe=J.value.replaceAll(" ","").length===0,oe&&(Z+=2,ve++),ve>o(a).length)break}let pe=0;for(let J=o(p)+1+ve;J<o(a).length;J++){const ue=o(a)[J];ue.centiseconds!=null&&(pe+=ue.centiseconds)}const fe=U.slice(Z);O.end=Ca(I),O.start=Ca(I-pe/100),O.content=_e(fe),v(u,o(u)+(`
`+Ae(O))),v(r,w([_e(W.filter(J=>J.name=="text")),_e(fe.filter(J=>J.name=="text"))]))}async function g(){await navigator.clipboard.writeText(o(u)),alert("¡Líneas copiadas al portapapeles!")}function S(){v(a,w([]));const O=Ge(o(i));if(O==null)return[];const U=be(O.content);qa(U);for(let F=0;F<U.length;F++){const Z=U[F];if(Z.name!="text")continue;o(a).push({index:F,text:Z.value.replaceAll(" ",""),centiseconds:null});const te=F-1;if(te<0)continue;const z=U[te];if(z.name!="effect")continue;const I=z.tags.find(re=>re.name===b.kLowerCase||re.name===b.kUpperCase||re.name===b.kf||re.name===b.ko);I==null||!(I.name===b.kLowerCase||I.name===b.kUpperCase||I.name===b.kf||I.name===b.ko)||(o(a)[o(a).length-1].centiseconds=I.value)}return v(p,w(Math.floor(o(a).length/2))),o(a)}Xe(()=>{S(),h()});var x=Dl();Ke(O=>{qe.title=n});var L=y(x);L.textContent=n;var _=A(L,2),C=A(y(_),2),V=y(C);ta(V),la(V,"placeholder",l),m(C),m(_);var $=A(_,2);$.__click=[Cl,S];var D=A($,2),B=A(y(D),2);da(B,21,()=>o(a),ca,(O,U,F)=>{var Z=He(),te=De(Z);{var z=I=>{var W=$l();W.__click=()=>{v(p,w(F)),h()};var re=y(W,!0);m(W),he(()=>{ga(W,`button ${(F===o(p)?"is-link":"")??""}`),la(W,"title",`${o(U).text}: ${o(U).centiseconds} centésimas`),ie(re,o(U).text)}),ne(I,W)};ke(te,I=>{o(U).text.replaceAll(" ","").length>0&&I(z)})}ne(O,Z)}),m(B),m(D);var E=A(D,2),T=A(y(E),2);da(T,17,()=>o(r),ca,(O,U,F)=>{var Z=Ll(),te=y(Z);te.nodeValue=`Línea ${F+1}: `;var z=A(te),I=y(z,!0);m(z),m(Z),he(()=>ie(I,o(U))),ne(O,Z)}),m(E);var K=A(E,2),ae=y(K),j=y(ae),X=A(j);X.__click=[Rl,g],X.__keydown=[Fl],m(ae);var k=A(ae,2),R=y(k);Le(R),m(k),m(K),m(x),he(()=>ie(j,`${ce.resultado} `)),Ne(V,()=>o(i),O=>v(i,O)),Ne(R,()=>o(u),O=>v(u,O)),ne(e,x),Ie()}je(["click","keydown"]);async function Il(e,t,n){t(!t()),await n()}var Vl=de('<div class="area svelte-on5caf"><textarea class="textarea is-danger svelte-on5caf" readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function Pl(e,t){Te(t,!0);let n=ea(t,"rawMode",7),l=N(w(t.text)),i=N(1),r=N(void 0);async function u(){a(),await Rn(),p()}function a(){if(n()){v(l,w(t.text));return}const _=be(t.text).filter(V=>V.name==="text");let C=_e(_);C=C.replaceAll("\\N",""),v(l,w(C))}function p(){v(i,w(h()))}function h(){return o(r)==null?1:Math.ceil(o(r).scrollHeight/o(r).clientHeight)}Xe(async()=>{await u()});var g=Vl(),S=y(g);Le(S),$e(S,_=>v(r,_),()=>o(r));var x=A(S,2);x.__click=[Il,n,u];var L=y(x,!0);m(x),m(g),he(()=>{Tn(S,o(l)),la(S,"rows",o(i)),ie(L,n()?"Ocultar etiquetas":"Ver etiquetas")}),ne(e,g),Ie()}je(["click"]);function Hl(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const Ml=["automático","carteles","diálogos","karaokes"];function Bl(e,t){const n=[];if(e==="carteles")return n;const l=t.scriptInfo.properties.get("WrapStyle")??"",i="0";l!==i&&n.push({location:"Script info, wrap style",error:`Se esperaba "${i}", pero se encontró "${l}"`,text:l,ignoreRule:""});const r=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",u="yes";r!==u&&n.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${u}", pero se encontró "${r}"`,text:r,ignoreRule:""});let a=0;const p="Español";for(let h=0;h<t.events.lines.length;h++){const g=t.events.lines[h],S=h+1;if(e!=="karaokes"&&g.effect.includes("template syl")){console.info(`template syl detectado en línea ${S}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&g.type==ma||g.content===""||e==="karaokes"&&g.style!==p||e==="karaokes"&&g.type!==ma||e==="karaokes"&&g.effect!=="karaoke")continue;if(e==="karaokes"&&g.effect==="fx")break;const x=g.effect.split(" ").filter(C=>C.startsWith("ignorar-"));if(x.includes("ignorar-linea"))continue;jl(t,g.style)||n.push({location:`Línea ${S}`,error:"Estilo no encontrado",text:g.style,ignoreRule:"ignorar-estilo"});const L=be(g.content);let _=_e(L.filter(C=>C.name==="text"));if(!x.includes("ignorar-inicio")){const C=zl(_);C!=null&&n.push({location:`Línea ${S}`,error:C,text:g.content,ignoreRule:"ignorar-inicio"})}if(!x.includes("ignorar-espacios")){const C=Ul(_);C!=null&&n.push({location:`Línea ${S}`,error:C,text:g.content,ignoreRule:"ignorar-espacios"})}if(!x.includes("ignorar-fin")){const C=Ol(_);C!=null&&n.push({location:`Línea ${S}`,error:C,text:g.content,ignoreRule:"ignorar-fin"})}if(!x.includes("ignorar-puntuacion")){const C=Gl(_);C!=null&&n.push({location:`Línea ${S}`,error:C,text:g.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&a++}return e==="karaokes"&&a===0&&n.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${p}"`,text:"",ignoreRule:""}),n}function zl(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function Ol(e){e=Hl(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(n=>e.endsWith(n))?null:`No tiene un fin de línea válido: ${t.map(n=>`"${n}"`).join(", ")}`}function Gl(e){for(let t=0;t<e.length;t++){const n=[",",";","."],l=e[t];if(!n.includes(l))continue;if(t+1>=e.length)break;let i=e[t+1];if(i==="\\"&&e[t+2]==="N"&&(i="\\N"),l==="."&&i=="."||l==="."&&e[t-1]==="."&&e[t-2]==="."||(l==="."||l===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(i))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function jl(e,t){return e.styles.styles.some(n=>t===n.name)}function Ul(e){return e.includes("  ")?"hay dos espacios seguidos":null}function Kl(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}async function Xl(e,t,n,l,i,r){var a;const u=[...((a=o(t))==null?void 0:a.files)??[]];v(n,0),v(l,w([]));for(const p of u){const h=await p.text(),g=ko(h);if(g==null){console.error("archivo inválido",p.name);continue}v(i,w(Kl(p.name,o(r))));const S=Bl(o(i),g);v(n,o(n)+S.length),o(l).push({subsType:o(i),fileName:p.name,errors:S})}o(t)!=null&&(o(t).value="")}var ql=de("<option> </option>"),Wl=de('<img class="result-image svelte-4hkz46" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),Yl=de('<img class="result-image svelte-4hkz46" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Zl=de(`<img class="result-image svelte-4hkz46" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),Jl=de("<div><b> </b></div> <!>",1),Ql=de("<div> <!></div>"),es=de('<div class="text-failed svelte-4hkz46"> </div>'),as=de(`<span class="ignore-rule svelte-4hkz46">Para ignorar, colocar <b> </b> en
                                campo de efecto.</span>`),ts=de('<span class="file-error svelte-4hkz46"> <!> <!></span>'),ns=de('<div class="result svelte-4hkz46"><span> </span> <!> <div class="file-errors svelte-4hkz46"></div></div>'),rs=de('<section class="svelte-4hkz46"><h1></h1> <div class="select is-fullwidth mb-2"><select></select></div> <input type="file" accept=".ass" multiple> <!> <!></section>');function os(e,t){Te(t,!0);const n=ce.validarDialogos;let l=N("automático"),i=N("diálogos"),r=N(void 0),u=N(0),a=N(w([]));var p=rs();Ke(V=>{qe.title=n});var h=y(p);h.textContent=n;var g=A(h,2),S=y(g);da(S,21,()=>Ml,ca,(V,$)=>{var D=ql(),B={},E=y(D);m(D),he(()=>{B!==(B=o($))&&(D.value=(D.__value=o($))==null?"":o($)),ie(E,`Modo ${o($)??""}`)}),ne(V,D)}),m(S),m(g);var x=A(g,2);x.__change=[Xl,r,u,a,i,l],$e(x,V=>v(r,V),()=>o(r));var L=A(x,2);{var _=V=>{var $=Jl(),D=De($),B=y(D),E=y(B);m(B),m(D);var T=A(D,2);{var K=j=>{var X=Wl();ne(j,X)},ae=j=>{var X=He(),k=De(X);{var R=U=>{var F=Yl();ne(U,F)},O=U=>{var F=Zl();ne(U,F)};ke(k,U=>{o(u)>10?U(R):U(O,!1)},!0)}ne(j,X)};ke(T,j=>{o(u)===0?j(K):j(ae,!1)})}he(()=>{ga(D,`error-counter text-${(o(u)==0?"success":"failed")??""} mt-2 svelte-4hkz46`),ie(E,`Errores detectados: ${o(u)??""}`)}),ne(V,$)};ke(L,V=>{o(a).length>0&&V(_)})}var C=A(L,2);da(C,17,()=>o(a),ca,(V,$)=>{var D=ns(),B=y(D),E=y(B,!0);m(B);var T=A(B,2);{var K=X=>{var k=Ql(),R=y(k),O=A(R);{var U=F=>{var Z=Wa("Ignorado.");ne(F,Z)};ke(O,F=>{o($).subsType==="carteles"&&F(U)})}m(k),he(()=>{ga(k,`text-success text-${o($).subsType??""} svelte-4hkz46`),ie(R,`¡Todo en orden! Detectado como ${o($).subsType??""}. `)}),ne(X,k)},ae=X=>{var k=es(),R=y(k);m(k),he(()=>ie(R,`Detectado como ${o($).subsType??""}.`)),ne(X,k)};ke(T,X=>{o($).errors.length==0?X(K):X(ae,!1)})}var j=A(T,2);da(j,21,()=>o($).errors,ca,(X,k)=>{var R=ts(),O=y(R),U=A(O);{var F=z=>{Pl(z,{get text(){return o(k).text},rawMode:!1})};ke(U,z=>{o(k).text!=""&&z(F)})}var Z=A(U,2);{var te=z=>{var I=as(),W=A(y(I)),re=y(W,!0);m(W),pa(),m(I),he(()=>ie(re,o(k).ignoreRule)),ne(z,I)};ke(Z,z=>{o(k).ignoreRule!=""&&z(te)})}m(R),he(()=>ie(O,`${o(k).location??""}: ${o(k).error??""}. `)),ne(X,R)}),m(j),m(D),he(()=>{ga(B,`name text-${(o($).errors.length==0?"success":"failed")??""} text-${o($).subsType??""} svelte-4hkz46`),ie(E,o($).fileName)}),ne(V,D)}),m(p),On(S,()=>o(l),V=>v(l,V)),ne(e,p),Ie()}je(["change"]);function ls(e,t){Te(t,!0);let n=N("");Xe(()=>{Oa.subscribe(g=>{g!=null&&v(n,w(g))});const p=new URLSearchParams(location.search).get("pagina")??"",h=In(p)?p:"inicio";Oa.set(h)});var l=He(),i=De(l);{var r=a=>{ol(a)},u=a=>{var p=He(),h=De(p);{var g=x=>{al(x,{})},S=x=>{var L=He(),_=De(L);{var C=$=>{kl($,{})},V=$=>{var D=He(),B=De(D);{var E=K=>{pl(K,{})},T=K=>{var ae=He(),j=De(ae);{var X=R=>{hl(R,{})},k=R=>{var O=He(),U=De(O);{var F=te=>{os(te,{})},Z=te=>{var z=He(),I=De(z);{var W=oe=>{Tl(oe,{})},re=oe=>{var ve=He(),pe=De(ve);{var fe=ue=>{wl(ue,{})},J=ue=>{var me=He(),Pe=De(me);{var we=Ee=>{nl(Ee,{})};ke(Pe,Ee=>{o(n)=="acercaDe"&&Ee(we)},!0)}ne(ue,me)};ke(pe,ue=>{o(n)=="karaokes.dividirSilabas"?ue(fe):ue(J,!1)},!0)}ne(oe,ve)};ke(I,oe=>{o(n)=="karaokes.dividirKaraoke"?oe(W):oe(re,!1)},!0)}ne(te,z)};ke(U,te=>{o(n)=="dialogos.validarDialogos"?te(F):te(Z,!1)},!0)}ne(R,O)};ke(j,R=>{o(n)=="carteles.aplicarColor"?R(X):R(k,!1)},!0)}ne(K,ae)};ke(B,K=>{o(n)=="carteles.aplicarAlpha"?K(E):K(T,!1)},!0)}ne($,D)};ke(_,$=>{o(n)=="carteles.aplicarSecuenciaPosiciones"?$(C):$(V,!1)},!0)}ne(x,L)};ke(h,x=>{o(n)=="carteles.copiarMovimiento"?x(g):x(S,!1)},!0)}ne(a,p)};ke(i,a=>{o(n)=="inicio"?a(r):a(u,!1)})}ne(e,l),Ie()}var ss=de('<section class="svelte-70scd4"><!></section>');function bs(e){var t=ss(),n=y(t);ls(n,{}),m(t),ne(e,t)}export{bs as component,gs as universal};
