import{d as Pe,t as q,e as Ze,s as H,a as A,b as ba,c as Fe}from"../chunks/CwJ6XYGs.js";import"../chunks/BF8XUEzE.js";import{a9 as Ut,aa as zt,ab as ja,J as Ft,X as At,Q as We,ag as Ha,ae as Ga,R as Pa,O as _a,g as a,j as Ba,V as Ua,W as Kt,Y as It,a0 as ht,am as za,Z as ma,_ as $t,$ as Ka,av as xa,aq as Ea,N as Ya,m as qa,H as Yt,aw as Ot,a3 as Xa,ax as jt,ay as Wa,az as Ht,aA as qt,aB as Ja,ap as Qa,aC as Za,aD as ya,aE as en,ad as tn,T as an,n as nn,aF as rn,b as Ca,a2 as Sa,a1 as ka,y as De,a as Gt,a7 as m,l as o,a6 as Be,aG as et,C as u,E as h,D as d,A as ce,B as Me,aH as vt,a8 as wt,z as Se}from"../chunks/CCHRc5u3.js";import{a as sn,p as w,i as ie,b as Ae}from"../chunks/CBNot3_l.js";import{f as on,p as Qe,h as xe,i as wa,j as ln,k as ct,r as Vt,T as ze,l as Ta,m as ke,n as we,t as ue,o as Re,q as Ve,s as nt,B as cn,c as dn,u as un,v as vn,b as ot,w as fn,x as Lt,y as qe,z as hn,A as gn,C as pn,D as bn,E as _n,F as Xe,G as mn,H as xn,I as En,J as yn,K as Cn,L as Ra,M as Sn,N as Xt,O as Wt,P as Nt,Q as Ge,R as Jt,S as kn,U as wn,V as Tn,a as Qt,W as Rn}from"../chunks/D6-snBnj.js";import{p as Ke}from"../chunks/C-7UMIG7.js";function An(e){var t=ja,n=Ft;Ut(null),zt(null);try{return e()}finally{Ut(t),zt(n)}}function Pt(e,t,n,r=n){e.addEventListener(t,()=>An(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),on()}function gt(e,t){return t}function In(e,t,n,r){for(var s=[],i=t.length,l=0;l<i;l++)Ja(t[l].e,s,!0);var c=i>0&&s.length===0&&n!==null;if(c){var g=n.parentNode;Qa(g),g.append(n),r.clear(),rt(e,t[0].prev,t[i-1].next)}Za(s,()=>{for(var x=0;x<i;x++){var C=t[x];c||(r.delete(C.k),rt(e,C.prev,C.next)),ya(C.e,!c)}})}function pt(e,t,n,r,s,i=null){var l=e,c={items:new Map,first:null},g=(t&xa)!==0;if(g){var x=e;l=We?At(Ha(x)):x.appendChild(Ga())}We&&Pa();var C=null,k=!1,f=Ba(()=>{var p=n();return Ya(p)?p:p==null?[]:Ea(p)});_a(()=>{var p=a(f),b=p.length;if(k&&b===0)return;k=b===0;let N=!1;if(We){var F=l.data===Ua;F!==(b===0)&&(l=Kt(),At(l),It(!1),N=!0)}if(We){for(var T=null,X,G=0;G<b;G++){if(ht.nodeType===8&&ht.data===za){l=ht,N=!0,It(!1);break}var R=p[G],I=r(R,G);X=Aa(ht,c,T,null,R,I,G,s,t,n),c.items.set(I,X),T=X}b>0&&At(Kt())}We||On(p,c,l,s,t,r,n),i!==null&&(b===0?C?ma(C):C=$t(()=>i(l)):C!==null&&Ka(C,()=>{C=null})),N&&It(!0),a(f)}),We&&(l=ht)}function On(e,t,n,r,s,i,l){var P,Q,O,W;var c=(s&Wa)!==0,g=(s&(Ht|jt))!==0,x=e.length,C=t.items,k=t.first,f=k,p,b=null,N,F=[],T=[],X,G,R,I;if(c)for(I=0;I<x;I+=1)X=e[I],G=i(X,I),R=C.get(G),R!==void 0&&((P=R.a)==null||P.measure(),(N??(N=new Set)).add(R));for(I=0;I<x;I+=1){if(X=e[I],G=i(X,I),R=C.get(G),R===void 0){var J=f?f.e.nodes_start:n;b=Aa(J,t,b,b===null?t.first:b.next,X,G,I,r,s,l),C.set(G,b),F=[],T=[],f=b.next;continue}if(g&&Ln(R,X,I,s),R.e.f&Ot&&(ma(R.e),c&&((Q=R.a)==null||Q.unfix(),(N??(N=new Set)).delete(R))),R!==f){if(p!==void 0&&p.has(R)){if(F.length<T.length){var U=T[0],M;b=U.prev;var z=F[0],K=F[F.length-1];for(M=0;M<F.length;M+=1)Zt(F[M],U,n);for(M=0;M<T.length;M+=1)p.delete(T[M]);rt(t,z.prev,K.next),rt(t,b,z),rt(t,K,U),f=U,b=K,I-=1,F=[],T=[]}else p.delete(R),Zt(R,f,n),rt(t,R.prev,R.next),rt(t,R,b===null?t.first:b.next),rt(t,b,R),b=R;continue}for(F=[],T=[];f!==null&&f.k!==G;)f.e.f&Ot||(p??(p=new Set)).add(f),T.push(f),f=f.next;if(f===null)continue;R=f}F.push(R),b=R,f=R.next}if(f!==null||p!==void 0){for(var B=p===void 0?[]:Ea(p);f!==null;)f.e.f&Ot||B.push(f),f=f.next;var de=B.length;if(de>0){var j=s&xa&&x===0?n:null;if(c){for(I=0;I<de;I+=1)(O=B[I].a)==null||O.measure();for(I=0;I<de;I+=1)(W=B[I].a)==null||W.fix()}In(t,B,j,C)}}c&&Xa(()=>{var te;if(N!==void 0)for(R of N)(te=R.a)==null||te.apply()}),Ft.first=t.first&&t.first.e,Ft.last=b&&b.e}function Ln(e,t,n,r){r&Ht&&qt(e.v,t),r&jt?qt(e.i,n):e.i=n}function Aa(e,t,n,r,s,i,l,c,g,x){var C=(g&Ht)!==0,k=(g&en)===0,f=C?k?qa(s):Yt(s):s,p=g&jt?Yt(l):l,b={i:p,v:f,k:i,a:null,e:null,prev:n,next:r};try{return b.e=$t(()=>c(e,f,p,x),We),b.e.prev=n&&n.e,b.e.next=r&&r.e,n===null?t.first=b:(n.next=b,n.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{}}function Zt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==r;){var l=tn(i);s.before(i),i=l}}function rt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Nn(e,t,...n){var r=e,s=nn,i;_a(()=>{s!==(s=t())&&(i&&(ya(i),i=null),i=$t(()=>s(r,...n)))},an),We&&(r=ht)}function Ia(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ia(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Dn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ia(e))&&(r&&(r+=" "),r+=t);return r}function Mn(e){return typeof e=="object"?Dn(e):e??""}function me(e,t,n=t){var r=rn();Pt(e,"input",s=>{var i=s?e.defaultValue:e.value;if(i=Dt(e)?Mt(i):i,n(i),r&&i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd;e.value=i??"",c!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(c,e.value.length))}}),(We&&e.defaultValue!==e.value||Ca(t)==null&&e.value)&&n(Dt(e)?Mt(e.value):e.value),Sa(()=>{var s=t();Dt(e)&&s===Mt(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function at(e,t,n=t){Pt(e,"change",r=>{var s=r?e.defaultChecked:e.checked;n(s)}),(We&&e.defaultChecked!==e.checked||Ca(t)==null)&&n(e.checked),Sa(()=>{var r=t();e.checked=!!r})}function Dt(e){var t=e.type;return t==="number"||t==="range"}function Mt(e){return e===""?null:+e}function Oa(e,t,n){if(e.multiple)return $n(e,t);for(var r of e.options){var s=mt(r);if(sn(s,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e,t){ka(()=>{var n=new MutationObserver(()=>{var r=e.__value;Oa(e,r)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Vn(e,t,n=t){var r=!0;Pt(e,"change",s=>{var i=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(i),mt);else{var c=e.querySelector(i)??e.querySelector("option:not([disabled])");l=c&&mt(c)}n(l)}),ka(()=>{var s=t();if(Oa(e,s,r),r&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=mt(i),n(s))}e.__value=s,r=!1}),Fn(e)}function $n(e,t){for(var n of e.options)n.selected=~t.indexOf(mt(n))}function mt(e){return"__value"in e?e.__value:e.value}const jn=!0,bi=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));var Hn=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),Gn=(e,t)=>t(),Pn=()=>{},Bn=q('<section class="svelte-jzi2e1"><h1></h1> <!> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function Un(e,t){De(t,!0);const n=ue.copiarMovimiento;let r=m("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),s=m(""),i=m(""),l=m(""),c=m("");Gt(()=>{g(a(r),a(s))});function g(j,P){if(o(l,""),o(i,""),o(c,""),P.length==0)return;const Q=P.split(`
`),O=Qe(j);if(O==null){o(c,`Movimiento base, línea inválida: '${j}'`);return}const W=xe(O.content),te=wa(W);if(te==null){o(c,`Movimiento base, \\move no encontrado: '${j}'`);return}o(l,w(ln({tags:[te]})));const ee=te.x2-te.x1,le=te.y2-te.y1;let ne="";for(let oe=0;oe<Q.length;oe++){const D=Q[oe];if(D.length==0)continue;const re=Qe(D);if(re==null){o(c,`Subtítulos, línea ${oe+1} inválida: '${D}'`);break}const y=xe(re.content),E=ct(y);if(E==null){o(c,`Subtítulos, línea ${oe+1}, \\pos no encontrado: '${D}'`);break}Vt(y,ze.pos);const L=E.x,fe=E.y,Ie=E.x+ee,he=E.y+le;Ta(y,L,fe,Ie,he,te.t1,te.t2),re.content=ke(y);const pe=we(re);oe>0&&(ne+=`
`),ne+=pe}o(i,w(ne))}async function x(){await navigator.clipboard.writeText(a(i)),alert("¡Líneas copiadas al portapapeles!")}function C(){for(let j=1;j<=10;j++){const P=182+j*5,Q=421+j*7;o(s,a(s)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${P},${Q})}LINEA ${j}
`)}}Be(()=>{C()});var k=Bn();Ze(j=>{et.title=n});var f=u(k);f.textContent=n;var p=h(f,2);{var b=j=>{var P=Hn(),Q=u(P,!0);d(P),ce(()=>H(Q,a(c))),A(j,P)};ie(p,j=>{a(c)!=""&&j(b)})}var N=h(p,2),F=h(u(N),2),T=u(F);Re(T),d(F),d(N);var X=h(N,2),G=u(X),R=u(G,!0);d(G);var I=h(G,2),J=u(I);Ve(J),d(I),d(X);var U=h(X,2),M=u(U),z=u(M),K=h(z);K.__click=[Gn,x],K.__keydown=[Pn],d(M);var B=h(M,2),de=u(B);Ve(de),d(B),d(U),d(k),ce(()=>{nt(T,`input ${(a(l)==""?"is-danger":"")??""}`),H(R,ue.subtitulos),H(z,`${ue.resultado} `)}),me(T,()=>a(r),j=>o(r,j)),me(J,()=>a(s),j=>o(s,j)),me(de,()=>a(i),j=>o(i,j)),A(e,k),Me()}Pe(["click","keydown"]);var zn=q('<span class="version svelte-ud7v5s"><a target="_blank"> </a></span>'),Kn=q(`<div class="text-column"><h1></h1> <div class="kagamin svelte-ud7v5s"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-ud7v5s"></div> <!> <p>Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Yn(e,t){De(t,!0);const n=ue.acercaDe;let r=m(w(cn.parse({})));Be(async()=>{dn.subscribe(g=>{g!=null&&o(r,w(g))})});var s=Kn();Ze(g=>{et.title=n});var i=u(s);i.textContent=n;var l=h(i,4);{var c=g=>{var x=zn(),C=u(x),k=u(C);d(C),d(x),ce((f,p)=>{ot(C,"href",f),H(k,`Versión ${a(r).ref??""}.${p??""}`)},[()=>un(a(r).actor,a(r).repo,a(r).sha),()=>vn(a(r).sha)]),A(g,x)};ie(l,g=>{a(r).sha!=""&&g(c)})}vt(18),d(s),A(e,s),Me()}var qn=q('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Xn(e){var t=qn();Ze(n=>{et.title="Asu"}),A(e,t)}var Wn=(e,t)=>t(),Jn=q("<b> </b>"),Qn=q('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Je(e,t){De(t,!0);let n=Ke(t,"label",3,""),r=Ke(t,"disabled",15,!1),s=Ke(t,"startValue",15,""),i=Ke(t,"endValue",15,""),l=Ke(t,"startPlaceholder",3,""),c=Ke(t,"endPlaceholder",3,""),g=m(void 0);function x(){var K;if((K=a(g))!=null&&K.checked){C();return}k()}function C(){r()&&(r(!1),a(g)&&(a(g).checked=!0),t.onEnabled&&t.onEnabled())}function k(){r()||(r(!0),a(g)&&(a(g).checked=!1),t.onDisabled&&t.onDisabled())}Be(()=>{a(g)&&(a(g).checked=!r())});var f=Qn(),p=u(f),b=u(p),N=u(b);N.__change=[Wn,x],Ae(N,K=>o(g,K),()=>a(g));var F=h(N,2);{var T=K=>{var B=ba();ce(()=>H(B,`${n()??""}
                (deshabilitado)`)),A(K,B)},X=K=>{var B=Jn(),de=u(B,!0);d(B),ce(()=>H(de,n())),A(K,B)};ie(F,K=>{r()?K(T):K(X,!1)})}d(b),d(p);var G=h(p,2),R=u(G),I=h(u(R),2),J=u(I);Re(J),d(I),d(R);var U=h(R,2),M=h(u(U),2),z=u(M);return Re(z),d(M),d(U),d(G),d(f),ce(()=>{ot(J,"placeholder",l()),J.disabled=r(),ot(z,"placeholder",c()),z.disabled=r()}),me(J,s),me(z,i),A(e,f),Me({enable:C,disable:k})}Pe(["change"]);function bt(e,t){const n=[];for(let r=e;r<=t;r++){const s=fn(r);n.push(s)}return n}function _t(e,t,n){const r=Array(n),s=Lt(e.blue,t.blue,n);if(s.length!==n)return console.error(`ERROR: blue interpolated values ${s.length} don't match intervals ${n}`),[];const i=Lt(e.green,t.green,n);if(i.length!==n)return console.error(`ERROR: green interpolated values ${i.length} don't match intervals ${n}`),[];const l=Lt(e.red,t.red,n);if(l.length!==n)return console.error(`ERROR: red interpolated values ${l.length} don't match intervals ${n}`),[];for(var c=0;c<n;c++){const g=Math.floor(s[c]),x=Math.floor(i[c]),C=Math.floor(l[c]);r[c]={blue:g,green:x,red:C}}return r}var Zn=(e,t)=>t(),er=()=>{},tr=q('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function La(e,t){De(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ue.lineasCopiadas)}var r=tr();r.__click=[Zn,n],r.__keydown=[er],ce(()=>ot(r,"title",ue.copiar)),A(e,r),Me()}Pe(["click","keydown"]);var ar=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),nr=(e,t)=>t(),rr=q('<section class="svelte-jzi2e1"><h1></h1> <!> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function sr(e,t){De(t,!0);const n=ue.aplicarAlpha,r="0",s="FF";let i=m(""),l=m(void 0),c=m(""),g=m(""),x=m("0"),C=m("FF"),k=m("0"),f=m("FF"),p=m("0"),b=m("FF"),N=m("0"),F=m("FF"),T=m("0"),X=m("FF"),G=m(!1),R=m(!0),I=m(!0),J=m(!0),U=m(!0),M=m(void 0),z=m(void 0),K=m(void 0),B=m(void 0),de=m(void 0),j=m(!1);function P(){var v,S,_e,V;(v=a(z))==null||v.disable(),(S=a(K))==null||S.disable(),(_e=a(B))==null||_e.disable(),(V=a(de))==null||V.disable()}function Q(){var v,S,_e,V;a(R)&&a(I)&&a(J)&&a(U)&&((v=a(z))==null||v.enable(),(S=a(K))==null||S.disable(),(_e=a(B))==null||_e.disable(),(V=a(de))==null||V.disable())}function O(){var v;(v=a(M))==null||v.disable()}function W(){var v;a(R)&&a(I)&&a(J)&&a(U)&&((v=a(M))==null||v.enable())}async function te(){var v;try{o(g,""),o(i,"");const S=[],_e=a(c).split(`
`);for(const V of _e){if(V.length==0)continue;const Z=Qe(V);Z!=null&&S.push(Z)}if(!a(G)){const V=qe(a(x)),Z=qe(a(C));if(V>=Z){o(i,"El inicio de alpha total debe ser menor al fin");return}if(V<0){o(i,"El inicio de alpha total debe ser mayor o igual a 00 (0)");return}if(Z>255){o(i,"El fin de alpha total debe ser menor o igual a FF (255)");return}const Y=bt(V,Z);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){let $=Math.floor(Y.length*_/S.length);$>=Y.length&&($=Y.length-1);const ge=`&H${Y[$]}&`,Ee=xe(S[_].content);hn(Ee,ge),S[_].content=ke(Ee);const Le=we(S[_]);_>0&&(se+=`
`),se+=Le}o(g,w(se));return}if(!a(R)){const V=qe(a(k)),Z=qe(a(f));if(V>=Z){o(i,"El inicio de alpha 1 debe ser menor al fin");return}if(V<0){o(i,"El inicio de alpha 1 debe ser mayor o igual a 00 (0)");return}if(Z>255){o(i,"El fin de alpha 1 debe ser menor o igual a FF (255)");return}const Y=bt(V,Z);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){let $=Math.floor(Y.length*_/S.length);$>=Y.length&&($=Y.length-1);const ge=`&H${Y[$]}&`,Ee=xe(S[_].content);gn(Ee,ge),S[_].content=ke(Ee);const Le=we(S[_]);_>0&&(se+=`
`),se+=Le}o(g,w(se))}if(!a(I)){const V=qe(a(p)),Z=qe(a(b));if(V>=Z){o(i,"El inicio de alpha 2 debe ser menor al fin");return}if(V<0){o(i,"El inicio de alpha 2 debe ser mayor o igual a 00 (0)");return}if(Z>255){o(i,"El fin de alpha 2 debe ser menor o igual a FF (255)");return}const Y=bt(V,Z);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){let $=Math.floor(Y.length*_/S.length);$>=Y.length&&($=Y.length-1);const ge=`&H${Y[$]}&`,Ee=xe(S[_].content);pn(Ee,ge),S[_].content=ke(Ee);const Le=we(S[_]);_>0&&(se+=`
`),se+=Le}o(g,w(se))}if(!a(J)){const V=qe(a(N)),Z=qe(a(F));if(V>=Z){o(i,"El inicio de alpha 3 debe ser menor al fin");return}if(V<0){o(i,"El inicio de alpha 3 debe ser mayor o igual a 00 (0)");return}if(Z>255){o(i,"El fin de alpha 3 debe ser menor o igual a FF (255)");return}const Y=bt(V,Z);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){let $=Math.floor(Y.length*_/S.length);$>=Y.length&&($=Y.length-1);const ge=`&H${Y[$]}&`,Ee=xe(S[_].content);bn(Ee,ge),S[_].content=ke(Ee);const Le=we(S[_]);_>0&&(se+=`
`),se+=Le}o(g,w(se))}if(!a(U)){const V=qe(a(T)),Z=qe(a(X));if(V>=Z){o(i,"El inicio de alpha 4 debe ser menor al fin");return}if(V<0){o(i,"El inicio de alpha 4 debe ser mayor o igual a 00 (0)");return}if(Z>255){o(i,"El fin de alpha 4 debe ser menor o igual a FF (255)");return}const Y=bt(V,Z);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){let $=Math.floor(Y.length*_/S.length);$>=Y.length&&($=Y.length-1);const ge=`&H${Y[$]}&`,Ee=xe(S[_].content);_n(Ee,ge),S[_].content=ke(Ee);const Le=we(S[_]);_>0&&(se+=`
`),se+=Le}o(g,w(se))}}catch(S){console.error("error al procesar líneas",S)}finally{await wt(),(v=a(l))==null||v.scrollIntoView({behavior:"smooth"})}}Be(()=>{for(let v=1;v<=10;v++)o(c,a(c)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${v}
`)});var ee=rr();Ze(v=>{et.title=n});var le=u(ee);le.textContent=n;var ne=h(le,2);{var oe=v=>{var S=ar(),_e=u(S,!0);d(S),Ae(S,V=>o(l,V),()=>a(l)),ce(()=>H(_e,a(i))),A(v,S)};ie(ne,v=>{a(i)!=""&&v(oe)})}var D=h(ne,4);Ae(Je(D,{label:"Alpha total",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>P(),onDisabled:()=>Q(),get startValue(){return a(x)},set startValue(v){o(x,w(v))},get endValue(){return a(C)},set endValue(v){o(C,w(v))},get disabled(){return a(G)},set disabled(v){o(G,w(v))}}),v=>o(M,w(v)),()=>a(M));var re=h(D,2);Ae(Je(re,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(k)},set startValue(v){o(k,w(v))},get endValue(){return a(f)},set endValue(v){o(f,w(v))},get disabled(){return a(R)},set disabled(v){o(R,w(v))}}),v=>o(z,w(v)),()=>a(z));var y=h(re,2);Ae(Je(y,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(p)},set startValue(v){o(p,w(v))},get endValue(){return a(b)},set endValue(v){o(b,w(v))},get disabled(){return a(I)},set disabled(v){o(I,w(v))}}),v=>o(K,w(v)),()=>a(K));var E=h(y,2);Ae(Je(E,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(N)},set startValue(v){o(N,w(v))},get endValue(){return a(F)},set endValue(v){o(F,w(v))},get disabled(){return a(J)},set disabled(v){o(J,w(v))}}),v=>o(B,w(v)),()=>a(B));var L=h(E,2);Ae(Je(L,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(T)},set startValue(v){o(T,w(v))},get endValue(){return a(X)},set endValue(v){o(X,w(v))},get disabled(){return a(U)},set disabled(v){o(U,w(v))}}),v=>o(de,w(v)),()=>a(de));var fe=h(L,2),Ie=u(fe);Re(Ie),vt(),d(fe);var he=h(fe,2),pe=u(he),$e=u(pe,!0);d(pe);var ye=h(pe,2),Oe=u(ye);Ve(Oe),d(ye),d(he);var be=h(he,2);be.__click=[nr,te];var He=u(be,!0);d(be);var Ce=h(be,2),ae=u(Ce),Ye=u(ae),Ue=h(Ye);La(Ue,{get rawResultLines(){return a(g)}}),d(ae);var Ne=h(ae,2),Te=u(Ne);Ve(Te),d(Ne),d(Ce),d(ee),ce(()=>{H($e,ue.subtitulos),H(He,ue.aplicarAlpha),H(Ye,`${ue.resultado} `)}),at(Ie,()=>a(j),v=>o(j,v)),me(Oe,()=>a(c),v=>o(c,v)),me(Te,()=>a(g),v=>o(g,v)),A(e,ee),Me()}Pe(["click"]);var ir=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),or=(e,t)=>t(),lr=q('<section class="svelte-jzi2e1"><h1></h1> <!> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function cr(e,t){De(t,!0);const n=ue.aplicarColor,r="&HFFFFFF&",s="&H000000&";let i=m(""),l=m(void 0),c=m(""),g=m(""),x=m(r),C=m(s),k=m(r),f=m(s),p=m(r),b=m(s),N=m(r),F=m(s),T=m(r),X=m(s),G=m(!1),R=m(!0),I=m(!0),J=m(!0),U=m(!0),M=m(void 0),z=m(void 0),K=m(void 0),B=m(void 0),de=m(void 0),j=m(!1);function P(){var v,S,_e,V;(v=a(z))==null||v.disable(),(S=a(K))==null||S.disable(),(_e=a(B))==null||_e.disable(),(V=a(de))==null||V.disable()}function Q(){var v,S,_e,V;a(R)&&a(I)&&a(J)&&a(U)&&((v=a(z))==null||v.enable(),(S=a(K))==null||S.disable(),(_e=a(B))==null||_e.disable(),(V=a(de))==null||V.disable())}function O(){var v;(v=a(M))==null||v.disable()}function W(){var v;a(R)&&a(I)&&a(J)&&a(U)&&((v=a(M))==null||v.enable())}async function te(){var v;try{o(g,""),o(i,"");const S=[],_e=a(c).split(`
`);for(const V of _e){if(V.length==0)continue;const Z=Qe(V);Z!=null&&S.push(Z)}if(!a(G)){const V=Xe(a(x));if(V==null){o(i,`Color total de inicio inválido: ${a(x)}`);return}const Z=Xe(a(C));if(Z==null){o(i,`Color total de fin inválido: ${a(C)}`);return}const Y=_t(V,Z,S.length);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){const $=Y[_],ve=xe(S[_].content);mn(ve,$.blue,$.green,$.red),S[_].content=ke(ve);const ge=we(S[_]);_>0&&(se+=`
`),se+=ge}o(g,w(se));return}if(!a(R)){const V=Xe(a(k));if(V==null){o(i,`Color 1 de inicio inválido: ${a(k)}`);return}const Z=Xe(a(f));if(Z==null){o(i,`Color 1 de fin inválido: ${a(f)}`);return}const Y=_t(V,Z,S.length);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){const $=Y[_],ve=xe(S[_].content);xn(ve,$.blue,$.green,$.red),S[_].content=ke(ve);const ge=we(S[_]);_>0&&(se+=`
`),se+=ge}o(g,w(se))}if(!a(I)){const V=Xe(a(p));if(V==null){o(i,`Color 2 de inicio inválido: ${a(p)}`);return}const Z=Xe(a(b));if(Z==null){o(i,`Color 2 de fin inválido: ${a(b)}`);return}const Y=_t(V,Z,S.length);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){const $=Y[_],ve=xe(S[_].content);En(ve,$.blue,$.green,$.red),S[_].content=ke(ve);const ge=we(S[_]);_>0&&(se+=`
`),se+=ge}o(g,w(se))}if(!a(J)){const V=Xe(a(N));if(V==null){o(i,`Color 3 de inicio inválido: ${a(N)}`);return}const Z=Xe(a(F));if(Z==null){o(i,`Color 3 de fin inválido: ${a(F)}`);return}const Y=_t(V,Z,S.length);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){const $=Y[_],ve=xe(S[_].content);yn(ve,$.blue,$.green,$.red),S[_].content=ke(ve);const ge=we(S[_]);_>0&&(se+=`
`),se+=ge}o(g,w(se))}if(!a(U)){const V=Xe(a(T));if(V==null){o(i,`Color 4 de inicio inválido: ${a(T)}`);return}const Z=Xe(a(X));if(Z==null){o(i,`Color 4 de fin inválido: ${a(X)}`);return}const Y=_t(V,Z,S.length);a(j)&&Y.reverse();let se="";for(let _=0;_<S.length;_++){const $=Y[_],ve=xe(S[_].content);Cn(ve,$.blue,$.green,$.red),S[_].content=ke(ve);const ge=we(S[_]);_>0&&(se+=`
`),se+=ge}o(g,w(se))}}catch(S){console.error("error al procesar líneas",S)}finally{await wt(),(v=a(l))==null||v.scrollIntoView({behavior:"smooth"})}}Be(()=>{o(c,a(c)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),o(c,a(c)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var ee=lr();Ze(v=>{et.title=n});var le=u(ee);le.textContent=n;var ne=h(le,2);{var oe=v=>{var S=ir(),_e=u(S,!0);d(S),Ae(S,V=>o(l,V),()=>a(l)),ce(()=>H(_e,a(i))),A(v,S)};ie(ne,v=>{a(i)!=""&&v(oe)})}var D=h(ne,4);Ae(Je(D,{label:"Color total",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>P(),onDisabled:()=>Q(),get startValue(){return a(x)},set startValue(v){o(x,w(v))},get endValue(){return a(C)},set endValue(v){o(C,w(v))},get disabled(){return a(G)},set disabled(v){o(G,w(v))}}),v=>o(M,w(v)),()=>a(M));var re=h(D,2);Ae(Je(re,{label:"Color 1",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(k)},set startValue(v){o(k,w(v))},get endValue(){return a(f)},set endValue(v){o(f,w(v))},get disabled(){return a(R)},set disabled(v){o(R,w(v))}}),v=>o(z,w(v)),()=>a(z));var y=h(re,2);Ae(Je(y,{label:"Color 2",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(p)},set startValue(v){o(p,w(v))},get endValue(){return a(b)},set endValue(v){o(b,w(v))},get disabled(){return a(I)},set disabled(v){o(I,w(v))}}),v=>o(K,w(v)),()=>a(K));var E=h(y,2);Ae(Je(E,{label:"Color 3",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(N)},set startValue(v){o(N,w(v))},get endValue(){return a(F)},set endValue(v){o(F,w(v))},get disabled(){return a(J)},set disabled(v){o(J,w(v))}}),v=>o(B,w(v)),()=>a(B));var L=h(E,2);Ae(Je(L,{label:"Color 4",startPlaceholder:r,endPlaceholder:s,onEnabled:()=>O(),onDisabled:()=>W(),get startValue(){return a(T)},set startValue(v){o(T,w(v))},get endValue(){return a(X)},set endValue(v){o(X,w(v))},get disabled(){return a(U)},set disabled(v){o(U,w(v))}}),v=>o(de,w(v)),()=>a(de));var fe=h(L,2),Ie=u(fe);Re(Ie),vt(),d(fe);var he=h(fe,2),pe=u(he),$e=u(pe,!0);d(pe);var ye=h(pe,2),Oe=u(ye);Ve(Oe),d(ye),d(he);var be=h(he,2);be.__click=[or,te];var He=u(be,!0);d(be);var Ce=h(be,2),ae=u(Ce),Ye=u(ae),Ue=h(Ye);La(Ue,{get rawResultLines(){return a(g)}}),d(ae);var Ne=h(ae,2),Te=u(Ne);Ve(Te),d(Ne),d(Ce),d(ee),ce(()=>{H($e,ue.subtitulos),H(He,ue.aplicarColor),H(Ye,`${ue.resultado} `)}),at(Ie,()=>a(j),v=>o(j,v)),me(Oe,()=>a(c),v=>o(c,v)),me(Te,()=>a(g),v=>o(g,v)),A(e,ee),Me()}Pe(["click"]);var dr=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),ur=(e,t)=>t(),vr=()=>{},fr=q('<section class="svelte-jzi2e1"><h1></h1> <!> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function hr(e,t){De(t,!0);const n=ue.aplicarSecuenciaPosiciones;let r=m(""),s=m(""),i=m(""),l=m(!1),c=m("");Gt(()=>{g(a(r),a(s),a(l))});function g(O,W,te){if(o(c,""),o(i,""),W.length==0)return;const ee=[];{const oe=O.split(`
`);for(let D=0;D<oe.length;D++){const re=oe[D];if(re.length==0)continue;const y=Qe(re);if(y==null)continue;const E=xe(y.content);if(ct(E)==null){o(c,`Secuencia, línea ${D+1}, \\pos no encontrado: '${re}'`);return}ee.push(y)}}const le=[];{const oe=W.split(`
`);for(let D=0;D<oe.length;D++){const re=oe[D];if(re.length==0)continue;const y=Qe(re);if(y==null)continue;const E=xe(y.content);if(ct(E)==null){o(c,`Subtítulos, línea ${D+1}, \\pos no encontrado: '${re}'`);return}le.push(y)}}let ne="";for(let oe=0;oe<le.length;oe++){const D=le[oe],re=xe(D.content),y=ct(re);if(y==null){const he=we(D);o(c,`Subtítulos, línea ${oe+1}, \\pos no encontrado: '${he}'`);return}let E=y.x,L=y.y;te&&ee.reverse();const fe=x(ee),Ie=[];for(let he=0;he<ee.length;he++){const pe=fe[he][0],$e=fe[he][1],ye=E+pe,Oe=L+$e;E=ye,L=Oe,Ra(re,ye,Oe),D.content=ke(re);const be=ee[he];D.start=be.start,D.end=be.end,Ie.push(structuredClone(D))}te&&(ee.reverse(),Ie.reverse());for(const he of Ie)ne+=we(he)+`
`}o(i,w(ne))}function x(O){const te=[[0,0]];for(let ee=0;ee<O.length-1;ee++){const le=O[ee],ne=O[ee+1],oe=xe(le.content),D=ct(oe);if(D==null)return o(c,`Subtítulos, línea ${ee+1}, \\pos no encontrado: '${we(le)}'`),[];const re=xe(ne.content),y=ct(re);if(y==null)return o(c,`Subtítulos, línea ${ee+2}, \\pos encontrado: '${we(ne)}'`),[];const E=y.x-D.x,L=y.y-D.y;te.push([E,L])}return te}async function C(){await navigator.clipboard.writeText(a(i)),alert("¡Líneas copiadas al portapapeles!")}function k(){o(r,a(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),o(r,a(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),o(r,a(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),o(s,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")}Be(()=>{k()});var f=fr();Ze(O=>{et.title=n});var p=u(f);p.textContent=n;var b=h(p,2);{var N=O=>{var W=dr(),te=u(W,!0);d(W),ce(()=>H(te,a(c))),A(O,W)};ie(b,O=>{a(c)!=""&&O(N)})}var F=h(b,2),T=h(u(F),2),X=u(T);Ve(X),d(T),d(F);var G=h(F,2),R=u(G);Re(R),vt(),d(G);var I=h(G,2),J=u(I),U=u(J,!0);d(J);var M=h(J,2),z=u(M);Ve(z),d(M),d(I);var K=h(I,2),B=u(K),de=u(B),j=h(de);j.__click=[ur,C],j.__keydown=[vr],d(B);var P=h(B,2),Q=u(P);Ve(Q),d(P),d(K),d(f),ce(()=>{H(U,ue.subtitulos),H(de,`${ue.resultado} `)}),me(X,()=>a(r),O=>o(r,O)),at(R,()=>a(l),O=>o(l,O)),me(z,()=>a(s),O=>o(s,O)),me(Q,()=>a(i),O=>o(i,O)),A(e,f),Me()}Pe(["click","keydown"]);var gr=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),pr=(e,t)=>t(),br=()=>{},_r=q('<section class="svelte-jzi2e1"><h1></h1> <!> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function mr(e,t){De(t,!0);const n=ue.dividirSilabas;let r=m(""),s=m(""),i=m(""),l=m("");function c(){if(o(r,""),o(l,""),a(i).length==0)return;const M=a(i).split(`
`);let z="";for(let K=0;K<M.length;K++){const B=M[K];if(B.length==0)continue;const de=Qe(B);if(de==null){o(r,`Subtítulos, línea ${K+1} inválida: '${B}'`);break}Sn(de);const j=we(de);K>0&&(z+=`
`),z+=j}o(l,w(z))}async function g(){await navigator.clipboard.writeText(a(l)),alert("¡Líneas copiadas al portapapeles!")}Be(()=>{o(s,a(s)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),o(s,a(s)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),o(s,a(s)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`),o(i,w(a(s))),c()});var x=_r();Ze(M=>{et.title=n});var C=u(x);C.textContent=n;var k=h(C,2);{var f=M=>{var z=gr(),K=u(z,!0);d(z),ce(()=>H(K,a(r))),A(M,z)};ie(k,M=>{a(r)!=""&&M(f)})}var p=h(k,2),b=u(p),N=u(b);d(b);var F=h(b,2),T=u(F);Ve(T),T.__input=c,d(F),d(p);var X=h(p,2),G=u(X),R=u(G),I=h(R);I.__click=[pr,g],I.__keydown=[br],d(G);var J=h(G,2),U=u(J);Ve(U),d(J),d(X),d(x),ce(()=>{H(N,`${ue.subtitulos} (romaji)`),ot(T,"placeholder",a(s)),H(R,`${ue.resultado} `)}),me(T,()=>a(i),M=>o(i,M)),me(U,()=>a(l),M=>o(l,M)),A(e,x),Me()}Pe(["input","click","keydown"]);var xr=q('<p class="error svelte-tm085k"> </p>'),Er=q("<button> </button>"),yr=q('<p class="preview"> <b> </b></p>'),Cr=(e,t)=>t(),Sr=()=>{},kr=q('<section class="svelte-tm085k"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <!> <div class="mb-2"><label class="label mt-2" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function wr(e,t){De(t,!0);const n=ue.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let s=m(r),i=m(w([])),l=m(""),c=m(w([])),g=m(0),x=m("");function C(){const P=Qe(a(s));if(P==null)return;const Q=xe(P.content);Xt(Q);const O=0;let W=a(c)[a(g)].index+1,te=0;for(let L=0;L<=a(g);L++){const fe=a(c)[L];fe.centiseconds!=null&&(te+=fe.centiseconds)}const ee=Wt(P.start),le=Wt(P.end),ne=Q.slice(O,W);P.content=ke(ne);const oe=te/100;P.end=Nt(ee+oe),o(l,w(we(P)));let D=!0,re=0;for(;D;){const L=Q[W+1];if((L==null?void 0:L.name)!="text"){D=!1;break}if(D=L.value.replaceAll(" ","").length===0,D&&(W+=2,re++),re>a(c).length)break}let y=0;for(let L=a(g)+1+re;L<a(c).length;L++){const fe=a(c)[L];fe.centiseconds!=null&&(y+=fe.centiseconds)}const E=Q.slice(W);P.end=Nt(le),P.start=Nt(le-y/100),P.content=ke(E),o(l,a(l)+(`
`+we(P))),o(i,w([ke(ne.filter(L=>L.name=="text")),ke(E.filter(L=>L.name=="text"))]))}async function k(){await navigator.clipboard.writeText(a(l)),alert("¡Líneas copiadas al portapapeles!")}function f(){o(i,w([])),o(l,""),o(c,w([])),o(g,0),o(x,"");const P=Qe(a(s));if(P==null)return o(x,`Línea de karaoke inválida. Se esperaba el formato: <${r}>.`),[];const Q=xe(P.content);Xt(Q);for(let O=0;O<Q.length;O++){const W=Q[O];if(W.name!="text")continue;a(c).push({index:O,text:W.value.replaceAll(" ",""),centiseconds:null});const te=O-1;if(te<0)continue;const ee=Q[te];if(ee.name!="effect")continue;const le=ee.tags.find(oe=>oe.name===ze.kLowerCase||oe.name===ze.kUpperCase||oe.name===ze.kf||oe.name===ze.ko);le==null||!(le.name===ze.kLowerCase||le.name===ze.kUpperCase||le.name===ze.kf||le.name===ze.ko)||(a(c)[a(c).length-1].centiseconds=le.value)}return o(g,w(Math.floor(a(c).length/2))),C(),a(c)}Be(()=>{f()});var p=kr();Ze(P=>{et.title=n});var b=u(p);b.textContent=n;var N=h(b,2),F=h(u(N),2),T=u(F);Re(T),ot(T,"placeholder",r),T.__input=f,d(F),d(N);var X=h(N,2);{var G=P=>{var Q=xr(),O=u(Q,!0);d(Q),ce(()=>H(O,a(x))),A(P,Q)};ie(X,P=>{a(x)!=""&&P(G)})}var R=h(X,2),I=h(u(R),2);pt(I,21,()=>a(c),gt,(P,Q,O)=>{var W=Fe(),te=Se(W);{var ee=le=>{var ne=Er();ne.__click=()=>{o(g,w(O)),C()};var oe=u(ne,!0);d(ne),ce(()=>{nt(ne,`button ${(O===a(g)?"is-link":"")??""}`),ot(ne,"title",`${a(Q).text}: ${a(Q).centiseconds} centésimas`),H(oe,a(Q).text)}),A(le,ne)};ie(te,le=>{a(Q).text.replaceAll(" ","").length>0&&le(ee)})}A(P,W)}),d(I),d(R);var J=h(R,2),U=h(u(J),2);pt(U,17,()=>a(i),gt,(P,Q,O)=>{var W=yr(),te=u(W);te.nodeValue=`Línea ${O+1}: `;var ee=h(te),le=u(ee,!0);d(ee),d(W),ce(()=>H(le,a(Q))),A(P,W)}),d(J);var M=h(J,2),z=u(M),K=u(z),B=h(K);B.__click=[Cr,k],B.__keydown=[Sr],d(z);var de=h(z,2),j=u(de);Ve(j),d(de),d(M),d(p),ce(()=>H(K,`${ue.resultado} `)),me(T,()=>a(s),P=>o(s,P)),me(j,()=>a(l),P=>o(l,P)),A(e,p),Me()}Pe(["input","click","keydown"]);var dt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(dt||(dt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ea;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(ea||(ea={}));var ta;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ta||(ta={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=["user","model","function","system"];var na;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(na||(na={}));var ra;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ra||(ra={}));var sa;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(sa||(sa={}));var ia;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(ia||(ia={}));var xt;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(xt||(xt={}));var oa;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(oa||(oa={}));var la;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(la||(la={}));var ca;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ca||(ca={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ft extends je{constructor(t,n){super(t),this.response=n}}class Na extends je{constructor(t,n,r,s){super(t),this.status=n,this.statusText=r,this.errorDetails=s}}class it extends je{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="https://generativelanguage.googleapis.com",Rr="v1beta",Ar="0.21.0",Ir="genai-js";var ut;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ut||(ut={}));class Or{constructor(t,n,r,s,i){this.model=t,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=i}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Rr;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Tr}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function Lr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Ir}/${Ar}`),t.join(" ")}async function Nr(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Lr(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new it(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,i]of r.entries()){if(s==="x-goog-api-key")throw new it(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new it(`Header name ${s} can only be set using the apiClient field`);n.append(s,i)}}return n}async function Dr(e,t,n,r,s,i){const l=new Or(e,t,n,r,i);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},$r(i)),{method:"POST",headers:await Nr(l),body:s})}}async function Ct(e,t,n,r,s,i={},l=fetch){const{url:c,fetchOptions:g}=await Dr(e,t,n,r,s,i);return Mr(c,g,l)}async function Mr(e,t,n=fetch){let r;try{r=await n(e,t)}catch(s){Fr(s,e)}return r.ok||await Vr(r,e),r}function Fr(e,t){let n=e;throw e instanceof Na||e instanceof it||(n=new je(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function Vr(e,t){let n="",r;try{const s=await e.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new Na(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function $r(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ft(`${st(e)}`,e);return jr(e)}else if(e.promptFeedback)throw new ft(`Text not available. ${st(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ft(`${st(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),da(e)[0]}else if(e.promptFeedback)throw new ft(`Function call not available. ${st(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ft(`${st(e)}`,e);return da(e)}else if(e.promptFeedback)throw new ft(`Function call not available. ${st(e)}`,e)},e}function jr(e){var t,n,r,s;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const l of(s=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.text&&i.push(l.text),l.executableCode&&i.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&i.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function da(e){var t,n,r,s;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const l of(s=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&i.push(l.functionCall);if(i.length>0)return i}const Hr=[xt.RECITATION,xt.SAFETY,xt.LANGUAGE];function St(e){return!!e.finishReason&&Hr.includes(e.finishReason)}function st(e){var t,n,r;let s="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)s+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(s+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const i=e.candidates[0];St(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function Et(e){return this instanceof Et?(this.v=e,this):new Et(e)}function Gr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(f){r[f]&&(s[f]=function(p){return new Promise(function(b,N){i.push([f,p,b,N])>1||c(f,p)})})}function c(f,p){try{g(r[f](p))}catch(b){k(i[0][3],b)}}function g(f){f.value instanceof Et?Promise.resolve(f.value.v).then(x,C):k(i[0][2],f)}function x(f){c("next",f)}function C(f){c("throw",f)}function k(f,p){f(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Pr(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=zr(t),[r,s]=n.tee();return{stream:Ur(r),response:Br(s)}}async function Br(e){const t=[],n=e.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return Bt(Kr(t));t.push(s)}}function Ur(e){return Gr(this,arguments,function*(){const n=e.getReader();for(;;){const{value:r,done:s}=yield Et(n.read());if(s)break;yield yield Et(Bt(r))}})}function zr(e){const t=e.getReader();return new ReadableStream({start(r){let s="";return i();function i(){return t.read().then(({value:l,done:c})=>{if(c){if(s.trim()){r.error(new je("Failed to parse stream"));return}r.close();return}s+=l;let g=s.match(ua),x;for(;g;){try{x=JSON.parse(g[1])}catch{r.error(new je(`Error parsing JSON response: "${g[1]}"`));return}r.enqueue(x),s=s.substring(g[0].length),g=s.match(ua)}return i()})}}})}function Kr(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const s of r.candidates){const i=s.index;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:s.index}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const l={};for(const c of s.content.parts)c.text&&(l.text=c.text),c.functionCall&&(l.functionCall=c.functionCall),c.executableCode&&(l.executableCode=c.executableCode),c.codeExecutionResult&&(l.codeExecutionResult=c.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),n.candidates[i].content.parts.push(l)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(e,t,n,r){const s=await Ct(t,ut.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r);return Pr(s)}async function Ma(e,t,n,r){const i=await(await Ct(t,ut.GENERATE_CONTENT,e,!1,JSON.stringify(n),r)).json();return{response:Bt(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function yt(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return Yr(t)}function Yr(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const i of e)"functionResponse"in i?(n.parts.push(i),s=!0):(t.parts.push(i),r=!0);if(r&&s)throw new je("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new je("No content is provided for sending chat message.");return r?t:n}function qr(e,t){var n;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=e.generateContentRequest!=null;if(e.contents){if(s)throw new it("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(s)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const i=yt(e);r.contents=[i]}return{generateContentRequest:r}}function va(e){let t;return e.contents?t=e:t={contents:[yt(e)]},e.systemInstruction&&(t.systemInstruction=Fa(e.systemInstruction)),t}function Xr(e){return typeof e=="string"||Array.isArray(e)?{content:yt(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Wr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Jr(e){let t=!1;for(const n of e){const{role:r,parts:s}=n;if(!t&&r!=="user")throw new je(`First content should be with role 'user', got ${r}`);if(!aa.includes(r))throw new je(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(aa)}`);if(!Array.isArray(s))throw new je("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new je("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of s)for(const g of fa)g in c&&(i[g]+=1);const l=Wr[r];for(const c of fa)if(!l.includes(c)&&i[c]>0)throw new je(`Content with role '${r}' can't contain '${c}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="SILENT_ERROR";class Qr{constructor(t,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(Jr(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,s,i,l,c,g;await this._sendPromise;const x=yt(t),C={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,x]},k=Object.assign(Object.assign({},this._requestOptions),n);let f;return this._sendPromise=this._sendPromise.then(()=>Ma(this._apiKey,this.model,C,k)).then(p=>{var b;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(x);const N=Object.assign({parts:[],role:"model"},(b=p.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(N)}else{const N=st(p.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(t,n={}){var r,s,i,l,c,g;await this._sendPromise;const x=yt(t),C={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,x]},k=Object.assign(Object.assign({},this._requestOptions),n),f=Da(this._apiKey,this.model,C,k);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(ha)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(x);const b=Object.assign({},p.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=st(p);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(p=>{p.message!==ha&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(e,t,n,r){return(await Ct(t,ut.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(e,t,n,r){return(await Ct(t,ut.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}async function ts(e,t,n,r){const s=n.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await Ct(t,ut.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Fa(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const s=va(t),i=Object.assign(Object.assign({},this._requestOptions),n);return Ma(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}async generateContentStream(t,n={}){var r;const s=va(t),i=Object.assign(Object.assign({},this._requestOptions),n);return Da(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}startChat(t){var n;return new Qr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=qr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return Zr(this.apiKey,this.model,r,s)}async embedContent(t,n={}){const r=Xr(t),s=Object.assign(Object.assign({},this._requestOptions),n);return es(this.apiKey,this.model,r,s)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return ts(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new je("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ga(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new it("Cached content must contain a `name` field.");if(!t.model)throw new it("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(n!=null&&n[l]&&t[l]&&(n==null?void 0:n[l])!==t[l]){if(l==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,g=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(c===g)continue}throw new it(`Different value for "${l}" specified in modelParams (${n[l]}) and cachedContent (${t[l]})`)}const i=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ga(this.apiKey,i,r)}}function ns(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const Va=["automático","carteles","diálogos","karaokes"],rs=Ge.enum(Va);async function ss(e,t,n){const r={errors:[],warnings:[]};if(e==="carteles")return r;const s=t.scriptInfo.properties.get("WrapStyle")??"",i="0";s!==i&&r.errors.push({location:"Script info, wrap style",error:`Se esperaba "${i}", pero se encontró "${s}"`,text:s,ignoreRule:""});const l=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",c="yes";l!==c&&r.errors.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${c}", pero se encontró "${l}"`,text:l,ignoreRule:""});const g="Español";let x=0,C="";for(let k=0;k<t.events.lines.length;k++){const f=t.events.lines[k],p=k+1;if(e==="automático"&&f.effect.includes("template syl")){console.info(`template syl detectado en línea ${p}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&f.type==Jt||f.content===""||e==="karaokes"&&f.style!==g||e==="karaokes"&&f.type!==Jt||e==="karaokes"&&f.effect!=="karaoke")continue;if(e==="karaokes"&&f.effect==="fx")break;const b=f.effect.split(" ").filter(T=>T.startsWith("ignorar-"));if(b.includes("ignorar-linea"))continue;n.validateLineStyleExists&&!b.includes("ignorar-estilo")&&!cs(t,f.style)&&r.errors.push({location:`Línea ${p}`,error:"Estilo no encontrado",text:f.style,ignoreRule:"ignorar-estilo"});const N=xe(f.content);let F=ke(N.filter(T=>T.name==="text"));if(n.geminiEnabled&&e==="diálogos"){const T=hs(F);C+=`
Línea ${p}: ${T}`}if(n.validateTextStart&&!b.includes("ignorar-inicio")){const T=is(F);T!=null&&r.errors.push({location:`Línea ${p}`,error:T,text:f.content,ignoreRule:"ignorar-inicio"})}if(n.validateTextSpaces&&!b.includes("ignorar-espacios")){const T=ds(F);T!=null&&r.errors.push({location:`Línea ${p}`,error:T,text:f.content,ignoreRule:"ignorar-espacios"})}if(n.validateTextEnd&&!b.includes("ignorar-fin")){const T=os(F);T!=null&&r.errors.push({location:`Línea ${p}`,error:T,text:f.content,ignoreRule:"ignorar-fin"})}if(n.validateTextPunctuation&&!b.includes("ignorar-puntuacion")){const T=ls(F);T!=null&&r.errors.push({location:`Línea ${p}`,error:T,text:f.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&x++}if(n.geminiEnabled&&n.geminiApiKey!==""&&e==="diálogos"){const k=await fs(C,n.geminiApiKey);for(const f of k.errores){let p=t.events.lines[f.numeroLinea-1];p==null&&(p=kn());let b=f.mensajeError;b.endsWith(".")&&b.substring(0,b.length-2),r.warnings.push({location:`Línea ${f.numeroLinea}`,error:b,text:p.content,ignoreRule:"ignorar-llm"})}}return e==="karaokes"&&x===0&&r.errors.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${g}"`,text:"",ignoreRule:""}),r}function is(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function os(e){e=ns(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(n=>e.endsWith(n))?null:`No tiene un fin de línea válido: ${t.map(n=>`"${n}"`).join(", ")}`}function ls(e){for(let t=0;t<e.length;t++){const n=[",",";","."],r=e[t];if(!n.includes(r))continue;if(t+1>=e.length)break;let s=e[t+1];if(s==="\\"&&e[t+2]==="N"&&(s="\\N"),r==="."&&s=="."||r==="."&&e[t-1]==="."&&e[t-2]==="."||(r==="."||r===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(s))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function cs(e,t){return e.styles.styles.some(n=>t===n.name)}function ds(e){return e.includes("  ")?"hay dos espacios seguidos":null}function us(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}const vs=Ge.object({errores:Ge.object({numeroLinea:Ge.number().default(0),mensajeError:Ge.string().default("")}).array()});async function fs(e,t){let n="";try{const l=new as(t).getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:`
            Valida todos los textos que recibas.
            Considera 'N' como un espacio ' '.
            Ignora los espacios consecutivos, no son errores.
            Considera como errores sólo las faltas ortográficas graves.
            Frases vulgares, de uso poco común o muletillas están bien.
        `}),c={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"application/json",responseSchema:{type:dt.OBJECT,required:["errores"],properties:{errores:{type:dt.ARRAY,items:{type:dt.OBJECT,required:["numeroLinea","mensajeError"],properties:{numeroLinea:{type:dt.INTEGER,description:"número de la línea con error",example:2},mensajeError:{type:dt.STRING,description:"descripción del error y consejo de cómo corregirlo"}}}}}}};return n=(await l.startChat({generationConfig:c,history:[]}).sendMessage(e)).response.text(),vs.parse(JSON.parse(n))}catch(r){console.error("error al validar subs con gemini",r),n!=""&&console.log("rawResponse",n);let s=`${r}`;return s.includes("API key not valid")&&(s="API KEY inválida."),{errores:[{numeroLinea:0,mensajeError:`Error al validar subtítulos con Google Gemini: ${s}`}]}}}function hs(e){let t="";for(let n=0;n<e.length;n++){const r=e[n],s=e[n+1]??"",i=e[n+2]??"",l=e[n-1]??"";if(r==="\\"&&s==="N"){if(n++,i===" "||l===" ")continue;t+=" ";continue}t+=r}return t}const kt=Ge.object({userSubsMode:rs.default("automático"),geminiEnabled:Ge.boolean().default(!1),geminiApiKey:Ge.string().default(""),validateLineStyleExists:Ge.boolean().default(!0),validateTextStart:Ge.boolean().default(!0),validateTextEnd:Ge.boolean().default(!0),validateTextSpaces:Ge.boolean().default(!0),validateTextPunctuation:Ge.boolean().default(!0)}),$a="asu.validarDialogos.options";function gs(e){localStorage.setItem($a,JSON.stringify(e))}function ps(){try{const e=localStorage.getItem($a)??"";return kt.parse(JSON.parse(e))}catch(e){return console.error("error al cargar opciones de validar diálogos",e),kt.parse({})}}async function bs(e,t,n){t(!t()),await n()}var _s=q('<div class="area svelte-on5caf"><textarea readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function ms(e,t){De(t,!0);let n=Ke(t,"rawMode",7),r=m(w(t.text)),s=m(1),i=m(void 0);async function l(){c(),await wt(),g()}function c(){if(n()){o(r,w(t.text));return}const b=xe(t.text).filter(F=>F.name==="text");let N=ke(b);N=N.replaceAll("\\N",""),o(r,w(N))}function g(){o(s,w(x()))}function x(){return a(i)==null?1:Math.ceil(a(i).scrollHeight/a(i).clientHeight)}Be(async()=>{await l()});var C=_s(),k=u(C);Ve(k),Ae(k,b=>o(i,b),()=>a(i));var f=h(k,2);f.__click=[bs,n,l];var p=u(f,!0);d(f),d(C),ce(()=>{nt(k,`textarea ${(t.kind==="error"?"is-danger":"is-warning")??""} svelte-on5caf`),wn(k,a(r)),ot(k,"rows",a(s)),H(p,n()?"Ocultar etiquetas":"Ver etiquetas")}),A(e,C),Me()}Pe(["click"]);var xs=q('<p class="ignore-rule m-1">Para ignorar, colocar <b> </b> en campo de efecto.</p>'),Es=q('<span><p class="m-1"><b> </b> </p> <!> <!></span>');function pa(e,t){De(t,!0);var n=Es(),r=u(n),s=u(r),i=u(s,!0);d(s);var l=h(s);d(r);var c=h(r,2);{var g=k=>{ms(k,{get kind(){return t.kind},get text(){return t.subtitleError.text},rawMode:!1})};ie(c,k=>{t.subtitleError.text!=""&&k(g)})}var x=h(c,2);{var C=k=>{var f=xs(),p=h(u(f)),b=u(p,!0);d(p),vt(),d(f),ce(()=>H(b,t.subtitleError.ignoreRule)),A(k,f)};ie(x,k=>{t.subtitleError.ignoreRule!=""&&k(C)})}d(n),ce(k=>{nt(n,`file-error ${(t.kind==="error"?"has-text-danger":"has-text-warning")??""}`),H(i,t.subtitleError.location),H(l,`:
        ${k??""}`)},[()=>t.subtitleError.error+(t.subtitleError.error.endsWith(".")?"":".")]),A(e,n),Me()}var ys=(e,t)=>t(),Cs=(e,t)=>t(),Ss=(e,t)=>t.onAccept&&t.onAccept(),ks=q('<button class="button is-success svelte-1eoe9jy"> </button>'),ws=q('<div class="modal"><div class="modal-background"></div> <div class="modal-card"><header class="modal-card-head"><p class="modal-card-title"> </p> <button class="delete svelte-1eoe9jy" aria-label="close"></button></header> <section class="modal-card-body"><!></section> <footer class="modal-card-foot"><button class="button svelte-1eoe9jy"> </button> <!></footer></div></div>');function Ts(e,t){De(t,!0);let n=Ke(t,"cancelButtonText",3,"Cancelar"),r=Ke(t,"acceptButtonText",3,"Aceptar"),s=Ke(t,"acceptButtonDisabled",3,!1);const i="is-active";let l=m(void 0);function c(){a(l)!=null&&(a(l).classList.add(i),t.onOpen!=null&&t.onOpen())}function g(){a(l)!=null&&(a(l).classList.remove(i),t.onClose!=null&&t.onClose())}var x=ws(),C=h(u(x),2),k=u(C),f=u(k),p=u(f,!0);d(f);var b=h(f,2);b.__click=[ys,g],d(k);var N=h(k,2),F=u(N);{var T=U=>{var M=Fe(),z=Se(M);Nn(z,()=>t.children),A(U,M)};ie(F,U=>{t.children!=null&&U(T)})}d(N);var X=h(N,2),G=u(X);G.__click=[Cs,g];var R=u(G,!0);d(G);var I=h(G,2);{var J=U=>{var M=ks();M.__click=[Ss,t];var z=u(M,!0);d(M),ce(()=>{M.disabled=s(),H(z,r())}),A(U,M)};ie(I,U=>{t.onAccept!=null&&U(J)})}return d(X),d(C),d(x),Ae(x,U=>o(l,U),()=>a(l)),ce(()=>{H(p,t.title),H(R,n())}),A(e,x),Me({open:c,close:g})}Pe(["click"]);function Rs(e,t){confirm("¿Reiniciar configuración?")&&t(kt.parse({}))}var As=q("<option> </option>"),Is=q(`<div class="field"><label class="label" for="">API KEY</label> <div class="control"><input class="input" type="password" placeholder="Ingresa tu API KEY"></div></div> <p><a href="https://aistudio.google.com/apikey" target="_blank">Clic aquí para obtener una API KEY.</a></p> <p>Las validaciones de Google Gemini serán siempre advertencias
                debido a su tendencia a tener falsos positivos.</p>`,1),Os=q('<button class="button is-danger is-outlined is-fullwidth mb-2">Reiniciar configuración</button> <div class="select is-fullwidth mb-2"><select></select></div> <div class="field boxed"><label class="checkbox"><input type="checkbox"> </label> <!></div> <div class="boxed"><div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div></div>',1);function Ls(e,t){De(t,!0);let n=Ke(t,"options",15),r=m(void 0);function s(){var l;(l=a(r))==null||l.open()}function i(){var l;(l=a(r))==null||l.close()}return Ae(Ts(e,{title:"Configuración",cancelButtonText:"Volver",onClose:()=>gs(n()),children:(l,c)=>{var g=Os(),x=Se(g);x.__click=[Rs,n];var C=h(x,2),k=u(C);pt(k,21,()=>Va,gt,(D,re)=>{var y=As(),E={},L=u(y);d(y),ce(()=>{E!==(E=a(re))&&(y.value=(y.__value=a(re))==null?"":a(re)),H(L,`Modo ${a(re)??""}`)}),A(D,y)}),d(k),d(C);var f=h(C,2),p=u(f),b=u(p);Re(b);var N=h(b);d(p);var F=h(p,2);{var T=D=>{var re=Is(),y=Se(re),E=h(u(y),2),L=u(E);Re(L),d(E),d(y),vt(4),me(L,()=>n().geminiApiKey,fe=>n(n().geminiApiKey=fe,!0)),A(D,re)};ie(F,D=>{n().geminiEnabled&&D(T)})}d(f);var X=h(f,2),G=u(X),R=u(G),I=u(R);Re(I);var J=h(I);d(R),d(G);var U=h(G,2),M=u(U),z=u(M);Re(z);var K=h(z);d(M),d(U);var B=h(U,2),de=u(B),j=u(de);Re(j);var P=h(j);d(de),d(B);var Q=h(B,2),O=u(Q),W=u(O);Re(W);var te=h(W);d(O),d(Q);var ee=h(Q,2),le=u(ee),ne=u(le);Re(ne);var oe=h(ne);d(le),d(ee),d(X),ce(()=>{H(N,` ${ue.validateWithGemini}`),H(J,` ${ue.validateLineStyleExists}`),H(K,` ${ue.validateTextStart}`),H(P,` ${ue.validateTextEnd}`),H(te,` ${ue.validateTextSpaces}`),H(oe,` ${ue.validateTextPunctuation}`)}),Vn(k,()=>n().userSubsMode,D=>n(n().userSubsMode=D,!0)),at(b,()=>n().geminiEnabled,D=>n(n().geminiEnabled=D,!0)),at(I,()=>n().validateLineStyleExists,D=>n(n().validateLineStyleExists=D,!0)),at(z,()=>n().validateTextStart,D=>n(n().validateTextStart=D,!0)),at(j,()=>n().validateTextEnd,D=>n(n().validateTextEnd=D,!0)),at(W,()=>n().validateTextSpaces,D=>n(n().validateTextSpaces=D,!0)),at(ne,()=>n().validateTextPunctuation,D=>n(n().validateTextPunctuation=D,!0)),A(l,g)},$$slots:{default:!0}}),l=>o(r,w(l)),()=>a(r)),Me({open:s,close:i})}Pe(["click"]);async function Ns(e,t,n,r,s,i,l,c,g,x){var C,k;try{if(a(t).geminiEnabled&&a(t).geminiApiKey===""){alert("Ingrese el API KEY de Google Gemini."),(C=a(n))==null||C.open();return}if(a(t).geminiEnabled&&!confirm("Google Gemini habilitado. ¿Continuar?"))return;const f=[...((k=a(r))==null?void 0:k.files)??[]];o(s,0),o(i,0),o(l,w([])),o(c,!0);for(const p of f){const b=await p.text(),N=Tn(b);if(N==null){console.error("archivo inválido",p.name);continue}o(g,w(us(p.name,a(t).userSubsMode)));const F=await ss(a(g),N,a(t));o(s,a(s)+F.errors.length),o(i,a(i)+F.warnings.length),a(l).push({subsType:a(g),fileName:p.name,errors:F.errors,warnings:F.warnings,errorsVisible:!1,warningsVisible:!1})}}catch(f){console.error("error al procesar archivos",f)}finally{a(r)!=null&&(a(r).value=""),o(c,!1),await x()}}var Ds=(e,t)=>{var n;return(n=a(t))==null?void 0:n.open()},Ms=q('<span class="tag is-dark"> </span>'),Fs=q('<span class="tag is-dark"> </span>'),Vs=q('<span class="tag is-dark"> </span>'),$s=q('<span class="tag is-dark"> </span>'),js=q('<span class="tag is-dark"> </span>'),Hs=q('<span class="tag is-dark"> </span>'),Gs=q('<div class="result-info svelte-1jx7rzy"><div class="counter svelte-1jx7rzy">PROCESANDO</div> <div class="image-container svelte-1jx7rzy"><img class="result-image svelte-1jx7rzy" src="img/nagato.gif" alt="Suzumiya Haruhi" title="Suzumiya Haruhi"></div> <div class="counter svelte-1jx7rzy">SUBTÍTULOS</div></div>'),Ps=q('<img class="result-image svelte-1jx7rzy" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),Bs=q('<img class="result-image svelte-1jx7rzy" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Us=q(`<img class="result-image svelte-1jx7rzy" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),zs=q('<img class="result-image svelte-1jx7rzy" src="img/new-game.gif" alt="New Game!" title="New Game!">'),Ks=q("<div> <!></div>"),Ys=q("<div> </div>"),qs=(e,t)=>a(t).errorsVisible=!a(t).errorsVisible,Xs=q('<div class="file-errors svelte-1jx7rzy"></div>'),Ws=q('<div class="errors-list svelte-1jx7rzy"><button class="button is-danger is-outlined svelte-1jx7rzy"> </button> <!></div>'),Js=(e,t)=>a(t).warningsVisible=!a(t).warningsVisible,Qs=q('<div class="file-errors svelte-1jx7rzy"></div>'),Zs=q('<div class="warnings-list svelte-1jx7rzy"><button class="button is-warning is-outlined svelte-1jx7rzy"> </button> <!></div>'),ei=q('<div class="result svelte-1jx7rzy"><span> </span> <!> <!> <!></div>'),ti=q('<div class="result-info svelte-1jx7rzy"><div> </div> <div class="image-container svelte-1jx7rzy"><!></div> <div> </div></div> <!>',1),ai=q('<section class="svelte-1jx7rzy"><h1></h1> <div class="options boxed mb-4 svelte-1jx7rzy"><button class="button is-link mb-2 btn-settings is-fullwidth svelte-1jx7rzy">Configuración</button> <div class="options-info svelte-1jx7rzy"><span class="tag is-dark"> </span> <!> <!> <!> <!> <!> <!></div></div> <div class="file is-fullwidth mb-2 svelte-1jx7rzy"><label class="file-label"><input class="file-input" type="file" accept=".ass" multiple> <span class="file-cta svelte-1jx7rzy"><span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Cargar subtítulos</span></span></label></div> <!> <!></section> <!>',1);function ni(e,t){De(t,!0);const n=ue.validarDialogos;let r=m("diálogos"),s=m(void 0),i=m(0),l=m(0),c=m(w([])),g=m(!1),x=m(w(kt.parse({}))),C=m(void 0);function k(y){return y.errors.length>0?"has-text-danger":y.warnings.length>0?"has-text-warning":"has-text-success"}async function f(){await wt();const y=document.querySelector(".result-info");y!=null&&y.scrollIntoView({behavior:"smooth"})}Be(()=>{o(x,w(ps()))});var p=ai();Ze(y=>{et.title=n});var b=Se(p),N=u(b);N.textContent=n;var F=h(N,2),T=u(F);T.__click=[Ds,C];var X=h(T,2),G=u(X),R=u(G);d(G);var I=h(G,2);{var J=y=>{var E=Ms(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateWithGemini)),A(y,E)};ie(I,y=>{a(x).geminiEnabled&&y(J)})}var U=h(I,2);{var M=y=>{var E=Fs(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateLineStyleExists)),A(y,E)};ie(U,y=>{a(x).validateLineStyleExists&&y(M)})}var z=h(U,2);{var K=y=>{var E=Vs(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateTextStart)),A(y,E)};ie(z,y=>{a(x).validateTextStart&&y(K)})}var B=h(z,2);{var de=y=>{var E=$s(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateTextEnd)),A(y,E)};ie(B,y=>{a(x).validateTextEnd&&y(de)})}var j=h(B,2);{var P=y=>{var E=js(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateTextSpaces)),A(y,E)};ie(j,y=>{a(x).validateTextSpaces&&y(P)})}var Q=h(j,2);{var O=y=>{var E=Hs(),L=u(E,!0);d(E),ce(()=>H(L,ue.validateTextPunctuation)),A(y,E)};ie(Q,y=>{a(x).validateTextPunctuation&&y(O)})}d(X),d(F);var W=h(F,2),te=u(W),ee=u(te);ee.__change=[Ns,x,C,s,i,l,c,g,r,f],Ae(ee,y=>o(s,y),()=>a(s)),vt(2),d(te),d(W);var le=h(W,2);{var ne=y=>{var E=Gs();A(y,E)};ie(le,y=>{a(g)&&y(ne)})}var oe=h(le,2);{var D=y=>{var E=ti(),L=Se(E),fe=u(L),Ie=u(fe);d(fe);var he=h(fe,2),pe=u(he);{var $e=Ce=>{var ae=Ps();A(Ce,ae)},ye=Ce=>{var ae=Fe(),Ye=Se(ae);{var Ue=Te=>{var v=Bs();A(Te,v)},Ne=Te=>{var v=Fe(),S=Se(v);{var _e=Z=>{var Y=Us();A(Z,Y)},V=Z=>{var Y=Fe(),se=Se(Y);{var _=$=>{var ve=zs();A($,ve)};ie(se,$=>{a(l)>0&&$(_)},!0)}A(Z,Y)};ie(S,Z=>{a(i)>0?Z(_e):Z(V,!1)},!0)}A(Te,v)};ie(Ye,Te=>{a(i)>10?Te(Ue):Te(Ne,!1)},!0)}A(Ce,ae)};ie(pe,Ce=>{a(i)===0&&a(l)===0?Ce($e):Ce(ye,!1)})}d(he);var Oe=h(he,2),be=u(Oe);d(Oe),d(L);var He=h(L,2);pt(He,17,()=>a(c),gt,(Ce,ae,Ye)=>{var Ue=ei(),Ne=u(Ue),Te=u(Ne,!0);d(Ne);var v=h(Ne,2);{var S=_=>{var $=Ks(),ve=u($),ge=h(ve);{var Ee=Le=>{var tt=ba("Ignorado.");A(Le,tt)};ie(ge,Le=>{a(ae).subsType==="carteles"&&Le(Ee)})}d($),ce(()=>{nt($,`has-text-success text-${a(ae).subsType??""} svelte-1jx7rzy`),H(ve,`¡Todo en orden! Detectado como ${a(ae).subsType??""}. `)}),A(_,$)},_e=_=>{var $=Ys(),ve=u($);d($),ce(ge=>{nt($,Mn(ge),"svelte-1jx7rzy"),H(ve,`Detectado como ${a(ae).subsType??""}.`)},[()=>k(a(ae))]),A(_,$)};ie(v,_=>{a(ae).errors.length==0&&a(ae).warnings.length==0?_(S):_(_e,!1)})}var V=h(v,2);{var Z=_=>{var $=Ws(),ve=u($);ve.__click=[qs,ae];var ge=u(ve);d(ve);var Ee=h(ve,2);{var Le=tt=>{var lt=Xs();pt(lt,21,()=>a(ae).errors,gt,(Tt,Rt)=>{pa(Tt,{kind:"error",get subtitleError(){return a(Rt)}})}),d(lt),A(tt,lt)};ie(Ee,tt=>{a(ae).errorsVisible&&tt(Le)})}d($),ce(()=>H(ge,`${(a(ae).errorsVisible?"Ocultar errores":"Ver errores")??""}: ${a(ae).errors.length??""}`)),A(_,$)};ie(V,_=>{a(ae).errors.length>0&&_(Z)})}var Y=h(V,2);{var se=_=>{var $=Zs(),ve=u($);ve.__click=[Js,ae];var ge=u(ve);d(ve);var Ee=h(ve,2);{var Le=tt=>{var lt=Qs();pt(lt,21,()=>a(ae).warnings,gt,(Tt,Rt)=>{pa(Tt,{kind:"warning",get subtitleError(){return a(Rt)}})}),d(lt),A(tt,lt)};ie(Ee,tt=>{a(ae).warningsVisible&&tt(Le)})}d($),ce(()=>H(ge,`${(a(ae).warningsVisible?"Ocultar advertencias":"Ver advertencias")??""}: ${a(ae).warnings.length??""}`)),A(_,$)};ie(Y,_=>{a(ae).warnings.length>0&&_(se)})}d(Ue),ce(_=>{nt(Ne,`name ${_??""} text-${a(ae).subsType??""} svelte-1jx7rzy`),H(Te,a(ae).fileName)},[()=>k(a(ae))]),A(Ce,Ue)}),ce(()=>{nt(fe,`counter ${(a(i)==0?"has-text-success":"has-text-danger")??""} svelte-1jx7rzy`),H(Ie,`ERRORES: ${a(i)??""}`),nt(Oe,`counter ${(a(l)==0?"has-text-success":"has-text-warning")??""} svelte-1jx7rzy`),H(be,`ADVERTENCIAS: ${a(l)??""}`)}),A(y,E)};ie(oe,y=>{!a(g)&&a(c).length>0&&y(D)})}d(b);var re=h(b,2);Ae(Ls(re,{get options(){return a(x)},set options(y){o(x,w(y))}}),y=>o(C,w(y)),()=>a(C)),ce(()=>{H(R,`Modo ${a(x).userSubsMode??""}`),ee.disabled=a(g)}),A(e,p),Me()}Pe(["click","change"]);var ri=q('<div class="mt-2 mb-2 has-text-danger"> </div>'),si=(e,t)=>t(),ii=()=>{},oi=q('<section class="svelte-6z64pb"><h1></h1> <!> <div class="field"><label class="label" for=""> </label> <div class="input-groups svelte-6z64pb"><div class="inputs svelte-6z64pb"><p class="control has-icons-left"><span class="icon is-small is-left has-text-black">X1:</span> <input class="input" type="number"></p> <p class="control has-icons-left"><span class="icon is-small is-left has-text-black">Y1:</span> <input class="input" type="number"></p></div> <div class="inputs svelte-6z64pb"><p class="control has-icons-left"><span class="icon is-small is-left has-text-black">X2:</span> <input class="input" type="number"></p> <p class="control has-icons-left"><span class="icon is-small is-left has-text-black">Y2:</span> <input class="input" type="number"></p></div></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea" readonly=""></textarea></div></div></section>');function li(e,t){De(t,!0);const n=ue.aplicarTraslacion;let r=m(0),s=m(0),i=m(0),l=m(0),c=m(""),g=m(""),x=m("");Gt(()=>{C(a(r),a(s),a(i),a(l),a(c))});function C(E,L,fe,Ie,he){if(o(x,""),o(g,""),he.length==0)return;const pe=he.split(`
`);let $e="";for(let ye=0;ye<pe.length;ye++){const Oe=pe[ye];if(Oe.length==0)continue;const be=Qe(Oe);if(be==null){console.error(`line ${ye+1}: invalid line`);break}const He=xe(be.content),Ce=ct(He);if(Ce!=null){Vt(He,ze.pos);const Ne=Ce.x+E,Te=Ce.y+L;Ra(He,Ne,Te)}const ae=wa(He);if(ae!=null){Vt(He,ze.move);const Ne=ae.x1+E,Te=ae.y1+L,v=ae.x2+fe,S=ae.y2+Ie;Ta(He,Ne,Te,v,S,ae.t1,ae.t2)}if(Ce==null&&ae==null){o(x,`Subtítulos, línea ${ye+1}, no se encontró \\pos ni \\move`);return}const Ye=ke(He);be.content=Ye;const Ue=we(be);ye>0&&($e+=`
`),$e+=Ue}o(g,w($e))}async function k(){await navigator.clipboard.writeText(a(g)),alert("¡Líneas copiadas al portapapeles!")}function f(){o(r,-10),o(s,20);for(let E=1;E<=10;E++){const L=182+E*5,fe=421+E*7;o(c,a(c)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${L},${fe})}LINEA ${E}
`)}}Be(()=>{f()});var p=oi();Ze(E=>{et.title=n});var b=u(p);b.textContent=n;var N=h(b,2);{var F=E=>{var L=ri(),fe=u(L,!0);d(L),ce(()=>H(fe,a(x))),A(E,L)};ie(N,E=>{a(x)!=""&&E(F)})}var T=h(N,2),X=u(T),G=u(X);d(X);var R=h(X,2),I=u(R),J=u(I),U=h(u(J),2);Re(U),d(J);var M=h(J,2),z=h(u(M),2);Re(z),d(M),d(I);var K=h(I,2),B=u(K),de=h(u(B),2);Re(de),d(B);var j=h(B,2),P=h(u(j),2);Re(P),d(j),d(K),d(R),d(T);var Q=h(T,2),O=u(Q),W=u(O,!0);d(O);var te=h(O,2),ee=u(te);Ve(ee),d(te),d(Q);var le=h(Q,2),ne=u(le),oe=u(ne),D=h(oe);D.__click=[si,k],D.__keydown=[ii],d(ne);var re=h(ne,2),y=u(re);Ve(y),d(re),d(le),d(p),ce(()=>{H(G,`Traslación de (${`${a(r)??0},${a(s)??0},${a(i)??0},${a(l)??0}`??""})`),H(W,ue.subtitulos),H(oe,`${ue.resultado} `)}),me(U,()=>a(r),E=>o(r,E)),me(z,()=>a(s),E=>o(s,E)),me(de,()=>a(i),E=>o(i,E)),me(P,()=>a(l),E=>o(l,E)),me(ee,()=>a(c),E=>o(c,E)),me(y,()=>a(g),E=>o(g,E)),A(e,p),Me()}Pe(["click","keydown"]);function ci(e,t){De(t,!0);let n=m("");Be(()=>{Qt.subscribe(C=>{C!=null&&o(n,w(C))});const g=new URLSearchParams(location.search).get("pagina")??"",x=Rn(g)?g:"inicio";Qt.set(x)});var r=Fe(),s=Se(r);{var i=c=>{Xn(c)},l=c=>{var g=Fe(),x=Se(g);{var C=f=>{Un(f,{})},k=f=>{var p=Fe(),b=Se(p);{var N=T=>{hr(T,{})},F=T=>{var X=Fe(),G=Se(X);{var R=J=>{sr(J,{})},I=J=>{var U=Fe(),M=Se(U);{var z=B=>{cr(B,{})},K=B=>{var de=Fe(),j=Se(de);{var P=O=>{li(O,{})},Q=O=>{var W=Fe(),te=Se(W);{var ee=ne=>{ni(ne,{})},le=ne=>{var oe=Fe(),D=Se(oe);{var re=E=>{wr(E,{})},y=E=>{var L=Fe(),fe=Se(L);{var Ie=pe=>{mr(pe,{})},he=pe=>{var $e=Fe(),ye=Se($e);{var Oe=be=>{Yn(be,{})};ie(ye,be=>{a(n)=="acercaDe"&&be(Oe)},!0)}A(pe,$e)};ie(fe,pe=>{a(n)=="karaokes.dividirSilabas"?pe(Ie):pe(he,!1)},!0)}A(E,L)};ie(D,E=>{a(n)=="karaokes.dividirKaraoke"?E(re):E(y,!1)},!0)}A(ne,oe)};ie(te,ne=>{a(n)=="dialogos.validarDialogos"?ne(ee):ne(le,!1)},!0)}A(O,W)};ie(j,O=>{a(n)=="carteles.aplicarTraslacion"?O(P):O(Q,!1)},!0)}A(B,de)};ie(M,B=>{a(n)=="carteles.aplicarColor"?B(z):B(K,!1)},!0)}A(J,U)};ie(G,J=>{a(n)=="carteles.aplicarAlpha"?J(R):J(I,!1)},!0)}A(T,X)};ie(b,T=>{a(n)=="carteles.aplicarSecuenciaPosiciones"?T(N):T(F,!1)},!0)}A(f,p)};ie(x,f=>{a(n)=="carteles.copiarMovimiento"?f(C):f(k,!1)},!0)}A(c,g)};ie(s,c=>{a(n)=="inicio"?c(i):c(l,!1)})}A(e,r),Me()}var di=q('<section class="svelte-70scd4"><!></section>');function _i(e){var t=di(),n=u(t);ci(n,{}),d(t),A(e,t)}export{_i as component,bi as universal};
