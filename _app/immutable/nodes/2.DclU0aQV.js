import{d as je,e as Ke,a as oe,t as pe,s as ue,b as Ya,c as Me}from"../chunks/DY9Zt56B.js";import"../chunks/Cn1nWbZl.js";import{ah as Pa,_ as Ma,ai as dn,p as $a,H as Ue,M as ka,a7 as fn,al as vn,I as pn,G as gn,g as r,K as bn,L as Ha,N as Aa,R as sa,ar as hn,O as Wa,P as Ja,Q as _n,aw as Na,au as Za,y as mn,ax as Fa,ay as Ba,az as Da,aA as xn,a8 as yn,aB as kn,aC as An,aD as Qa,a4 as Nn,v as En,aE as Sn,a5 as wn,j as za,aF as Cn,ak as $n,aG as Ln,b as et,x as at,w as tt,z as Te,ae as Xe,l as v,aH as qe,D as k,F as E,E as m,B as he,C as Ie,ag as w,aI as pa,A as De,af as Rn}from"../chunks/CX1GF6-e.js";import{p as ea,i as ke}from"../chunks/iUA4hgWT.js";import{i as Fn,p as $,b as $e}from"../chunks/Cilw_KWS.js";import{c as Dn,z as nt,r as ta,d as Le,t as ve,b as la,s as ga,e as Tn,a as Oa,i as In}from"../chunks/Ck-OP2NH.js";import{i as Vn}from"../chunks/B554K1ws.js";function Pn(e){var t=dn,n=$a;Pa(null),Ma(null);try{return e()}finally{Pa(t),Ma(n)}}function Ta(e,t,n,l=n){e.addEventListener(t,()=>Pn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),l(!0)}:e.__on_r=()=>l(!0),Dn()}function ca(e,t){return t}function Mn(e,t,n,l){for(var i=[],o=t.length,u=0;u<o;u++)xn(t[u].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var p=n.parentNode;yn(p),p.append(n),l.clear(),Qe(e,t[0].prev,t[o-1].next)}kn(i,()=>{for(var b=0;b<o;b++){var y=t[b];a||(l.delete(y.k),Qe(e,y.prev,y.next)),An(y.e,!a)}})}function da(e,t,n,l,i,o=null){var u=e,a={flags:t,items:new Map,first:null},p=(t&Qa)!==0;if(p){var b=e;u=Ue?ka(fn(b)):b.appendChild(vn())}Ue&&pn();var y=null,I=!1,A=Nn(()=>{var F=n();return En(F)?F:F==null?[]:Za(F)});gn(()=>{var F=r(A),x=F.length;if(I&&x===0)return;I=x===0;let U=!1;if(Ue){var Y=u.data===bn;Y!==(x===0)&&(u=Ha(),ka(u),Aa(!1),U=!0)}if(Ue){for(var X=null,q,J=0;J<x;J++){if(sa.nodeType===8&&sa.data===hn){u=sa,U=!0,Aa(!1);break}var L=F[J],_=l(L,J);q=rt(sa,a,X,null,L,_,J,i,t,n),a.items.set(_,q),X=q}x>0&&ka(Ha())}Ue||Hn(F,a,u,i,t,l,n),o!==null&&(x===0?y?Wa(y):y=Ja(()=>o(u)):y!==null&&_n(y,()=>{y=null})),U&&Aa(!0),r(A)}),Ue&&(u=sa)}function Hn(e,t,n,l,i,o,u){var S,T,K,C;var a=(i&Sn)!==0,p=(i&(Fa|Da))!==0,b=e.length,y=t.items,I=t.first,A=I,F,x=null,U,Y=[],X=[],q,J,L,_;if(a)for(_=0;_<b;_+=1)q=e[_],J=o(q,_),L=y.get(J),L!==void 0&&((S=L.a)==null||S.measure(),(U??(U=new Set)).add(L));for(_=0;_<b;_+=1){if(q=e[_],J=o(q,_),L=y.get(J),L===void 0){var N=A?A.e.nodes_start:n;x=rt(N,t,x,x===null?t.first:x.next,q,J,_,l,i,u),y.set(J,x),Y=[],X=[],A=x.next;continue}if(p&&Bn(L,q,_,i),L.e.f&Na&&(Wa(L.e),a&&((T=L.a)==null||T.unfix(),(U??(U=new Set)).delete(L))),L!==A){if(F!==void 0&&F.has(L)){if(Y.length<X.length){var M=X[0],H;x=M.prev;var Z=Y[0],R=Y[Y.length-1];for(H=0;H<Y.length;H+=1)Ga(Y[H],M,n);for(H=0;H<X.length;H+=1)F.delete(X[H]);Qe(t,Z.prev,R.next),Qe(t,x,Z),Qe(t,R,M),A=M,x=R,_-=1,Y=[],X=[]}else F.delete(L),Ga(L,A,n),Qe(t,L.prev,L.next),Qe(t,L,x===null?t.first:x.next),Qe(t,x,L),x=L;continue}for(Y=[],X=[];A!==null&&A.k!==J;)A.e.f&Na||(F??(F=new Set)).add(A),X.push(A),A=A.next;if(A===null)continue;L=A}Y.push(L),x=L,A=L.next}if(A!==null||F!==void 0){for(var V=F===void 0?[]:Za(F);A!==null;)A.e.f&Na||V.push(A),A=A.next;var B=V.length;if(B>0){var D=i&Qa&&b===0?n:null;if(a){for(_=0;_<B;_+=1)(K=V[_].a)==null||K.measure();for(_=0;_<B;_+=1)(C=V[_].a)==null||C.fix()}Mn(t,V,D,y)}}a&&mn(()=>{var h;if(U!==void 0)for(L of U)(h=L.a)==null||h.apply()}),$a.first=t.first&&t.first.e,$a.last=x&&x.e}function Bn(e,t,n,l){l&Fa&&Ba(e.v,t),l&Da?Ba(e.i,n):e.i=n}function rt(e,t,n,l,i,o,u,a,p,b){var y=(p&Fa)!==0,I=(p&Cn)===0,A=y?I?wn(i):za(i):i,F=p&Da?za(u):u,x={i:F,v:A,k:o,a:null,e:null,prev:n,next:l};try{return x.e=Ja(()=>a(e,A,F,b),Ue),x.e.prev=n&&n.e,x.e.next=l&&l.e,n===null?t.first=x:(n.next=x,n.e.next=x.e),l!==null&&(l.prev=x,l.e.prev=x.e),x}finally{}}function Ga(e,t,n){for(var l=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==l;){var u=$n(o);i.before(o),o=u}}function Qe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ne(e,t,n=t){var l=Ln();Ta(e,"input",i=>{var o=i?e.defaultValue:e.value;if(o=Ea(e)?Sa(o):o,n(o),l&&o!==(o=t())){var u=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(a,e.value.length))}}),(Ue&&e.defaultValue!==e.value||et(t)==null&&e.value)&&n(Ea(e)?Sa(e.value):e.value),at(()=>{var i=t();Ea(e)&&i===Sa(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Ia(e,t,n=t){Ta(e,"change",l=>{var i=l?e.defaultChecked:e.checked;n(i)}),(Ue&&e.defaultChecked!==e.checked||et(t)==null)&&n(e.checked),at(()=>{var l=t();e.checked=!!l})}function Ea(e){var t=e.type;return t==="number"||t==="range"}function Sa(e){return e===""?null:+e}function ot(e,t,n){if(e.multiple)return Gn(e,t);for(var l of e.options){var i=fa(l);if(Fn(i,t)){l.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function zn(e,t){tt(()=>{var n=new MutationObserver(()=>{var l=e.__value;ot(e,l)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function On(e,t,n=t){var l=!0;Ta(e,"change",i=>{var o=i?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(o),fa);else{var a=e.querySelector(o)??e.querySelector("option:not([disabled])");u=a&&fa(a)}n(u)}),tt(()=>{var i=t();if(ot(e,i,l),l&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=fa(o),n(i))}e.__value=i,l=!1}),zn(e)}function Gn(e,t){for(var n of e.options)n.selected=~t.indexOf(fa(n))}function fa(e){return"__value"in e?e.__value:e.value}const jn=!0,ls=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));function ie(e){return parseInt(e,16)}function ba(e){return Math.floor(e).toString(16).padStart(2,"0").toUpperCase()}function wa(e,t,n){const l=e>t;let i=t,o=e;l&&(i=e,o=t);const a=(i-o)/n;let p=o;const b=[o];for(let y=1;y<n;y++)p+=a,b.push(p);return b[n-1]=i,l&&b.reverse(),b}const Un=/^(\(.*\)|\\?.)$/,aa=e=>{const t=e.toString();return Un.test(t)?t:`(?:${t})`},Kn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Xn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,ae=e=>{const t=n=>ae(`(?<${n}>${`${e}`.replace(Kn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>ae(`${e}${f(...n)}`),{referenceTo:n=>ae(`${e}\\k<${n}>`)}),or:(...n)=>ae(`(?:${e}|${f(...n)})`),after:(...n)=>ae(`(?<=${f(...n)})${e}`),before:(...n)=>ae(`${e}(?=${f(...n)})`),notAfter:(...n)=>ae(`(?<!${f(...n)})${e}`),notBefore:(...n)=>ae(`${e}(?!${f(...n)})`),times:Object.assign(n=>ae(`${aa(e)}{${n}}`),{any:()=>ae(`${aa(e)}*`),atLeast:n=>ae(`${aa(e)}{${n},}`),atMost:n=>ae(`${aa(e)}{0,${n}}`),between:(n,l)=>ae(`${aa(e)}{${n},${l}}`)}),optionally:()=>ae(`${aa(e)}?`),as:t,groupedAs:t,grouped:()=>ae(`${e}`.replace(Xn,"($1$3)$2")),at:{lineStart:()=>ae(`^${e}`),lineEnd:()=>ae(`${e}$`)}}},qn=/[.*+?^${}()|[\]\\/]/g,Re=e=>ae(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`),Yn=(...e)=>ae(`(?:${e.map(t=>f(t)).join("|")})`),Wn=ae(".");ae("\\b\\w+\\b");ae("\\w");ae("\\b");const He=ae("\\d");ae("\\s");const Jn=Object.assign(ae("[a-zA-Z]"),{lowercase:ae("[a-z]"),uppercase:ae("[A-Z]")});ae("\\t");ae("\\n");ae("\\r");ae("\\W+"),ae("\\W"),ae("\\B"),ae("\\D"),ae("\\S"),Object.assign(ae("[^a-zA-Z]"),{lowercase:ae("[^a-z]"),uppercase:ae("[^A-Z]")}),ae("[^\\t]"),ae("[^\\n]"),ae("[^\\r]");const f=(...e)=>ae(e.map(t=>typeof t=="string"?t.replace(qn,"\\$&"):t).join("")),ge=(...e)=>ae(`${aa(f(...e))}+`),G=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(f(...e).toString(),[...t||""].join(""))},Zn=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,Qn=/^[^\\]+/g,lt=/(?<sil>(?:sha|shi|shu|she|sho|cha|chi|chu|che|cho|tsu|kya|kyi|kyu|kye|kyo|gya|gyi|gyu|gye|gyo|sya|syu|syi|sye|syo|zya|zyu|zyi|zye|zyo|jya|jyu|jyi|jye|jyo|tya|tyi|tyu|tye|tyo|dya|dyi|dyu|dye|dyo|nya|nyi|nyu|nye|nyo|hya|hyi|hyu|hye|hyo|fya|fyi|fyu|fye|fyo|bya|byi|byu|bye|byo|pya|pyi|pyu|pye|pyo|mya|myi|myu|mye|myo|rya|ryi|ryu|rye|ryo|vya|vyi|vyu|vye|vyo|ka|ki|ku|ke|ko|ga|gi|gu|ge|go|sa|su|si|se|so|za|zu|zi|ze|zo|ja|ju|ji|je|jo|ta|ti|tu|te|to|da|di|du|de|do|na|ni|nu|ne|no|ha|hi|hu|he|ho|fa|fi|fu|fe|fo|ba|bi|bu|be|bo|pa|pi|pu|pe|po|ma|mi|mu|me|mo|ya|yi|yu|ye|yo|ra|ri|ru|re|ro|wa|wo|va|vi|vu|ve|vo|a|i|u|e|o|n|t)[^a-zA-Z\d\s:]*\s?)/g,ja=ge(He).and(f(":")).and(He.times(2)).and(f(":")).and(He.times(2)).and(f(".")).and(He.times(2)),er=Yn("Dialogue","Comment").groupedAs("type").and(f(": ")).and(ge(He).optionally().groupedAs("layer")).and(f(",")).and(ja.optionally().groupedAs("start")).and(f(",")).and(ja.optionally().groupedAs("end")).and(f(",")).and(ge(Re(",").optionally()).groupedAs("style")).and(f(",")).and(ge(Re(",")).optionally().groupedAs("actor")).and(f(",")).and(ge(He).optionally().groupedAs("marginLeft")).and(f(",")).and(ge(He).optionally().groupedAs("marginRight")).and(f(",")).and(ge(He).optionally().groupedAs("marginVertical")).and(f(",")).and(ge(Re(",")).optionally().groupedAs("effect")).and(f(",")).and(ge(Wn).optionally().groupedAs("content")),ar=G(er),tr=f("-").optionally().and(ge(He)),j=tr.and(f(".").and(ge(He)).optionally()),st=f("\\").and("a").and(j.groupedAs("a_value")),nr=G(st),Se=Jn.or(He).times(2),it=f("&H").and(Se.groupedAs("color_bgr_blue")).and(Se.groupedAs("color_bgr_green")).and(Se.groupedAs("color_bgr_red")).and(f("&")),ut=f("\\c").and(it),ct=f("\\1c").and(f("&H")).and(Se.groupedAs("color1_bgr_blue")).and(Se.groupedAs("color1_bgr_green")).and(Se.groupedAs("color1_bgr_red")).and(f("&")),dt=f("\\2c").and(f("&H")).and(Se.groupedAs("color2_bgr_blue")).and(Se.groupedAs("color2_bgr_green")).and(Se.groupedAs("color2_bgr_red")).and(f("&")),ft=f("\\3c").and(f("&H")).and(Se.groupedAs("color3_bgr_blue")).and(Se.groupedAs("color3_bgr_green")).and(Se.groupedAs("color3_bgr_red")).and(f("&")),vt=f("\\4c").and(f("&H")).and(Se.groupedAs("color4_bgr_blue")).and(Se.groupedAs("color4_bgr_green")).and(Se.groupedAs("color4_bgr_red")).and(f("&")),rr=G(it),or=G(ut),lr=G(ct),sr=G(dt),ir=G(ft),ur=G(vt),pt=f("\\").and("alpha").and(ge(Re("\\")).groupedAs("alpha_value")),cr=G(pt),gt=f("\\").and("1a").and(ge(Re("\\")).groupedAs("alpha1_value")),dr=G(gt),bt=f("\\").and("2a").and(ge(Re("\\")).groupedAs("alpha2_value")),fr=G(bt),ht=f("\\").and("3a").and(ge(Re("\\")).groupedAs("alpha3_value")),vr=G(ht),_t=f("\\").and("4a").and(ge(Re("\\")).groupedAs("alpha4_value")),pr=G(_t),mt=f("\\").and("k").and(j.groupedAs("k_lower_case_value")),gr=G(mt),xt=f("\\").and("K").and(j.groupedAs("k_upper_case_value")),br=G(xt),yt=f("\\").and("kf").and(j.groupedAs("kf_value")),hr=G(yt),kt=f("\\").and("ko").and(j.groupedAs("ko_value")),_r=G(kt),At=f("\\").and("q").and(j.groupedAs("q_value")),mr=G(At),Nt=f("\\").and("s").and(j.groupedAs("s_value")),xr=G(Nt),Et=f("\\").and("u").and(j.groupedAs("u_value")),yr=G(Et),St=f("\\").and("r").and(ge(Re("\\")).groupedAs("r_value")),kr=G(St),wt=f("\\").and("fe").and(j.groupedAs("fe_value")),Ar=G(wt),Ct=f("\\").and("fn").and(ge(Re("\\")).groupedAs("fn_value")),Nr=G(Ct),$t=f("\\").and("p").and(j.groupedAs("p_value")),Er=G($t),Lt=f("\\").and("pbo").and(j.groupedAs("pbo_value")),Sr=G(Lt),Rt=f("\\").and("an").and(j.groupedAs("an_value")),wr=G(Rt),Ft=f("\\").and("b").and(j.groupedAs("b_value")),Cr=G(Ft),Dt=f("\\").and("be").and(j.groupedAs("be_value")),$r=G(Dt),Tt=f("\\").and("blur").and(j.groupedAs("blur_value")),Lr=G(Tt),It=f("\\").and("bord").and(j.groupedAs("bord_value")),Rr=G(It),Vt=f("\\").and("xbord").and(j.groupedAs("xbord_value")),Fr=G(Vt),Pt=f("\\").and("ybord").and(j.groupedAs("ybord_value")),Dr=G(Pt),Mt=f("\\").and("shad").and(j.groupedAs("shad_value")),Tr=G(Mt),Ht=f("\\").and("xshad").and(j.groupedAs("xshad_value")),Ir=G(Ht),Bt=f("\\").and("yshad").and(j.groupedAs("yshad_value")),Vr=G(Bt),zt=f("\\").and("fax").and(j.groupedAs("fax_value")),Pr=G(zt),Ot=f("\\").and("fay").and(j.groupedAs("fay_value")),Mr=G(Ot),Gt=f("\\").and("fscx").and(j.groupedAs("fscx_value")),Hr=G(Gt),jt=f("\\").and("fscy").and(j.groupedAs("fscy_value")),Br=G(jt),Ut=f("\\").and("fsp").and(j.groupedAs("fsp_value")),zr=G(Ut),Kt=f("\\").and("fr").and(j.groupedAs("fr_value")),Or=G(Kt),Xt=f("\\").and("frx").and(j.groupedAs("frx_value")),Gr=G(Xt),qt=f("\\").and("fry").and(j.groupedAs("fry_value")),jr=G(qt),Yt=f("\\").and("frz").and(j.groupedAs("frz_value")),Ur=G(Yt),Wt=f("\\").and("i").and(f("1").or("0").groupedAs("i_value")),Kr=G(Wt),Jt=f("\\").and("fs").and(j.groupedAs("fs_value")),Xr=G(Jt),Zt=f("\\").and("pos").and(f("(")).and(j.groupedAs("pos_x")).and(f(",")).and(j.groupedAs("pos_y")).and(f(")")),qr=G(Zt),Qt=f("\\").and("org").and(f("(")).and(j.groupedAs("org_x")).and(f(",")).and(j.groupedAs("org_y")).and(f(")")),Yr=G(Qt),en=f("\\").and("fad").and(f("(")).and(j.groupedAs("in")).and(f(",")).and(j.groupedAs("out")).and(f(")")),Wr=G(en),an=f("\\").and("fade").and(f("(")).and(j.groupedAs("fade_alpha1")).and(f(",")).and(j.groupedAs("fade_alpha2")).and(f(",")).and(j.groupedAs("fade_alpha3")).and(f(",")).and(j.groupedAs("fade_t1")).and(f(",")).and(j.groupedAs("fade_t2")).and(f(",")).and(j.groupedAs("fade_t3")).and(f(",")).and(j.groupedAs("fade_t4")).and(f(")")),Jr=G(an),Zr=f(",").and(j.groupedAs("move_t1")).and(f(",")).and(j.groupedAs("move_t2")).optionally(),tn=f("\\").and("move").and(f("(")).and(j.groupedAs("move_x1")).and(f(",")).and(j.groupedAs("move_y1")).and(f(",")).and(j.groupedAs("move_x2")).and(f(",")).and(j.groupedAs("move_y2")).and(Zr).and(f(")")),Qr=G(tn),nn=f("\\").and("clip").and(f("(")).and(ge(Re(")")).groupedAs("clip_args")).and(f(")")),eo=G(nn),rn=f("\\").and("iclip").and(f("(")).and(ge(Re(")")).groupedAs("iclip_args")).and(f(")")),ao=G(rn),to=f("\\").and(ge(Re("\\")).groupedAs("unknown_value")),on=Dt.or(pt).or(Vt).or(Pt).or(Ht).or(Bt).or(rn).or(tn).or(Tt).or(It).or(Mt).or(Gt).or(jt).or(an).or(nn).or(Ut).or(Zt).or(Qt).or(en).or(Lt).or(Xt).or(qt).or(Yt).or(zt).or(Ot).or(kt).or(yt).or(Kt).or(Jt).or(wt).or(Ct).or(Rt).or(ct).or(dt).or(ft).or(vt).or(gt).or(bt).or(ht).or(_t).or(ut).or(At).or(Et).or(Nt).or($t).or(St).or(Wt).or(Ft).or(st).or(mt).or(xt).or(to),no=f("\\").at.lineStart().and("t").and(f("(")).and(j.groupedAs("arg1").and(f(",")).optionally()).and(j.groupedAs("arg2").and(f(",")).optionally()).and(j.groupedAs("arg3").and(f(",")).optionally()).and(ge(on).groupedAs("tags")).and(f(")")),ro=G(on),ln=G(no);function Ca(e){const t=Math.floor(e/3600),n=Math.floor((e/3600-t)*60);return e=e-t*3600-n*60,{hours:t,minutes:n,seconds:e}}function Ua(e){var a,p,b;const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=e.match(t);if(!n||n.length===0)return null;const l=Math.floor(Number(((a=n.groups)==null?void 0:a.h)??"0")),i=Math.floor(Number(((p=n.groups)==null?void 0:p.m)??"0")),o=Number(((b=n.groups)==null?void 0:b.s)??"0"),u={hours:l,minutes:i,seconds:o};return Va(u),u}function Va(e){e.seconds>=60&&(e.seconds-=60,e.minutes++),e.minutes>=60&&(e.minutes-=60,e.hours++),e.hours>=9&&(e.hours=9,e.minutes=59,e.seconds=59.99)}function Ka(e){Va(e);const t=e.hours.toFixed(0),n=e.minutes.toFixed(0).padStart(2,"0"),l=e.seconds.toFixed(2).padStart(5,"0");return`${t}:${n}:${l}`}function ha(e){return Va(e),e.hours*3600+e.minutes*60+e.seconds}var La;(function(e){e[e.DOWN_LEFT=1]="DOWN_LEFT",e[e.DOWN_CENTER=2]="DOWN_CENTER",e[e.DOWN_RIGHT=3]="DOWN_RIGHT",e[e.CENTER_LEFT=4]="CENTER_LEFT",e[e.CENTER_CENTER=5]="CENTER_CENTER",e[e.CENTER_RIGHT=6]="CENTER_RIGHT",e[e.UP_LEFT=7]="UP_LEFT",e[e.UP_CENTER=8]="UP_CENTER",e[e.UP_RIGHT=9]="UP_RIGHT"})(La||(La={}));const oo=nt.nativeEnum(La);var Ra;(function(e){e[e.ANSI=0]="ANSI",e[e.DEFAULT=1]="DEFAULT",e[e.SYMBOL=2]="SYMBOL",e[e.MAC=77]="MAC",e[e.SHIFT_JIS=128]="SHIFT_JIS",e[e.HANGEUL=129]="HANGEUL",e[e.JOHAB=130]="JOHAB",e[e.GB2312=134]="GB2312",e[e.CHINESE_BIG5=136]="CHINESE_BIG5",e[e.GREEK=161]="GREEK",e[e.TURKISH=162]="TURKISH",e[e.VIETNAMESE=163]="VIETNAMESE",e[e.HEBREW=177]="HEBREW",e[e.ARAB=178]="ARAB",e[e.BALTIC=186]="BALTIC",e[e.RUSSIAN=204]="RUSSIAN",e[e.THAI=222]="THAI",e[e.EASTERN_EUROPE=238]="EASTERN_EUROPE",e[e.OEM=255]="OEM"})(Ra||(Ra={}));const lo=nt.nativeEnum(Ra);function so(){return{format:"Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text",lines:[]}}function io(){return{data:[]}}function uo(){return{files:[]}}function co(){return{files:[]}}function fo(){return{comments:[],properties:new Map}}function vo(){return{comments:[],properties:new Map}}function po(){return{format:"Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding",styles:[]}}const go="[Script Info]",bo="[Aegisub Project Garbage]",ho="[V4+ Styles]",_o="[Graphics]",mo="[Fonts]",xo="[Events]",yo="[Aegisub Extradata]",_a="; ",Xa="Data: ";function ko(e){const t={scriptInfo:vo(),aegisubProjectGarbage:fo(),styles:po(),fonts:uo(),graphics:co(),events:so(),extraData:io()},n="scriptInfo",l="projectGarbage",i="styles",o="fonts",u="graphics",a="events",p="extraData";let b="",y="";const I=e.split(`
`);for(let A=0;A<I.length;A++){const F=A+1,x=Ao(I[A]);if(x.length===0)continue;switch(x){case go:b=n;continue;case bo:b=l;continue;case ho:b=i;continue;case mo:b=o;continue;case _o:b=u;continue;case xo:b=a;continue;case yo:b=p;continue}let U="";switch(b){case n:U=No(t,x);break;case l:U=Eo(t,x);break;case i:U=So(t,x);break;case o:y=wo(t,x,y);break;case u:y=Co(t,x,y);break;case a:U=$o(t,x);break;case p:Lo(t,x);break;default:console.error(`failed to parse line ${F}`);break}if(U.length>0)return console.error(`failed to parse ass file at line ${F}: ${U}
Line:
${x}`),null}return t}function Ao(e){return e=e.replaceAll("\\uFEFF",""),e=e.replaceAll("\r",""),e}function xa(e){var i,o;const t=/(?<key>.+):\s+(?<value>.*)\s*/,n={key:"",value:""},l=e.match(t);return!l||l.length===0?[n,`not a key-value pair: ${e}`]:(n.key=((i=l.groups)==null?void 0:i.key)??"",n.value=((o=l.groups)==null?void 0:o.value)??"",[n,""])}function No(e,t){if(t.startsWith(_a)){const i=t.substring(_a.length);return e.scriptInfo.comments.push(i),""}const[n,l]=xa(t);return l.length>0?`failed to parse script info line: ${l}`:(e.scriptInfo.properties.set(n.key,n.value),"")}function Eo(e,t){if(t.startsWith(_a)){const i=t.substring(_a.length);return e.aegisubProjectGarbage.comments.push(i),""}const[n,l]=xa(t);return l.length>0?`failed to parse script info line: ${l}`:(e.aegisubProjectGarbage.properties.set(n.key,n.value),"")}function So(e,t){const n=/Style: (?<name>.*)\s*,\s*(?<fontName>.*)\s*,\s*(?<fontSize>\d+(?:\.\d+)?)\s*,\s*&H(?<alpha1>[A-Fa-f0-9]{2})(?<color1>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha2>[A-Fa-f0-9]{2})(?<color2>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha3>[A-Fa-f0-9]{2})(?<color3>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha4>[A-Fa-f0-9]{2})(?<color4>[A-Fa-f0-9]{6})\s*,\s*(?<bold>0|-1)\s*,\s*(?<italic>0|-1)\s*,\s*(?<underline>0|-1)\s*,\s*(?<strikeout>0|-1)\s*,\s*(?<scaleX>\d+(?:\.\d+)?)\s*,\s*(?<scaleY>\d+(?:\.\d+)?)\s*,\s*(?<spacing>\d+(?:\.\d+)?)\s*,\s*(?<angle>-?\d+(?:\.\d+)?)\s*,\s*(?<borderStyle>\d+)\s*,\s*(?<outline>\d+(?:\.\d+)?)\s*,\s*(?<shadow>\d+(?:\.\d+)?)\s*,\s*(?<alignment>[1-9])\s*,\s*(?<marginLeft>\d+)\s*,\s*(?<marginRight>\d+)\s*,\s*(?<marginVertical>\d+)\s*,\s*(?<encoding>\d+)/;if(!t.startsWith("Style: "))return"";const l=t.match(n);if(!l||l.length===0||!l.groups)return`failed to parse style: not a style: ${t}`;const i=oo.safeParse(Number(l.groups.alignment));if(!i.success)return`failed to parse style: invalid alignment: ${t}`;const o=i.data,u=lo.safeParse(Number(l.groups.encoding));if(!u.success)return`failed to parse style: invalid encoding: ${l.groups.encoding}`;const a=u.data,p={name:l.groups.name??"",fontName:l.groups.fontName??"",fontSize:Number(l.groups.fontSize??"0"),primaryAlpha:l.groups.alpha1,primaryColor:l.groups.color1,secondaryAlpha:l.groups.alpha2,secondaryColor:l.groups.color2,outlineAlpha:l.groups.alpha3,outlineColor:l.groups.color3,backAlpha:l.groups.alpha4,backColor:l.groups.color4,bold:Number(l.groups.bold),italic:Number(l.groups.italic),underline:Number(l.groups.underline),strikeOut:Number(l.groups.strikeout),scaleX:Number(l.groups.scaleX),scaleY:Number(l.groups.scaleY),spacing:Number(l.groups.spacing),angle:Number(l.groups.angle),borderStyle:Number(l.groups.borderStyle),outline:Number(l.groups.outline),shadow:Number(l.groups.shadow),alignment:o,marginLeft:Number(l.groups.marginLeft),marginRight:Number(l.groups.marginRight),marginVertical:Number(l.groups.marginVertical),encoding:a};return e.styles.styles.push(p),""}function wo(e,t,n){const[l,i]=xa(t);if(i.length===0&&l.key=="fontname"){const a=l.value;let p={name:"",data:[]},b=e.fonts.files.findIndex(y=>y.name===a);return e.fonts.files.push(p),b=e.fonts.files.length-1,p=e.fonts.files[b],p.name=a,n=a,a}const o=e.fonts.files.findLastIndex(a=>a.name==n);return o<0?"":(e.fonts.files[o].data.push(t),n)}function Co(e,t,n){const[l,i]=xa(t);if(i.length===0&&l.key=="filename"){const a=l.value;let p={name:"",data:[]},b=e.graphics.files.findIndex(y=>y.name===a);return e.graphics.files.push(p),b=e.graphics.files.length-1,p=e.graphics.files[b],p.name=a,n=a,a}const o=e.graphics.files.findLastIndex(a=>a.name==n);return o<0?"":(e.graphics.files[o].data.push(t),n)}function $o(e,t){if(t.startsWith("Format:"))return e.events.format=t,"";const n=Ge(t);return n==null?`not a event (dialogue / comment): ${n}`:(e.events.lines.push(n),"")}function Lo(e,t){if(!t.startsWith(Xa))return;const n=t.substring(Xa.length);e.extraData.data.push(n)}function Ro(e){const t=[],n=e.content.split(" ");for(let p=0;p<n.length;p++){const b=n[p];if(Fo(b)){const y=b.matchAll(lt);for(const I of y)t.push({text:I[1],durationInMs:0})}else t.push({text:b,durationInMs:0});p!=n.length-1&&(t[t.length-1].text+=" ")}const l=Yo(e),i=Math.floor(Math.round(l*100/t.length)),o=t.length*i;for(const p of t)p.durationInMs=i;if(!(o===l*100)){const b=l*100-o;t[t.length-1].durationInMs+=b}const a=[];for(const p of t)a.push({name:"effect",tags:[{name:g.kf,value:p.durationInMs}]},{name:"text",value:p.text});e.content=_e(a)}function Fo(e){for(;e.length>0;){const t=e.match(lt);if(!t||t.length===0)return!1;e=e.substring(t[0].length)}return!0}var g;(function(e){e.a="a",e.alpha="alpha",e.alpha1="1a",e.alpha2="2a",e.alpha3="3a",e.alpha4="4a",e.an="an",e.b="b",e.be="be",e.blur="blur",e.bord="bord",e.clip="clip",e.color="c",e.color1="1c",e.color2="2c",e.color3="3c",e.color4="4c",e.fad="fad",e.fade="fade",e.fax="fax",e.fay="fay",e.fe="fe",e.fn="fn",e.fr="fr",e.frx="frx",e.fry="fry",e.frz="frz",e.fs="fs",e.fscx="fscx",e.fscy="fscy",e.fsp="fsp",e.i="i",e.iclip="iclip",e.kLowerCase="k",e.kUpperCase="K",e.kf="kf",e.ko="ko",e.move="move",e.org="org",e.p="p",e.pbo="pbo",e.pos="pos",e.q="q",e.r="r",e.s="s",e.shad="shad",e.t="t",e.text="text",e.u="u",e.unknown="unknown",e.xbord="xbord",e.xshad="xshad",e.ybord="ybord",e.yshad="yshad"})(g||(g={}));function va(e,t){var y,I,A,F,x,U,Y,X,q,J,L,_,N,M,H,Z,R,V,B,D,S,T,K,C,h,P,Q,te,se,ce,de,ee,fe,me,Pe,we,Ee,Fe,na,Ye,Be,We,ra,Je,Ze,c,xe,z,O,W,ne;const n=e.substring(1),l=e.match(ln);if(l&&l.length>0)return Do(e,t,n,l);const i=e.match(Qn);if(i&&i.length>0){const s=i[0];return t.push({name:g.text,value:s}),e=e.substring(s.length),e.length>0&&va(e,t),t}const o=e.match(ro);if(!o||o.length==0)return t;function u(s,d,re){return s.push(d),e=e.substring(re),e.length>0&&va(e,s),s}let a=(y=o[0].match(Qr))==null?void 0:y.groups;if(a!=null){const s=Number((a==null?void 0:a.move_x1)??"0"),d=Number((a==null?void 0:a.move_y1)??"0"),re=Number((a==null?void 0:a.move_x2)??"0"),le=Number((a==null?void 0:a.move_y2)??"0"),ye=a!=null&&a.move_t1?Number(a.move_t1):null,Ce=a!=null&&a.move_t2?Number(a.move_t2):null,ya={name:g.move,x1:s,y1:d,x2:re,y2:le,t1:ye,t2:Ce};return u(t,ya,o[0].length)}if(a=(I=o[0].match(cr))==null?void 0:I.groups,a!=null){const s=(a==null?void 0:a.alpha_value)??"",d={name:g.alpha,value:s};return u(t,d,o[0].length)}if(a=(A=o[0].match(Fr))==null?void 0:A.groups,a!=null){const s=Number((a==null?void 0:a.xbord_value)??"0"),d={name:g.xbord,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(F=o[0].match(Dr))==null?void 0:F.groups,a!=null){const s=Number((a==null?void 0:a.ybord_value)??"0"),d={name:g.ybord,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(x=o[0].match(Ir))==null?void 0:x.groups,a!=null){const s=Number((a==null?void 0:a.xshad_value)??"0"),d={name:g.xshad,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(U=o[0].match(Vr))==null?void 0:U.groups,a!=null){const s=Number((a==null?void 0:a.yshad_value)??"0"),d={name:g.yshad,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(Y=o[0].match(ao))==null?void 0:Y.groups,a!=null){const s=(a==null?void 0:a.iclip_args)??"",d={name:g.iclip,drawCommands:s};return u(t,d,o[0].length)}if(a=(X=o[0].match(Lr))==null?void 0:X.groups,a!=null){const s=Number((a==null?void 0:a.blur_value)??"0"),d={name:g.blur,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(q=o[0].match(Rr))==null?void 0:q.groups,a!=null){const s=Number((a==null?void 0:a.bord_value)??"0"),d={name:g.bord,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(J=o[0].match(Tr))==null?void 0:J.groups,a!=null){const s=Number((a==null?void 0:a.shad_value)??"0"),d={name:g.shad,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(L=o[0].match(Hr))==null?void 0:L.groups,a!=null){const s=Number((a==null?void 0:a.fscx_value)??"0"),d={name:g.fscx,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(_=o[0].match(Br))==null?void 0:_.groups,a!=null){const s=Number((a==null?void 0:a.fscy_value)??"0"),d={name:g.fscy,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(N=o[0].match(Jr))==null?void 0:N.groups,a!=null){const s=Number((a==null?void 0:a.fade_alpha1)??"0"),d=Number((a==null?void 0:a.fade_alpha2)??"0"),re=Number((a==null?void 0:a.fade_alpha3)??"0"),le=Number((a==null?void 0:a.fade_t1)??"0"),ye=Number((a==null?void 0:a.fade_t2)??"0"),Ce=Number((a==null?void 0:a.fade_t3)??"0"),ya=Number((a==null?void 0:a.fade_t4)??"0"),cn={name:g.fade,alpha1:s,alpha2:d,alpha3:re,t1:le,t2:ye,t3:Ce,t4:ya};return u(t,cn,o[0].length)}if(a=(M=o[0].match(eo))==null?void 0:M.groups,a!=null){const s=(a==null?void 0:a.clip_args)??"",d={name:g.clip,drawCommands:s};return u(t,d,o[0].length)}if(a=(H=o[0].match(zr))==null?void 0:H.groups,a!=null){const s=Number((a==null?void 0:a.fsp_value)??"0"),d={name:g.fsp,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(Z=o[0].match(qr))==null?void 0:Z.groups,a!=null){const s=Number((a==null?void 0:a.pos_x)??"0"),d=Number((a==null?void 0:a.pos_y)??"0"),re={name:g.pos,x:s,y:d};return u(t,re,o[0].length)}if(a=(R=o[0].match(Yr))==null?void 0:R.groups,a!=null){const s=Number((a==null?void 0:a.org_x)??"0"),d=Number((a==null?void 0:a.org_y)??"0"),re={name:g.org,x:s,y:d};return u(t,re,o[0].length)}if(a=(V=o[0].match(Wr))==null?void 0:V.groups,a!=null){const s=Number((a==null?void 0:a.in)??"0"),d=Number((a==null?void 0:a.out)??"0"),re={name:g.fad,in:s,out:d};return u(t,re,o[0].length)}if(a=(B=o[0].match(Gr))==null?void 0:B.groups,a!=null){const s=Number((a==null?void 0:a.frx_value)??"0"),d={name:g.frx,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(D=o[0].match(jr))==null?void 0:D.groups,a!=null){const s=Number((a==null?void 0:a.fry_value)??"0"),d={name:g.fry,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(S=o[0].match(Ur))==null?void 0:S.groups,a!=null){const s=Number((a==null?void 0:a.frz_value)??"0"),d={name:g.frz,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(T=o[0].match(Pr))==null?void 0:T.groups,a!=null){const s=Number((a==null?void 0:a.fax_value)??"0"),d={name:g.fax,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(K=o[0].match(Mr))==null?void 0:K.groups,a!=null){const s=Number((a==null?void 0:a.fay_value)??"0"),d={name:g.fay,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(C=o[0].match(Sr))==null?void 0:C.groups,a!=null){const s=Number((a==null?void 0:a.pbo_value)??"0"),d={name:g.pbo,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(h=o[0].match(Ar))==null?void 0:h.groups,a!=null){const s=Number((a==null?void 0:a.fe_value)??"0"),d={name:g.fe,encodingId:Number(s)};return u(t,d,o[0].length)}if(a=(P=o[0].match(Nr))==null?void 0:P.groups,a!=null){const s=(a==null?void 0:a.fn_value)??"",d={name:g.fn,font:s};return u(t,d,o[0].length)}if(a=(Q=o[0].match(wr))==null?void 0:Q.groups,a!=null){const s=Number((a==null?void 0:a.an_value)??"0"),d={name:g.an,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(te=o[0].match($r))==null?void 0:te.groups,a!=null){const s=Number((a==null?void 0:a.be_value)??"0"),d={name:g.be,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(se=o[0].match(Or))==null?void 0:se.groups,a!=null){const s=Number((a==null?void 0:a.fr_value)??"0"),d={name:g.fr,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(ce=o[0].match(Xr))==null?void 0:ce.groups,a!=null){const s=Number((a==null?void 0:a.fs_value)??"0"),d={name:g.fs,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(de=o[0].match(_r))==null?void 0:de.groups,a!=null){const s=Number((a==null?void 0:a.ko_value)??"0"),d={name:g.ko,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(ee=o[0].match(hr))==null?void 0:ee.groups,a!=null){const s=Number((a==null?void 0:a.kf_value)??"0"),d={name:g.kf,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(fe=o[0].match(lr))==null?void 0:fe.groups,a!=null){const s=Number(ie((a==null?void 0:a.color1_bgr_blue)??"0")),d=Number(ie((a==null?void 0:a.color1_bgr_green)??"0")),re=Number(ie((a==null?void 0:a.color1_bgr_red)??"0")),le={name:g.color1,blue:s,green:d,red:re};return u(t,le,o[0].length)}if(a=(me=o[0].match(sr))==null?void 0:me.groups,a!=null){const s=Number(ie((a==null?void 0:a.color2_bgr_blue)??"0")),d=Number(ie((a==null?void 0:a.color2_bgr_green)??"0")),re=Number(ie((a==null?void 0:a.color2_bgr_red)??"0")),le={name:g.color2,blue:s,green:d,red:re};return u(t,le,o[0].length)}if(a=(Pe=o[0].match(ir))==null?void 0:Pe.groups,a!=null){const s=Number(ie((a==null?void 0:a.color3_bgr_blue)??"0")),d=Number(ie((a==null?void 0:a.color3_bgr_green)??"0")),re=Number(ie((a==null?void 0:a.color3_bgr_red)??"0")),le={name:g.color3,blue:s,green:d,red:re};return u(t,le,o[0].length)}if(a=(we=o[0].match(ur))==null?void 0:we.groups,a!=null){const s=Number(ie((a==null?void 0:a.color4_bgr_blue)??"0")),d=Number(ie((a==null?void 0:a.color4_bgr_green)??"0")),re=Number(ie((a==null?void 0:a.color4_bgr_red)??"0")),le={name:g.color4,blue:s,green:d,red:re};return u(t,le,o[0].length)}if(a=(Ee=o[0].match(dr))==null?void 0:Ee.groups,a!=null){const s=a.alpha1_value??"",d={name:g.alpha1,value:s};return u(t,d,o[0].length)}if(a=(Fe=o[0].match(fr))==null?void 0:Fe.groups,a!=null){const s=a.alpha2_value??"",d={name:g.alpha2,value:s};return u(t,d,o[0].length)}if(a=(na=o[0].match(vr))==null?void 0:na.groups,a!=null){const s=a.alpha3_value??"",d={name:g.alpha3,value:s};return u(t,d,o[0].length)}if(a=(Ye=o[0].match(pr))==null?void 0:Ye.groups,a!=null){const s=a.alpha4_value??"",d={name:g.alpha4,value:s};return u(t,d,o[0].length)}if(a=(Be=o[0].match(gr))==null?void 0:Be.groups,a!=null){const s=Number((a==null?void 0:a.k_lower_case_value)??"0"),d={name:g.kLowerCase,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(We=o[0].match(br))==null?void 0:We.groups,a!=null){const s=Number((a==null?void 0:a.k_upper_case_value)??"0"),d={name:g.kUpperCase,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(ra=o[0].match(mr))==null?void 0:ra.groups,a!=null){const s=Number((a==null?void 0:a.q_value)??"0"),d={name:g.q,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(Je=o[0].match(xr))==null?void 0:Je.groups,a!=null){const s=Number((a==null?void 0:a.s_value)??"0"),d={name:g.s,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(Ze=o[0].match(yr))==null?void 0:Ze.groups,a!=null){const s=Number((a==null?void 0:a.u_value)??"0"),d={name:g.u,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(c=o[0].match(kr))==null?void 0:c.groups,a!=null){const s=(a==null?void 0:a.r_value)??"",d={name:g.r,style:s};return u(t,d,o[0].length)}if(a=(xe=o[0].match(Er))==null?void 0:xe.groups,a!=null){const s=Number((a==null?void 0:a.p_value)??"0"),d={name:g.p,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(z=o[0].match(Kr))==null?void 0:z.groups,a!=null){const s=Number((a==null?void 0:a.i_value)??"0"),d={name:g.i,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(O=o[0].match(or))==null?void 0:O.groups,a!=null){const s=Number(ie((a==null?void 0:a.color_bgr_blue)??"0")),d=Number(ie((a==null?void 0:a.color_bgr_green)??"0")),re=Number(ie((a==null?void 0:a.color_bgr_red)??"0")),le={name:g.color,blue:s,green:d,red:re};return u(t,le,o[0].length)}if(a=(W=o[0].match(Cr))==null?void 0:W.groups,a!=null){const s=Number((a==null?void 0:a.b_value)??"0"),d={name:g.b,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}if(a=(ne=o[0].match(nr))==null?void 0:ne.groups,a!=null){const s=Number((a==null?void 0:a.a_value)??"0"),d={name:g.a,value:Number.isNaN(s)?0:s};return u(t,d,o[0].length)}const p=o[0],b={name:g.unknown,value:p};return u(t,b,o[0].length)}function Do(e,t,n,l){var i;if(n.startsWith(g.t)){const o=(i=l[0].match(ln))==null?void 0:i.groups,u=(o==null?void 0:o.tags)??"",a=[];va(u,a);const p=o!=null&&o.arg1?Number(o.arg1):null,b=o!=null&&o.arg2?Number(o.arg2):null,y=o!=null&&o.arg3?Number(o.arg3):null,I={name:g.t,accel:null,t1:null,t2:null,tags:a};p!==null&&b!==null&&y!==null?(I.t1=p,I.t2=b,I.accel=y):p!==null&&b!==null&&y===null?(I.t1=p,I.t2=b,I.accel=null):p!==null&&(I.accel=p),t.push(I)}return e=e.substring(l[0].length),e.length>0&&va(e,t),t}function be(e){var l,i,o;const t=[],n=e.matchAll(Zn);for(const u of n){if((l=u.groups)!=null&&l.fx){const a=u.groups.fx.substring(1,u.groups.fx.length-1),p=[];va(a,p),t.push({name:"effect",tags:p});continue}if((i=u.groups)!=null&&i.txt){t.push({name:"text",value:(o=u.groups)==null?void 0:o.txt});continue}}return t}function sn(e){let t="";for(const n of e.tags)switch(n.name){case g.t:{const l={name:"effect",tags:n.tags},i=sn(l);n.t1!==null&&n.t2!==null&&n.accel!==null?t+=`\\t(${n.t1},${n.t2},${n.accel},${i})`:n.t1!==null&&n.t2!==null&&n.accel===null?t+=`\\t(${n.t1},${n.t2},${i})`:n.accel!==null?t+=`\\t(${n.accel},${i})`:t+=`\\t(${i})`;break}case g.pos:case g.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case g.move:t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null&&(t+=`,${n.t1},${n.t2}`),t+=")";break;case g.clip:case g.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case g.fad:t+=`\\fad(${n.in},${n.out})`;break;case g.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case g.fe:t+=`\\fe${n.encodingId}`;break;case g.fn:t+=`\\fn${n.font}`;break;case g.r:t+=`\\r${n.style}`;break;case g.color:case g.color1:case g.color2:case g.color3:case g.color4:{const l=ba(n.blue),i=ba(n.green),o=ba(n.red);t+=`\\${n.name}&H${l}${i}${o}&`;break}case g.text:case g.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function _e(e){let t="";for(const n of e){if(n.name=="text"){t+=n.value;continue}t+="{"+sn(n)+"}"}return t}function qa(e){const t=[];for(let n=0;n<e.length;n++){const l=e[n];if(l.name!="effect")continue;const i=e[n+1];if(i.name!="effect"){n++;continue}if(i==null)break;l.tags.push(...i.tags),t.push(n+1)}for(const n of t)e.splice(n,1)}function oa(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.pos,l=t.tags.find(i=>i.name==n);return(l==null?void 0:l.name)!=n?null:l}function To(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.move,l=t.tags.find(i=>i.name==n);return(l==null?void 0:l.name)!=n?null:l}function Io(e,t,n,l){const i={name:g.color,blue:t,green:n,red:l},[o,u]=Ve(e,i.name,i);return o||(u.blue=t,u.green=n,u.red=l),u}function Vo(e,t,n,l){const i={name:g.color1,blue:t,green:n,red:l},[o,u]=Ve(e,i.name,i);return o||(u.blue=t,u.green=n,u.red=l),u}function Po(e,t,n,l){const i={name:g.color2,blue:t,green:n,red:l},[o,u]=Ve(e,i.name,i);return o||(u.blue=t,u.green=n,u.red=l),u}function Mo(e,t,n,l){const i={name:g.color3,blue:t,green:n,red:l},[o,u]=Ve(e,i.name,i);return o||(u.blue=t,u.green=n,u.red=l),u}function Ho(e,t,n,l){const i={name:g.color4,blue:t,green:n,red:l},[o,u]=Ve(e,i.name,i);return o||(u.blue=t,u.green=n,u.red=l),u}function Bo(e,t){const n={name:g.alpha,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function zo(e,t){const n={name:g.alpha1,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Oo(e,t){const n={name:g.alpha2,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Go(e,t){const n={name:g.alpha3,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function jo(e,t){const n={name:g.alpha4,value:t},[l,i]=Ve(e,n.name,n);return l||(i.value=t),i}function Uo(e,t,n){const l={name:g.pos,x:t,y:n},[i,o]=Ve(e,l.name,l);return i||(o.x=t,o.y=n),o}function Ko(e,t,n,l,i,o=null,u=null){const a={name:g.move,x1:t,y1:n,x2:l,y2:i,t1:o,t2:u},[p,b]=Ve(e,a.name,a);return p||(b.x1=t,b.y1=n,b.x2=l,b.y2=i,b.t1=o,b.t2=u),b}function Ve(e,t,n){const l=e.find(o=>o.name=="effect");if((l==null?void 0:l.name)!="effect")return e.unshift({name:"effect",tags:[n]}),[!0,n];const i=l.tags.find(o=>o.name==t);return(i==null?void 0:i.name)!=t?(l.tags.push(n),[!0,n]):[!1,i]}function Xo(e,t){const n=e.find(i=>i.name=="effect");if((n==null?void 0:n.name)!="effect")return;const l=n.tags.findIndex(i=>i.name===t);l<0||n.tags.splice(l,1)}const qo="Dialogue",ma="Comment";function Ge(e){const t=e.match(ar);if(t==null)return null;const n=t.groups,l=Ua((n==null?void 0:n.start)??"");if(l==null)return null;const i=Ua((n==null?void 0:n.end)??"");return i==null?null:{type:(n==null?void 0:n.type)===ma?ma:qo,layer:Number((n==null?void 0:n.layer)??"0"),start:l,end:i,style:(n==null?void 0:n.style)??"",actor:(n==null?void 0:n.actor)??"",marginLeft:Number((n==null?void 0:n.marginLeft)??"0"),marginRight:Number((n==null?void 0:n.marginRight)??"0"),marginVertical:Number((n==null?void 0:n.marginVertical)??"0"),effect:(n==null?void 0:n.effect)??"",content:(n==null?void 0:n.content)??""}}function Ae(e){let t=e.type;return t+=": ",t+=Math.floor(e.layer),t+=",",t+=Ka(e.start),t+=",",t+=Ka(e.end),t+=",",t+=e.style,t+=",",t+=e.actor,t+=",",t+=Math.floor(e.marginLeft),t+=",",t+=Math.floor(e.marginRight),t+=",",t+=Math.floor(e.marginVertical),t+=",",t+=e.effect,t+=",",t+=e.content,t}function Yo(e){return ha(e.end)-ha(e.start)}function ze(e){const t=e.match(rr);if(t==null)return null;const n=t.groups;return{blue:ie((n==null?void 0:n.color_bgr_blue)??""),green:ie((n==null?void 0:n.color_bgr_green)??""),red:ie((n==null?void 0:n.color_bgr_red)??"")}}var Wo=(e,t)=>t(),Jo=(e,t)=>t(),Zo=()=>{},Qo=pe('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function el(e,t){Te(t,!0);const n=ve.copiarMovimiento;let l=w("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),i=w(""),o=w("");function u(){if(r(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const R=r(i).split(`
`);console.log(R);const V=Ge(r(l));if(V==null){console.error("invalid base line",r(l));return}const B=be(V.content),D=To(B);if(D==null){console.error("base move not found");return}const S=D.x2-D.x1,T=D.y2-D.y1;let K="";for(let C=0;C<R.length;C++){const h=R[C];if(h.length==0)continue;const P=Ge(h);if(P==null){console.error(`line ${C+1}: invalid line`);break}const Q=be(P.content),te=oa(Q);if(te==null){console.error(`line ${C+1}: pos not found`);break}Xo(Q,g.pos);const se=te.x,ce=te.y,de=te.x+S,ee=te.y+T;Ko(Q,se,ce,de,ee,D.t1,D.t2);const fe=_e(Q);P.content=fe;const me=Ae(P);console.log(me),C>0&&(K+=`
`),K+=me}v(o,$(K))}async function a(){await navigator.clipboard.writeText(r(o)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{for(let R=1;R<=10;R++){const V=182+R*5,B=421+R*7;v(i,r(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${V},${B})}LINEA ${R}
`)}});var p=Qo();Ke(R=>{qe.title=n});var b=k(p);b.textContent=n;var y=E(b,2),I=E(k(y),2),A=k(I);ta(A),m(I),m(y);var F=E(y,2),x=k(F),U=k(x,!0);m(x);var Y=E(x,2),X=k(Y);Le(X),m(Y),m(F);var q=E(F,2);q.__click=[Wo,u];var J=k(q,!0);m(q);var L=E(q,2),_=k(L),N=k(_),M=E(N);M.__click=[Jo,a],M.__keydown=[Zo],m(_);var H=E(_,2),Z=k(H);Le(Z),m(H),m(L),m(p),he(()=>{ue(U,ve.subtitulos),ue(J,ve.copiarMovimiento),ue(N,`${ve.resultado} `)}),Ne(A,()=>r(l),R=>v(l,R)),Ne(X,()=>r(i),R=>v(i,R)),Ne(Z,()=>r(o),R=>v(o,R)),oe(e,p),Ie()}je(["click","keydown"]);var al=pe(`<div class="text-column"><h1></h1> <div class="kagamin svelte-eb8v8f"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-eb8v8f"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-eb8v8f"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-eb8v8f"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function tl(e,t){Te(t,!1);const n=ve.acercaDe;Vn();var l=al();Ke(o=>{qe.title=n});var i=k(l);i.textContent=n,pa(20),m(l),oe(e,l),Ie()}var nl=pe('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function rl(e){var t=nl();Ke(n=>{qe.title="Asu"}),oe(e,t)}var ol=(e,t)=>t(),ll=pe("<b> </b>"),sl=pe('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Oe(e,t){Te(t,!0);let n=ea(t,"label",3,""),l=ea(t,"disabled",15,!1),i=ea(t,"startValue",15,""),o=ea(t,"endValue",15,""),u=ea(t,"startPlaceholder",3,""),a=ea(t,"endPlaceholder",3,""),p=w(void 0);function b(){var R;if((R=r(p))!=null&&R.checked){y();return}I()}function y(){l()&&(l(!1),r(p)&&(r(p).checked=!0),t.onEnabled&&t.onEnabled())}function I(){l()||(l(!0),r(p)&&(r(p).checked=!1),t.onDisabled&&t.onDisabled())}Xe(()=>{r(p)&&(r(p).checked=!l())});var A=sl(),F=k(A),x=k(F),U=k(x);U.__change=[ol,b],$e(U,R=>v(p,R),()=>r(p));var Y=E(U,2);{var X=R=>{var V=Ya();he(()=>ue(V,`${n()??""}
                (deshabilitado)`)),oe(R,V)},q=R=>{var V=ll(),B=k(V,!0);m(V),he(()=>ue(B,n())),oe(R,V)};ke(Y,R=>{l()?R(X):R(q,!1)})}m(x),m(F);var J=E(F,2),L=k(J),_=E(k(L),2),N=k(_);ta(N),m(_),m(L);var M=E(L,2),H=E(k(M),2),Z=k(H);return ta(Z),m(H),m(M),m(J),m(A),he(()=>{la(N,"placeholder",u()),N.disabled=l(),la(Z,"placeholder",a()),Z.disabled=l()}),Ne(N,i),Ne(Z,o),oe(e,A),Ie({enable:y,disable:I})}je(["change"]);function ia(e,t){const n=[];for(let l=e;l<=t;l++){const i=ba(l);n.push(i)}return n}function ua(e,t,n){const l=Array(n),i=wa(e.blue,t.blue,n);if(i.length!==n)return console.error(`ERROR: blue interpolated values ${i.length} don't match intervals ${n}`),[];const o=wa(e.green,t.green,n);if(o.length!==n)return console.error(`ERROR: green interpolated values ${o.length} don't match intervals ${n}`),[];const u=wa(e.red,t.red,n);if(u.length!==n)return console.error(`ERROR: red interpolated values ${u.length} don't match intervals ${n}`),[];for(var a=0;a<n;a++){const p=Math.floor(i[a]),b=Math.floor(o[a]),y=Math.floor(u[a]);l[a]={blue:p,green:b,red:y}}return l}var il=(e,t)=>t(),ul=()=>{},cl=pe('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function un(e,t){Te(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ve.lineasCopiadas)}var l=cl();l.__click=[il,n],l.__keydown=[ul],he(()=>la(l,"title",ve.copiar)),oe(e,l),Ie()}je(["click","keydown"]);var dl=(e,t)=>t(),fl=pe('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vl(e,t){Te(t,!0);const n=ve.aplicarAlpha,l="0",i="FF";let o=w(""),u=w(""),a=w("0"),p=w("FF"),b=w("0"),y=w("FF"),I=w("0"),A=w("FF"),F=w("0"),x=w("FF"),U=w("0"),Y=w("FF"),X=w(!1),q=w(!0),J=w(!0),L=w(!0),_=w(!0),N=w(void 0),M=w(void 0),H=w(void 0),Z=w(void 0),R=w(void 0),V=w(!1);function B(){var c,xe,z,O;(c=r(M))==null||c.disable(),(xe=r(H))==null||xe.disable(),(z=r(Z))==null||z.disable(),(O=r(R))==null||O.disable()}function D(){var c,xe,z,O;r(q)&&r(J)&&r(L)&&r(_)&&((c=r(M))==null||c.enable(),(xe=r(H))==null||xe.disable(),(z=r(Z))==null||z.disable(),(O=r(R))==null||O.disable())}function S(){var c;(c=r(N))==null||c.disable()}function T(){var c;r(q)&&r(J)&&r(L)&&r(_)&&((c=r(N))==null||c.enable())}function K(){const c=[],xe=r(o).split(`
`);for(const z of xe){if(z.length==0)continue;const O=Ge(z);O!=null&&c.push(O)}if(!r(X)){const z=ie(r(a)),O=ie(r(p));if(z>=O){alert("El inicio de alpha total debe ser menor al fin.");return}if(z<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const W=ia(z,O);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){let d=Math.floor(W.length*s/c.length);d>=W.length&&(d=W.length-1);const le=`&H${W[d]}&`,ye=be(c[s].content);Bo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(ne+=`
`),ne+=Ce}v(u,$(ne));return}if(!r(q)){const z=ie(r(b)),O=ie(r(y));if(z>=O){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(z<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const W=ia(z,O);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){let d=Math.floor(W.length*s/c.length);d>=W.length&&(d=W.length-1);const le=`&H${W[d]}&`,ye=be(c[s].content);zo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(ne+=`
`),ne+=Ce}v(u,$(ne))}if(!r(J)){const z=ie(r(I)),O=ie(r(A));if(z>=O){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(z<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const W=ia(z,O);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){let d=Math.floor(W.length*s/c.length);d>=W.length&&(d=W.length-1);const le=`&H${W[d]}&`,ye=be(c[s].content);Oo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(ne+=`
`),ne+=Ce}v(u,$(ne))}if(!r(L)){const z=ie(r(F)),O=ie(r(x));if(z>=O){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(z<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const W=ia(z,O);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){let d=Math.floor(W.length*s/c.length);d>=W.length&&(d=W.length-1);const le=`&H${W[d]}&`,ye=be(c[s].content);Go(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(ne+=`
`),ne+=Ce}v(u,$(ne))}if(!r(_)){const z=ie(r(U)),O=ie(r(Y));if(z>=O){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(z<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const W=ia(z,O);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){let d=Math.floor(W.length*s/c.length);d>=W.length&&(d=W.length-1);const le=`&H${W[d]}&`,ye=be(c[s].content);jo(ye,le),c[s].content=_e(ye);const Ce=Ae(c[s]);s>0&&(ne+=`
`),ne+=Ce}v(u,$(ne))}}Xe(()=>{for(let c=1;c<=10;c++)v(o,r(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${c}
`)});var C=fl();Ke(c=>{qe.title=n});var h=k(C);h.textContent=n;var P=E(h,4);$e(Oe(P,{label:"Alpha total",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>B(),onDisabled:()=>D(),get startValue(){return r(a)},set startValue(c){v(a,$(c))},get endValue(){return r(p)},set endValue(c){v(p,$(c))},get disabled(){return r(X)},set disabled(c){v(X,$(c))}}),c=>v(N,$(c)),()=>r(N));var Q=E(P,2);$e(Oe(Q,{label:"Alpha 1",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(b)},set startValue(c){v(b,$(c))},get endValue(){return r(y)},set endValue(c){v(y,$(c))},get disabled(){return r(q)},set disabled(c){v(q,$(c))}}),c=>v(M,$(c)),()=>r(M));var te=E(Q,2);$e(Oe(te,{label:"Alpha 2",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(I)},set startValue(c){v(I,$(c))},get endValue(){return r(A)},set endValue(c){v(A,$(c))},get disabled(){return r(J)},set disabled(c){v(J,$(c))}}),c=>v(H,$(c)),()=>r(H));var se=E(te,2);$e(Oe(se,{label:"Alpha 3",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(F)},set startValue(c){v(F,$(c))},get endValue(){return r(x)},set endValue(c){v(x,$(c))},get disabled(){return r(L)},set disabled(c){v(L,$(c))}}),c=>v(Z,$(c)),()=>r(Z));var ce=E(se,2);$e(Oe(ce,{label:"Alpha 4",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(U)},set startValue(c){v(U,$(c))},get endValue(){return r(Y)},set endValue(c){v(Y,$(c))},get disabled(){return r(_)},set disabled(c){v(_,$(c))}}),c=>v(R,$(c)),()=>r(R));var de=E(ce,2),ee=k(de);ta(ee),pa(),m(de);var fe=E(de,2),me=k(fe),Pe=k(me,!0);m(me);var we=E(me,2),Ee=k(we);Le(Ee),m(we),m(fe);var Fe=E(fe,2);Fe.__click=[dl,K];var na=k(Fe,!0);m(Fe);var Ye=E(Fe,2),Be=k(Ye),We=k(Be),ra=E(We);un(ra,{get rawResultLines(){return r(u)}}),m(Be);var Je=E(Be,2),Ze=k(Je);Le(Ze),m(Je),m(Ye),m(C),he(()=>{ue(Pe,ve.subtitulos),ue(na,ve.aplicarAlpha),ue(We,`${ve.resultado} `)}),Ia(ee,()=>r(V),c=>v(V,c)),Ne(Ee,()=>r(o),c=>v(o,c)),Ne(Ze,()=>r(u),c=>v(u,c)),oe(e,C),Ie()}je(["click"]);var pl=(e,t)=>t(),gl=pe('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function bl(e,t){Te(t,!0);const n=ve.aplicarColor,l="&HFFFFFF&",i="&H000000&";let o=w(""),u=w(""),a=w(l),p=w(i),b=w(l),y=w(i),I=w(l),A=w(i),F=w(l),x=w(i),U=w(l),Y=w(i),X=w(!1),q=w(!0),J=w(!0),L=w(!0),_=w(!0),N=w(void 0),M=w(void 0),H=w(void 0),Z=w(void 0),R=w(void 0),V=w(!1);function B(){var c,xe,z,O;(c=r(M))==null||c.disable(),(xe=r(H))==null||xe.disable(),(z=r(Z))==null||z.disable(),(O=r(R))==null||O.disable()}function D(){var c,xe,z,O;r(q)&&r(J)&&r(L)&&r(_)&&((c=r(M))==null||c.enable(),(xe=r(H))==null||xe.disable(),(z=r(Z))==null||z.disable(),(O=r(R))==null||O.disable())}function S(){var c;(c=r(N))==null||c.disable()}function T(){var c;r(q)&&r(J)&&r(L)&&r(_)&&((c=r(N))==null||c.enable())}function K(){const c=[],xe=r(o).split(`
`);for(const z of xe){if(z.length==0)continue;const O=Ge(z);O!=null&&c.push(O)}if(!r(X)){const z=ze(r(a));if(z==null){alert(`Color total de inicio inválido: ${r(a)}`);return}const O=ze(r(p));if(O==null){alert(`Color total de fin inválido: ${r(p)}`);return}const W=ua(z,O,c.length);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){const d=W[s],re=be(c[s].content);Io(re,d.blue,d.green,d.red),c[s].content=_e(re);const le=Ae(c[s]);s>0&&(ne+=`
`),ne+=le}v(u,$(ne));return}if(!r(q)){const z=ze(r(b));if(z==null){alert(`Color 1 de inicio inválido: ${r(b)}`);return}const O=ze(r(y));if(O==null){alert(`Color 1 de fin inválido: ${r(y)}`);return}const W=ua(z,O,c.length);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){const d=W[s],re=be(c[s].content);Vo(re,d.blue,d.green,d.red),c[s].content=_e(re);const le=Ae(c[s]);s>0&&(ne+=`
`),ne+=le}v(u,$(ne))}if(!r(J)){const z=ze(r(I));if(z==null){alert(`Color 2 de inicio inválido: ${r(I)}`);return}const O=ze(r(A));if(O==null){alert(`Color 2 de fin inválido: ${r(A)}`);return}const W=ua(z,O,c.length);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){const d=W[s],re=be(c[s].content);Po(re,d.blue,d.green,d.red),c[s].content=_e(re);const le=Ae(c[s]);s>0&&(ne+=`
`),ne+=le}v(u,$(ne))}if(!r(L)){const z=ze(r(F));if(z==null){alert(`Color 3 de inicio inválido: ${r(F)}`);return}const O=ze(r(x));if(O==null){alert(`Color 3 de fin inválido: ${r(x)}`);return}const W=ua(z,O,c.length);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){const d=W[s],re=be(c[s].content);Mo(re,d.blue,d.green,d.red),c[s].content=_e(re);const le=Ae(c[s]);s>0&&(ne+=`
`),ne+=le}v(u,$(ne))}if(!r(_)){const z=ze(r(U));if(z==null){alert(`Color 4 de inicio inválido: ${r(U)}`);return}const O=ze(r(Y));if(O==null){alert(`Color 4 de fin inválido: ${r(Y)}`);return}const W=ua(z,O,c.length);r(V)&&W.reverse();let ne="";for(let s=0;s<c.length;s++){const d=W[s],re=be(c[s].content);Ho(re,d.blue,d.green,d.red),c[s].content=_e(re);const le=Ae(c[s]);s>0&&(ne+=`
`),ne+=le}v(u,$(ne))}}Xe(()=>{v(o,r(o)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,r(o)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var C=gl();Ke(c=>{qe.title=n});var h=k(C);h.textContent=n;var P=E(h,4);$e(Oe(P,{label:"Color total",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>B(),onDisabled:()=>D(),get startValue(){return r(a)},set startValue(c){v(a,$(c))},get endValue(){return r(p)},set endValue(c){v(p,$(c))},get disabled(){return r(X)},set disabled(c){v(X,$(c))}}),c=>v(N,$(c)),()=>r(N));var Q=E(P,2);$e(Oe(Q,{label:"Color 1",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(b)},set startValue(c){v(b,$(c))},get endValue(){return r(y)},set endValue(c){v(y,$(c))},get disabled(){return r(q)},set disabled(c){v(q,$(c))}}),c=>v(M,$(c)),()=>r(M));var te=E(Q,2);$e(Oe(te,{label:"Color 2",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(I)},set startValue(c){v(I,$(c))},get endValue(){return r(A)},set endValue(c){v(A,$(c))},get disabled(){return r(J)},set disabled(c){v(J,$(c))}}),c=>v(H,$(c)),()=>r(H));var se=E(te,2);$e(Oe(se,{label:"Color 3",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(F)},set startValue(c){v(F,$(c))},get endValue(){return r(x)},set endValue(c){v(x,$(c))},get disabled(){return r(L)},set disabled(c){v(L,$(c))}}),c=>v(Z,$(c)),()=>r(Z));var ce=E(se,2);$e(Oe(ce,{label:"Color 4",startPlaceholder:l,endPlaceholder:i,onEnabled:()=>S(),onDisabled:()=>T(),get startValue(){return r(U)},set startValue(c){v(U,$(c))},get endValue(){return r(Y)},set endValue(c){v(Y,$(c))},get disabled(){return r(_)},set disabled(c){v(_,$(c))}}),c=>v(R,$(c)),()=>r(R));var de=E(ce,2),ee=k(de);ta(ee),pa(),m(de);var fe=E(de,2),me=k(fe),Pe=k(me,!0);m(me);var we=E(me,2),Ee=k(we);Le(Ee),m(we),m(fe);var Fe=E(fe,2);Fe.__click=[pl,K];var na=k(Fe,!0);m(Fe);var Ye=E(Fe,2),Be=k(Ye),We=k(Be),ra=E(We);un(ra,{get rawResultLines(){return r(u)}}),m(Be);var Je=E(Be,2),Ze=k(Je);Le(Ze),m(Je),m(Ye),m(C),he(()=>{ue(Pe,ve.subtitulos),ue(na,ve.aplicarColor),ue(We,`${ve.resultado} `)}),Ia(ee,()=>r(V),c=>v(V,c)),Ne(Ee,()=>r(o),c=>v(o,c)),Ne(Ze,()=>r(u),c=>v(u,c)),oe(e,C),Ie()}je(["click"]);var hl=(e,t)=>t(),_l=(e,t)=>t(),ml=()=>{},xl=pe('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function yl(e,t){Te(t,!0);const n=ve.aplicarSecuenciaPosiciones;let l=w(""),i=w(""),o=w(""),u=w(!1);function a(){if(r(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const S=[];{const C=r(l).split(`
`);for(const h of C){if(h.length==0)continue;const P=Ge(h);if(P==null)continue;const Q=be(P.content);if(oa(Q)==null){alert(`Línea base sin \\pos copiada: '${h}'`),console.log(h);return}S.push(P)}}const T=[];{const C=r(i).split(`
`);for(const h of C){if(h.length==0)continue;const P=Ge(h);if(P==null)continue;const Q=be(P.content);if(oa(Q)==null){alert(`Línea objetivo sin \\pos: '${h}'`),console.log(h);return}T.push(P)}}let K="";for(let C=0;C<T.length;C++){const h=T[C],P=be(h.content),Q=oa(P);if(Q==null){const ee=Ae(h);alert(`Línea objetivo sin \\pos: '${ee}'`),console.log(ee);return}let te=Q.x,se=Q.y;r(u)&&S.reverse();const ce=p(S),de=[];for(let ee=0;ee<S.length;ee++){const fe=ce[ee][0],me=ce[ee][1],Pe=te+fe,we=se+me;te=Pe,se=we,Uo(P,Pe,we),h.content=_e(P);const Ee=S[ee];h.start=Ee.start,h.end=Ee.end,de.push(structuredClone(h))}r(u)&&(S.reverse(),de.reverse());for(const ee of de)K+=Ae(ee)+`
`}v(o,$(K))}function p(S){const K=[[0,0]];for(let C=0;C<S.length-1;C++){const h=S[C],P=S[C+1],Q=be(h.content),te=oa(Q);if(te==null)return alert(`Línea base sin \\pos: '${Ae(h)}'`),console.log(h),[];const se=be(P.content),ce=oa(se);if(ce==null)return alert(`Línea base sin \\pos: '${Ae(P)}'`),console.log(P),[];const de=ce.x-te.x,ee=ce.y-te.y;K.push([de,ee])}return K}async function b(){await navigator.clipboard.writeText(r(o)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{v(l,r(l)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),v(l,r(l)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),v(l,r(l)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),v(i,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var y=xl();Ke(S=>{qe.title=n});var I=k(y);I.textContent=n;var A=E(I,2),F=E(k(A),2),x=k(F);Le(x),m(F),m(A);var U=E(A,2),Y=k(U);ta(Y),pa(),m(U);var X=E(U,2),q=k(X),J=k(q,!0);m(q);var L=E(q,2),_=k(L);Le(_),m(L),m(X);var N=E(X,2);N.__click=[hl,a];var M=k(N,!0);m(N);var H=E(N,2),Z=k(H),R=k(Z),V=E(R);V.__click=[_l,b],V.__keydown=[ml],m(Z);var B=E(Z,2),D=k(B);Le(D),m(B),m(H),m(y),he(()=>{ue(J,ve.subtitulos),ue(M,ve.aplicarSecuenciaPosiciones),ue(R,`${ve.resultado} `)}),Ne(x,()=>r(l),S=>v(l,S)),Ia(Y,()=>r(u),S=>v(u,S)),Ne(_,()=>r(i),S=>v(i,S)),Ne(D,()=>r(o),S=>v(o,S)),oe(e,y),Ie()}je(["click","keydown"]);var kl=(e,t)=>t(),Al=(e,t)=>t(),Nl=()=>{},El=pe('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Sl(e,t){Te(t,!0);const n=ve.dividirSilabas;let l=w(""),i=w("");function o(){if(r(l).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const N=r(l).split(`
`);let M="";for(let H=0;H<N.length;H++){const Z=N[H];if(Z.length==0)continue;const R=Ge(Z);if(R==null){console.error(`line ${H+1}: invalid line`);break}Ro(R);const V=Ae(R);H>0&&(M+=`
`),M+=V}v(i,$(M))}async function u(){await navigator.clipboard.writeText(r(i)),alert("¡Líneas copiadas al portapapeles!")}Xe(()=>{v(l,r(l)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),v(l,r(l)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),v(l,r(l)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`)});var a=El();Ke(N=>{qe.title=n});var p=k(a);p.textContent=n;var b=E(p,2),y=k(b),I=k(y);m(y);var A=E(y,2),F=k(A);Le(F),m(A),m(b);var x=E(b,2);x.__click=[kl,o];var U=k(x,!0);m(x);var Y=E(x,2),X=k(Y),q=k(X),J=E(q);J.__click=[Al,u],J.__keydown=[Nl],m(X);var L=E(X,2),_=k(L);Le(_),m(L),m(Y),m(a),he(()=>{ue(I,`${ve.subtitulos} (romaji)`),ue(U,ve.dividirSilabas),ue(q,`${ve.resultado} `)}),Ne(F,()=>r(l),N=>v(l,N)),Ne(_,()=>r(i),N=>v(i,N)),oe(e,a),Ie()}je(["click","keydown"]);var wl=(e,t)=>t(),Cl=pe("<button> </button>"),$l=pe('<p class="preview"> <b> </b></p>'),Ll=(e,t)=>t(),Rl=()=>{},Fl=pe('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <button class="button is-link is-fullwidth">Actualizar karaoke</button> <div class="mb-2"><label class="label" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Dl(e,t){Te(t,!0);const n=ve.dividirKaraoke,l="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let i=w(l),o=w($([])),u=w(""),a=w($([])),p=w(0);function b(){const B=Ge(r(i));if(B==null)return;const D=be(B.content);qa(D);const S=0;let T=r(a)[r(p)].index+1,K=0;for(let ee=0;ee<=r(p);ee++){const fe=r(a)[ee];fe.centiseconds!=null&&(K+=fe.centiseconds)}const C=ha(B.start),h=ha(B.end),P=D.slice(S,T);B.content=_e(P);const Q=K/100;B.end=Ca(C+Q),v(u,$(Ae(B)));let te=!0,se=0;for(;te;){const ee=D[T+1];if((ee==null?void 0:ee.name)!="text"){te=!1;break}if(te=ee.value.replaceAll(" ","").length===0,te&&(T+=2,se++),se>r(a).length)break}let ce=0;for(let ee=r(p)+1+se;ee<r(a).length;ee++){const fe=r(a)[ee];fe.centiseconds!=null&&(ce+=fe.centiseconds)}const de=D.slice(T);B.end=Ca(h),B.start=Ca(h-ce/100),B.content=_e(de),v(u,r(u)+(`
`+Ae(B))),v(o,$([_e(P.filter(ee=>ee.name=="text")),_e(de.filter(ee=>ee.name=="text"))]))}async function y(){await navigator.clipboard.writeText(r(u)),alert("¡Líneas copiadas al portapapeles!")}function I(){v(a,$([]));const B=Ge(r(i));if(B==null)return[];const D=be(B.content);qa(D);for(let S=0;S<D.length;S++){const T=D[S];if(T.name!="text")continue;r(a).push({index:S,text:T.value.replaceAll(" ",""),centiseconds:null});const K=S-1;if(K<0)continue;const C=D[K];if(C.name!="effect")continue;const h=C.tags.find(Q=>Q.name===g.kLowerCase||Q.name===g.kUpperCase||Q.name===g.kf||Q.name===g.ko);h==null||!(h.name===g.kLowerCase||h.name===g.kUpperCase||h.name===g.kf||h.name===g.ko)||(r(a)[r(a).length-1].centiseconds=h.value)}return v(p,$(Math.floor(r(a).length/2))),r(a)}Xe(()=>{I(),b()});var A=Fl();Ke(B=>{qe.title=n});var F=k(A);F.textContent=n;var x=E(F,2),U=E(k(x),2),Y=k(U);ta(Y),la(Y,"placeholder",l),m(U),m(x);var X=E(x,2);X.__click=[wl,I];var q=E(X,2),J=E(k(q),2);da(J,21,()=>r(a),ca,(B,D,S)=>{var T=Me(),K=De(T);{var C=h=>{var P=Cl();P.__click=()=>{v(p,$(S)),b()};var Q=k(P,!0);m(P),he(()=>{ga(P,`button ${(S===r(p)?"is-link":"")??""}`),la(P,"title",`${r(D).text}: ${r(D).centiseconds} centésimas`),ue(Q,r(D).text)}),oe(h,P)};ke(K,h=>{r(D).text.replaceAll(" ","").length>0&&h(C)})}oe(B,T)}),m(J),m(q);var L=E(q,2),_=E(k(L),2);da(_,17,()=>r(o),ca,(B,D,S)=>{var T=$l(),K=k(T);K.nodeValue=`Línea ${S+1}: `;var C=E(K),h=k(C,!0);m(C),m(T),he(()=>ue(h,r(D))),oe(B,T)}),m(L);var N=E(L,2),M=k(N),H=k(M),Z=E(H);Z.__click=[Ll,y],Z.__keydown=[Rl],m(M);var R=E(M,2),V=k(R);Le(V),m(R),m(N),m(A),he(()=>ue(H,`${ve.resultado} `)),Ne(Y,()=>r(i),B=>v(i,B)),Ne(V,()=>r(u),B=>v(u,B)),oe(e,A),Ie()}je(["click","keydown"]);function Tl(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}async function Il(e,t,n){t(!t()),await n()}var Vl=pe('<div class="area svelte-on5caf"><textarea class="textarea is-danger svelte-on5caf" readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function Pl(e,t){Te(t,!0);let n=ea(t,"rawMode",7),l=w($(t.text)),i=w(1),o=w(void 0);async function u(){a(),await Rn(),p()}function a(){if(n()){v(l,$(t.text));return}const x=be(t.text).filter(Y=>Y.name==="text");let U=_e(x);U=U.replaceAll("\\N",""),v(l,$(U))}function p(){v(i,$(b()))}function b(){return r(o)==null?1:Math.ceil(r(o).scrollHeight/r(o).clientHeight)}Xe(async()=>{await u()});var y=Vl(),I=k(y);Le(I),$e(I,x=>v(o,x),()=>r(o));var A=E(I,2);A.__click=[Il,n,u];var F=k(A,!0);m(A),m(y),he(()=>{Tn(I,r(l)),la(I,"rows",r(i)),ue(F,n()?"Ocultar etiquetas":"Ver etiquetas")}),oe(e,y),Ie()}je(["click"]);async function Ml(e,t,n,l,i,o,u,a){var b;const p=[...((b=r(t))==null?void 0:b.files)??[]];v(n,0),v(l,$([]));for(const y of p){const I=await y.text(),A=ko(I);if(A==null){console.error("archivo inválido",y.name);continue}v(i,$(o(y.name,r(u))));const F=a(A);v(n,r(n)+F.length),r(l).push({subsType:r(i),fileName:y.name,errors:F})}r(t)!=null&&(r(t).value="")}var Hl=pe("<option> </option>"),Bl=pe('<img class="result-image svelte-4hkz46" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),zl=pe('<img class="result-image svelte-4hkz46" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Ol=pe(`<img class="result-image svelte-4hkz46" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),Gl=pe("<div><b> </b></div> <!>",1),jl=pe("<div> <!></div>"),Ul=pe('<div class="text-failed svelte-4hkz46"> </div>'),Kl=pe(`<span class="ignore-rule svelte-4hkz46">Para ignorar, colocar <b> </b> en
                                campo de efecto.</span>`),Xl=pe('<span class="file-error svelte-4hkz46"> <!> <!></span>'),ql=pe('<div class="result svelte-4hkz46"><span> </span> <!> <div class="file-errors svelte-4hkz46"></div></div>'),Yl=pe('<section class="svelte-4hkz46"><h1></h1> <div class="select is-fullwidth mb-2"><select></select></div> <input type="file" accept=".ass" multiple> <!> <!></section>');function Wl(e,t){Te(t,!0);const n=ve.validarDialogos,l=["automático","carteles","diálogos","karaokes"];let i=w("automático"),o=w("diálogos"),u=w(void 0),a=w(0),p=w($([]));function b(_){const N=[];if(r(o)==="carteles")return N;const M=_.scriptInfo.properties.get("WrapStyle")??"",H="0";M!==H&&N.push({location:"Script info, wrap style",error:`Se esperaba "${H}", pero se encontró "${M}"`,text:M,ignoreRule:""});const Z=_.scriptInfo.properties.get("ScaledBorderAndShadow")??"",R="yes";Z!==R&&N.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${R}", pero se encontró "${Z}"`,text:Z,ignoreRule:""});let V=0;for(let B=0;B<_.events.lines.length;B++){const D=_.events.lines[B],S=B+1;if(r(o)!=="karaokes"&&D.effect.includes("template syl")){console.info(`template syl detectado en línea ${S}, pasando a modo karaokes`),v(o,"karaokes");continue}if(r(o)=="diálogos"&&D.type==ma||D.content===""||r(o)==="karaokes"&&D.style!=="Español"||r(o)==="karaokes"&&D.type!==ma||r(o)==="karaokes"&&D.effect!=="karaoke")continue;if(r(o)==="karaokes"&&D.effect==="fx")break;const T=D.effect.split(" ").filter(h=>h.startsWith("ignorar-"));if(T.includes("ignorar-linea"))continue;_.styles.styles.some(h=>D.style===h.name)||N.push({location:`Línea ${S}`,error:"Estilo no encontrado",text:D.style,ignoreRule:"ignorar-estilo"});const K=be(D.content);let C=_e(K.filter(h=>h.name==="text"));if(!T.includes("ignorar-inicio")){const h=y(C);h!=null&&N.push({location:`Línea ${S}`,error:h,text:D.content,ignoreRule:"ignorar-inicio"})}if(!T.includes("ignorar-espacios")){const h=I(C);h!=null&&N.push({location:`Línea ${S}`,error:h,text:D.content,ignoreRule:"ignorar-espacios"})}if(!T.includes("ignorar-fin")){C=Tl(C," ");const h=[".",",",";","...","!","?",":","~","-..."];h.some(P=>C.endsWith(P))||N.push({location:`Línea ${S}`,error:`No tiene un fin de línea válido: ${h.map(P=>`"${P}"`).join(", ")}`,text:D.content,ignoreRule:"ignorar-fin"})}if(!T.includes("ignorar-puntuacion"))for(let h=0;h<C.length;h++){const P=[",",";","."],Q=C[h];if(!P.includes(Q))continue;if(h+1>=C.length)break;let te=C[h+1];if(te==="\\"&&C[h+2]==="N"&&(te="\\N"),Q==="."&&te=="."||Q==="."&&C[h-1]==="."&&C[h-2]==="."||(Q==="."||Q===",")&&!Number.isNaN(Number(C[h-1]))&&!Number.isNaN(Number(C[h+1])))continue;[" ","\\N"].includes(te)||N.push({location:`Línea ${S}`,error:"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea",text:D.content,ignoreRule:"ignorar-puntuacion"})}r(o)==="karaokes"&&V++}return r(o)==="karaokes"&&V===0&&N.push({location:`Línea ${_.events.lines.length}`,error:"No se encontraron líneas de karaoke en español",text:"",ignoreRule:""}),N}function y(_){return _.startsWith("... ")?"los tres puntos van pegados":(_.startsWith("...")&&(_=_.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(_)?null:"inicio inválido")}function I(_){return _.includes("  ")?"hay dos espacios seguidos":null}function A(_,N){return N!=="automático"?N:(_=_.toLocaleLowerCase(),_.includes("carteles")?"carteles":_.includes("subs")?"diálogos":_.includes("karaoke")?"karaokes":"diálogos")}var F=Yl();Ke(_=>{qe.title=n});var x=k(F);x.textContent=n;var U=E(x,2),Y=k(U);da(Y,21,()=>l,ca,(_,N)=>{var M=Hl(),H={},Z=k(M);m(M),he(()=>{H!==(H=r(N))&&(M.value=(M.__value=r(N))==null?"":r(N)),ue(Z,`Modo ${r(N)??""}`)}),oe(_,M)}),m(Y),m(U);var X=E(U,2);X.__change=[Ml,u,a,p,o,A,i,b],$e(X,_=>v(u,_),()=>r(u));var q=E(X,2);{var J=_=>{var N=Gl(),M=De(N),H=k(M),Z=k(H);m(H),m(M);var R=E(M,2);{var V=D=>{var S=Bl();oe(D,S)},B=D=>{var S=Me(),T=De(S);{var K=h=>{var P=zl();oe(h,P)},C=h=>{var P=Ol();oe(h,P)};ke(T,h=>{r(a)>10?h(K):h(C,!1)},!0)}oe(D,S)};ke(R,D=>{r(a)===0?D(V):D(B,!1)})}he(()=>{ga(M,`error-counter text-${(r(a)==0?"success":"failed")??""} mt-2 svelte-4hkz46`),ue(Z,`Errores detectados: ${r(a)??""}`)}),oe(_,N)};ke(q,_=>{r(p).length>0&&_(J)})}var L=E(q,2);da(L,17,()=>r(p),ca,(_,N)=>{var M=ql(),H=k(M),Z=k(H,!0);m(H);var R=E(H,2);{var V=S=>{var T=jl(),K=k(T),C=E(K);{var h=P=>{var Q=Ya("Ignorado.");oe(P,Q)};ke(C,P=>{r(N).subsType==="carteles"&&P(h)})}m(T),he(()=>{ga(T,`text-success text-${r(N).subsType??""} svelte-4hkz46`),ue(K,`¡Todo en orden! Detectado como ${r(N).subsType??""}. `)}),oe(S,T)},B=S=>{var T=Ul(),K=k(T);m(T),he(()=>ue(K,`Detectado como ${r(N).subsType??""}.`)),oe(S,T)};ke(R,S=>{r(N).errors.length==0?S(V):S(B,!1)})}var D=E(R,2);da(D,21,()=>r(N).errors,ca,(S,T)=>{var K=Xl(),C=k(K),h=E(C);{var P=se=>{Pl(se,{get text(){return r(T).text},rawMode:!1})};ke(h,se=>{r(T).text!=""&&se(P)})}var Q=E(h,2);{var te=se=>{var ce=Kl(),de=E(k(ce)),ee=k(de,!0);m(de),pa(),m(ce),he(()=>ue(ee,r(T).ignoreRule)),oe(se,ce)};ke(Q,se=>{r(T).ignoreRule!=""&&se(te)})}m(K),he(()=>ue(C,`${r(T).location??""}: ${r(T).error??""}. `)),oe(S,K)}),m(D),m(M),he(()=>{ga(H,`name text-${(r(N).errors.length==0?"success":"failed")??""} text-${r(N).subsType??""} svelte-4hkz46`),ue(Z,r(N).fileName)}),oe(_,M)}),m(F),On(Y,()=>r(i),_=>v(i,_)),oe(e,F),Ie()}je(["change"]);function Jl(e,t){Te(t,!0);let n=w("");Xe(()=>{Oa.subscribe(y=>{y!=null&&v(n,$(y))});const p=new URLSearchParams(location.search).get("pagina")??"",b=In(p)?p:"inicio";Oa.set(b)});var l=Me(),i=De(l);{var o=a=>{rl(a)},u=a=>{var p=Me(),b=De(p);{var y=A=>{el(A,{})},I=A=>{var F=Me(),x=De(F);{var U=X=>{yl(X,{})},Y=X=>{var q=Me(),J=De(q);{var L=N=>{vl(N,{})},_=N=>{var M=Me(),H=De(M);{var Z=V=>{bl(V,{})},R=V=>{var B=Me(),D=De(B);{var S=K=>{Wl(K,{})},T=K=>{var C=Me(),h=De(C);{var P=te=>{Dl(te,{})},Q=te=>{var se=Me(),ce=De(se);{var de=fe=>{Sl(fe,{})},ee=fe=>{var me=Me(),Pe=De(me);{var we=Ee=>{tl(Ee,{})};ke(Pe,Ee=>{r(n)=="acercaDe"&&Ee(we)},!0)}oe(fe,me)};ke(ce,fe=>{r(n)=="karaokes.dividirSilabas"?fe(de):fe(ee,!1)},!0)}oe(te,se)};ke(h,te=>{r(n)=="karaokes.dividirKaraoke"?te(P):te(Q,!1)},!0)}oe(K,C)};ke(D,K=>{r(n)=="dialogos.validarDialogos"?K(S):K(T,!1)},!0)}oe(V,B)};ke(H,V=>{r(n)=="carteles.aplicarColor"?V(Z):V(R,!1)},!0)}oe(N,M)};ke(J,N=>{r(n)=="carteles.aplicarAlpha"?N(L):N(_,!1)},!0)}oe(X,q)};ke(x,X=>{r(n)=="carteles.aplicarSecuenciaPosiciones"?X(U):X(Y,!1)},!0)}oe(A,F)};ke(b,A=>{r(n)=="carteles.copiarMovimiento"?A(y):A(I,!1)},!0)}oe(a,p)};ke(i,a=>{r(n)=="inicio"?a(o):a(u,!1)})}oe(e,l),Ie()}var Zl=pe('<section class="svelte-70scd4"><!></section>');function ss(e){var t=Zl(),n=k(t);Jl(n,{}),m(t),oe(e,t)}export{ss as component,ls as universal};
