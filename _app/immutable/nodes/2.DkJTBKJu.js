import{d as Ve,t as ee,e as qe,s as X,a as L,b as ha,c as Oe}from"../chunks/CwJ6XYGs.js";import"../chunks/BF8XUEzE.js";import{a9 as $t,aa as Gt,ab as Fa,J as Dt,X as Rt,Q as Pe,ag as Va,ae as Ma,R as ja,O as ga,g as n,j as Ha,V as $a,W as Pt,Y as Tt,a0 as ct,am as Ga,Z as ba,_ as Ft,$ as Pa,av as _a,aq as pa,N as Ba,m as Ua,H as Bt,aw as At,a3 as Ka,ax as Vt,ay as za,az as Mt,aA as Ut,aB as Ya,ap as qa,aC as Xa,aD as ma,aE as Wa,ad as Ja,T as Qa,n as Za,aF as en,b as xa,a2 as Ea,a1 as ya,y as we,a as Ca,a7 as E,l as c,a6 as He,aG as Xe,C as f,E as g,D as d,A as ie,B as Re,aH as st,z as me,a8 as Sa}from"../chunks/CCHRc5u3.js";import{a as tn,p as y,i as re,b as ke}from"../chunks/CBNot3_l.js";import{f as an,p as Ye,h as be,i as nn,j as dt,r as rn,T as Ke,k as on,l as xe,m as Ee,t as oe,n as Ie,o as De,B as sn,c as ln,q as cn,u as dn,b as et,v as un,w as Ot,x as $e,y as fn,z as vn,A as hn,C as gn,D as bn,E as Ge,F as _n,G as pn,H as mn,I as xn,J as En,K as yn,L as Cn,s as Qe,M as Kt,N as zt,O as It,P as Ne,Q as Yt,R as Sn,S as kn,U as wn,a as qt,V as Rn}from"../chunks/705YHexE.js";import{p as je}from"../chunks/C-7UMIG7.js";function Tn(e){var t=Fa,a=Dt;$t(null),Gt(null);try{return e()}finally{$t(t),Gt(a)}}function jt(e,t,a,r=a){e.addEventListener(t,()=>Tn(a));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),an()}function ut(e,t){return t}function An(e,t,a,r){for(var o=[],i=t.length,l=0;l<i;l++)Ya(t[l].e,o,!0);var v=i>0&&o.length===0&&a!==null;if(v){var h=a.parentNode;qa(h),h.append(a),r.clear(),We(e,t[0].prev,t[i-1].next)}Xa(o,()=>{for(var p=0;p<i;p++){var m=t[p];v||(r.delete(m.k),We(e,m.prev,m.next)),ma(m.e,!v)}})}function ft(e,t,a,r,o,i=null){var l=e,v={items:new Map,first:null},h=(t&_a)!==0;if(h){var p=e;l=Pe?Rt(Va(p)):p.appendChild(Ma())}Pe&&ja();var m=null,C=!1,u=Ha(()=>{var b=a();return Ba(b)?b:b==null?[]:pa(b)});ga(()=>{var b=n(u),_=b.length;if(C&&_===0)return;C=_===0;let O=!1;if(Pe){var N=l.data===$a;N!==(_===0)&&(l=Pt(),Rt(l),Tt(!1),O=!0)}if(Pe){for(var S=null,$,M=0;M<_;M++){if(ct.nodeType===8&&ct.data===Ga){l=ct,O=!0,Tt(!1);break}var k=b[M],R=r(k,M);$=ka(ct,v,S,null,k,R,M,o,t,a),v.items.set(R,$),S=$}_>0&&Rt(Pt())}Pe||On(b,v,l,o,t,r,a),i!==null&&(_===0?m?ba(m):m=Ft(()=>i(l)):m!==null&&Pa(m,()=>{m=null})),O&&Tt(!0),n(u)}),Pe&&(l=ct)}function On(e,t,a,r,o,i,l){var F,V,q,K;var v=(o&za)!==0,h=(o&(Mt|Vt))!==0,p=e.length,m=t.items,C=t.first,u=C,b,_=null,O,N=[],S=[],$,M,k,R;if(v)for(R=0;R<p;R+=1)$=e[R],M=i($,R),k=m.get(M),k!==void 0&&((F=k.a)==null||F.measure(),(O??(O=new Set)).add(k));for(R=0;R<p;R+=1){if($=e[R],M=i($,R),k=m.get(M),k===void 0){var W=u?u.e.nodes_start:a;_=ka(W,t,_,_===null?t.first:_.next,$,M,R,r,o,l),m.set(M,_),N=[],S=[],u=_.next;continue}if(h&&In(k,$,R,o),k.e.f&At&&(ba(k.e),v&&((V=k.a)==null||V.unfix(),(O??(O=new Set)).delete(k))),k!==u){if(b!==void 0&&b.has(k)){if(N.length<S.length){var H=S[0],A;_=H.prev;var Q=N[0],Y=N[N.length-1];for(A=0;A<N.length;A+=1)Xt(N[A],H,a);for(A=0;A<S.length;A+=1)b.delete(S[A]);We(t,Q.prev,Y.next),We(t,_,Q),We(t,Y,H),u=H,_=Y,R-=1,N=[],S=[]}else b.delete(k),Xt(k,u,a),We(t,k.prev,k.next),We(t,k,_===null?t.first:_.next),We(t,_,k),_=k;continue}for(N=[],S=[];u!==null&&u.k!==M;)u.e.f&At||(b??(b=new Set)).add(u),S.push(u),u=u.next;if(u===null)continue;k=u}N.push(k),_=k,u=k.next}if(u!==null||b!==void 0){for(var G=b===void 0?[]:pa(b);u!==null;)u.e.f&At||G.push(u),u=u.next;var ne=G.length;if(ne>0){var fe=o&_a&&p===0?a:null;if(v){for(R=0;R<ne;R+=1)(q=G[R].a)==null||q.measure();for(R=0;R<ne;R+=1)(K=G[R].a)==null||K.fix()}An(t,G,fe,m)}}v&&Ka(()=>{var ae;if(O!==void 0)for(k of O)(ae=k.a)==null||ae.apply()}),Dt.first=t.first&&t.first.e,Dt.last=_&&_.e}function In(e,t,a,r){r&Mt&&Ut(e.v,t),r&Vt?Ut(e.i,a):e.i=a}function ka(e,t,a,r,o,i,l,v,h,p){var m=(h&Mt)!==0,C=(h&Wa)===0,u=m?C?Ua(o):Bt(o):o,b=h&Vt?Bt(l):l,_={i:b,v:u,k:i,a:null,e:null,prev:a,next:r};try{return _.e=Ft(()=>v(e,u,b,p),Pe),_.e.prev=a&&a.e,_.e.next=r&&r.e,a===null?t.first=_:(a.next=_,a.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Xt(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,o=t?t.e.nodes_start:a,i=e.e.nodes_start;i!==r;){var l=Ja(i);o.before(i),i=l}}function We(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Ln(e,t,...a){var r=e,o=Za,i;ga(()=>{o!==(o=t())&&(i&&(ma(i),i=null),i=Ft(()=>o(r,...a)))},Qa),Pe&&(r=ct)}function wa(e){var t,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(a=wa(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Nn(){for(var e,t,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(t=wa(e))&&(r&&(r+=" "),r+=t);return r}function Dn(e){return typeof e=="object"?Nn(e):e??""}function ye(e,t,a=t){var r=en();jt(e,"input",o=>{var i=o?e.defaultValue:e.value;if(i=Lt(e)?Nt(i):i,a(i),r&&i!==(i=t())){var l=e.selectionStart,v=e.selectionEnd;e.value=i??"",v!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(v,e.value.length))}}),(Pe&&e.defaultValue!==e.value||xa(t)==null&&e.value)&&a(Lt(e)?Nt(e.value):e.value),Ea(()=>{var o=t();Lt(e)&&o===Nt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ze(e,t,a=t){jt(e,"change",r=>{var o=r?e.defaultChecked:e.checked;a(o)}),(Pe&&e.defaultChecked!==e.checked||xa(t)==null)&&a(e.checked),Ea(()=>{var r=t();e.checked=!!r})}function Lt(e){var t=e.type;return t==="number"||t==="range"}function Nt(e){return e===""?null:+e}function Ra(e,t,a){if(e.multiple)return Mn(e,t);for(var r of e.options){var o=pt(r);if(tn(o,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e,t){ya(()=>{var a=new MutationObserver(()=>{var r=e.__value;Ra(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Vn(e,t,a=t){var r=!0;jt(e,"change",o=>{var i=o?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(i),pt);else{var v=e.querySelector(i)??e.querySelector("option:not([disabled])");l=v&&pt(v)}a(l)}),ya(()=>{var o=t();if(Ra(e,o,r),r&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=pt(i),a(o))}e.__value=o,r=!1}),Fn(e)}function Mn(e,t){for(var a of e.options)a.selected=~t.indexOf(pt(a))}function pt(e){return"__value"in e?e.__value:e.value}const jn=!0,si=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));var Hn=(e,t)=>t(),$n=()=>{},Gn=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Pn(e,t){we(t,!0);const a=oe.copiarMovimiento;let r=E("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),o=E(""),i=E("");Ca(()=>{l(n(r),n(o))});function l(A,Q){if(Q.length==0)return;const Y=Q.split(`
`);console.log(Y);const G=Ye(A);if(G==null){console.error("invalid base line",A);return}const ne=be(G.content),fe=nn(ne);if(fe==null){console.error("base move not found");return}const F=fe.x2-fe.x1,V=fe.y2-fe.y1;let q="";for(let K=0;K<Y.length;K++){const ae=Y[K];if(ae.length==0)continue;const P=Ye(ae);if(P==null){console.error(`line ${K+1}: invalid line`);break}const U=be(P.content),J=dt(U);if(J==null){console.error(`line ${K+1}: pos not found`);break}rn(U,Ke.pos);const z=J.x,le=J.y,ce=J.x+F,w=J.y+V;on(U,z,le,ce,w,fe.t1,fe.t2);const T=xe(U);P.content=T;const B=Ee(P);console.log(B),K>0&&(q+=`
`),q+=B}c(i,y(q))}async function v(){await navigator.clipboard.writeText(n(i)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{for(let A=1;A<=10;A++){const Q=182+A*5,Y=421+A*7;c(o,n(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${Q},${Y})}LINEA ${A}
`)}});var h=Gn();qe(A=>{Xe.title=a});var p=f(h);p.textContent=a;var m=g(p,2),C=g(f(m),2),u=f(C);Ie(u),d(C),d(m);var b=g(m,2),_=f(b),O=f(_,!0);d(_);var N=g(_,2),S=f(N);De(S),d(N),d(b);var $=g(b,2),M=f($),k=f(M),R=g(k);R.__click=[Hn,v],R.__keydown=[$n],d(M);var W=g(M,2),H=f(W);De(H),d(W),d($),d(h),ie(()=>{X(O,oe.subtitulos),X(k,`${oe.resultado} `)}),ye(u,()=>n(r),A=>c(r,A)),ye(S,()=>n(o),A=>c(o,A)),ye(H,()=>n(i),A=>c(i,A)),L(e,h),Re()}Ve(["click","keydown"]);var Bn=ee('<span class="version svelte-1ghhrj6"><a target="_blank"> </a></span>'),Un=ee(`<div class="text-column"><h1></h1> <!> <div class="kagamin svelte-1ghhrj6"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-1ghhrj6"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-1ghhrj6"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-1ghhrj6"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Kn(e,t){we(t,!0);const a=oe.acercaDe;let r=E(y(sn.parse({})));He(async()=>{ln.subscribe(h=>{h!=null&&c(r,y(h))})});var o=Un();qe(h=>{Xe.title=a});var i=f(o);i.textContent=a;var l=g(i,2);{var v=h=>{var p=Bn(),m=f(p),C=f(m);d(m),d(p),ie((u,b)=>{et(m,"href",u),X(C,`Versión ${n(r).ref??""}.${b??""} desplegada
                por
                ${n(r).actor??""}`)},[()=>cn(n(r).actor,n(r).repo,n(r).sha),()=>dn(n(r).sha)]),L(h,p)};re(l,h=>{n(r).sha!=""&&h(v)})}st(20),d(o),L(e,o),Re()}var zn=ee('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Yn(e){var t=zn();qe(a=>{Xe.title="Asu"}),L(e,t)}var qn=(e,t)=>t(),Xn=ee("<b> </b>"),Wn=ee('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Be(e,t){we(t,!0);let a=je(t,"label",3,""),r=je(t,"disabled",15,!1),o=je(t,"startValue",15,""),i=je(t,"endValue",15,""),l=je(t,"startPlaceholder",3,""),v=je(t,"endPlaceholder",3,""),h=E(void 0);function p(){var Y;if((Y=n(h))!=null&&Y.checked){m();return}C()}function m(){r()&&(r(!1),n(h)&&(n(h).checked=!0),t.onEnabled&&t.onEnabled())}function C(){r()||(r(!0),n(h)&&(n(h).checked=!1),t.onDisabled&&t.onDisabled())}He(()=>{n(h)&&(n(h).checked=!r())});var u=Wn(),b=f(u),_=f(b),O=f(_);O.__change=[qn,p],ke(O,Y=>c(h,Y),()=>n(h));var N=g(O,2);{var S=Y=>{var G=ha();ie(()=>X(G,`${a()??""}
                (deshabilitado)`)),L(Y,G)},$=Y=>{var G=Xn(),ne=f(G,!0);d(G),ie(()=>X(ne,a())),L(Y,G)};re(N,Y=>{r()?Y(S):Y($,!1)})}d(_),d(b);var M=g(b,2),k=f(M),R=g(f(k),2),W=f(R);Ie(W),d(R),d(k);var H=g(k,2),A=g(f(H),2),Q=f(A);return Ie(Q),d(A),d(H),d(M),d(u),ie(()=>{et(W,"placeholder",l()),W.disabled=r(),et(Q,"placeholder",v()),Q.disabled=r()}),ye(W,o),ye(Q,i),L(e,u),Re({enable:m,disable:C})}Ve(["change"]);function bt(e,t){const a=[];for(let r=e;r<=t;r++){const o=un(r);a.push(o)}return a}function _t(e,t,a){const r=Array(a),o=Ot(e.blue,t.blue,a);if(o.length!==a)return console.error(`ERROR: blue interpolated values ${o.length} don't match intervals ${a}`),[];const i=Ot(e.green,t.green,a);if(i.length!==a)return console.error(`ERROR: green interpolated values ${i.length} don't match intervals ${a}`),[];const l=Ot(e.red,t.red,a);if(l.length!==a)return console.error(`ERROR: red interpolated values ${l.length} don't match intervals ${a}`),[];for(var v=0;v<a;v++){const h=Math.floor(o[v]),p=Math.floor(i[v]),m=Math.floor(l[v]);r[v]={blue:h,green:p,red:m}}return r}var Jn=(e,t)=>t(),Qn=()=>{},Zn=ee('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function Ta(e,t){we(t,!0);async function a(){await navigator.clipboard.writeText(t.rawResultLines),alert(oe.lineasCopiadas)}var r=Zn();r.__click=[Jn,a],r.__keydown=[Qn],ie(()=>et(r,"title",oe.copiar)),L(e,r),Re()}Ve(["click","keydown"]);var er=(e,t)=>t(),tr=ee('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ar(e,t){we(t,!0);const a=oe.aplicarAlpha,r="0",o="FF";let i=E(""),l=E(""),v=E("0"),h=E("FF"),p=E("0"),m=E("FF"),C=E("0"),u=E("FF"),b=E("0"),_=E("FF"),O=E("0"),N=E("FF"),S=E(!1),$=E(!0),M=E(!0),k=E(!0),R=E(!0),W=E(void 0),H=E(void 0),A=E(void 0),Q=E(void 0),Y=E(void 0),G=E(!1);function ne(){var s,he,D,I;(s=n(H))==null||s.disable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable()}function fe(){var s,he,D,I;n($)&&n(M)&&n(k)&&n(R)&&((s=n(H))==null||s.enable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable())}function F(){var s;(s=n(W))==null||s.disable()}function V(){var s;n($)&&n(M)&&n(k)&&n(R)&&((s=n(W))==null||s.enable())}function q(){const s=[],he=n(i).split(`
`);for(const D of he){if(D.length==0)continue;const I=Ye(D);I!=null&&s.push(I)}if(!n(S)){const D=$e(n(v)),I=$e(n(h));if(D>=I){alert("El inicio de alpha total debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){let Z=Math.floor(j.length*x/s.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,pe=be(s[x].content);fn(pe,ve),s[x].content=xe(pe);const ue=Ee(s[x]);x>0&&(te+=`
`),te+=ue}c(l,y(te));return}if(!n($)){const D=$e(n(p)),I=$e(n(m));if(D>=I){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){let Z=Math.floor(j.length*x/s.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,pe=be(s[x].content);vn(pe,ve),s[x].content=xe(pe);const ue=Ee(s[x]);x>0&&(te+=`
`),te+=ue}c(l,y(te))}if(!n(M)){const D=$e(n(C)),I=$e(n(u));if(D>=I){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){let Z=Math.floor(j.length*x/s.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,pe=be(s[x].content);hn(pe,ve),s[x].content=xe(pe);const ue=Ee(s[x]);x>0&&(te+=`
`),te+=ue}c(l,y(te))}if(!n(k)){const D=$e(n(b)),I=$e(n(_));if(D>=I){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){let Z=Math.floor(j.length*x/s.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,pe=be(s[x].content);gn(pe,ve),s[x].content=xe(pe);const ue=Ee(s[x]);x>0&&(te+=`
`),te+=ue}c(l,y(te))}if(!n(R)){const D=$e(n(O)),I=$e(n(N));if(D>=I){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){let Z=Math.floor(j.length*x/s.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,pe=be(s[x].content);bn(pe,ve),s[x].content=xe(pe);const ue=Ee(s[x]);x>0&&(te+=`
`),te+=ue}c(l,y(te))}}He(()=>{for(let s=1;s<=10;s++)c(i,n(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${s}
`)});var K=tr();qe(s=>{Xe.title=a});var ae=f(K);ae.textContent=a;var P=g(ae,4);ke(Be(P,{label:"Alpha total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>fe(),get startValue(){return n(v)},set startValue(s){c(v,y(s))},get endValue(){return n(h)},set endValue(s){c(h,y(s))},get disabled(){return n(S)},set disabled(s){c(S,y(s))}}),s=>c(W,y(s)),()=>n(W));var U=g(P,2);ke(Be(U,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(p)},set startValue(s){c(p,y(s))},get endValue(){return n(m)},set endValue(s){c(m,y(s))},get disabled(){return n($)},set disabled(s){c($,y(s))}}),s=>c(H,y(s)),()=>n(H));var J=g(U,2);ke(Be(J,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(C)},set startValue(s){c(C,y(s))},get endValue(){return n(u)},set endValue(s){c(u,y(s))},get disabled(){return n(M)},set disabled(s){c(M,y(s))}}),s=>c(A,y(s)),()=>n(A));var z=g(J,2);ke(Be(z,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(b)},set startValue(s){c(b,y(s))},get endValue(){return n(_)},set endValue(s){c(_,y(s))},get disabled(){return n(k)},set disabled(s){c(k,y(s))}}),s=>c(Q,y(s)),()=>n(Q));var le=g(z,2);ke(Be(le,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(O)},set startValue(s){c(O,y(s))},get endValue(){return n(N)},set endValue(s){c(N,y(s))},get disabled(){return n(R)},set disabled(s){c(R,y(s))}}),s=>c(Y,y(s)),()=>n(Y));var ce=g(le,2),w=f(ce);Ie(w),st(),d(ce);var T=g(ce,2),B=f(T),_e=f(B,!0);d(B);var Fe=g(B,2),Ce=f(Fe);De(Ce),d(Fe),d(T);var Te=g(T,2);Te.__click=[er,q];var vt=f(Te,!0);d(Te);var tt=g(Te,2),Me=f(tt),at=f(Me),ht=g(at);Ta(ht,{get rawResultLines(){return n(l)}}),d(Me);var Ae=g(Me,2),se=f(Ae);De(se),d(Ae),d(tt),d(K),ie(()=>{X(_e,oe.subtitulos),X(vt,oe.aplicarAlpha),X(at,`${oe.resultado} `)}),ze(w,()=>n(G),s=>c(G,s)),ye(Ce,()=>n(i),s=>c(i,s)),ye(se,()=>n(l),s=>c(l,s)),L(e,K),Re()}Ve(["click"]);var nr=(e,t)=>t(),rr=ee('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function or(e,t){we(t,!0);const a=oe.aplicarColor,r="&HFFFFFF&",o="&H000000&";let i=E(""),l=E(""),v=E(r),h=E(o),p=E(r),m=E(o),C=E(r),u=E(o),b=E(r),_=E(o),O=E(r),N=E(o),S=E(!1),$=E(!0),M=E(!0),k=E(!0),R=E(!0),W=E(void 0),H=E(void 0),A=E(void 0),Q=E(void 0),Y=E(void 0),G=E(!1);function ne(){var s,he,D,I;(s=n(H))==null||s.disable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable()}function fe(){var s,he,D,I;n($)&&n(M)&&n(k)&&n(R)&&((s=n(H))==null||s.enable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable())}function F(){var s;(s=n(W))==null||s.disable()}function V(){var s;n($)&&n(M)&&n(k)&&n(R)&&((s=n(W))==null||s.enable())}function q(){const s=[],he=n(i).split(`
`);for(const D of he){if(D.length==0)continue;const I=Ye(D);I!=null&&s.push(I)}if(!n(S)){const D=Ge(n(v));if(D==null){alert(`Color total de inicio inválido: ${n(v)}`);return}const I=Ge(n(h));if(I==null){alert(`Color total de fin inválido: ${n(h)}`);return}const j=_t(D,I,s.length);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){const Z=j[x],de=be(s[x].content);_n(de,Z.blue,Z.green,Z.red),s[x].content=xe(de);const ve=Ee(s[x]);x>0&&(te+=`
`),te+=ve}c(l,y(te));return}if(!n($)){const D=Ge(n(p));if(D==null){alert(`Color 1 de inicio inválido: ${n(p)}`);return}const I=Ge(n(m));if(I==null){alert(`Color 1 de fin inválido: ${n(m)}`);return}const j=_t(D,I,s.length);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){const Z=j[x],de=be(s[x].content);pn(de,Z.blue,Z.green,Z.red),s[x].content=xe(de);const ve=Ee(s[x]);x>0&&(te+=`
`),te+=ve}c(l,y(te))}if(!n(M)){const D=Ge(n(C));if(D==null){alert(`Color 2 de inicio inválido: ${n(C)}`);return}const I=Ge(n(u));if(I==null){alert(`Color 2 de fin inválido: ${n(u)}`);return}const j=_t(D,I,s.length);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){const Z=j[x],de=be(s[x].content);mn(de,Z.blue,Z.green,Z.red),s[x].content=xe(de);const ve=Ee(s[x]);x>0&&(te+=`
`),te+=ve}c(l,y(te))}if(!n(k)){const D=Ge(n(b));if(D==null){alert(`Color 3 de inicio inválido: ${n(b)}`);return}const I=Ge(n(_));if(I==null){alert(`Color 3 de fin inválido: ${n(_)}`);return}const j=_t(D,I,s.length);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){const Z=j[x],de=be(s[x].content);xn(de,Z.blue,Z.green,Z.red),s[x].content=xe(de);const ve=Ee(s[x]);x>0&&(te+=`
`),te+=ve}c(l,y(te))}if(!n(R)){const D=Ge(n(O));if(D==null){alert(`Color 4 de inicio inválido: ${n(O)}`);return}const I=Ge(n(N));if(I==null){alert(`Color 4 de fin inválido: ${n(N)}`);return}const j=_t(D,I,s.length);n(G)&&j.reverse();let te="";for(let x=0;x<s.length;x++){const Z=j[x],de=be(s[x].content);En(de,Z.blue,Z.green,Z.red),s[x].content=xe(de);const ve=Ee(s[x]);x>0&&(te+=`
`),te+=ve}c(l,y(te))}}He(()=>{c(i,n(i)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(i,n(i)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var K=rr();qe(s=>{Xe.title=a});var ae=f(K);ae.textContent=a;var P=g(ae,4);ke(Be(P,{label:"Color total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>fe(),get startValue(){return n(v)},set startValue(s){c(v,y(s))},get endValue(){return n(h)},set endValue(s){c(h,y(s))},get disabled(){return n(S)},set disabled(s){c(S,y(s))}}),s=>c(W,y(s)),()=>n(W));var U=g(P,2);ke(Be(U,{label:"Color 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(p)},set startValue(s){c(p,y(s))},get endValue(){return n(m)},set endValue(s){c(m,y(s))},get disabled(){return n($)},set disabled(s){c($,y(s))}}),s=>c(H,y(s)),()=>n(H));var J=g(U,2);ke(Be(J,{label:"Color 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(C)},set startValue(s){c(C,y(s))},get endValue(){return n(u)},set endValue(s){c(u,y(s))},get disabled(){return n(M)},set disabled(s){c(M,y(s))}}),s=>c(A,y(s)),()=>n(A));var z=g(J,2);ke(Be(z,{label:"Color 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(b)},set startValue(s){c(b,y(s))},get endValue(){return n(_)},set endValue(s){c(_,y(s))},get disabled(){return n(k)},set disabled(s){c(k,y(s))}}),s=>c(Q,y(s)),()=>n(Q));var le=g(z,2);ke(Be(le,{label:"Color 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(O)},set startValue(s){c(O,y(s))},get endValue(){return n(N)},set endValue(s){c(N,y(s))},get disabled(){return n(R)},set disabled(s){c(R,y(s))}}),s=>c(Y,y(s)),()=>n(Y));var ce=g(le,2),w=f(ce);Ie(w),st(),d(ce);var T=g(ce,2),B=f(T),_e=f(B,!0);d(B);var Fe=g(B,2),Ce=f(Fe);De(Ce),d(Fe),d(T);var Te=g(T,2);Te.__click=[nr,q];var vt=f(Te,!0);d(Te);var tt=g(Te,2),Me=f(tt),at=f(Me),ht=g(at);Ta(ht,{get rawResultLines(){return n(l)}}),d(Me);var Ae=g(Me,2),se=f(Ae);De(se),d(Ae),d(tt),d(K),ie(()=>{X(_e,oe.subtitulos),X(vt,oe.aplicarColor),X(at,`${oe.resultado} `)}),ze(w,()=>n(G),s=>c(G,s)),ye(Ce,()=>n(i),s=>c(i,s)),ye(se,()=>n(l),s=>c(l,s)),L(e,K),Re()}Ve(["click"]);var ir=(e,t)=>t(),sr=()=>{},lr=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function cr(e,t){we(t,!0);const a=oe.aplicarSecuenciaPosiciones;let r=E(""),o=E(""),i=E(""),l=E(!1);Ca(()=>{v(n(r),n(o),n(l))});function v(ne,fe,F){if(fe.length==0)return;const V=[];{const ae=ne.split(`
`);for(const P of ae){if(P.length==0)continue;const U=Ye(P);if(U==null)continue;const J=be(U.content);if(dt(J)==null){alert(`Línea base sin \\pos copiada: '${P}'`),console.log(P);return}V.push(U)}}const q=[];{const ae=fe.split(`
`);for(const P of ae){if(P.length==0)continue;const U=Ye(P);if(U==null)continue;const J=be(U.content);if(dt(J)==null){alert(`Línea objetivo sin \\pos: '${P}'`),console.log(P);return}q.push(U)}}let K="";for(let ae=0;ae<q.length;ae++){const P=q[ae],U=be(P.content),J=dt(U);if(J==null){const T=Ee(P);alert(`Línea objetivo sin \\pos: '${T}'`),console.log(T);return}let z=J.x,le=J.y;F&&V.reverse();const ce=h(V),w=[];for(let T=0;T<V.length;T++){const B=ce[T][0],_e=ce[T][1],Fe=z+B,Ce=le+_e;z=Fe,le=Ce,yn(U,Fe,Ce),P.content=xe(U);const Te=V[T];P.start=Te.start,P.end=Te.end,w.push(structuredClone(P))}F&&(V.reverse(),w.reverse());for(const T of w)K+=Ee(T)+`
`}c(i,y(K))}function h(ne){const F=[[0,0]];for(let V=0;V<ne.length-1;V++){const q=ne[V],K=ne[V+1],ae=be(q.content),P=dt(ae);if(P==null)return alert(`Línea base sin \\pos: '${Ee(q)}'`),console.log(q),[];const U=be(K.content),J=dt(U);if(J==null)return alert(`Línea base sin \\pos: '${Ee(K)}'`),console.log(K),[];const z=J.x-P.x,le=J.y-P.y;F.push([z,le])}return F}async function p(){await navigator.clipboard.writeText(n(i)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{c(r,n(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),c(r,n(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),c(o,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var m=lr();qe(ne=>{Xe.title=a});var C=f(m);C.textContent=a;var u=g(C,2),b=g(f(u),2),_=f(b);De(_),d(b),d(u);var O=g(u,2),N=f(O);Ie(N),st(),d(O);var S=g(O,2),$=f(S),M=f($,!0);d($);var k=g($,2),R=f(k);De(R),d(k),d(S);var W=g(S,2),H=f(W),A=f(H),Q=g(A);Q.__click=[ir,p],Q.__keydown=[sr],d(H);var Y=g(H,2),G=f(Y);De(G),d(Y),d(W),d(m),ie(()=>{X(M,oe.subtitulos),X(A,`${oe.resultado} `)}),ye(_,()=>n(r),ne=>c(r,ne)),ze(N,()=>n(l),ne=>c(l,ne)),ye(R,()=>n(o),ne=>c(o,ne)),ye(G,()=>n(i),ne=>c(i,ne)),L(e,m),Re()}Ve(["click","keydown"]);var dr=(e,t)=>t(),ur=()=>{},fr=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vr(e,t){we(t,!0);const a=oe.dividirSilabas;let r=E(""),o=E(""),i=E("");function l(){if(n(o).length==0)return;const R=n(o).split(`
`);let W="";for(let H=0;H<R.length;H++){const A=R[H];if(A.length==0)continue;const Q=Ye(A);if(Q==null){console.error(`line ${H+1}: invalid line`);break}Cn(Q);const Y=Ee(Q);H>0&&(W+=`
`),W+=Y}c(i,y(W))}async function v(){await navigator.clipboard.writeText(n(i)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{c(r,n(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),c(r,n(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),c(r,n(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`),c(o,y(n(r))),l()});var h=fr();qe(R=>{Xe.title=a});var p=f(h);p.textContent=a;var m=g(p,2),C=f(m),u=f(C);d(C);var b=g(C,2),_=f(b);De(_),_.__input=l,d(b),d(m);var O=g(m,2),N=f(O),S=f(N),$=g(S);$.__click=[dr,v],$.__keydown=[ur],d(N);var M=g(N,2),k=f(M);De(k),d(M),d(O),d(h),ie(()=>{X(u,`${oe.subtitulos} (romaji)`),et(_,"placeholder",n(r)),X(S,`${oe.resultado} `)}),ye(_,()=>n(o),R=>c(o,R)),ye(k,()=>n(i),R=>c(i,R)),L(e,h),Re()}Ve(["input","click","keydown"]);var hr=ee('<p class="error svelte-tm085k"> </p>'),gr=ee("<button> </button>"),br=ee('<p class="preview"> <b> </b></p>'),_r=(e,t)=>t(),pr=()=>{},mr=ee('<section class="svelte-tm085k"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <!> <div class="mb-2"><label class="label mt-2" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function xr(e,t){we(t,!0);const a=oe.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let o=E(r),i=E(y([])),l=E(""),v=E(y([])),h=E(0),p=E("");function m(){const F=Ye(n(o));if(F==null)return;const V=be(F.content);Kt(V);const q=0;let K=n(v)[n(h)].index+1,ae=0;for(let B=0;B<=n(h);B++){const _e=n(v)[B];_e.centiseconds!=null&&(ae+=_e.centiseconds)}const P=zt(F.start),U=zt(F.end),J=V.slice(q,K);F.content=xe(J);const z=ae/100;F.end=It(P+z),c(l,y(Ee(F)));let le=!0,ce=0;for(;le;){const B=V[K+1];if((B==null?void 0:B.name)!="text"){le=!1;break}if(le=B.value.replaceAll(" ","").length===0,le&&(K+=2,ce++),ce>n(v).length)break}let w=0;for(let B=n(h)+1+ce;B<n(v).length;B++){const _e=n(v)[B];_e.centiseconds!=null&&(w+=_e.centiseconds)}const T=V.slice(K);F.end=It(U),F.start=It(U-w/100),F.content=xe(T),c(l,n(l)+(`
`+Ee(F))),c(i,y([xe(J.filter(B=>B.name=="text")),xe(T.filter(B=>B.name=="text"))]))}async function C(){await navigator.clipboard.writeText(n(l)),alert("¡Líneas copiadas al portapapeles!")}function u(){c(i,y([])),c(l,""),c(v,y([])),c(h,0),c(p,"");const F=Ye(n(o));if(F==null)return c(p,`Línea de karaoke inválida. Se esperaba el formato: <${r}>.`),[];const V=be(F.content);Kt(V);for(let q=0;q<V.length;q++){const K=V[q];if(K.name!="text")continue;n(v).push({index:q,text:K.value.replaceAll(" ",""),centiseconds:null});const ae=q-1;if(ae<0)continue;const P=V[ae];if(P.name!="effect")continue;const U=P.tags.find(z=>z.name===Ke.kLowerCase||z.name===Ke.kUpperCase||z.name===Ke.kf||z.name===Ke.ko);U==null||!(U.name===Ke.kLowerCase||U.name===Ke.kUpperCase||U.name===Ke.kf||U.name===Ke.ko)||(n(v)[n(v).length-1].centiseconds=U.value)}return c(h,y(Math.floor(n(v).length/2))),m(),n(v)}He(()=>{u()});var b=mr();qe(F=>{Xe.title=a});var _=f(b);_.textContent=a;var O=g(_,2),N=g(f(O),2),S=f(N);Ie(S),et(S,"placeholder",r),S.__input=u,d(N),d(O);var $=g(O,2);{var M=F=>{var V=hr(),q=f(V,!0);d(V),ie(()=>X(q,n(p))),L(F,V)};re($,F=>{n(p)!=""&&F(M)})}var k=g($,2),R=g(f(k),2);ft(R,21,()=>n(v),ut,(F,V,q)=>{var K=Oe(),ae=me(K);{var P=U=>{var J=gr();J.__click=()=>{c(h,y(q)),m()};var z=f(J,!0);d(J),ie(()=>{Qe(J,`button ${(q===n(h)?"is-link":"")??""}`),et(J,"title",`${n(V).text}: ${n(V).centiseconds} centésimas`),X(z,n(V).text)}),L(U,J)};re(ae,U=>{n(V).text.replaceAll(" ","").length>0&&U(P)})}L(F,K)}),d(R),d(k);var W=g(k,2),H=g(f(W),2);ft(H,17,()=>n(i),ut,(F,V,q)=>{var K=br(),ae=f(K);ae.nodeValue=`Línea ${q+1}: `;var P=g(ae),U=f(P,!0);d(P),d(K),ie(()=>X(U,n(V))),L(F,K)}),d(W);var A=g(W,2),Q=f(A),Y=f(Q),G=g(Y);G.__click=[_r,C],G.__keydown=[pr],d(Q);var ne=g(Q,2),fe=f(ne);De(fe),d(ne),d(A),d(b),ie(()=>X(Y,`${oe.resultado} `)),ye(S,()=>n(o),F=>c(o,F)),ye(fe,()=>n(l),F=>c(l,F)),L(e,b),Re()}Ve(["input","click","keydown"]);var Wt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Wt||(Wt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Jt||(Jt={}));var Qt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Qt||(Qt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=["user","model","function","system"];var ea;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(ea||(ea={}));var ta;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ta||(ta={}));var aa;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(aa||(aa={}));var na;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(na||(na={}));var mt;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(mt||(mt={}));var ra;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(ra||(ra={}));var oa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(oa||(oa={}));var ia;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ia||(ia={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class lt extends Le{constructor(t,a){super(t),this.response=a}}class Aa extends Le{constructor(t,a,r,o){super(t),this.status=a,this.statusText=r,this.errorDetails=o}}class Ze extends Le{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="https://generativelanguage.googleapis.com",yr="v1beta",Cr="0.21.0",Sr="genai-js";var it;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(it||(it={}));class kr{constructor(t,a,r,o,i){this.model=t,this.task=a,this.apiKey=r,this.stream=o,this.requestOptions=i}toString(){var t,a;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||yr;let i=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||Er}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function wr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Sr}/${Cr}`),t.join(" ")}async function Rr(e){var t;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",wr(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ze(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,i]of r.entries()){if(o==="x-goog-api-key")throw new Ze(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ze(`Header name ${o} can only be set using the apiClient field`);a.append(o,i)}}return a}async function Tr(e,t,a,r,o,i){const l=new kr(e,t,a,r,i);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},Lr(i)),{method:"POST",headers:await Rr(l),body:o})}}async function yt(e,t,a,r,o,i={},l=fetch){const{url:v,fetchOptions:h}=await Tr(e,t,a,r,o,i);return Ar(v,h,l)}async function Ar(e,t,a=fetch){let r;try{r=await a(e,t)}catch(o){Or(o,e)}return r.ok||await Ir(r,e),r}function Or(e,t){let a=e;throw e instanceof Aa||e instanceof Ze||(a=new Le(`Error fetching from ${t.toString()}: ${e.message}`),a.stack=e.stack),a}async function Ir(e,t){let a="",r;try{const o=await e.json();a=o.error.message,o.error.details&&(a+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Aa(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,r)}function Lr(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const a=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>a.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{a.abort()}),t.signal=a.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return Nr(e)}else if(e.promptFeedback)throw new lt(`Text not available. ${Je(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),sa(e)[0]}else if(e.promptFeedback)throw new lt(`Function call not available. ${Je(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return sa(e)}else if(e.promptFeedback)throw new lt(`Function call not available. ${Je(e)}`,e)},e}function Nr(e){var t,a,r,o;const i=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.text&&i.push(l.text),l.executableCode&&i.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&i.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function sa(e){var t,a,r,o;const i=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.functionCall&&i.push(l.functionCall);if(i.length>0)return i}const Dr=[mt.RECITATION,mt.SAFETY,mt.LANGUAGE];function Ct(e){return!!e.finishReason&&Dr.includes(e.finishReason)}function Je(e){var t,a,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((a=e.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const i=e.candidates[0];Ct(i)&&(o+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(o+=`: ${i.finishMessage}`))}return o}function xt(e){return this instanceof xt?(this.v=e,this):new xt(e)}function Fr(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a.apply(e,t||[]),o,i=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(u){r[u]&&(o[u]=function(b){return new Promise(function(_,O){i.push([u,b,_,O])>1||v(u,b)})})}function v(u,b){try{h(r[u](b))}catch(_){C(i[0][3],_)}}function h(u){u.value instanceof xt?Promise.resolve(u.value.v).then(p,m):C(i[0][2],u)}function p(u){v("next",u)}function m(u){v("throw",u)}function C(u,b){u(b),i.shift(),i.length&&v(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Vr(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=Hr(t),[r,o]=a.tee();return{stream:jr(r),response:Mr(o)}}async function Mr(e){const t=[],a=e.getReader();for(;;){const{done:r,value:o}=await a.read();if(r)return Ht($r(t));t.push(o)}}function jr(e){return Fr(this,arguments,function*(){const a=e.getReader();for(;;){const{value:r,done:o}=yield xt(a.read());if(o)break;yield yield xt(Ht(r))}})}function Hr(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return i();function i(){return t.read().then(({value:l,done:v})=>{if(v){if(o.trim()){r.error(new Le("Failed to parse stream"));return}r.close();return}o+=l;let h=o.match(la),p;for(;h;){try{p=JSON.parse(h[1])}catch{r.error(new Le(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(p),o=o.substring(h[0].length),h=o.match(la)}return i()})}}})}function $r(e){const t=e[e.length-1],a={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const o of r.candidates){const i=o.index;if(a.candidates||(a.candidates=[]),a.candidates[i]||(a.candidates[i]={index:o.index}),a.candidates[i].citationMetadata=o.citationMetadata,a.candidates[i].groundingMetadata=o.groundingMetadata,a.candidates[i].finishReason=o.finishReason,a.candidates[i].finishMessage=o.finishMessage,a.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){a.candidates[i].content||(a.candidates[i].content={role:o.content.role||"user",parts:[]});const l={};for(const v of o.content.parts)v.text&&(l.text=v.text),v.functionCall&&(l.functionCall=v.functionCall),v.executableCode&&(l.executableCode=v.executableCode),v.codeExecutionResult&&(l.codeExecutionResult=v.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),a.candidates[i].content.parts.push(l)}}r.usageMetadata&&(a.usageMetadata=r.usageMetadata)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(e,t,a,r){const o=await yt(t,it.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),r);return Vr(o)}async function Ia(e,t,a,r){const i=await(await yt(t,it.GENERATE_CONTENT,e,!1,JSON.stringify(a),r)).json();return{response:Ht(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Et(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const a of e)typeof a=="string"?t.push({text:a}):t.push(a);return Gr(t)}function Gr(e){const t={role:"user",parts:[]},a={role:"function",parts:[]};let r=!1,o=!1;for(const i of e)"functionResponse"in i?(a.parts.push(i),o=!0):(t.parts.push(i),r=!0);if(r&&o)throw new Le("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Le("No content is provided for sending chat message.");return r?t:a}function Pr(e,t){var a;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(a=t==null?void 0:t.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new Ze("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const i=Et(e);r.contents=[i]}return{generateContentRequest:r}}function ca(e){let t;return e.contents?t=e:t={contents:[Et(e)]},e.systemInstruction&&(t.systemInstruction=La(e.systemInstruction)),t}function Br(e){return typeof e=="string"||Array.isArray(e)?{content:Et(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ur={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Kr(e){let t=!1;for(const a of e){const{role:r,parts:o}=a;if(!t&&r!=="user")throw new Le(`First content should be with role 'user', got ${r}`);if(!Zt.includes(r))throw new Le(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Zt)}`);if(!Array.isArray(o))throw new Le("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Le("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const v of o)for(const h of da)h in v&&(i[h]+=1);const l=Ur[r];for(const v of da)if(!l.includes(v)&&i[v]>0)throw new Le(`Content with role '${r}' can't contain '${v}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="SILENT_ERROR";class zr{constructor(t,a,r,o={}){this.model=a,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(Kr(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,a={}){var r,o,i,l,v,h;await this._sendPromise;const p=Et(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,p]},C=Object.assign(Object.assign({},this._requestOptions),a);let u;return this._sendPromise=this._sendPromise.then(()=>Ia(this._apiKey,this.model,m,C)).then(b=>{var _;if(b.response.candidates&&b.response.candidates.length>0){this._history.push(p);const O=Object.assign({parts:[],role:"model"},(_=b.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(O)}else{const O=Je(b.response);O&&console.warn(`sendMessage() was unsuccessful. ${O}. Inspect response object for details.`)}u=b}),await this._sendPromise,u}async sendMessageStream(t,a={}){var r,o,i,l,v,h;await this._sendPromise;const p=Et(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,p]},C=Object.assign(Object.assign({},this._requestOptions),a),u=Oa(this._apiKey,this.model,m,C);return this._sendPromise=this._sendPromise.then(()=>u).catch(b=>{throw new Error(ua)}).then(b=>b.response).then(b=>{if(b.candidates&&b.candidates.length>0){this._history.push(p);const _=Object.assign({},b.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=Je(b);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(b=>{b.message!==ua&&console.error(b)}),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(e,t,a,r){return(await yt(t,it.COUNT_TOKENS,e,!1,JSON.stringify(a),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(e,t,a,r){return(await yt(t,it.EMBED_CONTENT,e,!1,JSON.stringify(a),r)).json()}async function Xr(e,t,a,r){const o=a.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await yt(t,it.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,a,r={}){this.apiKey=t,this._requestOptions=r,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=La(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(t,a={}){var r;const o=ca(t),i=Object.assign(Object.assign({},this._requestOptions),a);return Ia(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),i)}async generateContentStream(t,a={}){var r;const o=ca(t),i=Object.assign(Object.assign({},this._requestOptions),a);return Oa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),i)}startChat(t){var a;return new zr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},t),this._requestOptions)}async countTokens(t,a={}){const r=Pr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),a);return Yr(this.apiKey,this.model,r,o)}async embedContent(t,a={}){const r=Br(t),o=Object.assign(Object.assign({},this._requestOptions),a);return qr(this.apiKey,this.model,r,o)}async batchEmbedContents(t,a={}){const r=Object.assign(Object.assign({},this._requestOptions),a);return Xr(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.apiKey=t}getGenerativeModel(t,a){if(!t.model)throw new Le("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fa(this.apiKey,t,a)}getGenerativeModelFromCachedContent(t,a,r){if(!t.name)throw new Ze("Cached content must contain a `name` field.");if(!t.model)throw new Ze("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const l of o)if(a!=null&&a[l]&&t[l]&&(a==null?void 0:a[l])!==t[l]){if(l==="model"){const v=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(v===h)continue}throw new Ze(`Different value for "${l}" specified in modelParams (${a[l]}) and cachedContent (${t[l]})`)}const i=Object.assign(Object.assign({},a),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new fa(this.apiKey,i,r)}}function Jr(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const Na=["automático","carteles","diálogos","karaokes"],Qr=Ne.enum(Na);async function Zr(e,t,a){const r={errors:[],warnings:[]};if(e==="carteles")return r;const o=t.scriptInfo.properties.get("WrapStyle")??"",i="0";o!==i&&r.errors.push({location:"Script info, wrap style",error:`Se esperaba "${i}", pero se encontró "${o}"`,text:o,ignoreRule:""});const l=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",v="yes";l!==v&&r.errors.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${v}", pero se encontró "${l}"`,text:l,ignoreRule:""});const h="Español";let p=0,m="";for(let C=0;C<t.events.lines.length;C++){const u=t.events.lines[C],b=C+1;if(e==="automático"&&u.effect.includes("template syl")){console.info(`template syl detectado en línea ${b}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&u.type==Yt||u.content===""||e==="karaokes"&&u.style!==h||e==="karaokes"&&u.type!==Yt||e==="karaokes"&&u.effect!=="karaoke")continue;if(e==="karaokes"&&u.effect==="fx")break;const _=u.effect.split(" ").filter(S=>S.startsWith("ignorar-"));if(_.includes("ignorar-linea"))continue;a.validateLineStyleExists&&!_.includes("ignorar-estilo")&&!no(t,u.style)&&r.errors.push({location:`Línea ${b}`,error:"Estilo no encontrado",text:u.style,ignoreRule:"ignorar-estilo"});const O=be(u.content);let N=xe(O.filter(S=>S.name==="text"));if(a.geminiEnabled&&e==="diálogos"){const S=lo(N);m+=`
Línea ${b}: ${S}`}if(a.validateTextStart&&!_.includes("ignorar-inicio")){const S=eo(N);S!=null&&r.errors.push({location:`Línea ${b}`,error:S,text:u.content,ignoreRule:"ignorar-inicio"})}if(a.validateTextSpaces&&!_.includes("ignorar-espacios")){const S=ro(N);S!=null&&r.errors.push({location:`Línea ${b}`,error:S,text:u.content,ignoreRule:"ignorar-espacios"})}if(a.validateTextEnd&&!_.includes("ignorar-fin")){const S=to(N);S!=null&&r.errors.push({location:`Línea ${b}`,error:S,text:u.content,ignoreRule:"ignorar-fin"})}if(a.validateTextPunctuation&&!_.includes("ignorar-puntuacion")){const S=ao(N);S!=null&&r.errors.push({location:`Línea ${b}`,error:S,text:u.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&p++}if(a.geminiEnabled&&a.geminiApiKey!==""&&e==="diálogos"){const C=await so(m,a.geminiApiKey);for(const u of C.errores){let b=t.events.lines[u.numeroLinea-1];b==null&&(b=Sn());let _=u.mensajeError;_.endsWith(".")&&_.substring(0,_.length-2),r.warnings.push({location:`Línea ${u.numeroLinea}`,error:_,text:b.content,ignoreRule:"ignorar-llm"})}}return e==="karaokes"&&p===0&&r.errors.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${h}"`,text:"",ignoreRule:""}),r}function eo(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function to(e){e=Jr(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(a=>e.endsWith(a))?null:`No tiene un fin de línea válido: ${t.map(a=>`"${a}"`).join(", ")}`}function ao(e){for(let t=0;t<e.length;t++){const a=[",",";","."],r=e[t];if(!a.includes(r))continue;if(t+1>=e.length)break;let o=e[t+1];if(o==="\\"&&e[t+2]==="N"&&(o="\\N"),r==="."&&o=="."||r==="."&&e[t-1]==="."&&e[t-2]==="."||(r==="."||r===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(o))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function no(e,t){return e.styles.styles.some(a=>t===a.name)}function ro(e){return e.includes("  ")?"hay dos espacios seguidos":null}function oo(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}const io=Ne.object({errores:Ne.object({numeroLinea:Ne.number().default(0),mensajeError:Ne.string().default("")}).array()});async function so(e,t){try{const i=new Wr(t).getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:`
            Valida todos los textos que recibas y retorna un JSON con la estructura:
            {
                "errores": [
                    "numeroLinea": 1,
                    "mensajeError": "descripción del error"
                ]
            }
            Considera 'N' como un espacio ' '.
            Ignora los espacios consecutivos, son son errores.
            Retorna sólo el JSON como texto plano.
        `}),l={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"text/plain"};let p=(await i.startChat({generationConfig:l,history:[]}).sendMessage(e)).response.text();return p=p.replaceAll("```json",""),p=p.replaceAll("```",""),io.parse(JSON.parse(p))}catch(a){console.error("error al validar subs con gemini",a);let r=`${a}`;return r.includes("API key not valid")&&(r="API KEY inválida."),{errores:[{numeroLinea:0,mensajeError:`Error al validar subtítulos con Google Gemini: ${r}`}]}}}function lo(e){let t="";for(let a=0;a<e.length;a++){const r=e[a],o=e[a+1]??"",i=e[a+2]??"",l=e[a-1]??"";if(r==="\\"&&o==="N"){if(a++,i===" "||l===" ")continue;t+=" ";continue}t+=r}return t}const St=Ne.object({userSubsMode:Qr.default("automático"),geminiEnabled:Ne.boolean().default(!1),geminiApiKey:Ne.string().default(""),validateLineStyleExists:Ne.boolean().default(!0),validateTextStart:Ne.boolean().default(!0),validateTextEnd:Ne.boolean().default(!0),validateTextSpaces:Ne.boolean().default(!0),validateTextPunctuation:Ne.boolean().default(!0)}),Da="asu.validarDialogos.options";function co(e){localStorage.setItem(Da,JSON.stringify(e))}function uo(){try{const e=localStorage.getItem(Da)??"";return St.parse(JSON.parse(e))}catch(e){return console.error("error al cargar opciones de validar diálogos",e),St.parse({})}}async function fo(e,t,a){t(!t()),await a()}var vo=ee('<div class="area svelte-on5caf"><textarea readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function ho(e,t){we(t,!0);let a=je(t,"rawMode",7),r=E(y(t.text)),o=E(1),i=E(void 0);async function l(){v(),await Sa(),h()}function v(){if(a()){c(r,y(t.text));return}const _=be(t.text).filter(N=>N.name==="text");let O=xe(_);O=O.replaceAll("\\N",""),c(r,y(O))}function h(){c(o,y(p()))}function p(){return n(i)==null?1:Math.ceil(n(i).scrollHeight/n(i).clientHeight)}He(async()=>{await l()});var m=vo(),C=f(m);De(C),ke(C,_=>c(i,_),()=>n(i));var u=g(C,2);u.__click=[fo,a,l];var b=f(u,!0);d(u),d(m),ie(()=>{Qe(C,`textarea ${(t.kind==="error"?"is-danger":"is-warning")??""} svelte-on5caf`),kn(C,n(r)),et(C,"rows",n(o)),X(b,a()?"Ocultar etiquetas":"Ver etiquetas")}),L(e,m),Re()}Ve(["click"]);var go=ee('<p class="ignore-rule m-1">Para ignorar, colocar <b> </b> en campo de efecto.</p>'),bo=ee('<span><p class="m-1"> </p> <!> <!></span>');function va(e,t){we(t,!0);var a=bo(),r=f(a),o=f(r);d(r);var i=g(r,2);{var l=p=>{ho(p,{get kind(){return t.kind},get text(){return t.subtitleError.text},rawMode:!1})};re(i,p=>{t.subtitleError.text!=""&&p(l)})}var v=g(i,2);{var h=p=>{var m=go(),C=g(f(m)),u=f(C,!0);d(C),st(),d(m),ie(()=>X(u,t.subtitleError.ignoreRule)),L(p,m)};re(v,p=>{t.subtitleError.ignoreRule!=""&&p(h)})}d(a),ie(p=>{Qe(a,`file-error ${(t.kind==="error"?"has-text-danger":"has-text-warning")??""}`),X(o,`${(t.kind==="error"?"Error":"Advertencia")??""}:
        ${t.subtitleError.location??""}:
        ${p??""}`)},[()=>t.subtitleError.error+(t.subtitleError.error.endsWith(".")?"":".")]),L(e,a),Re()}var _o=(e,t)=>t(),po=(e,t)=>t(),mo=(e,t)=>t.onAccept&&t.onAccept(),xo=ee('<button class="button is-success svelte-1eoe9jy"> </button>'),Eo=ee('<div class="modal"><div class="modal-background"></div> <div class="modal-card"><header class="modal-card-head"><p class="modal-card-title"> </p> <button class="delete svelte-1eoe9jy" aria-label="close"></button></header> <section class="modal-card-body"><!></section> <footer class="modal-card-foot"><button class="button svelte-1eoe9jy"> </button> <!></footer></div></div>');function yo(e,t){we(t,!0);let a=je(t,"cancelButtonText",3,"Cancelar"),r=je(t,"acceptButtonText",3,"Aceptar"),o=je(t,"acceptButtonDisabled",3,!1);const i="is-active";let l=E(void 0);function v(){n(l)!=null&&(n(l).classList.add(i),t.onOpen!=null&&t.onOpen())}function h(){n(l)!=null&&(n(l).classList.remove(i),t.onClose!=null&&t.onClose())}var p=Eo(),m=g(f(p),2),C=f(m),u=f(C),b=f(u,!0);d(u);var _=g(u,2);_.__click=[_o,h],d(C);var O=g(C,2),N=f(O);{var S=H=>{var A=Oe(),Q=me(A);Ln(Q,()=>t.children),L(H,A)};re(N,H=>{t.children!=null&&H(S)})}d(O);var $=g(O,2),M=f($);M.__click=[po,h];var k=f(M,!0);d(M);var R=g(M,2);{var W=H=>{var A=xo();A.__click=[mo,t];var Q=f(A,!0);d(A),ie(()=>{A.disabled=o(),X(Q,r())}),L(H,A)};re(R,H=>{t.onAccept!=null&&H(W)})}return d($),d(m),d(p),ke(p,H=>c(l,H),()=>n(l)),ie(()=>{X(b,t.title),X(k,a())}),L(e,p),Re({open:v,close:h})}Ve(["click"]);function Co(e,t){confirm("¿Reiniciar configuración?")&&t(St.parse({}))}var So=ee("<option> </option>"),ko=ee(`<div class="field"><label class="label" for="">API KEY</label> <div class="control"><input class="input" type="password" placeholder="Ingresa tu API KEY"></div></div> <p><a href="https://aistudio.google.com/apikey" target="_blank">Clic aquí para obtener una API KEY.</a></p> <p>Las validaciones de Google Gemini serán siempre advertencias
                debido a su tendencia a tener falsos positivos.</p>`,1),wo=ee('<button class="button is-danger is-outlined is-fullwidth mb-2">Reiniciar configuración</button> <div class="select is-fullwidth mb-2"><select></select></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label> <!></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div>',1);function Ro(e,t){we(t,!0);let a=je(t,"options",15),r=E(void 0);function o(){var l;(l=n(r))==null||l.open()}function i(){var l;(l=n(r))==null||l.close()}return ke(yo(e,{title:"Configuración",cancelButtonText:"Volver",onClose:()=>co(a()),children:(l,v)=>{var h=wo(),p=me(h);p.__click=[Co,a];var m=g(p,2),C=f(m);ft(C,21,()=>Na,ut,(z,le)=>{var ce=So(),w={},T=f(ce);d(ce),ie(()=>{w!==(w=n(le))&&(ce.value=(ce.__value=n(le))==null?"":n(le)),X(T,`Modo ${n(le)??""}`)}),L(z,ce)}),d(C),d(m);var u=g(m,2),b=f(u),_=f(b);Ie(_);var O=g(_);d(b);var N=g(b,2);{var S=z=>{var le=ko(),ce=me(le),w=g(f(ce),2),T=f(w);Ie(T),d(w),d(ce),st(4),ye(T,()=>a().geminiApiKey,B=>a(a().geminiApiKey=B,!0)),L(z,le)};re(N,z=>{a().geminiEnabled&&z(S)})}d(u);var $=g(u,2),M=f($),k=f(M);Ie(k);var R=g(k);d(M),d($);var W=g($,2),H=f(W),A=f(H);Ie(A);var Q=g(A);d(H),d(W);var Y=g(W,2),G=f(Y),ne=f(G);Ie(ne);var fe=g(ne);d(G),d(Y);var F=g(Y,2),V=f(F),q=f(V);Ie(q);var K=g(q);d(V),d(F);var ae=g(F,2),P=f(ae),U=f(P);Ie(U);var J=g(U);d(P),d(ae),ie(()=>{X(O,` ${oe.validateWithGemini}`),X(R,` ${oe.validateLineStyleExists}`),X(Q,` ${oe.validateTextStart}`),X(fe,` ${oe.validateTextEnd}`),X(K,` ${oe.validateTextSpaces}`),X(J,` ${oe.validateTextPunctuation}`)}),Vn(C,()=>a().userSubsMode,z=>a(a().userSubsMode=z,!0)),ze(_,()=>a().geminiEnabled,z=>a(a().geminiEnabled=z,!0)),ze(k,()=>a().validateLineStyleExists,z=>a(a().validateLineStyleExists=z,!0)),ze(A,()=>a().validateTextStart,z=>a(a().validateTextStart=z,!0)),ze(ne,()=>a().validateTextEnd,z=>a(a().validateTextEnd=z,!0)),ze(q,()=>a().validateTextSpaces,z=>a(a().validateTextSpaces=z,!0)),ze(U,()=>a().validateTextPunctuation,z=>a(a().validateTextPunctuation=z,!0)),L(l,h)},$$slots:{default:!0}}),l=>c(r,y(l)),()=>n(r)),Re({open:o,close:i})}Ve(["click"]);async function To(e,t,a,r,o,i,l,v,h,p){var m,C;try{if(n(t).geminiEnabled&&n(t).geminiApiKey===""){alert("Ingrese el API KEY de Google Gemini."),(m=n(a))==null||m.open();return}if(n(t).geminiEnabled&&!confirm("Google Gemini habilitado. ¿Continuar?"))return;const u=[...((C=n(r))==null?void 0:C.files)??[]];c(o,0),c(i,0),c(l,y([])),c(v,!0);for(const b of u){const _=await b.text(),O=wn(_);if(O==null){console.error("archivo inválido",b.name);continue}c(h,y(oo(b.name,n(t).userSubsMode)));const N=await Zr(n(h),O,n(t));c(o,n(o)+N.errors.length),c(i,n(i)+N.warnings.length),n(l).push({subsType:n(h),fileName:b.name,errors:N.errors,warnings:N.warnings,errorsVisible:!1,warningsVisible:!1})}}catch(u){console.error("error al procesar archivos",u)}finally{n(r)!=null&&(n(r).value=""),c(v,!1),await p()}}var Ao=(e,t)=>{var a;return(a=n(t))==null?void 0:a.open()},Oo=ee('<span class="tag is-dark"> </span>'),Io=ee('<span class="tag is-dark"> </span>'),Lo=ee('<span class="tag is-dark"> </span>'),No=ee('<span class="tag is-dark"> </span>'),Do=ee('<span class="tag is-dark"> </span>'),Fo=ee('<span class="tag is-dark"> </span>'),Vo=ee('<div class="result-info svelte-1jx7rzy"><div class="counter svelte-1jx7rzy">PROCESANDO</div> <div class="image-container svelte-1jx7rzy"><img class="result-image svelte-1jx7rzy" src="img/nagato.gif" alt="Suzumiya Haruhi" title="Suzumiya Haruhi"></div> <div class="counter svelte-1jx7rzy">SUBTÍTULOS</div></div>'),Mo=ee('<img class="result-image svelte-1jx7rzy" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),jo=ee('<img class="result-image svelte-1jx7rzy" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Ho=ee(`<img class="result-image svelte-1jx7rzy" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),$o=ee('<img class="result-image svelte-1jx7rzy" src="img/new-game.gif" alt="New Game!" title="New Game!">'),Go=ee("<div> <!></div>"),Po=ee("<div> </div>"),Bo=(e,t)=>n(t).errorsVisible=!n(t).errorsVisible,Uo=ee('<div class="file-errors svelte-1jx7rzy"></div>'),Ko=ee('<div class="errors-list svelte-1jx7rzy"><button class="button is-danger is-outlined svelte-1jx7rzy"> </button> <!></div>'),zo=(e,t)=>n(t).warningsVisible=!n(t).warningsVisible,Yo=ee('<div class="file-errors svelte-1jx7rzy"></div>'),qo=ee('<div class="warnings-list svelte-1jx7rzy"><button class="button is-warning is-outlined svelte-1jx7rzy"> </button> <!></div>'),Xo=ee('<div class="result svelte-1jx7rzy"><span> </span> <!> <!> <!></div>'),Wo=ee('<div class="result-info svelte-1jx7rzy"><div> </div> <div class="image-container svelte-1jx7rzy"><!></div> <div> </div></div> <!>',1),Jo=ee('<section class="svelte-1jx7rzy"><h1></h1> <div class="options mb-4 svelte-1jx7rzy"><button class="button is-link mb-2 btn-settings is-fullwidth svelte-1jx7rzy">Configuración</button> <div class="options-info svelte-1jx7rzy"><span class="tag is-dark"> </span> <!> <!> <!> <!> <!> <!></div></div> <div class="file is-fullwidth mb-2 svelte-1jx7rzy"><label class="file-label"><input class="file-input" type="file" accept=".ass" multiple> <span class="file-cta svelte-1jx7rzy"><span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Cargar subtítulos</span></span></label></div> <!> <!></section> <!>',1);function Qo(e,t){we(t,!0);const a=oe.validarDialogos;let r=E("diálogos"),o=E(void 0),i=E(0),l=E(0),v=E(y([])),h=E(!1),p=E(y(St.parse({}))),m=E(void 0);function C(w){return w.errors.length>0?"has-text-danger":w.warnings.length>0?"has-text-warning":"has-text-success"}async function u(){await Sa();const w=document.querySelector(".result-info");w!=null&&w.scrollIntoView({behavior:"smooth"})}He(()=>{c(p,y(uo()))});var b=Jo();qe(w=>{Xe.title=a});var _=me(b),O=f(_);O.textContent=a;var N=g(O,2),S=f(N);S.__click=[Ao,m];var $=g(S,2),M=f($),k=f(M);d(M);var R=g(M,2);{var W=w=>{var T=Oo(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateWithGemini)),L(w,T)};re(R,w=>{n(p).geminiEnabled&&w(W)})}var H=g(R,2);{var A=w=>{var T=Io(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateLineStyleExists)),L(w,T)};re(H,w=>{n(p).validateLineStyleExists&&w(A)})}var Q=g(H,2);{var Y=w=>{var T=Lo(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateTextStart)),L(w,T)};re(Q,w=>{n(p).validateTextStart&&w(Y)})}var G=g(Q,2);{var ne=w=>{var T=No(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateTextEnd)),L(w,T)};re(G,w=>{n(p).validateTextEnd&&w(ne)})}var fe=g(G,2);{var F=w=>{var T=Do(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateTextSpaces)),L(w,T)};re(fe,w=>{n(p).validateTextSpaces&&w(F)})}var V=g(fe,2);{var q=w=>{var T=Fo(),B=f(T,!0);d(T),ie(()=>X(B,oe.validateTextPunctuation)),L(w,T)};re(V,w=>{n(p).validateTextPunctuation&&w(q)})}d($),d(N);var K=g(N,2),ae=f(K),P=f(ae);P.__change=[To,p,m,o,i,l,v,h,r,u],ke(P,w=>c(o,w),()=>n(o)),st(2),d(ae),d(K);var U=g(K,2);{var J=w=>{var T=Vo();L(w,T)};re(U,w=>{n(h)&&w(J)})}var z=g(U,2);{var le=w=>{var T=Wo(),B=me(T),_e=f(B),Fe=f(_e);d(_e);var Ce=g(_e,2),Te=f(Ce);{var vt=Ae=>{var se=Mo();L(Ae,se)},tt=Ae=>{var se=Oe(),s=me(se);{var he=I=>{var j=jo();L(I,j)},D=I=>{var j=Oe(),te=me(j);{var x=de=>{var ve=Ho();L(de,ve)},Z=de=>{var ve=Oe(),pe=me(ve);{var ue=ge=>{var Se=$o();L(ge,Se)};re(pe,ge=>{n(l)>0&&ge(ue)},!0)}L(de,ve)};re(te,de=>{n(i)>0?de(x):de(Z,!1)},!0)}L(I,j)};re(s,I=>{n(i)>10?I(he):I(D,!1)},!0)}L(Ae,se)};re(Te,Ae=>{n(i)===0&&n(l)===0?Ae(vt):Ae(tt,!1)})}d(Ce);var Me=g(Ce,2),at=f(Me);d(Me),d(B);var ht=g(B,2);ft(ht,17,()=>n(v),ut,(Ae,se,s)=>{var he=Xo(),D=f(he),I=f(D,!0);d(D);var j=g(D,2);{var te=ue=>{var ge=Go(),Se=f(ge),nt=g(Se);{var gt=rt=>{var Ue=ha("Ignorado.");L(rt,Ue)};re(nt,rt=>{n(se).subsType==="carteles"&&rt(gt)})}d(ge),ie(()=>{Qe(ge,`has-text-success text-${n(se).subsType??""} svelte-1jx7rzy`),X(Se,`¡Todo en orden! Detectado como ${n(se).subsType??""}. `)}),L(ue,ge)},x=ue=>{var ge=Po(),Se=f(ge);d(ge),ie(nt=>{Qe(ge,Dn(nt),"svelte-1jx7rzy"),X(Se,`Detectado como ${n(se).subsType??""}.`)},[()=>C(n(se))]),L(ue,ge)};re(j,ue=>{n(se).errors.length==0&&n(se).warnings.length==0?ue(te):ue(x,!1)})}var Z=g(j,2);{var de=ue=>{var ge=Ko(),Se=f(ge);Se.__click=[Bo,se];var nt=f(Se);d(Se);var gt=g(Se,2);{var rt=Ue=>{var ot=Uo();ft(ot,21,()=>n(se).errors,ut,(kt,wt)=>{va(kt,{kind:"error",get subtitleError(){return n(wt)}})}),d(ot),L(Ue,ot)};re(gt,Ue=>{n(se).errorsVisible&&Ue(rt)})}d(ge),ie(()=>X(nt,`${(n(se).errorsVisible?"Ocultar errores":"Ver errores")??""}: ${n(se).errors.length??""}`)),L(ue,ge)};re(Z,ue=>{n(se).errors.length>0&&ue(de)})}var ve=g(Z,2);{var pe=ue=>{var ge=qo(),Se=f(ge);Se.__click=[zo,se];var nt=f(Se);d(Se);var gt=g(Se,2);{var rt=Ue=>{var ot=Yo();ft(ot,21,()=>n(se).warnings,ut,(kt,wt)=>{va(kt,{kind:"warning",get subtitleError(){return n(wt)}})}),d(ot),L(Ue,ot)};re(gt,Ue=>{n(se).warningsVisible&&Ue(rt)})}d(ge),ie(()=>X(nt,`${(n(se).warningsVisible?"Ocultar advertencias":"Ver advertencias")??""}: ${n(se).warnings.length??""}`)),L(ue,ge)};re(ve,ue=>{n(se).warnings.length>0&&ue(pe)})}d(he),ie(ue=>{Qe(D,`name ${ue??""} text-${n(se).subsType??""} svelte-1jx7rzy`),X(I,n(se).fileName)},[()=>C(n(se))]),L(Ae,he)}),ie(()=>{Qe(_e,`counter ${(n(i)==0?"has-text-success":"has-text-danger")??""} svelte-1jx7rzy`),X(Fe,`ERRORES: ${n(i)??""}`),Qe(Me,`counter ${(n(l)==0?"has-text-success":"has-text-warning")??""} svelte-1jx7rzy`),X(at,`ADVERTENCIAS: ${n(l)??""}`)}),L(w,T)};re(z,w=>{!n(h)&&n(v).length>0&&w(le)})}d(_);var ce=g(_,2);ke(Ro(ce,{get options(){return n(p)},set options(w){c(p,y(w))}}),w=>c(m,y(w)),()=>n(m)),ie(()=>{X(k,`Modo ${n(p).userSubsMode??""}`),P.disabled=n(h)}),L(e,b),Re()}Ve(["click","change"]);function Zo(e,t){we(t,!0);let a=E("");He(()=>{qt.subscribe(m=>{m!=null&&c(a,y(m))});const h=new URLSearchParams(location.search).get("pagina")??"",p=Rn(h)?h:"inicio";qt.set(p)});var r=Oe(),o=me(r);{var i=v=>{Yn(v)},l=v=>{var h=Oe(),p=me(h);{var m=u=>{Pn(u,{})},C=u=>{var b=Oe(),_=me(b);{var O=S=>{cr(S,{})},N=S=>{var $=Oe(),M=me($);{var k=W=>{ar(W,{})},R=W=>{var H=Oe(),A=me(H);{var Q=G=>{or(G,{})},Y=G=>{var ne=Oe(),fe=me(ne);{var F=q=>{Qo(q,{})},V=q=>{var K=Oe(),ae=me(K);{var P=J=>{xr(J,{})},U=J=>{var z=Oe(),le=me(z);{var ce=T=>{vr(T,{})},w=T=>{var B=Oe(),_e=me(B);{var Fe=Ce=>{Kn(Ce,{})};re(_e,Ce=>{n(a)=="acercaDe"&&Ce(Fe)},!0)}L(T,B)};re(le,T=>{n(a)=="karaokes.dividirSilabas"?T(ce):T(w,!1)},!0)}L(J,z)};re(ae,J=>{n(a)=="karaokes.dividirKaraoke"?J(P):J(U,!1)},!0)}L(q,K)};re(fe,q=>{n(a)=="dialogos.validarDialogos"?q(F):q(V,!1)},!0)}L(G,ne)};re(A,G=>{n(a)=="carteles.aplicarColor"?G(Q):G(Y,!1)},!0)}L(W,H)};re(M,W=>{n(a)=="carteles.aplicarAlpha"?W(k):W(R,!1)},!0)}L(S,$)};re(_,S=>{n(a)=="carteles.aplicarSecuenciaPosiciones"?S(O):S(N,!1)},!0)}L(u,b)};re(p,u=>{n(a)=="carteles.copiarMovimiento"?u(m):u(C,!1)},!0)}L(v,h)};re(o,v=>{n(a)=="inicio"?v(i):v(l,!1)})}L(e,r),Re()}var ei=ee('<section class="svelte-70scd4"><!></section>');function li(e){var t=ei(),a=f(t);Zo(a,{}),d(t),L(e,t)}export{li as component,si as universal};
