import{d as Ve,t as Q,e as qe,s as Y,a as L,b as ha,c as Ie}from"../chunks/CwJ6XYGs.js";import"../chunks/BF8XUEzE.js";import{a9 as Gt,aa as Pt,ab as Fa,J as Ft,X as Tt,Q as Pe,ag as Va,ae as Ma,R as ja,O as ga,g as n,j as Ha,V as $a,W as Bt,Y as At,a0 as dt,am as Ga,Z as ba,_ as Vt,$ as Pa,av as pa,aq as _a,N as Ba,m as Ua,H as Ut,aw as It,a3 as Ka,ax as Mt,ay as za,az as jt,aA as Kt,aB as Ya,ap as qa,aC as Xa,aD as ma,aE as Wa,ad as Ja,T as Qa,n as Za,aF as en,b as xa,a2 as Ea,a1 as ya,y as we,a as Ca,a7 as y,l as d,a6 as He,aG as Xe,C as f,E as p,D as c,A as se,B as Re,aH as lt,z as me,a8 as Sa}from"../chunks/CCHRc5u3.js";import{a as tn,p as C,i as re,b as ke}from"../chunks/CBNot3_l.js";import{f as an,p as Ye,h as be,i as nn,j as ut,r as rn,T as Ke,k as on,l as xe,m as Ee,t as oe,n as Oe,o as De,B as sn,c as ln,q as cn,u as dn,b as et,v as un,w as Ot,x as $e,y as fn,z as vn,A as hn,C as gn,D as bn,E as Ge,F as pn,G as _n,H as mn,I as xn,J as En,K as yn,L as Cn,s as Qe,M as zt,N as Yt,O as Lt,P as Ne,Q as qt,R as Sn,S as kn,U as wn,a as Xt,V as Rn}from"../chunks/705YHexE.js";import{p as je}from"../chunks/C-7UMIG7.js";function Tn(e){var t=Fa,a=Ft;Gt(null),Pt(null);try{return e()}finally{Gt(t),Pt(a)}}function Ht(e,t,a,r=a){e.addEventListener(t,()=>Tn(a));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),an()}function ft(e,t){return t}function An(e,t,a,r){for(var o=[],s=t.length,l=0;l<s;l++)Ya(t[l].e,o,!0);var v=s>0&&o.length===0&&a!==null;if(v){var h=a.parentNode;qa(h),h.append(a),r.clear(),We(e,t[0].prev,t[s-1].next)}Xa(o,()=>{for(var m=0;m<s;m++){var _=t[m];v||(r.delete(_.k),We(e,_.prev,_.next)),ma(_.e,!v)}})}function vt(e,t,a,r,o,s=null){var l=e,v={items:new Map,first:null},h=(t&pa)!==0;if(h){var m=e;l=Pe?Tt(Va(m)):m.appendChild(Ma())}Pe&&ja();var _=null,E=!1,u=Ha(()=>{var g=a();return Ba(g)?g:g==null?[]:_a(g)});ga(()=>{var g=n(u),b=g.length;if(E&&b===0)return;E=b===0;let I=!1;if(Pe){var N=l.data===$a;N!==(b===0)&&(l=Bt(),Tt(l),At(!1),I=!0)}if(Pe){for(var k=null,U,V=0;V<b;V++){if(dt.nodeType===8&&dt.data===Ga){l=dt,I=!0,At(!1);break}var w=g[V],R=r(w,V);U=ka(dt,v,k,null,w,R,V,o,t,a),v.items.set(R,U),k=U}b>0&&Tt(Bt())}Pe||In(g,v,l,o,t,r,a),s!==null&&(b===0?_?ba(_):_=Vt(()=>s(l)):_!==null&&Pa(_,()=>{_=null})),I&&At(!0),n(u)}),Pe&&(l=dt)}function In(e,t,a,r,o,s,l){var M,F,W,P;var v=(o&za)!==0,h=(o&(jt|Mt))!==0,m=e.length,_=t.items,E=t.first,u=E,g,b=null,I,N=[],k=[],U,V,w,R;if(v)for(R=0;R<m;R+=1)U=e[R],V=s(U,R),w=_.get(V),w!==void 0&&((M=w.a)==null||M.measure(),(I??(I=new Set)).add(w));for(R=0;R<m;R+=1){if(U=e[R],V=s(U,R),w=_.get(V),w===void 0){var Z=u?u.e.nodes_start:a;b=ka(Z,t,b,b===null?t.first:b.next,U,V,R,r,o,l),_.set(V,b),N=[],k=[],u=b.next;continue}if(h&&On(w,U,R,o),w.e.f&It&&(ba(w.e),v&&((F=w.a)==null||F.unfix(),(I??(I=new Set)).delete(w))),w!==u){if(g!==void 0&&g.has(w)){if(N.length<k.length){var H=k[0],A;b=H.prev;var q=N[0],X=N[N.length-1];for(A=0;A<N.length;A+=1)Wt(N[A],H,a);for(A=0;A<k.length;A+=1)g.delete(k[A]);We(t,q.prev,X.next),We(t,b,q),We(t,X,H),u=H,b=X,R-=1,N=[],k=[]}else g.delete(w),Wt(w,u,a),We(t,w.prev,w.next),We(t,w,b===null?t.first:b.next),We(t,b,w),b=w;continue}for(N=[],k=[];u!==null&&u.k!==V;)u.e.f&It||(g??(g=new Set)).add(u),k.push(u),u=u.next;if(u===null)continue;w=u}N.push(w),b=w,u=w.next}if(u!==null||g!==void 0){for(var G=g===void 0?[]:_a(g);u!==null;)u.e.f&It||G.push(u),u=u.next;var ne=G.length;if(ne>0){var ce=o&pa&&m===0?a:null;if(v){for(R=0;R<ne;R+=1)(W=G[R].a)==null||W.measure();for(R=0;R<ne;R+=1)(P=G[R].a)==null||P.fix()}An(t,G,ce,_)}}v&&Ka(()=>{var ae;if(I!==void 0)for(w of I)(ae=w.a)==null||ae.apply()}),Ft.first=t.first&&t.first.e,Ft.last=b&&b.e}function On(e,t,a,r){r&jt&&Kt(e.v,t),r&Mt?Kt(e.i,a):e.i=a}function ka(e,t,a,r,o,s,l,v,h,m){var _=(h&jt)!==0,E=(h&Wa)===0,u=_?E?Ua(o):Ut(o):o,g=h&Mt?Ut(l):l,b={i:g,v:u,k:s,a:null,e:null,prev:a,next:r};try{return b.e=Vt(()=>v(e,u,g,m),Pe),b.e.prev=a&&a.e,b.e.next=r&&r.e,a===null?t.first=b:(a.next=b,a.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{}}function Wt(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,o=t?t.e.nodes_start:a,s=e.e.nodes_start;s!==r;){var l=Ja(s);o.before(s),s=l}}function We(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Ln(e,t,...a){var r=e,o=Za,s;ga(()=>{o!==(o=t())&&(s&&(ma(s),s=null),s=Vt(()=>o(r,...a)))},Qa),Pe&&(r=dt)}function wa(e){var t,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(a=wa(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Nn(){for(var e,t,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(t=wa(e))&&(r&&(r+=" "),r+=t);return r}function Dn(e){return typeof e=="object"?Nn(e):e??""}function ye(e,t,a=t){var r=en();Ht(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=Nt(e)?Dt(s):s,a(s),r&&s!==(s=t())){var l=e.selectionStart,v=e.selectionEnd;e.value=s??"",v!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(v,e.value.length))}}),(Pe&&e.defaultValue!==e.value||xa(t)==null&&e.value)&&a(Nt(e)?Dt(e.value):e.value),Ea(()=>{var o=t();Nt(e)&&o===Dt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ze(e,t,a=t){Ht(e,"change",r=>{var o=r?e.defaultChecked:e.checked;a(o)}),(Pe&&e.defaultChecked!==e.checked||xa(t)==null)&&a(e.checked),Ea(()=>{var r=t();e.checked=!!r})}function Nt(e){var t=e.type;return t==="number"||t==="range"}function Dt(e){return e===""?null:+e}function Ra(e,t,a){if(e.multiple)return Mn(e,t);for(var r of e.options){var o=mt(r);if(tn(o,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e,t){ya(()=>{var a=new MutationObserver(()=>{var r=e.__value;Ra(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Vn(e,t,a=t){var r=!0;Ht(e,"change",o=>{var s=o?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(s),mt);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");l=v&&mt(v)}a(l)}),ya(()=>{var o=t();if(Ra(e,o,r),r&&o===void 0){var s=e.querySelector(":checked");s!==null&&(o=mt(s),a(o))}e.__value=o,r=!1}),Fn(e)}function Mn(e,t){for(var a of e.options)a.selected=~t.indexOf(mt(a))}function mt(e){return"__value"in e?e.__value:e.value}const jn=!0,is=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));var Hn=(e,t)=>t(),$n=()=>{},Gn=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Pn(e,t){we(t,!0);const a=oe.copiarMovimiento;let r=y("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),o=y(""),s=y("");Ca(()=>{l(n(r),n(o))});function l(A,q){if(q.length==0)return;const X=q.split(`
`);console.log(X);const G=Ye(A);if(G==null){console.error("invalid base line",A);return}const ne=be(G.content),ce=nn(ne);if(ce==null){console.error("base move not found");return}const M=ce.x2-ce.x1,F=ce.y2-ce.y1;let W="";for(let P=0;P<X.length;P++){const ae=X[P];if(ae.length==0)continue;const B=Ye(ae);if(B==null){console.error(`line ${P+1}: invalid line`);break}const K=be(B.content),z=ut(K);if(z==null){console.error(`line ${P+1}: pos not found`);break}rn(K,Ke.pos);const le=z.x,te=z.y,de=z.x+M,S=z.y+F;on(K,le,te,de,S,ce.t1,ce.t2);const T=xe(K);B.content=T;const j=Ee(B);console.log(j),P>0&&(W+=`
`),W+=j}d(s,C(W))}async function v(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{for(let A=1;A<=10;A++){const q=182+A*5,X=421+A*7;d(o,n(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${q},${X})}LINEA ${A}
`)}});var h=Gn();qe(A=>{Xe.title=a});var m=f(h);m.textContent=a;var _=p(m,2),E=p(f(_),2),u=f(E);Oe(u),c(E),c(_);var g=p(_,2),b=f(g),I=f(b,!0);c(b);var N=p(b,2),k=f(N);De(k),c(N),c(g);var U=p(g,2),V=f(U),w=f(V),R=p(w);R.__click=[Hn,v],R.__keydown=[$n],c(V);var Z=p(V,2),H=f(Z);De(H),c(Z),c(U),c(h),se(()=>{Y(I,oe.subtitulos),Y(w,`${oe.resultado} `)}),ye(u,()=>n(r),A=>d(r,A)),ye(k,()=>n(o),A=>d(o,A)),ye(H,()=>n(s),A=>d(s,A)),L(e,h),Re()}Ve(["click","keydown"]);var Bn=Q('<span class="version svelte-ud7v5s"><a target="_blank"> </a></span>'),Un=Q(`<div class="text-column"><h1></h1> <div class="kagamin svelte-ud7v5s"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-ud7v5s"></div> <!> <p>Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Kn(e,t){we(t,!0);const a=oe.acercaDe;let r=y(C(sn.parse({})));He(async()=>{ln.subscribe(h=>{h!=null&&d(r,C(h))})});var o=Un();qe(h=>{Xe.title=a});var s=f(o);s.textContent=a;var l=p(s,4);{var v=h=>{var m=Bn(),_=f(m),E=f(_);c(_),c(m),se((u,g)=>{et(_,"href",u),Y(E,`Versión ${n(r).ref??""}.${g??""}`)},[()=>cn(n(r).actor,n(r).repo,n(r).sha),()=>dn(n(r).sha)]),L(h,m)};re(l,h=>{n(r).sha!=""&&h(v)})}lt(18),c(o),L(e,o),Re()}var zn=Q('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Yn(e){var t=zn();qe(a=>{Xe.title="Asu"}),L(e,t)}var qn=(e,t)=>t(),Xn=Q("<b> </b>"),Wn=Q('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Be(e,t){we(t,!0);let a=je(t,"label",3,""),r=je(t,"disabled",15,!1),o=je(t,"startValue",15,""),s=je(t,"endValue",15,""),l=je(t,"startPlaceholder",3,""),v=je(t,"endPlaceholder",3,""),h=y(void 0);function m(){var X;if((X=n(h))!=null&&X.checked){_();return}E()}function _(){r()&&(r(!1),n(h)&&(n(h).checked=!0),t.onEnabled&&t.onEnabled())}function E(){r()||(r(!0),n(h)&&(n(h).checked=!1),t.onDisabled&&t.onDisabled())}He(()=>{n(h)&&(n(h).checked=!r())});var u=Wn(),g=f(u),b=f(g),I=f(b);I.__change=[qn,m],ke(I,X=>d(h,X),()=>n(h));var N=p(I,2);{var k=X=>{var G=ha();se(()=>Y(G,`${a()??""}
                (deshabilitado)`)),L(X,G)},U=X=>{var G=Xn(),ne=f(G,!0);c(G),se(()=>Y(ne,a())),L(X,G)};re(N,X=>{r()?X(k):X(U,!1)})}c(b),c(g);var V=p(g,2),w=f(V),R=p(f(w),2),Z=f(R);Oe(Z),c(R),c(w);var H=p(w,2),A=p(f(H),2),q=f(A);return Oe(q),c(A),c(H),c(V),c(u),se(()=>{et(Z,"placeholder",l()),Z.disabled=r(),et(q,"placeholder",v()),q.disabled=r()}),ye(Z,o),ye(q,s),L(e,u),Re({enable:_,disable:E})}Ve(["change"]);function pt(e,t){const a=[];for(let r=e;r<=t;r++){const o=un(r);a.push(o)}return a}function _t(e,t,a){const r=Array(a),o=Ot(e.blue,t.blue,a);if(o.length!==a)return console.error(`ERROR: blue interpolated values ${o.length} don't match intervals ${a}`),[];const s=Ot(e.green,t.green,a);if(s.length!==a)return console.error(`ERROR: green interpolated values ${s.length} don't match intervals ${a}`),[];const l=Ot(e.red,t.red,a);if(l.length!==a)return console.error(`ERROR: red interpolated values ${l.length} don't match intervals ${a}`),[];for(var v=0;v<a;v++){const h=Math.floor(o[v]),m=Math.floor(s[v]),_=Math.floor(l[v]);r[v]={blue:h,green:m,red:_}}return r}var Jn=(e,t)=>t(),Qn=()=>{},Zn=Q('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function Ta(e,t){we(t,!0);async function a(){await navigator.clipboard.writeText(t.rawResultLines),alert(oe.lineasCopiadas)}var r=Zn();r.__click=[Jn,a],r.__keydown=[Qn],se(()=>et(r,"title",oe.copiar)),L(e,r),Re()}Ve(["click","keydown"]);var er=(e,t)=>t(),tr=Q('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ar(e,t){we(t,!0);const a=oe.aplicarAlpha,r="0",o="FF";let s=y(""),l=y(""),v=y("0"),h=y("FF"),m=y("0"),_=y("FF"),E=y("0"),u=y("FF"),g=y("0"),b=y("FF"),I=y("0"),N=y("FF"),k=y(!1),U=y(!0),V=y(!0),w=y(!0),R=y(!0),Z=y(void 0),H=y(void 0),A=y(void 0),q=y(void 0),X=y(void 0),G=y(!1);function ne(){var i,he,D,O;(i=n(H))==null||i.disable(),(he=n(A))==null||he.disable(),(D=n(q))==null||D.disable(),(O=n(X))==null||O.disable()}function ce(){var i,he,D,O;n(U)&&n(V)&&n(w)&&n(R)&&((i=n(H))==null||i.enable(),(he=n(A))==null||he.disable(),(D=n(q))==null||D.disable(),(O=n(X))==null||O.disable())}function M(){var i;(i=n(Z))==null||i.disable()}function F(){var i;n(U)&&n(V)&&n(w)&&n(R)&&((i=n(Z))==null||i.enable())}function W(){const i=[],he=n(s).split(`
`);for(const D of he){if(D.length==0)continue;const O=Ye(D);O!=null&&i.push(O)}if(!n(k)){const D=$e(n(v)),O=$e(n(h));if(D>=O){alert("El inicio de alpha total debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const $=pt(D,O);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){let J=Math.floor($.length*x/i.length);J>=$.length&&(J=$.length-1);const ve=`&H${$[J]}&`,_e=be(i[x].content);fn(_e,ve),i[x].content=xe(_e);const fe=Ee(i[x]);x>0&&(ee+=`
`),ee+=fe}d(l,C(ee));return}if(!n(U)){const D=$e(n(m)),O=$e(n(_));if(D>=O){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const $=pt(D,O);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){let J=Math.floor($.length*x/i.length);J>=$.length&&(J=$.length-1);const ve=`&H${$[J]}&`,_e=be(i[x].content);vn(_e,ve),i[x].content=xe(_e);const fe=Ee(i[x]);x>0&&(ee+=`
`),ee+=fe}d(l,C(ee))}if(!n(V)){const D=$e(n(E)),O=$e(n(u));if(D>=O){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const $=pt(D,O);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){let J=Math.floor($.length*x/i.length);J>=$.length&&(J=$.length-1);const ve=`&H${$[J]}&`,_e=be(i[x].content);hn(_e,ve),i[x].content=xe(_e);const fe=Ee(i[x]);x>0&&(ee+=`
`),ee+=fe}d(l,C(ee))}if(!n(w)){const D=$e(n(g)),O=$e(n(b));if(D>=O){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const $=pt(D,O);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){let J=Math.floor($.length*x/i.length);J>=$.length&&(J=$.length-1);const ve=`&H${$[J]}&`,_e=be(i[x].content);gn(_e,ve),i[x].content=xe(_e);const fe=Ee(i[x]);x>0&&(ee+=`
`),ee+=fe}d(l,C(ee))}if(!n(R)){const D=$e(n(I)),O=$e(n(N));if(D>=O){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(O>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const $=pt(D,O);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){let J=Math.floor($.length*x/i.length);J>=$.length&&(J=$.length-1);const ve=`&H${$[J]}&`,_e=be(i[x].content);bn(_e,ve),i[x].content=xe(_e);const fe=Ee(i[x]);x>0&&(ee+=`
`),ee+=fe}d(l,C(ee))}}He(()=>{for(let i=1;i<=10;i++)d(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${i}
`)});var P=tr();qe(i=>{Xe.title=a});var ae=f(P);ae.textContent=a;var B=p(ae,4);ke(Be(B,{label:"Alpha total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>ce(),get startValue(){return n(v)},set startValue(i){d(v,C(i))},get endValue(){return n(h)},set endValue(i){d(h,C(i))},get disabled(){return n(k)},set disabled(i){d(k,C(i))}}),i=>d(Z,C(i)),()=>n(Z));var K=p(B,2);ke(Be(K,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(m)},set startValue(i){d(m,C(i))},get endValue(){return n(_)},set endValue(i){d(_,C(i))},get disabled(){return n(U)},set disabled(i){d(U,C(i))}}),i=>d(H,C(i)),()=>n(H));var z=p(K,2);ke(Be(z,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(E)},set startValue(i){d(E,C(i))},get endValue(){return n(u)},set endValue(i){d(u,C(i))},get disabled(){return n(V)},set disabled(i){d(V,C(i))}}),i=>d(A,C(i)),()=>n(A));var le=p(z,2);ke(Be(le,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(g)},set startValue(i){d(g,C(i))},get endValue(){return n(b)},set endValue(i){d(b,C(i))},get disabled(){return n(w)},set disabled(i){d(w,C(i))}}),i=>d(q,C(i)),()=>n(q));var te=p(le,2);ke(Be(te,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(I)},set startValue(i){d(I,C(i))},get endValue(){return n(N)},set endValue(i){d(N,C(i))},get disabled(){return n(R)},set disabled(i){d(R,C(i))}}),i=>d(X,C(i)),()=>n(X));var de=p(te,2),S=f(de);Oe(S),lt(),c(de);var T=p(de,2),j=f(T),pe=f(j,!0);c(j);var Fe=p(j,2),Ce=f(Fe);De(Ce),c(Fe),c(T);var Te=p(T,2);Te.__click=[er,W];var ht=f(Te,!0);c(Te);var tt=p(Te,2),Me=f(tt),at=f(Me),gt=p(at);Ta(gt,{get rawResultLines(){return n(l)}}),c(Me);var Ae=p(Me,2),ie=f(Ae);De(ie),c(Ae),c(tt),c(P),se(()=>{Y(pe,oe.subtitulos),Y(ht,oe.aplicarAlpha),Y(at,`${oe.resultado} `)}),ze(S,()=>n(G),i=>d(G,i)),ye(Ce,()=>n(s),i=>d(s,i)),ye(ie,()=>n(l),i=>d(l,i)),L(e,P),Re()}Ve(["click"]);var nr=(e,t)=>t(),rr=Q('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function or(e,t){we(t,!0);const a=oe.aplicarColor,r="&HFFFFFF&",o="&H000000&";let s=y(""),l=y(""),v=y(r),h=y(o),m=y(r),_=y(o),E=y(r),u=y(o),g=y(r),b=y(o),I=y(r),N=y(o),k=y(!1),U=y(!0),V=y(!0),w=y(!0),R=y(!0),Z=y(void 0),H=y(void 0),A=y(void 0),q=y(void 0),X=y(void 0),G=y(!1);function ne(){var i,he,D,O;(i=n(H))==null||i.disable(),(he=n(A))==null||he.disable(),(D=n(q))==null||D.disable(),(O=n(X))==null||O.disable()}function ce(){var i,he,D,O;n(U)&&n(V)&&n(w)&&n(R)&&((i=n(H))==null||i.enable(),(he=n(A))==null||he.disable(),(D=n(q))==null||D.disable(),(O=n(X))==null||O.disable())}function M(){var i;(i=n(Z))==null||i.disable()}function F(){var i;n(U)&&n(V)&&n(w)&&n(R)&&((i=n(Z))==null||i.enable())}function W(){const i=[],he=n(s).split(`
`);for(const D of he){if(D.length==0)continue;const O=Ye(D);O!=null&&i.push(O)}if(!n(k)){const D=Ge(n(v));if(D==null){alert(`Color total de inicio inválido: ${n(v)}`);return}const O=Ge(n(h));if(O==null){alert(`Color total de fin inválido: ${n(h)}`);return}const $=_t(D,O,i.length);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){const J=$[x],ue=be(i[x].content);pn(ue,J.blue,J.green,J.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(ee+=`
`),ee+=ve}d(l,C(ee));return}if(!n(U)){const D=Ge(n(m));if(D==null){alert(`Color 1 de inicio inválido: ${n(m)}`);return}const O=Ge(n(_));if(O==null){alert(`Color 1 de fin inválido: ${n(_)}`);return}const $=_t(D,O,i.length);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){const J=$[x],ue=be(i[x].content);_n(ue,J.blue,J.green,J.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(ee+=`
`),ee+=ve}d(l,C(ee))}if(!n(V)){const D=Ge(n(E));if(D==null){alert(`Color 2 de inicio inválido: ${n(E)}`);return}const O=Ge(n(u));if(O==null){alert(`Color 2 de fin inválido: ${n(u)}`);return}const $=_t(D,O,i.length);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){const J=$[x],ue=be(i[x].content);mn(ue,J.blue,J.green,J.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(ee+=`
`),ee+=ve}d(l,C(ee))}if(!n(w)){const D=Ge(n(g));if(D==null){alert(`Color 3 de inicio inválido: ${n(g)}`);return}const O=Ge(n(b));if(O==null){alert(`Color 3 de fin inválido: ${n(b)}`);return}const $=_t(D,O,i.length);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){const J=$[x],ue=be(i[x].content);xn(ue,J.blue,J.green,J.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(ee+=`
`),ee+=ve}d(l,C(ee))}if(!n(R)){const D=Ge(n(I));if(D==null){alert(`Color 4 de inicio inválido: ${n(I)}`);return}const O=Ge(n(N));if(O==null){alert(`Color 4 de fin inválido: ${n(N)}`);return}const $=_t(D,O,i.length);n(G)&&$.reverse();let ee="";for(let x=0;x<i.length;x++){const J=$[x],ue=be(i[x].content);En(ue,J.blue,J.green,J.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(ee+=`
`),ee+=ve}d(l,C(ee))}}He(()=>{d(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),d(s,n(s)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var P=rr();qe(i=>{Xe.title=a});var ae=f(P);ae.textContent=a;var B=p(ae,4);ke(Be(B,{label:"Color total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>ce(),get startValue(){return n(v)},set startValue(i){d(v,C(i))},get endValue(){return n(h)},set endValue(i){d(h,C(i))},get disabled(){return n(k)},set disabled(i){d(k,C(i))}}),i=>d(Z,C(i)),()=>n(Z));var K=p(B,2);ke(Be(K,{label:"Color 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(m)},set startValue(i){d(m,C(i))},get endValue(){return n(_)},set endValue(i){d(_,C(i))},get disabled(){return n(U)},set disabled(i){d(U,C(i))}}),i=>d(H,C(i)),()=>n(H));var z=p(K,2);ke(Be(z,{label:"Color 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(E)},set startValue(i){d(E,C(i))},get endValue(){return n(u)},set endValue(i){d(u,C(i))},get disabled(){return n(V)},set disabled(i){d(V,C(i))}}),i=>d(A,C(i)),()=>n(A));var le=p(z,2);ke(Be(le,{label:"Color 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(g)},set startValue(i){d(g,C(i))},get endValue(){return n(b)},set endValue(i){d(b,C(i))},get disabled(){return n(w)},set disabled(i){d(w,C(i))}}),i=>d(q,C(i)),()=>n(q));var te=p(le,2);ke(Be(te,{label:"Color 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>M(),onDisabled:()=>F(),get startValue(){return n(I)},set startValue(i){d(I,C(i))},get endValue(){return n(N)},set endValue(i){d(N,C(i))},get disabled(){return n(R)},set disabled(i){d(R,C(i))}}),i=>d(X,C(i)),()=>n(X));var de=p(te,2),S=f(de);Oe(S),lt(),c(de);var T=p(de,2),j=f(T),pe=f(j,!0);c(j);var Fe=p(j,2),Ce=f(Fe);De(Ce),c(Fe),c(T);var Te=p(T,2);Te.__click=[nr,W];var ht=f(Te,!0);c(Te);var tt=p(Te,2),Me=f(tt),at=f(Me),gt=p(at);Ta(gt,{get rawResultLines(){return n(l)}}),c(Me);var Ae=p(Me,2),ie=f(Ae);De(ie),c(Ae),c(tt),c(P),se(()=>{Y(pe,oe.subtitulos),Y(ht,oe.aplicarColor),Y(at,`${oe.resultado} `)}),ze(S,()=>n(G),i=>d(G,i)),ye(Ce,()=>n(s),i=>d(s,i)),ye(ie,()=>n(l),i=>d(l,i)),L(e,P),Re()}Ve(["click"]);var sr=(e,t)=>t(),ir=()=>{},lr=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function cr(e,t){we(t,!0);const a=oe.aplicarSecuenciaPosiciones;let r=y(""),o=y(""),s=y(""),l=y(!1);Ca(()=>{v(n(r),n(o),n(l))});function v(ne,ce,M){if(ce.length==0)return;const F=[];{const ae=ne.split(`
`);for(const B of ae){if(B.length==0)continue;const K=Ye(B);if(K==null)continue;const z=be(K.content);if(ut(z)==null){alert(`Línea base sin \\pos copiada: '${B}'`),console.log(B);return}F.push(K)}}const W=[];{const ae=ce.split(`
`);for(const B of ae){if(B.length==0)continue;const K=Ye(B);if(K==null)continue;const z=be(K.content);if(ut(z)==null){alert(`Línea objetivo sin \\pos: '${B}'`),console.log(B);return}W.push(K)}}let P="";for(let ae=0;ae<W.length;ae++){const B=W[ae],K=be(B.content),z=ut(K);if(z==null){const T=Ee(B);alert(`Línea objetivo sin \\pos: '${T}'`),console.log(T);return}let le=z.x,te=z.y;M&&F.reverse();const de=h(F),S=[];for(let T=0;T<F.length;T++){const j=de[T][0],pe=de[T][1],Fe=le+j,Ce=te+pe;le=Fe,te=Ce,yn(K,Fe,Ce),B.content=xe(K);const Te=F[T];B.start=Te.start,B.end=Te.end,S.push(structuredClone(B))}M&&(F.reverse(),S.reverse());for(const T of S)P+=Ee(T)+`
`}d(s,C(P))}function h(ne){const M=[[0,0]];for(let F=0;F<ne.length-1;F++){const W=ne[F],P=ne[F+1],ae=be(W.content),B=ut(ae);if(B==null)return alert(`Línea base sin \\pos: '${Ee(W)}'`),console.log(W),[];const K=be(P.content),z=ut(K);if(z==null)return alert(`Línea base sin \\pos: '${Ee(P)}'`),console.log(P),[];const le=z.x-B.x,te=z.y-B.y;M.push([le,te])}return M}async function m(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{d(r,n(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),d(r,n(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),d(r,n(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),d(o,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var _=lr();qe(ne=>{Xe.title=a});var E=f(_);E.textContent=a;var u=p(E,2),g=p(f(u),2),b=f(g);De(b),c(g),c(u);var I=p(u,2),N=f(I);Oe(N),lt(),c(I);var k=p(I,2),U=f(k),V=f(U,!0);c(U);var w=p(U,2),R=f(w);De(R),c(w),c(k);var Z=p(k,2),H=f(Z),A=f(H),q=p(A);q.__click=[sr,m],q.__keydown=[ir],c(H);var X=p(H,2),G=f(X);De(G),c(X),c(Z),c(_),se(()=>{Y(V,oe.subtitulos),Y(A,`${oe.resultado} `)}),ye(b,()=>n(r),ne=>d(r,ne)),ze(N,()=>n(l),ne=>d(l,ne)),ye(R,()=>n(o),ne=>d(o,ne)),ye(G,()=>n(s),ne=>d(s,ne)),L(e,_),Re()}Ve(["click","keydown"]);var dr=(e,t)=>t(),ur=()=>{},fr=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vr(e,t){we(t,!0);const a=oe.dividirSilabas;let r=y(""),o=y(""),s=y("");function l(){if(n(o).length==0)return;const R=n(o).split(`
`);let Z="";for(let H=0;H<R.length;H++){const A=R[H];if(A.length==0)continue;const q=Ye(A);if(q==null){console.error(`line ${H+1}: invalid line`);break}Cn(q);const X=Ee(q);H>0&&(Z+=`
`),Z+=X}d(s,C(Z))}async function v(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{d(r,n(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),d(r,n(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),d(r,n(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`),d(o,C(n(r))),l()});var h=fr();qe(R=>{Xe.title=a});var m=f(h);m.textContent=a;var _=p(m,2),E=f(_),u=f(E);c(E);var g=p(E,2),b=f(g);De(b),b.__input=l,c(g),c(_);var I=p(_,2),N=f(I),k=f(N),U=p(k);U.__click=[dr,v],U.__keydown=[ur],c(N);var V=p(N,2),w=f(V);De(w),c(V),c(I),c(h),se(()=>{Y(u,`${oe.subtitulos} (romaji)`),et(b,"placeholder",n(r)),Y(k,`${oe.resultado} `)}),ye(b,()=>n(o),R=>d(o,R)),ye(w,()=>n(s),R=>d(s,R)),L(e,h),Re()}Ve(["input","click","keydown"]);var hr=Q('<p class="error svelte-tm085k"> </p>'),gr=Q("<button> </button>"),br=Q('<p class="preview"> <b> </b></p>'),pr=(e,t)=>t(),_r=()=>{},mr=Q('<section class="svelte-tm085k"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <!> <div class="mb-2"><label class="label mt-2" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function xr(e,t){we(t,!0);const a=oe.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let o=y(r),s=y(C([])),l=y(""),v=y(C([])),h=y(0),m=y("");function _(){const M=Ye(n(o));if(M==null)return;const F=be(M.content);zt(F);const W=0;let P=n(v)[n(h)].index+1,ae=0;for(let j=0;j<=n(h);j++){const pe=n(v)[j];pe.centiseconds!=null&&(ae+=pe.centiseconds)}const B=Yt(M.start),K=Yt(M.end),z=F.slice(W,P);M.content=xe(z);const le=ae/100;M.end=Lt(B+le),d(l,C(Ee(M)));let te=!0,de=0;for(;te;){const j=F[P+1];if((j==null?void 0:j.name)!="text"){te=!1;break}if(te=j.value.replaceAll(" ","").length===0,te&&(P+=2,de++),de>n(v).length)break}let S=0;for(let j=n(h)+1+de;j<n(v).length;j++){const pe=n(v)[j];pe.centiseconds!=null&&(S+=pe.centiseconds)}const T=F.slice(P);M.end=Lt(K),M.start=Lt(K-S/100),M.content=xe(T),d(l,n(l)+(`
`+Ee(M))),d(s,C([xe(z.filter(j=>j.name=="text")),xe(T.filter(j=>j.name=="text"))]))}async function E(){await navigator.clipboard.writeText(n(l)),alert("¡Líneas copiadas al portapapeles!")}function u(){d(s,C([])),d(l,""),d(v,C([])),d(h,0),d(m,"");const M=Ye(n(o));if(M==null)return d(m,`Línea de karaoke inválida. Se esperaba el formato: <${r}>.`),[];const F=be(M.content);zt(F);for(let W=0;W<F.length;W++){const P=F[W];if(P.name!="text")continue;n(v).push({index:W,text:P.value.replaceAll(" ",""),centiseconds:null});const ae=W-1;if(ae<0)continue;const B=F[ae];if(B.name!="effect")continue;const K=B.tags.find(le=>le.name===Ke.kLowerCase||le.name===Ke.kUpperCase||le.name===Ke.kf||le.name===Ke.ko);K==null||!(K.name===Ke.kLowerCase||K.name===Ke.kUpperCase||K.name===Ke.kf||K.name===Ke.ko)||(n(v)[n(v).length-1].centiseconds=K.value)}return d(h,C(Math.floor(n(v).length/2))),_(),n(v)}He(()=>{u()});var g=mr();qe(M=>{Xe.title=a});var b=f(g);b.textContent=a;var I=p(b,2),N=p(f(I),2),k=f(N);Oe(k),et(k,"placeholder",r),k.__input=u,c(N),c(I);var U=p(I,2);{var V=M=>{var F=hr(),W=f(F,!0);c(F),se(()=>Y(W,n(m))),L(M,F)};re(U,M=>{n(m)!=""&&M(V)})}var w=p(U,2),R=p(f(w),2);vt(R,21,()=>n(v),ft,(M,F,W)=>{var P=Ie(),ae=me(P);{var B=K=>{var z=gr();z.__click=()=>{d(h,C(W)),_()};var le=f(z,!0);c(z),se(()=>{Qe(z,`button ${(W===n(h)?"is-link":"")??""}`),et(z,"title",`${n(F).text}: ${n(F).centiseconds} centésimas`),Y(le,n(F).text)}),L(K,z)};re(ae,K=>{n(F).text.replaceAll(" ","").length>0&&K(B)})}L(M,P)}),c(R),c(w);var Z=p(w,2),H=p(f(Z),2);vt(H,17,()=>n(s),ft,(M,F,W)=>{var P=br(),ae=f(P);ae.nodeValue=`Línea ${W+1}: `;var B=p(ae),K=f(B,!0);c(B),c(P),se(()=>Y(K,n(F))),L(M,P)}),c(Z);var A=p(Z,2),q=f(A),X=f(q),G=p(X);G.__click=[pr,E],G.__keydown=[_r],c(q);var ne=p(q,2),ce=f(ne);De(ce),c(ne),c(A),c(g),se(()=>Y(X,`${oe.resultado} `)),ye(k,()=>n(o),M=>d(o,M)),ye(ce,()=>n(l),M=>d(l,M)),L(e,g),Re()}Ve(["input","click","keydown"]);var st;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(st||(st={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Jt||(Jt={}));var Qt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Qt||(Qt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=["user","model","function","system"];var ea;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(ea||(ea={}));var ta;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ta||(ta={}));var aa;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(aa||(aa={}));var na;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(na||(na={}));var xt;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(xt||(xt={}));var ra;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(ra||(ra={}));var oa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(oa||(oa={}));var sa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(sa||(sa={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ct extends Le{constructor(t,a){super(t),this.response=a}}class Aa extends Le{constructor(t,a,r,o){super(t),this.status=a,this.statusText=r,this.errorDetails=o}}class Ze extends Le{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="https://generativelanguage.googleapis.com",yr="v1beta",Cr="0.21.0",Sr="genai-js";var it;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(it||(it={}));class kr{constructor(t,a,r,o,s){this.model=t,this.task=a,this.apiKey=r,this.stream=o,this.requestOptions=s}toString(){var t,a;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||yr;let s=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||Er}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function wr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Sr}/${Cr}`),t.join(" ")}async function Rr(e){var t;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",wr(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ze(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,s]of r.entries()){if(o==="x-goog-api-key")throw new Ze(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ze(`Header name ${o} can only be set using the apiClient field`);a.append(o,s)}}return a}async function Tr(e,t,a,r,o,s){const l=new kr(e,t,a,r,s);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},Lr(s)),{method:"POST",headers:await Rr(l),body:o})}}async function Ct(e,t,a,r,o,s={},l=fetch){const{url:v,fetchOptions:h}=await Tr(e,t,a,r,o,s);return Ar(v,h,l)}async function Ar(e,t,a=fetch){let r;try{r=await a(e,t)}catch(o){Ir(o,e)}return r.ok||await Or(r,e),r}function Ir(e,t){let a=e;throw e instanceof Aa||e instanceof Ze||(a=new Le(`Error fetching from ${t.toString()}: ${e.message}`),a.stack=e.stack),a}async function Or(e,t){let a="",r;try{const o=await e.json();a=o.error.message,o.error.details&&(a+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Aa(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,r)}function Lr(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const a=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>a.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{a.abort()}),t.signal=a.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ct(`${Je(e)}`,e);return Nr(e)}else if(e.promptFeedback)throw new ct(`Text not available. ${Je(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ct(`${Je(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ia(e)[0]}else if(e.promptFeedback)throw new ct(`Function call not available. ${Je(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),St(e.candidates[0]))throw new ct(`${Je(e)}`,e);return ia(e)}else if(e.promptFeedback)throw new ct(`Function call not available. ${Je(e)}`,e)},e}function Nr(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.text&&s.push(l.text),l.executableCode&&s.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&s.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function ia(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.functionCall&&s.push(l.functionCall);if(s.length>0)return s}const Dr=[xt.RECITATION,xt.SAFETY,xt.LANGUAGE];function St(e){return!!e.finishReason&&Dr.includes(e.finishReason)}function Je(e){var t,a,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((a=e.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const s=e.candidates[0];St(s)&&(o+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(o+=`: ${s.finishMessage}`))}return o}function Et(e){return this instanceof Et?(this.v=e,this):new Et(e)}function Fr(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a.apply(e,t||[]),o,s=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(u){r[u]&&(o[u]=function(g){return new Promise(function(b,I){s.push([u,g,b,I])>1||v(u,g)})})}function v(u,g){try{h(r[u](g))}catch(b){E(s[0][3],b)}}function h(u){u.value instanceof Et?Promise.resolve(u.value.v).then(m,_):E(s[0][2],u)}function m(u){v("next",u)}function _(u){v("throw",u)}function E(u,g){u(g),s.shift(),s.length&&v(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Vr(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=Hr(t),[r,o]=a.tee();return{stream:jr(r),response:Mr(o)}}async function Mr(e){const t=[],a=e.getReader();for(;;){const{done:r,value:o}=await a.read();if(r)return $t($r(t));t.push(o)}}function jr(e){return Fr(this,arguments,function*(){const a=e.getReader();for(;;){const{value:r,done:o}=yield Et(a.read());if(o)break;yield yield Et($t(r))}})}function Hr(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return s();function s(){return t.read().then(({value:l,done:v})=>{if(v){if(o.trim()){r.error(new Le("Failed to parse stream"));return}r.close();return}o+=l;let h=o.match(la),m;for(;h;){try{m=JSON.parse(h[1])}catch{r.error(new Le(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(m),o=o.substring(h[0].length),h=o.match(la)}return s()})}}})}function $r(e){const t=e[e.length-1],a={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const o of r.candidates){const s=o.index;if(a.candidates||(a.candidates=[]),a.candidates[s]||(a.candidates[s]={index:o.index}),a.candidates[s].citationMetadata=o.citationMetadata,a.candidates[s].groundingMetadata=o.groundingMetadata,a.candidates[s].finishReason=o.finishReason,a.candidates[s].finishMessage=o.finishMessage,a.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){a.candidates[s].content||(a.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const v of o.content.parts)v.text&&(l.text=v.text),v.functionCall&&(l.functionCall=v.functionCall),v.executableCode&&(l.executableCode=v.executableCode),v.codeExecutionResult&&(l.codeExecutionResult=v.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),a.candidates[s].content.parts.push(l)}}r.usageMetadata&&(a.usageMetadata=r.usageMetadata)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(e,t,a,r){const o=await Ct(t,it.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),r);return Vr(o)}async function Oa(e,t,a,r){const s=await(await Ct(t,it.GENERATE_CONTENT,e,!1,JSON.stringify(a),r)).json();return{response:$t(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function yt(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const a of e)typeof a=="string"?t.push({text:a}):t.push(a);return Gr(t)}function Gr(e){const t={role:"user",parts:[]},a={role:"function",parts:[]};let r=!1,o=!1;for(const s of e)"functionResponse"in s?(a.parts.push(s),o=!0):(t.parts.push(s),r=!0);if(r&&o)throw new Le("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Le("No content is provided for sending chat message.");return r?t:a}function Pr(e,t){var a;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(a=t==null?void 0:t.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new Ze("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const s=yt(e);r.contents=[s]}return{generateContentRequest:r}}function ca(e){let t;return e.contents?t=e:t={contents:[yt(e)]},e.systemInstruction&&(t.systemInstruction=La(e.systemInstruction)),t}function Br(e){return typeof e=="string"||Array.isArray(e)?{content:yt(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ur={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Kr(e){let t=!1;for(const a of e){const{role:r,parts:o}=a;if(!t&&r!=="user")throw new Le(`First content should be with role 'user', got ${r}`);if(!Zt.includes(r))throw new Le(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Zt)}`);if(!Array.isArray(o))throw new Le("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Le("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const v of o)for(const h of da)h in v&&(s[h]+=1);const l=Ur[r];for(const v of da)if(!l.includes(v)&&s[v]>0)throw new Le(`Content with role '${r}' can't contain '${v}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="SILENT_ERROR";class zr{constructor(t,a,r,o={}){this.model=a,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(Kr(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,a={}){var r,o,s,l,v,h;await this._sendPromise;const m=yt(t),_={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},E=Object.assign(Object.assign({},this._requestOptions),a);let u;return this._sendPromise=this._sendPromise.then(()=>Oa(this._apiKey,this.model,_,E)).then(g=>{var b;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(m);const I=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(I)}else{const I=Je(g.response);I&&console.warn(`sendMessage() was unsuccessful. ${I}. Inspect response object for details.`)}u=g}),await this._sendPromise,u}async sendMessageStream(t,a={}){var r,o,s,l,v,h;await this._sendPromise;const m=yt(t),_={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},E=Object.assign(Object.assign({},this._requestOptions),a),u=Ia(this._apiKey,this.model,_,E);return this._sendPromise=this._sendPromise.then(()=>u).catch(g=>{throw new Error(ua)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(m);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Je(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==ua&&console.error(g)}),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(e,t,a,r){return(await Ct(t,it.COUNT_TOKENS,e,!1,JSON.stringify(a),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(e,t,a,r){return(await Ct(t,it.EMBED_CONTENT,e,!1,JSON.stringify(a),r)).json()}async function Xr(e,t,a,r){const o=a.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await Ct(t,it.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,a,r={}){this.apiKey=t,this._requestOptions=r,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=La(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(t,a={}){var r;const o=ca(t),s=Object.assign(Object.assign({},this._requestOptions),a);return Oa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}async generateContentStream(t,a={}){var r;const o=ca(t),s=Object.assign(Object.assign({},this._requestOptions),a);return Ia(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}startChat(t){var a;return new zr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},t),this._requestOptions)}async countTokens(t,a={}){const r=Pr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),a);return Yr(this.apiKey,this.model,r,o)}async embedContent(t,a={}){const r=Br(t),o=Object.assign(Object.assign({},this._requestOptions),a);return qr(this.apiKey,this.model,r,o)}async batchEmbedContents(t,a={}){const r=Object.assign(Object.assign({},this._requestOptions),a);return Xr(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.apiKey=t}getGenerativeModel(t,a){if(!t.model)throw new Le("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fa(this.apiKey,t,a)}getGenerativeModelFromCachedContent(t,a,r){if(!t.name)throw new Ze("Cached content must contain a `name` field.");if(!t.model)throw new Ze("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const l of o)if(a!=null&&a[l]&&t[l]&&(a==null?void 0:a[l])!==t[l]){if(l==="model"){const v=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(v===h)continue}throw new Ze(`Different value for "${l}" specified in modelParams (${a[l]}) and cachedContent (${t[l]})`)}const s=Object.assign(Object.assign({},a),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new fa(this.apiKey,s,r)}}function Jr(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const Na=["automático","carteles","diálogos","karaokes"],Qr=Ne.enum(Na);async function Zr(e,t,a){const r={errors:[],warnings:[]};if(e==="carteles")return r;const o=t.scriptInfo.properties.get("WrapStyle")??"",s="0";o!==s&&r.errors.push({location:"Script info, wrap style",error:`Se esperaba "${s}", pero se encontró "${o}"`,text:o,ignoreRule:""});const l=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",v="yes";l!==v&&r.errors.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${v}", pero se encontró "${l}"`,text:l,ignoreRule:""});const h="Español";let m=0,_="";for(let E=0;E<t.events.lines.length;E++){const u=t.events.lines[E],g=E+1;if(e==="automático"&&u.effect.includes("template syl")){console.info(`template syl detectado en línea ${g}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&u.type==qt||u.content===""||e==="karaokes"&&u.style!==h||e==="karaokes"&&u.type!==qt||e==="karaokes"&&u.effect!=="karaoke")continue;if(e==="karaokes"&&u.effect==="fx")break;const b=u.effect.split(" ").filter(k=>k.startsWith("ignorar-"));if(b.includes("ignorar-linea"))continue;a.validateLineStyleExists&&!b.includes("ignorar-estilo")&&!no(t,u.style)&&r.errors.push({location:`Línea ${g}`,error:"Estilo no encontrado",text:u.style,ignoreRule:"ignorar-estilo"});const I=be(u.content);let N=xe(I.filter(k=>k.name==="text"));if(a.geminiEnabled&&e==="diálogos"){const k=lo(N);_+=`
Línea ${g}: ${k}`}if(a.validateTextStart&&!b.includes("ignorar-inicio")){const k=eo(N);k!=null&&r.errors.push({location:`Línea ${g}`,error:k,text:u.content,ignoreRule:"ignorar-inicio"})}if(a.validateTextSpaces&&!b.includes("ignorar-espacios")){const k=ro(N);k!=null&&r.errors.push({location:`Línea ${g}`,error:k,text:u.content,ignoreRule:"ignorar-espacios"})}if(a.validateTextEnd&&!b.includes("ignorar-fin")){const k=to(N);k!=null&&r.errors.push({location:`Línea ${g}`,error:k,text:u.content,ignoreRule:"ignorar-fin"})}if(a.validateTextPunctuation&&!b.includes("ignorar-puntuacion")){const k=ao(N);k!=null&&r.errors.push({location:`Línea ${g}`,error:k,text:u.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&m++}if(a.geminiEnabled&&a.geminiApiKey!==""&&e==="diálogos"){const E=await io(_,a.geminiApiKey);for(const u of E.errores){let g=t.events.lines[u.numeroLinea-1];g==null&&(g=Sn());let b=u.mensajeError;b.endsWith(".")&&b.substring(0,b.length-2),r.warnings.push({location:`Línea ${u.numeroLinea}`,error:b,text:g.content,ignoreRule:"ignorar-llm"})}}return e==="karaokes"&&m===0&&r.errors.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${h}"`,text:"",ignoreRule:""}),r}function eo(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function to(e){e=Jr(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(a=>e.endsWith(a))?null:`No tiene un fin de línea válido: ${t.map(a=>`"${a}"`).join(", ")}`}function ao(e){for(let t=0;t<e.length;t++){const a=[",",";","."],r=e[t];if(!a.includes(r))continue;if(t+1>=e.length)break;let o=e[t+1];if(o==="\\"&&e[t+2]==="N"&&(o="\\N"),r==="."&&o=="."||r==="."&&e[t-1]==="."&&e[t-2]==="."||(r==="."||r===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(o))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function no(e,t){return e.styles.styles.some(a=>t===a.name)}function ro(e){return e.includes("  ")?"hay dos espacios seguidos":null}function oo(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}const so=Ne.object({errores:Ne.object({numeroLinea:Ne.number().default(0),mensajeError:Ne.string().default("")}).array()});async function io(e,t){let a="";try{const l=new Wr(t).getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:`
            Valida todos los textos que recibas.
            Considera 'N' como un espacio ' '.
            Ignora los espacios consecutivos, no son errores.
            Considera como errores sólo las faltas ortográficas graves.
            Frases vulgares, de uso poco común o muletillas están bien.
        `}),v={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"application/json",responseSchema:{type:st.OBJECT,required:["errores"],properties:{errores:{type:st.ARRAY,items:{type:st.OBJECT,required:["numeroLinea","mensajeError"],properties:{numeroLinea:{type:st.INTEGER,description:"número de la línea con error",example:2},mensajeError:{type:st.STRING,description:"descripción del error y consejo de cómo corregirlo"}}}}}}};return a=(await l.startChat({generationConfig:v,history:[]}).sendMessage(e)).response.text(),so.parse(JSON.parse(a))}catch(r){console.error("error al validar subs con gemini",r),a!=""&&console.log("rawResponse",a);let o=`${r}`;return o.includes("API key not valid")&&(o="API KEY inválida."),{errores:[{numeroLinea:0,mensajeError:`Error al validar subtítulos con Google Gemini: ${o}`}]}}}function lo(e){let t="";for(let a=0;a<e.length;a++){const r=e[a],o=e[a+1]??"",s=e[a+2]??"",l=e[a-1]??"";if(r==="\\"&&o==="N"){if(a++,s===" "||l===" ")continue;t+=" ";continue}t+=r}return t}const kt=Ne.object({userSubsMode:Qr.default("automático"),geminiEnabled:Ne.boolean().default(!1),geminiApiKey:Ne.string().default(""),validateLineStyleExists:Ne.boolean().default(!0),validateTextStart:Ne.boolean().default(!0),validateTextEnd:Ne.boolean().default(!0),validateTextSpaces:Ne.boolean().default(!0),validateTextPunctuation:Ne.boolean().default(!0)}),Da="asu.validarDialogos.options";function co(e){localStorage.setItem(Da,JSON.stringify(e))}function uo(){try{const e=localStorage.getItem(Da)??"";return kt.parse(JSON.parse(e))}catch(e){return console.error("error al cargar opciones de validar diálogos",e),kt.parse({})}}async function fo(e,t,a){t(!t()),await a()}var vo=Q('<div class="area svelte-on5caf"><textarea readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function ho(e,t){we(t,!0);let a=je(t,"rawMode",7),r=y(C(t.text)),o=y(1),s=y(void 0);async function l(){v(),await Sa(),h()}function v(){if(a()){d(r,C(t.text));return}const b=be(t.text).filter(N=>N.name==="text");let I=xe(b);I=I.replaceAll("\\N",""),d(r,C(I))}function h(){d(o,C(m()))}function m(){return n(s)==null?1:Math.ceil(n(s).scrollHeight/n(s).clientHeight)}He(async()=>{await l()});var _=vo(),E=f(_);De(E),ke(E,b=>d(s,b),()=>n(s));var u=p(E,2);u.__click=[fo,a,l];var g=f(u,!0);c(u),c(_),se(()=>{Qe(E,`textarea ${(t.kind==="error"?"is-danger":"is-warning")??""} svelte-on5caf`),kn(E,n(r)),et(E,"rows",n(o)),Y(g,a()?"Ocultar etiquetas":"Ver etiquetas")}),L(e,_),Re()}Ve(["click"]);var go=Q('<p class="ignore-rule m-1">Para ignorar, colocar <b> </b> en campo de efecto.</p>'),bo=Q('<span><p class="m-1"><b> </b> </p> <!> <!></span>');function va(e,t){we(t,!0);var a=bo(),r=f(a),o=f(r),s=f(o,!0);c(o);var l=p(o);c(r);var v=p(r,2);{var h=E=>{ho(E,{get kind(){return t.kind},get text(){return t.subtitleError.text},rawMode:!1})};re(v,E=>{t.subtitleError.text!=""&&E(h)})}var m=p(v,2);{var _=E=>{var u=go(),g=p(f(u)),b=f(g,!0);c(g),lt(),c(u),se(()=>Y(b,t.subtitleError.ignoreRule)),L(E,u)};re(m,E=>{t.subtitleError.ignoreRule!=""&&E(_)})}c(a),se(E=>{Qe(a,`file-error ${(t.kind==="error"?"has-text-danger":"has-text-warning")??""}`),Y(s,t.subtitleError.location),Y(l,`:
        ${E??""}`)},[()=>t.subtitleError.error+(t.subtitleError.error.endsWith(".")?"":".")]),L(e,a),Re()}var po=(e,t)=>t(),_o=(e,t)=>t(),mo=(e,t)=>t.onAccept&&t.onAccept(),xo=Q('<button class="button is-success svelte-1eoe9jy"> </button>'),Eo=Q('<div class="modal"><div class="modal-background"></div> <div class="modal-card"><header class="modal-card-head"><p class="modal-card-title"> </p> <button class="delete svelte-1eoe9jy" aria-label="close"></button></header> <section class="modal-card-body"><!></section> <footer class="modal-card-foot"><button class="button svelte-1eoe9jy"> </button> <!></footer></div></div>');function yo(e,t){we(t,!0);let a=je(t,"cancelButtonText",3,"Cancelar"),r=je(t,"acceptButtonText",3,"Aceptar"),o=je(t,"acceptButtonDisabled",3,!1);const s="is-active";let l=y(void 0);function v(){n(l)!=null&&(n(l).classList.add(s),t.onOpen!=null&&t.onOpen())}function h(){n(l)!=null&&(n(l).classList.remove(s),t.onClose!=null&&t.onClose())}var m=Eo(),_=p(f(m),2),E=f(_),u=f(E),g=f(u,!0);c(u);var b=p(u,2);b.__click=[po,h],c(E);var I=p(E,2),N=f(I);{var k=H=>{var A=Ie(),q=me(A);Ln(q,()=>t.children),L(H,A)};re(N,H=>{t.children!=null&&H(k)})}c(I);var U=p(I,2),V=f(U);V.__click=[_o,h];var w=f(V,!0);c(V);var R=p(V,2);{var Z=H=>{var A=xo();A.__click=[mo,t];var q=f(A,!0);c(A),se(()=>{A.disabled=o(),Y(q,r())}),L(H,A)};re(R,H=>{t.onAccept!=null&&H(Z)})}return c(U),c(_),c(m),ke(m,H=>d(l,H),()=>n(l)),se(()=>{Y(g,t.title),Y(w,a())}),L(e,m),Re({open:v,close:h})}Ve(["click"]);function Co(e,t){confirm("¿Reiniciar configuración?")&&t(kt.parse({}))}var So=Q("<option> </option>"),ko=Q(`<div class="field"><label class="label" for="">API KEY</label> <div class="control"><input class="input" type="password" placeholder="Ingresa tu API KEY"></div></div> <p><a href="https://aistudio.google.com/apikey" target="_blank">Clic aquí para obtener una API KEY.</a></p> <p>Las validaciones de Google Gemini serán siempre advertencias
                debido a su tendencia a tener falsos positivos.</p>`,1),wo=Q('<button class="button is-danger is-outlined is-fullwidth mb-2">Reiniciar configuración</button> <div class="select is-fullwidth mb-2"><select></select></div> <div class="field boxed"><label class="checkbox"><input type="checkbox"> </label> <!></div> <div class="boxed"><div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div></div>',1);function Ro(e,t){we(t,!0);let a=je(t,"options",15),r=y(void 0);function o(){var l;(l=n(r))==null||l.open()}function s(){var l;(l=n(r))==null||l.close()}return ke(yo(e,{title:"Configuración",cancelButtonText:"Volver",onClose:()=>co(a()),children:(l,v)=>{var h=wo(),m=me(h);m.__click=[Co,a];var _=p(m,2),E=f(_);vt(E,21,()=>Na,ft,(te,de)=>{var S=So(),T={},j=f(S);c(S),se(()=>{T!==(T=n(de))&&(S.value=(S.__value=n(de))==null?"":n(de)),Y(j,`Modo ${n(de)??""}`)}),L(te,S)}),c(E),c(_);var u=p(_,2),g=f(u),b=f(g);Oe(b);var I=p(b);c(g);var N=p(g,2);{var k=te=>{var de=ko(),S=me(de),T=p(f(S),2),j=f(T);Oe(j),c(T),c(S),lt(4),ye(j,()=>a().geminiApiKey,pe=>a(a().geminiApiKey=pe,!0)),L(te,de)};re(N,te=>{a().geminiEnabled&&te(k)})}c(u);var U=p(u,2),V=f(U),w=f(V),R=f(w);Oe(R);var Z=p(R);c(w),c(V);var H=p(V,2),A=f(H),q=f(A);Oe(q);var X=p(q);c(A),c(H);var G=p(H,2),ne=f(G),ce=f(ne);Oe(ce);var M=p(ce);c(ne),c(G);var F=p(G,2),W=f(F),P=f(W);Oe(P);var ae=p(P);c(W),c(F);var B=p(F,2),K=f(B),z=f(K);Oe(z);var le=p(z);c(K),c(B),c(U),se(()=>{Y(I,` ${oe.validateWithGemini}`),Y(Z,` ${oe.validateLineStyleExists}`),Y(X,` ${oe.validateTextStart}`),Y(M,` ${oe.validateTextEnd}`),Y(ae,` ${oe.validateTextSpaces}`),Y(le,` ${oe.validateTextPunctuation}`)}),Vn(E,()=>a().userSubsMode,te=>a(a().userSubsMode=te,!0)),ze(b,()=>a().geminiEnabled,te=>a(a().geminiEnabled=te,!0)),ze(R,()=>a().validateLineStyleExists,te=>a(a().validateLineStyleExists=te,!0)),ze(q,()=>a().validateTextStart,te=>a(a().validateTextStart=te,!0)),ze(ce,()=>a().validateTextEnd,te=>a(a().validateTextEnd=te,!0)),ze(P,()=>a().validateTextSpaces,te=>a(a().validateTextSpaces=te,!0)),ze(z,()=>a().validateTextPunctuation,te=>a(a().validateTextPunctuation=te,!0)),L(l,h)},$$slots:{default:!0}}),l=>d(r,C(l)),()=>n(r)),Re({open:o,close:s})}Ve(["click"]);async function To(e,t,a,r,o,s,l,v,h,m){var _,E;try{if(n(t).geminiEnabled&&n(t).geminiApiKey===""){alert("Ingrese el API KEY de Google Gemini."),(_=n(a))==null||_.open();return}if(n(t).geminiEnabled&&!confirm("Google Gemini habilitado. ¿Continuar?"))return;const u=[...((E=n(r))==null?void 0:E.files)??[]];d(o,0),d(s,0),d(l,C([])),d(v,!0);for(const g of u){const b=await g.text(),I=wn(b);if(I==null){console.error("archivo inválido",g.name);continue}d(h,C(oo(g.name,n(t).userSubsMode)));const N=await Zr(n(h),I,n(t));d(o,n(o)+N.errors.length),d(s,n(s)+N.warnings.length),n(l).push({subsType:n(h),fileName:g.name,errors:N.errors,warnings:N.warnings,errorsVisible:!1,warningsVisible:!1})}}catch(u){console.error("error al procesar archivos",u)}finally{n(r)!=null&&(n(r).value=""),d(v,!1),await m()}}var Ao=(e,t)=>{var a;return(a=n(t))==null?void 0:a.open()},Io=Q('<span class="tag is-dark"> </span>'),Oo=Q('<span class="tag is-dark"> </span>'),Lo=Q('<span class="tag is-dark"> </span>'),No=Q('<span class="tag is-dark"> </span>'),Do=Q('<span class="tag is-dark"> </span>'),Fo=Q('<span class="tag is-dark"> </span>'),Vo=Q('<div class="result-info svelte-1jx7rzy"><div class="counter svelte-1jx7rzy">PROCESANDO</div> <div class="image-container svelte-1jx7rzy"><img class="result-image svelte-1jx7rzy" src="img/nagato.gif" alt="Suzumiya Haruhi" title="Suzumiya Haruhi"></div> <div class="counter svelte-1jx7rzy">SUBTÍTULOS</div></div>'),Mo=Q('<img class="result-image svelte-1jx7rzy" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),jo=Q('<img class="result-image svelte-1jx7rzy" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Ho=Q(`<img class="result-image svelte-1jx7rzy" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),$o=Q('<img class="result-image svelte-1jx7rzy" src="img/new-game.gif" alt="New Game!" title="New Game!">'),Go=Q("<div> <!></div>"),Po=Q("<div> </div>"),Bo=(e,t)=>n(t).errorsVisible=!n(t).errorsVisible,Uo=Q('<div class="file-errors svelte-1jx7rzy"></div>'),Ko=Q('<div class="errors-list svelte-1jx7rzy"><button class="button is-danger is-outlined svelte-1jx7rzy"> </button> <!></div>'),zo=(e,t)=>n(t).warningsVisible=!n(t).warningsVisible,Yo=Q('<div class="file-errors svelte-1jx7rzy"></div>'),qo=Q('<div class="warnings-list svelte-1jx7rzy"><button class="button is-warning is-outlined svelte-1jx7rzy"> </button> <!></div>'),Xo=Q('<div class="result svelte-1jx7rzy"><span> </span> <!> <!> <!></div>'),Wo=Q('<div class="result-info svelte-1jx7rzy"><div> </div> <div class="image-container svelte-1jx7rzy"><!></div> <div> </div></div> <!>',1),Jo=Q('<section class="svelte-1jx7rzy"><h1></h1> <div class="options boxed mb-4 svelte-1jx7rzy"><button class="button is-link mb-2 btn-settings is-fullwidth svelte-1jx7rzy">Configuración</button> <div class="options-info svelte-1jx7rzy"><span class="tag is-dark"> </span> <!> <!> <!> <!> <!> <!></div></div> <div class="file is-fullwidth mb-2 svelte-1jx7rzy"><label class="file-label"><input class="file-input" type="file" accept=".ass" multiple> <span class="file-cta svelte-1jx7rzy"><span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Cargar subtítulos</span></span></label></div> <!> <!></section> <!>',1);function Qo(e,t){we(t,!0);const a=oe.validarDialogos;let r=y("diálogos"),o=y(void 0),s=y(0),l=y(0),v=y(C([])),h=y(!1),m=y(C(kt.parse({}))),_=y(void 0);function E(S){return S.errors.length>0?"has-text-danger":S.warnings.length>0?"has-text-warning":"has-text-success"}async function u(){await Sa();const S=document.querySelector(".result-info");S!=null&&S.scrollIntoView({behavior:"smooth"})}He(()=>{d(m,C(uo()))});var g=Jo();qe(S=>{Xe.title=a});var b=me(g),I=f(b);I.textContent=a;var N=p(I,2),k=f(N);k.__click=[Ao,_];var U=p(k,2),V=f(U),w=f(V);c(V);var R=p(V,2);{var Z=S=>{var T=Io(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateWithGemini)),L(S,T)};re(R,S=>{n(m).geminiEnabled&&S(Z)})}var H=p(R,2);{var A=S=>{var T=Oo(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateLineStyleExists)),L(S,T)};re(H,S=>{n(m).validateLineStyleExists&&S(A)})}var q=p(H,2);{var X=S=>{var T=Lo(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateTextStart)),L(S,T)};re(q,S=>{n(m).validateTextStart&&S(X)})}var G=p(q,2);{var ne=S=>{var T=No(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateTextEnd)),L(S,T)};re(G,S=>{n(m).validateTextEnd&&S(ne)})}var ce=p(G,2);{var M=S=>{var T=Do(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateTextSpaces)),L(S,T)};re(ce,S=>{n(m).validateTextSpaces&&S(M)})}var F=p(ce,2);{var W=S=>{var T=Fo(),j=f(T,!0);c(T),se(()=>Y(j,oe.validateTextPunctuation)),L(S,T)};re(F,S=>{n(m).validateTextPunctuation&&S(W)})}c(U),c(N);var P=p(N,2),ae=f(P),B=f(ae);B.__change=[To,m,_,o,s,l,v,h,r,u],ke(B,S=>d(o,S),()=>n(o)),lt(2),c(ae),c(P);var K=p(P,2);{var z=S=>{var T=Vo();L(S,T)};re(K,S=>{n(h)&&S(z)})}var le=p(K,2);{var te=S=>{var T=Wo(),j=me(T),pe=f(j),Fe=f(pe);c(pe);var Ce=p(pe,2),Te=f(Ce);{var ht=Ae=>{var ie=Mo();L(Ae,ie)},tt=Ae=>{var ie=Ie(),i=me(ie);{var he=O=>{var $=jo();L(O,$)},D=O=>{var $=Ie(),ee=me($);{var x=ue=>{var ve=Ho();L(ue,ve)},J=ue=>{var ve=Ie(),_e=me(ve);{var fe=ge=>{var Se=$o();L(ge,Se)};re(_e,ge=>{n(l)>0&&ge(fe)},!0)}L(ue,ve)};re(ee,ue=>{n(s)>0?ue(x):ue(J,!1)},!0)}L(O,$)};re(i,O=>{n(s)>10?O(he):O(D,!1)},!0)}L(Ae,ie)};re(Te,Ae=>{n(s)===0&&n(l)===0?Ae(ht):Ae(tt,!1)})}c(Ce);var Me=p(Ce,2),at=f(Me);c(Me),c(j);var gt=p(j,2);vt(gt,17,()=>n(v),ft,(Ae,ie,i)=>{var he=Xo(),D=f(he),O=f(D,!0);c(D);var $=p(D,2);{var ee=fe=>{var ge=Go(),Se=f(ge),nt=p(Se);{var bt=rt=>{var Ue=ha("Ignorado.");L(rt,Ue)};re(nt,rt=>{n(ie).subsType==="carteles"&&rt(bt)})}c(ge),se(()=>{Qe(ge,`has-text-success text-${n(ie).subsType??""} svelte-1jx7rzy`),Y(Se,`¡Todo en orden! Detectado como ${n(ie).subsType??""}. `)}),L(fe,ge)},x=fe=>{var ge=Po(),Se=f(ge);c(ge),se(nt=>{Qe(ge,Dn(nt),"svelte-1jx7rzy"),Y(Se,`Detectado como ${n(ie).subsType??""}.`)},[()=>E(n(ie))]),L(fe,ge)};re($,fe=>{n(ie).errors.length==0&&n(ie).warnings.length==0?fe(ee):fe(x,!1)})}var J=p($,2);{var ue=fe=>{var ge=Ko(),Se=f(ge);Se.__click=[Bo,ie];var nt=f(Se);c(Se);var bt=p(Se,2);{var rt=Ue=>{var ot=Uo();vt(ot,21,()=>n(ie).errors,ft,(wt,Rt)=>{va(wt,{kind:"error",get subtitleError(){return n(Rt)}})}),c(ot),L(Ue,ot)};re(bt,Ue=>{n(ie).errorsVisible&&Ue(rt)})}c(ge),se(()=>Y(nt,`${(n(ie).errorsVisible?"Ocultar errores":"Ver errores")??""}: ${n(ie).errors.length??""}`)),L(fe,ge)};re(J,fe=>{n(ie).errors.length>0&&fe(ue)})}var ve=p(J,2);{var _e=fe=>{var ge=qo(),Se=f(ge);Se.__click=[zo,ie];var nt=f(Se);c(Se);var bt=p(Se,2);{var rt=Ue=>{var ot=Yo();vt(ot,21,()=>n(ie).warnings,ft,(wt,Rt)=>{va(wt,{kind:"warning",get subtitleError(){return n(Rt)}})}),c(ot),L(Ue,ot)};re(bt,Ue=>{n(ie).warningsVisible&&Ue(rt)})}c(ge),se(()=>Y(nt,`${(n(ie).warningsVisible?"Ocultar advertencias":"Ver advertencias")??""}: ${n(ie).warnings.length??""}`)),L(fe,ge)};re(ve,fe=>{n(ie).warnings.length>0&&fe(_e)})}c(he),se(fe=>{Qe(D,`name ${fe??""} text-${n(ie).subsType??""} svelte-1jx7rzy`),Y(O,n(ie).fileName)},[()=>E(n(ie))]),L(Ae,he)}),se(()=>{Qe(pe,`counter ${(n(s)==0?"has-text-success":"has-text-danger")??""} svelte-1jx7rzy`),Y(Fe,`ERRORES: ${n(s)??""}`),Qe(Me,`counter ${(n(l)==0?"has-text-success":"has-text-warning")??""} svelte-1jx7rzy`),Y(at,`ADVERTENCIAS: ${n(l)??""}`)}),L(S,T)};re(le,S=>{!n(h)&&n(v).length>0&&S(te)})}c(b);var de=p(b,2);ke(Ro(de,{get options(){return n(m)},set options(S){d(m,C(S))}}),S=>d(_,C(S)),()=>n(_)),se(()=>{Y(w,`Modo ${n(m).userSubsMode??""}`),B.disabled=n(h)}),L(e,g),Re()}Ve(["click","change"]);function Zo(e,t){we(t,!0);let a=y("");He(()=>{Xt.subscribe(_=>{_!=null&&d(a,C(_))});const h=new URLSearchParams(location.search).get("pagina")??"",m=Rn(h)?h:"inicio";Xt.set(m)});var r=Ie(),o=me(r);{var s=v=>{Yn(v)},l=v=>{var h=Ie(),m=me(h);{var _=u=>{Pn(u,{})},E=u=>{var g=Ie(),b=me(g);{var I=k=>{cr(k,{})},N=k=>{var U=Ie(),V=me(U);{var w=Z=>{ar(Z,{})},R=Z=>{var H=Ie(),A=me(H);{var q=G=>{or(G,{})},X=G=>{var ne=Ie(),ce=me(ne);{var M=W=>{Qo(W,{})},F=W=>{var P=Ie(),ae=me(P);{var B=z=>{xr(z,{})},K=z=>{var le=Ie(),te=me(le);{var de=T=>{vr(T,{})},S=T=>{var j=Ie(),pe=me(j);{var Fe=Ce=>{Kn(Ce,{})};re(pe,Ce=>{n(a)=="acercaDe"&&Ce(Fe)},!0)}L(T,j)};re(te,T=>{n(a)=="karaokes.dividirSilabas"?T(de):T(S,!1)},!0)}L(z,le)};re(ae,z=>{n(a)=="karaokes.dividirKaraoke"?z(B):z(K,!1)},!0)}L(W,P)};re(ce,W=>{n(a)=="dialogos.validarDialogos"?W(M):W(F,!1)},!0)}L(G,ne)};re(A,G=>{n(a)=="carteles.aplicarColor"?G(q):G(X,!1)},!0)}L(Z,H)};re(V,Z=>{n(a)=="carteles.aplicarAlpha"?Z(w):Z(R,!1)},!0)}L(k,U)};re(b,k=>{n(a)=="carteles.aplicarSecuenciaPosiciones"?k(I):k(N,!1)},!0)}L(u,g)};re(m,u=>{n(a)=="carteles.copiarMovimiento"?u(_):u(E,!1)},!0)}L(v,h)};re(o,v=>{n(a)=="inicio"?v(s):v(l,!1)})}L(e,r),Re()}var es=Q('<section class="svelte-70scd4"><!></section>');function ls(e){var t=es(),a=f(t);Zo(a,{}),c(t),L(e,t)}export{ls as component,is as universal};
