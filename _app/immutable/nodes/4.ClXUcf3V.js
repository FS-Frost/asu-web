import{s as Ne,n as se,r as ye,o as xe}from"../chunks/scheduler.Bmg8oFKD.js";import{S as _e,i as $e,e as C,s as V,c as k,a as U,l as G,f as j,d as z,m as N,g as Ae,h as y,n as X,o as T}from"../chunks/index.BeU-xQo3.js";var We=/^(\(.*\)|\\?.)$/,q=r=>{const n=r.toString();return We.test(n)?n:`(?:${n})`},Ce=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,ke=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,i=r=>{const n=t=>i(`(?<${t}>${`${r}`.replace(Ce,"$1$2")})`);return{toString:()=>r.toString(),and:Object.assign((...t)=>i(`${r}${o(...t)}`),{referenceTo:t=>i(`${r}\\k<${t}>`)}),or:(...t)=>i(`(?:${r}|${o(...t)})`),after:(...t)=>i(`(?<=${o(...t)})${r}`),before:(...t)=>i(`${r}(?=${o(...t)})`),notAfter:(...t)=>i(`(?<!${o(...t)})${r}`),notBefore:(...t)=>i(`${r}(?!${o(...t)})`),times:Object.assign(t=>i(`${q(r)}{${t}}`),{any:()=>i(`${q(r)}*`),atLeast:t=>i(`${q(r)}{${t},}`),atMost:t=>i(`${q(r)}{0,${t}}`),between:(t,c)=>i(`${q(r)}{${t},${c}}`)}),optionally:()=>i(`${q(r)}?`),as:n,groupedAs:n,grouped:()=>i(`${r}`.replace(ke,"($1$3)$2")),at:{lineStart:()=>i(`^${r}`),lineEnd:()=>i(`${r}$`)}}},Ee=/[.*+?^${}()|[\]\\/]/g,$=r=>i(`[^${r.replace(/[-\\^\]]/g,"\\$&")}]`),we=(...r)=>i(`(?:${r.map(n=>o(n)).join("|")})`),Le=i(".");i("\\b\\w+\\b");i("\\w");i("\\b");var d=i("\\d");i("\\s");Object.assign(i("[a-zA-Z]"),{lowercase:i("[a-z]"),uppercase:i("[A-Z]")});i("\\t");i("\\n");i("\\r");i("\\W+"),i("\\W"),i("\\B"),i("\\D"),i("\\S"),Object.assign(i("[^a-zA-Z]"),{lowercase:i("[^a-z]"),uppercase:i("[^A-Z]")}),i("[^\\t]"),i("[^\\n]"),i("[^\\r]");var o=(...r)=>i(r.map(n=>typeof n=="string"?n.replace(Ee,"\\$&"):n).join("")),u=(...r)=>i(`${q(o(...r))}+`),B=(...r)=>{const n=r.length>1&&(Array.isArray(r[r.length-1])||r[r.length-1]instanceof Set)?r.pop():void 0;return new RegExp(o(...r).toString(),[...n||""].join(""))},Re=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,oe=u(d).and(o(":")).and(d.times(2)).and(o(":")).and(d.times(2)).and(o(".")).and(d.times(2)),Ie=we("Dialogue","Comment").groupedAs("type").and(o(": ")).and(u(d).optionally().groupedAs("layer")).and(o(",")).and(oe.optionally().groupedAs("start")).and(o(",")).and(oe.optionally().groupedAs("end")).and(o(",")).and(u($(",").optionally()).groupedAs("style")).and(o(",")).and(u($(",")).optionally().groupedAs("actor")).and(o(",")).and(u(d).optionally().groupedAs("marginLeft")).and(o(",")).and(u(d).optionally().groupedAs("marginRight")).and(o(",")).and(u(d).optionally().groupedAs("marginVertical")).and(o(",")).and(u($(",")).optionally().groupedAs("effect")).and(o(",")).and(u(Le).optionally().groupedAs("content")),Se=B(Ie),De=o("-").optionally().and(u(d)),m=De.and(o(".").and(u(d)).optionally()),Fe=o("\\").and("a").and(u(d)),Pe=o("\\").and("c").and(u($("\\"))),Oe=o("\\").and("1c").and(u($("\\"))),ze=o("\\").and("2c").and(u($("\\"))),Be=o("\\").and("3c").and(u($("\\"))),Ue=o("\\").and("4c").and(u($("\\"))),Me=o("\\").and("alpha").and(u($("\\"))),Ve=o("\\").and("1a").and(u($("\\"))),je=o("\\").and("2a").and(u($("\\"))),qe=o("\\").and("3a").and(u($("\\"))),Ke=o("\\").and("4a").and(u($("\\"))),Xe=o("\\").and("k").and(u(d)),Ze=o("\\").and("K").and(u(d)),Ge=o("\\").and("kf").and(u(d)),Ye=o("\\").and("ko").and(u(d)),He=o("\\").and("q").and(u(d)),Qe=o("\\").and("s").and(u(d)),Je=o("\\").and("u").and(u(d)),Te=o("\\").and("r").and(u($("\\"))),et=o("\\").and("fe").and(u(d)),tt=o("\\").and("fn").and(u($("\\"))),at=o("\\").and("p").and(u(d)),nt=o("\\").and("pbo").and(u(d)),rt=o("\\").and("an").and(u(d)),st=o("\\").and("b").and(u(d)),ot=o("\\").and("be").and(u(d)),lt=o("\\").and("blur").and(u(d)),ut=o("\\").and("bord").and(u(d)),it=o("\\").and("xbord").and(u(d)),ct=o("\\").and("ybord").and(u(d)),dt=o("\\").and("shad").and(u(d)),ft=o("\\").and("xshad").and(u(d)),ht=o("\\").and("yshad").and(u(d)),pt=o("\\").and("fax").and(u(d)),vt=o("\\").and("fay").and(u(d)),bt=o("\\").and("fscx").and(u(d)),mt=o("\\").and("fscy").and(u(d)),gt=o("\\").and("fsp").and(u(d)),Nt=o("\\").and("fr").and(m),yt=o("\\").and("frx").and(m),xt=o("\\").and("fry").and(m),_t=o("\\").and("frz").and(m),$t=o("\\").and("i").and(o("1").or("0")),At=o("\\").and("fs").and(u(d)),ce=o("\\").and("pos").and(o("(")).and(m.groupedAs("pos_x")).and(o(",")).and(m.groupedAs("pos_y")).and(o(")")),Wt=B(ce),de=o("\\").and("org").and(o("(")).and(m.groupedAs("org_x")).and(o(",")).and(m.groupedAs("org_y")).and(o(")")),Ct=B(de),fe=o("\\").and("fad").and(o("(")).and(m.groupedAs("in")).and(o(",")).and(m.groupedAs("out")).and(o(")")),kt=B(fe),he=o("\\").and("fade").and(o("(")).and(m.groupedAs("fade_alpha1")).and(o(",")).and(m.groupedAs("fade_alpha2")).and(o(",")).and(m.groupedAs("fade_alpha3")).and(o(",")).and(m.groupedAs("fade_t1")).and(o(",")).and(m.groupedAs("fade_t2")).and(o(",")).and(m.groupedAs("fade_t3")).and(o(",")).and(m.groupedAs("fade_t4")).and(o(")")),Et=B(he),wt=o(",").and(m.groupedAs("move_t1")).and(o(",")).and(m.groupedAs("move_t2")).optionally(),pe=o("\\").and("move").and(o("(")).and(m.groupedAs("move_x1")).and(o(",")).and(m.groupedAs("move_y1")).and(o(",")).and(m.groupedAs("move_x2")).and(o(",")).and(m.groupedAs("move_y2")).and(wt).and(o(")")),Lt=B(pe),ve=o("\\").and("clip").and(o("(")).and(u($(")")).groupedAs("clip_args")).and(o(")")),Rt=B(ve),be=o("\\").and("iclip").and(o("(")).and(u($(")")).groupedAs("iclip_args")).and(o(")")),It=B(be),me=ot.or(Me).or(it).or(ct).or(ft).or(ht).or(be).or(pe).or(lt).or(ut).or(dt).or(bt).or(mt).or(he).or(ve).or(gt).or(ce).or(de).or(fe).or(nt).or(yt).or(xt).or(_t).or(pt).or(vt).or(Ye).or(Ge).or(Nt).or(At).or(et).or(tt).or(rt).or(Oe).or(ze).or(Be).or(Ue).or(Ve).or(je).or(qe).or(Ke).or(Pe).or(He).or(Je).or(Qe).or(at).or(Te).or($t).or(st).or(Fe).or(Xe).or(Ze),St=o("\\").at.lineStart().and("t").and(o("(")).and(u(d).groupedAs("arg1").and(o(",")).optionally()).and(u(d).groupedAs("arg2").and(o(",")).optionally()).and(u(d).groupedAs("arg3").and(o(",")).optionally()).and(u(me).groupedAs("tags")).and(o(")")),Dt=B(me),le=B(St);function ee(r,n){var f,v,R,L,x,W,S,E;const t=r.substring(1),c=r.match(le);if(c&&c[0]){if(t.startsWith(a.t)){const e=(f=c[0].match(le))==null?void 0:f.groups,s=(e==null?void 0:e.tags)??"",g=[];ee(s,g);const h=e!=null&&e.arg1?Number(e.arg1):null,b=e!=null&&e.arg2?Number(e.arg2):null,_=e!=null&&e.arg3?Number(e.arg3):null,p={name:a.t,accel:null,t1:null,t2:null,tags:g};h!==null&&b!==null&&_!==null?(p.t1=h,p.t2=b,p.accel=_):h!==null&&b!==null&&_===null?(p.t1=h,p.t2=b,p.accel=null):h!==null&&(p.accel=h),n.push(p)}return r=r.substring(c[0].length),r.length>0&&ee(r,n),n}const l=r.match(Dt);if(!l||!l[0])return n;if(t.startsWith(a.move)){const e=(v=l[0].match(Lt))==null?void 0:v.groups,s=Number((e==null?void 0:e.move_x1)??"0"),g=Number((e==null?void 0:e.move_y1)??"0"),h=Number((e==null?void 0:e.move_x2)??"0"),b=Number((e==null?void 0:e.move_y2)??"0"),_=e!=null&&e.move_t1?Number(e.move_t1):null,p=e!=null&&e.move_t2?Number(e.move_t2):null,I={name:a.move,x1:s,y1:g,x2:h,y2:b,t1:_,t2:p};n.push(I)}else if(t.startsWith(a.alpha)){const e=l[0].substring(1+a.alpha.length),s={name:a.alpha,value:e};n.push(s)}else if(t.startsWith(a.xbord)){const e=Number(l[0].substring(1+a.xbord.length)),s={name:a.xbord,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.ybord)){const e=Number(l[0].substring(1+a.ybord.length)),s={name:a.ybord,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.xshad)){const e=Number(l[0].substring(1+a.xshad.length)),s={name:a.xshad,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.yshad)){const e=Number(l[0].substring(1+a.yshad.length)),s={name:a.yshad,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.iclip)){const e=(R=l[0].match(It))==null?void 0:R.groups,s=(e==null?void 0:e.iclip_args)??"",g={name:a.iclip,drawCommands:s};n.push(g)}else if(t.startsWith(a.blur)){const e=Number(l[0].substring(1+a.blur.length)),s={name:a.blur,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.bord)){const e=Number(l[0].substring(1+a.bord.length)),s={name:a.bord,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.shad)){const e=Number(l[0].substring(1+a.shad.length)),s={name:a.shad,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fscx)){const e=Number(l[0].substring(1+a.fscx.length)),s={name:a.fscx,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fscy)){const e=Number(l[0].substring(1+a.fscy.length)),s={name:a.fscy,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fade)){const e=(L=l[0].match(Et))==null?void 0:L.groups,s=Number((e==null?void 0:e.fade_alpha1)??"0"),g=Number((e==null?void 0:e.fade_alpha2)??"0"),h=Number((e==null?void 0:e.fade_alpha3)??"0"),b=Number((e==null?void 0:e.fade_t1)??"0"),_=Number((e==null?void 0:e.fade_t2)??"0"),p=Number((e==null?void 0:e.fade_t3)??"0"),I=Number((e==null?void 0:e.fade_t4)??"0"),D={name:a.fade,alpha1:s,alpha2:g,alpha3:h,t1:b,t2:_,t3:p,t4:I};n.push(D)}else if(t.startsWith(a.clip)){const e=(x=l[0].match(Rt))==null?void 0:x.groups,s=(e==null?void 0:e.clip_args)??"",g={name:a.clip,drawCommands:s};n.push(g)}else if(t.startsWith(a.fsp)){const e=Number(l[0].substring(1+a.fsp.length)),s={name:a.fsp,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.pos)){const e=(W=l[0].match(Wt))==null?void 0:W.groups,s=Number((e==null?void 0:e.pos_x)??"0"),g=Number((e==null?void 0:e.pos_y)??"0"),h={name:a.pos,x:s,y:g};n.push(h)}else if(t.startsWith(a.org)){const e=(S=l[0].match(Ct))==null?void 0:S.groups,s=Number((e==null?void 0:e.org_x)??"0"),g=Number((e==null?void 0:e.org_y)??"0"),h={name:a.org,x:s,y:g};n.push(h)}else if(t.startsWith(a.fad)){const e=(E=l[0].match(kt))==null?void 0:E.groups,s=Number((e==null?void 0:e.in)??"0"),g=Number((e==null?void 0:e.out)??"0"),h={name:a.fad,in:s,out:g};n.push(h)}else if(t.startsWith(a.frx)){const e=Number(l[0].substring(1+a.frx.length)),s={name:a.frx,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fry)){const e=Number(l[0].substring(1+a.fry.length)),s={name:a.fry,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.frz)){const e=Number(l[0].substring(1+a.frz.length)),s={name:a.frz,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fax)){const e=Number(l[0].substring(1+a.fax.length)),s={name:a.fax,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fay)){const e=Number(l[0].substring(1+a.fay.length)),s={name:a.fay,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.pbo)){const e=Number(l[0].substring(1+a.pbo.length)),s={name:a.pbo,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fe)){const e=Number(l[0].substring(1+a.fe.length)),s={name:a.fe,encodingId:Number(e)};n.push(s)}else if(t.startsWith(a.fn)){const e=l[0].substring(1+a.fn.length),s={name:a.fn,font:e};n.push(s)}else if(t.startsWith(a.an)){const e=Number(l[0].substring(1+a.be.length)),s={name:a.an,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.be)){const e=Number(l[0].substring(1+a.be.length)),s={name:a.be,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fr)){const e=Number(l[0].substring(1+a.fr.length)),s={name:a.fr,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.fs)){const e=Number(l[0].substring(1+a.fs.length)),s={name:a.fs,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.ko)){const e=Number(l[0].substring(1+a.ko.length)),s={name:a.ko,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.kf)){const e=Number(l[0].substring(1+a.kf.length)),s={name:a.kf,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.color1)){const e=l[0].substring(1+a.color1.length),s={name:a.color1,value:e};n.push(s)}else if(t.startsWith(a.color2)){const e=l[0].substring(1+a.color2.length),s={name:a.color2,value:e};n.push(s)}else if(t.startsWith(a.color3)){const e=l[0].substring(1+a.color3.length),s={name:a.color3,value:e};n.push(s)}else if(t.startsWith(a.color4)){const e=l[0].substring(1+a.color4.length),s={name:a.color4,value:e};n.push(s)}else if(t.startsWith(a.alpha1)){const e=l[0].substring(1+a.alpha1.length),s={name:a.alpha1,value:e};n.push(s)}else if(t.startsWith(a.alpha2)){const e=l[0].substring(1+a.alpha2.length),s={name:a.alpha2,value:e};n.push(s)}else if(t.startsWith(a.alpha3)){const e=l[0].substring(1+a.alpha3.length),s={name:a.alpha3,value:e};n.push(s)}else if(t.startsWith(a.alpha4)){const e=l[0].substring(1+a.alpha4.length),s={name:a.alpha4,value:e};n.push(s)}else if(t.startsWith(a.kLowerCase)){const e=Number(l[0].substring(1+a.kLowerCase.length)),s={name:a.kLowerCase,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.kUpperCase)){const e=Number(l[0].substring(1+a.kUpperCase.length)),s={name:a.kUpperCase,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.q)){const e=Number(l[0].substring(1+a.q.length)),s={name:a.q,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.s)){const e=Number(l[0].substring(1+a.s.length)),s={name:a.s,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.u)){const e=Number(l[0].substring(1+a.u.length)),s={name:a.u,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.r)){const e=l[0].substring(1+a.r.length),s={name:a.r,style:e};n.push(s)}else if(t.startsWith(a.p)){const e=Number(l[0].substring(1+a.p.length)),s={name:a.p,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.i)){const e=Number(l[0].substring(1+a.i.length)),s={name:a.i,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.color)){const e=l[0].substring(1+a.color.length),s={name:a.color,value:e};n.push(s)}else if(t.startsWith(a.b)){const e=Number(l[0].substring(1+a.b.length)),s={name:a.b,value:Number.isNaN(e)?0:e};n.push(s)}else if(t.startsWith(a.a)){const e=Number(l[0].substring(1+a.a.length)),s={name:a.a,value:Number.isNaN(e)?0:e};n.push(s)}return r=r.substring(l[0].length),r.length>0&&ee(r,n),n}function ue(r){var c,l,f;const n=[],t=r.matchAll(Re);for(const v of t){if((c=v.groups)!=null&&c.fx){const R=v.groups.fx.substring(1,v.groups.fx.length-1),L=[];ee(R,L),n.push({name:"effect",tags:L});continue}if((l=v.groups)!=null&&l.txt){n.push({name:"text",value:(f=v.groups)==null?void 0:f.txt});continue}}return n}function ge(r){let n="";for(const t of r.tags)switch(t.name){case a.t:const c={name:"effect",tags:t.tags},l=ge(c);t.t1!==null&&t.t2!==null&&t.accel!==null?n+=`\\t(${t.t1},${t.t2},${t.accel},${l})`:t.t1!==null&&t.t2!==null&&t.accel===null?n+=`\\t(${t.t1},${t.t2},${l})`:t.accel!==null?n+=`\\t(${t.accel},${l})`:n+=`\\t(${l})`;break;case a.pos:n+=`\\pos(${t.x},${t.y})`;break;case a.org:n+=`\\org(${t.x},${t.y})`;break;case a.move:n+=`\\move(${t.x1},${t.y1},${t.x2},${t.y2}`,t.t1!=null&&t.t2!=null&&(n+=`,${t.t1},${t.t2}`),n+=")";break;case a.clip:n+=`\\clip(${t.drawCommands})`;break;case a.iclip:n+=`\\iclip(${t.drawCommands})`;break;case a.fad:n+=`\\fad(${t.in},${t.out})`;break;case a.fade:n+=`\\fade(${t.alpha1},${t.alpha2},${t.alpha3},${t.t1},${t.t2},${t.t3},${t.t4})`;break;case a.fe:n+=`\\fe${t.encodingId}`;break;case a.fn:n+=`\\fn${t.font}`;break;case a.r:n+=`\\r${t.style}`;break;default:n+=`\\${t.name}${t.value}`;break}return n}function Ft(r){let n="";for(const t of r){if(t.name=="text"){n+=t.value;continue}n+="{"+ge(t)+"}"}return n}function Pt(r){const n=r.find(l=>l.name=="effect");if((n==null?void 0:n.name)!="effect")return null;const t=a.pos,c=n.tags.find(l=>l.name==t);return(c==null?void 0:c.name)!=t?null:c}function Ot(r){const n=r.find(l=>l.name=="effect");if((n==null?void 0:n.name)!="effect")return null;const t=a.move,c=n.tags.find(l=>l.name==t);return(c==null?void 0:c.name)!=t?null:c}function zt(r,n,t,c,l,f=null,v=null){const R={name:a.move,x1:n,y1:t,x2:c,y2:l,t1:f,t2:v},[L,x]=Bt(r,R.name,R);return L||(x.x1=n,x.y1=t,x.x2=c,x.y2=l,x.t1=f,x.t2=v),x}var Bt=function(r,n,t){const c=r.find(f=>f.name=="effect");if((c==null?void 0:c.name)!="effect")return r.unshift({name:"effect",tags:[t]}),[!0,t];const l=c.tags.find(f=>f.name==n);return(l==null?void 0:l.name)!=n?(c.tags.push(t),[!0,t]):[!1,l]};function Ut(r,n){const t=r.find(l=>l.name=="effect");if((t==null?void 0:t.name)!="effect")return;const c=t.tags.findIndex(l=>l.name===n);c<0||t.tags.splice(c,1)}function ie(r){const n=r.match(Se);if(n==null)return null;const t=n.groups;return{type:(t==null?void 0:t.type)??"",layer:Number((t==null?void 0:t.layer)??"0"),start:(t==null?void 0:t.start)??"",end:(t==null?void 0:t.end)??"",style:(t==null?void 0:t.style)??"",actor:(t==null?void 0:t.actor)??"",marginLeft:Number((t==null?void 0:t.marginLeft)??"0"),marginRight:Number((t==null?void 0:t.marginRight)??"0"),marginVertical:Number((t==null?void 0:t.marginVertical)??"0"),effect:(t==null?void 0:t.effect)??"",content:(t==null?void 0:t.content)??""}}function Mt(r){let n=r.type;return n+=": ",n+=r.layer,n+=",",n+=r.start,n+=",",n+=r.end,n+=",",n+=r.style,n+=",",n+=r.actor,n+=",",n+=r.marginLeft,n+=",",n+=r.marginRight,n+=",",n+=r.marginVertical,n+=",",n+=r.effect,n+=",",n+=r.content,n}var a;(function(r){r.a="a",r.alpha="alpha",r.alpha1="1a",r.alpha2="2a",r.alpha3="3a",r.alpha4="4a",r.an="an",r.b="b",r.be="be",r.blur="blur",r.bord="bord",r.clip="clip",r.color="c",r.color1="1c",r.color2="2c",r.color3="3c",r.color4="4c",r.fad="fad",r.fade="fade",r.fax="fax",r.fay="fay",r.fe="fe",r.fn="fn",r.fr="fr",r.frx="frx",r.fry="fry",r.frz="frz",r.fs="fs",r.fscx="fscx",r.fscy="fscy",r.fsp="fsp",r.i="i",r.iclip="iclip",r.kLowerCase="k",r.kUpperCase="K",r.kf="kf",r.ko="ko",r.move="move",r.org="org",r.p="p",r.pbo="pbo",r.pos="pos",r.q="q",r.r="r",r.s="s",r.shad="shad",r.t="t",r.u="u",r.xbord="xbord",r.xshad="xshad",r.ybord="ybord",r.yshad="yshad"})(a||(a={}));function Vt(r){let n,t,c="Copiar movimiento",l,f,v,R="Movimiento base",L,x,W,S,E,e,s="Subtítulos",g,h,b,_,p,I="Copiar movimiento",D,w,F,Y="Resultado",Z,M,P,K,te;return{c(){n=C("section"),t=C("h1"),t.textContent=c,l=V(),f=C("div"),v=C("label"),v.textContent=R,L=V(),x=C("div"),W=C("input"),S=V(),E=C("div"),e=C("label"),e.textContent=s,g=V(),h=C("div"),b=C("textarea"),_=V(),p=C("button"),p.textContent=I,D=V(),w=C("div"),F=C("label"),F.textContent=Y,Z=V(),M=C("div"),P=C("textarea"),this.h()},l(O){n=k(O,"SECTION",{class:!0});var A=U(n);t=k(A,"H1",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-cgmiqk"&&(t.textContent=c),l=j(A),f=k(A,"DIV",{class:!0});var H=U(f);v=k(H,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(v)!=="svelte-1xo7jgb"&&(v.textContent=R),L=j(H),x=k(H,"DIV",{class:!0});var ae=U(x);W=k(ae,"INPUT",{class:!0,type:!0,placeholder:!0}),ae.forEach(z),H.forEach(z),S=j(A),E=k(A,"DIV",{class:!0});var Q=U(E);e=k(Q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(e)!=="svelte-4ph3s1"&&(e.textContent=s),g=j(Q),h=k(Q,"DIV",{class:!0});var ne=U(h);b=k(ne,"TEXTAREA",{class:!0,placeholder:!0}),U(b).forEach(z),ne.forEach(z),Q.forEach(z),_=j(A),p=k(A,"BUTTON",{class:!0,"data-svelte-h":!0}),G(p)!=="svelte-8glepk"&&(p.textContent=I),D=j(A),w=k(A,"DIV",{class:!0});var J=U(w);F=k(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(F)!=="svelte-a54k82"&&(F.textContent=Y),Z=j(J),M=k(J,"DIV",{class:!0});var re=U(M);P=k(re,"TEXTAREA",{class:!0}),U(P).forEach(z),re.forEach(z),J.forEach(z),A.forEach(z),this.h()},h(){N(t,"class","title is-5"),N(v,"class","label"),N(v,"for",""),N(W,"class","input"),N(W,"type","text"),N(W,"placeholder","\\move(10,20,30,40)"),N(x,"class","control"),N(f,"class","field"),N(e,"class","label"),N(e,"for",""),N(b,"class","textarea"),N(b,"placeholder","Pega tus líneas aquí"),N(h,"class","control"),N(E,"class","field"),N(p,"class","button is-link is-fullwidth"),N(F,"class","label"),N(F,"for",""),N(P,"class","textarea"),N(M,"class","control"),N(w,"class","field mt-2"),N(n,"class","svelte-jzi2e1")},m(O,A){Ae(O,n,A),y(n,t),y(n,l),y(n,f),y(f,v),y(f,L),y(f,x),y(x,W),X(W,r[0]),y(n,S),y(n,E),y(E,e),y(E,g),y(E,h),y(h,b),X(b,r[1]),y(n,_),y(n,p),y(n,D),y(n,w),y(w,F),y(w,Z),y(w,M),y(M,P),X(P,r[2]),K||(te=[T(W,"input",r[4]),T(b,"input",r[5]),T(p,"click",r[6]),T(P,"input",r[7])],K=!0)},p(O,[A]){A&1&&W.value!==O[0]&&X(W,O[0]),A&2&&X(b,O[1]),A&4&&X(P,O[2])},i:se,o:se,d(O){O&&z(n),K=!1,ye(te)}}}function jt(r,n,t){let c="Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!",l="",f="";async function v(){if(l.length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const S=l.split(`
`);console.log(S);const E=ie(c);if(E==null){console.error("invalid base line",c);return}const e=ue(E.content),s=Ot(e);if(s==null){console.error("base move not found");return}const g=s.x2-s.x1,h=s.y2-s.y1;let b="";for(let _=0;_<S.length;_++){const p=S[_];if(p.length==0)continue;const I=ie(p);if(I==null){console.error(`line ${_+1}: invalid line`);break}const D=ue(I.content),w=Pt(D);if(w==null){console.error(`line ${_+1}: pos not found`);break}Ut(D,a.pos);const F=w.x,Y=w.y,Z=w.x+g,M=w.y+h;zt(D,F,Y,Z,M,s.t1,s.t2);const P=Ft(D);I.content=P;const K=Mt(I);console.log(K),_>0&&(b+=`
`),b+=K}t(2,f=b),await navigator.clipboard.writeText(b),alert("¡Líneas copiadas al portapapeles!")}xe(()=>{t(1,l+=`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA 1
`),t(1,l+="Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(470,361)}LINEA 2")});function R(){c=this.value,t(0,c)}function L(){l=this.value,t(1,l)}const x=()=>v();function W(){f=this.value,t(2,f)}return[c,l,f,v,R,L,x,W]}class Xt extends _e{constructor(n){super(),$e(this,n,jt,Vt,Ne,{})}}export{Xt as component};
