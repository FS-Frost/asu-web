import{d as Ve,t as ee,e as qe,s as q,a as L,b as ha,c as Oe}from"../chunks/CwJ6XYGs.js";import"../chunks/BF8XUEzE.js";import{a9 as $t,aa as Gt,ab as Fa,J as Dt,X as Rt,Q as Pe,ag as Va,ae as Ma,R as ja,O as ga,g as n,j as Ha,V as $a,W as Pt,Y as Tt,a0 as ct,am as Ga,Z as ba,_ as Ft,$ as Pa,av as pa,aq as _a,N as Ba,m as Ua,H as Bt,aw as At,a3 as Ka,ax as Vt,ay as za,az as Mt,aA as Ut,aB as Ya,ap as qa,aC as Xa,aD as ma,aE as Wa,ad as Ja,T as Qa,n as Za,aF as en,b as xa,a2 as Ea,a1 as ya,y as we,a as Ca,a7 as y,l as c,a6 as He,aG as Xe,C as f,E as p,D as u,A as se,B as Re,aH as it,z as me,a8 as Sa}from"../chunks/CCHRc5u3.js";import{a as tn,p as C,i as re,b as ke}from"../chunks/CBNot3_l.js";import{f as an,p as Ye,h as be,i as nn,j as ut,r as rn,T as Ke,k as on,l as xe,m as Ee,t as oe,n as Ie,o as De,B as sn,c as ln,q as cn,u as un,b as et,v as dn,w as Ot,x as $e,y as fn,z as vn,A as hn,C as gn,D as bn,E as Ge,F as pn,G as _n,H as mn,I as xn,J as En,K as yn,L as Cn,s as Qe,M as Kt,N as zt,O as It,P as Ne,Q as Yt,R as Sn,S as kn,U as wn,a as qt,V as Rn}from"../chunks/705YHexE.js";import{p as je}from"../chunks/C-7UMIG7.js";function Tn(e){var t=Fa,a=Dt;$t(null),Gt(null);try{return e()}finally{$t(t),Gt(a)}}function jt(e,t,a,r=a){e.addEventListener(t,()=>Tn(a));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),an()}function dt(e,t){return t}function An(e,t,a,r){for(var o=[],s=t.length,l=0;l<s;l++)Ya(t[l].e,o,!0);var v=s>0&&o.length===0&&a!==null;if(v){var h=a.parentNode;qa(h),h.append(a),r.clear(),We(e,t[0].prev,t[s-1].next)}Xa(o,()=>{for(var _=0;_<s;_++){var m=t[_];v||(r.delete(m.k),We(e,m.prev,m.next)),ma(m.e,!v)}})}function ft(e,t,a,r,o,s=null){var l=e,v={items:new Map,first:null},h=(t&pa)!==0;if(h){var _=e;l=Pe?Rt(Va(_)):_.appendChild(Ma())}Pe&&ja();var m=null,E=!1,d=Ha(()=>{var g=a();return Ba(g)?g:g==null?[]:_a(g)});ga(()=>{var g=n(d),b=g.length;if(E&&b===0)return;E=b===0;let O=!1;if(Pe){var N=l.data===$a;N!==(b===0)&&(l=Pt(),Rt(l),Tt(!1),O=!0)}if(Pe){for(var S=null,$,M=0;M<b;M++){if(ct.nodeType===8&&ct.data===Ga){l=ct,O=!0,Tt(!1);break}var k=g[M],R=r(k,M);$=ka(ct,v,S,null,k,R,M,o,t,a),v.items.set(R,$),S=$}b>0&&Rt(Pt())}Pe||On(g,v,l,o,t,r,a),s!==null&&(b===0?m?ba(m):m=Ft(()=>s(l)):m!==null&&Pa(m,()=>{m=null})),O&&Tt(!0),n(d)}),Pe&&(l=ct)}function On(e,t,a,r,o,s,l){var F,V,X,K;var v=(o&za)!==0,h=(o&(Mt|Vt))!==0,_=e.length,m=t.items,E=t.first,d=E,g,b=null,O,N=[],S=[],$,M,k,R;if(v)for(R=0;R<_;R+=1)$=e[R],M=s($,R),k=m.get(M),k!==void 0&&((F=k.a)==null||F.measure(),(O??(O=new Set)).add(k));for(R=0;R<_;R+=1){if($=e[R],M=s($,R),k=m.get(M),k===void 0){var W=d?d.e.nodes_start:a;b=ka(W,t,b,b===null?t.first:b.next,$,M,R,r,o,l),m.set(M,b),N=[],S=[],d=b.next;continue}if(h&&In(k,$,R,o),k.e.f&At&&(ba(k.e),v&&((V=k.a)==null||V.unfix(),(O??(O=new Set)).delete(k))),k!==d){if(g!==void 0&&g.has(k)){if(N.length<S.length){var H=S[0],A;b=H.prev;var Q=N[0],Y=N[N.length-1];for(A=0;A<N.length;A+=1)Xt(N[A],H,a);for(A=0;A<S.length;A+=1)g.delete(S[A]);We(t,Q.prev,Y.next),We(t,b,Q),We(t,Y,H),d=H,b=Y,R-=1,N=[],S=[]}else g.delete(k),Xt(k,d,a),We(t,k.prev,k.next),We(t,k,b===null?t.first:b.next),We(t,b,k),b=k;continue}for(N=[],S=[];d!==null&&d.k!==M;)d.e.f&At||(g??(g=new Set)).add(d),S.push(d),d=d.next;if(d===null)continue;k=d}N.push(k),b=k,d=k.next}if(d!==null||g!==void 0){for(var G=g===void 0?[]:_a(g);d!==null;)d.e.f&At||G.push(d),d=d.next;var ne=G.length;if(ne>0){var fe=o&pa&&_===0?a:null;if(v){for(R=0;R<ne;R+=1)(X=G[R].a)==null||X.measure();for(R=0;R<ne;R+=1)(K=G[R].a)==null||K.fix()}An(t,G,fe,m)}}v&&Ka(()=>{var ae;if(O!==void 0)for(k of O)(ae=k.a)==null||ae.apply()}),Dt.first=t.first&&t.first.e,Dt.last=b&&b.e}function In(e,t,a,r){r&Mt&&Ut(e.v,t),r&Vt?Ut(e.i,a):e.i=a}function ka(e,t,a,r,o,s,l,v,h,_){var m=(h&Mt)!==0,E=(h&Wa)===0,d=m?E?Ua(o):Bt(o):o,g=h&Vt?Bt(l):l,b={i:g,v:d,k:s,a:null,e:null,prev:a,next:r};try{return b.e=Ft(()=>v(e,d,g,_),Pe),b.e.prev=a&&a.e,b.e.next=r&&r.e,a===null?t.first=b:(a.next=b,a.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{}}function Xt(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,o=t?t.e.nodes_start:a,s=e.e.nodes_start;s!==r;){var l=Ja(s);o.before(s),s=l}}function We(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Ln(e,t,...a){var r=e,o=Za,s;ga(()=>{o!==(o=t())&&(s&&(ma(s),s=null),s=Ft(()=>o(r,...a)))},Qa),Pe&&(r=ct)}function wa(e){var t,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(a=wa(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Nn(){for(var e,t,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(t=wa(e))&&(r&&(r+=" "),r+=t);return r}function Dn(e){return typeof e=="object"?Nn(e):e??""}function ye(e,t,a=t){var r=en();jt(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=Lt(e)?Nt(s):s,a(s),r&&s!==(s=t())){var l=e.selectionStart,v=e.selectionEnd;e.value=s??"",v!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(v,e.value.length))}}),(Pe&&e.defaultValue!==e.value||xa(t)==null&&e.value)&&a(Lt(e)?Nt(e.value):e.value),Ea(()=>{var o=t();Lt(e)&&o===Nt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ze(e,t,a=t){jt(e,"change",r=>{var o=r?e.defaultChecked:e.checked;a(o)}),(Pe&&e.defaultChecked!==e.checked||xa(t)==null)&&a(e.checked),Ea(()=>{var r=t();e.checked=!!r})}function Lt(e){var t=e.type;return t==="number"||t==="range"}function Nt(e){return e===""?null:+e}function Ra(e,t,a){if(e.multiple)return Mn(e,t);for(var r of e.options){var o=_t(r);if(tn(o,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e,t){ya(()=>{var a=new MutationObserver(()=>{var r=e.__value;Ra(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Vn(e,t,a=t){var r=!0;jt(e,"change",o=>{var s=o?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(s),_t);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");l=v&&_t(v)}a(l)}),ya(()=>{var o=t();if(Ra(e,o,r),r&&o===void 0){var s=e.querySelector(":checked");s!==null&&(o=_t(s),a(o))}e.__value=o,r=!1}),Fn(e)}function Mn(e,t){for(var a of e.options)a.selected=~t.indexOf(_t(a))}function _t(e){return"__value"in e?e.__value:e.value}const jn=!0,is=Object.freeze(Object.defineProperty({__proto__:null,prerender:jn},Symbol.toStringTag,{value:"Module"}));var Hn=(e,t)=>t(),$n=()=>{},Gn=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Pn(e,t){we(t,!0);const a=oe.copiarMovimiento;let r=y("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),o=y(""),s=y("");Ca(()=>{l(n(r),n(o))});function l(A,Q){if(Q.length==0)return;const Y=Q.split(`
`);console.log(Y);const G=Ye(A);if(G==null){console.error("invalid base line",A);return}const ne=be(G.content),fe=nn(ne);if(fe==null){console.error("base move not found");return}const F=fe.x2-fe.x1,V=fe.y2-fe.y1;let X="";for(let K=0;K<Y.length;K++){const ae=Y[K];if(ae.length==0)continue;const P=Ye(ae);if(P==null){console.error(`line ${K+1}: invalid line`);break}const U=be(P.content),J=ut(U);if(J==null){console.error(`line ${K+1}: pos not found`);break}rn(U,Ke.pos);const z=J.x,le=J.y,ce=J.x+F,w=J.y+V;on(U,z,le,ce,w,fe.t1,fe.t2);const T=xe(U);P.content=T;const B=Ee(P);console.log(B),K>0&&(X+=`
`),X+=B}c(s,C(X))}async function v(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{for(let A=1;A<=10;A++){const Q=182+A*5,Y=421+A*7;c(o,n(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${Q},${Y})}LINEA ${A}
`)}});var h=Gn();qe(A=>{Xe.title=a});var _=f(h);_.textContent=a;var m=p(_,2),E=p(f(m),2),d=f(E);Ie(d),u(E),u(m);var g=p(m,2),b=f(g),O=f(b,!0);u(b);var N=p(b,2),S=f(N);De(S),u(N),u(g);var $=p(g,2),M=f($),k=f(M),R=p(k);R.__click=[Hn,v],R.__keydown=[$n],u(M);var W=p(M,2),H=f(W);De(H),u(W),u($),u(h),se(()=>{q(O,oe.subtitulos),q(k,`${oe.resultado} `)}),ye(d,()=>n(r),A=>c(r,A)),ye(S,()=>n(o),A=>c(o,A)),ye(H,()=>n(s),A=>c(s,A)),L(e,h),Re()}Ve(["click","keydown"]);var Bn=ee('<span class="version svelte-1ghhrj6"><a target="_blank"> </a></span>'),Un=ee(`<div class="text-column"><h1></h1> <!> <div class="kagamin svelte-1ghhrj6"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-1ghhrj6"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-1ghhrj6"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-1ghhrj6"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Kn(e,t){we(t,!0);const a=oe.acercaDe;let r=y(C(sn.parse({})));He(async()=>{ln.subscribe(h=>{h!=null&&c(r,C(h))})});var o=Un();qe(h=>{Xe.title=a});var s=f(o);s.textContent=a;var l=p(s,2);{var v=h=>{var _=Bn(),m=f(_),E=f(m);u(m),u(_),se((d,g)=>{et(m,"href",d),q(E,`Versión ${n(r).ref??""}.${g??""} desplegada
                por
                ${n(r).actor??""}`)},[()=>cn(n(r).actor,n(r).repo,n(r).sha),()=>un(n(r).sha)]),L(h,_)};re(l,h=>{n(r).sha!=""&&h(v)})}it(20),u(o),L(e,o),Re()}var zn=ee('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Yn(e){var t=zn();qe(a=>{Xe.title="Asu"}),L(e,t)}var qn=(e,t)=>t(),Xn=ee("<b> </b>"),Wn=ee('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function Be(e,t){we(t,!0);let a=je(t,"label",3,""),r=je(t,"disabled",15,!1),o=je(t,"startValue",15,""),s=je(t,"endValue",15,""),l=je(t,"startPlaceholder",3,""),v=je(t,"endPlaceholder",3,""),h=y(void 0);function _(){var Y;if((Y=n(h))!=null&&Y.checked){m();return}E()}function m(){r()&&(r(!1),n(h)&&(n(h).checked=!0),t.onEnabled&&t.onEnabled())}function E(){r()||(r(!0),n(h)&&(n(h).checked=!1),t.onDisabled&&t.onDisabled())}He(()=>{n(h)&&(n(h).checked=!r())});var d=Wn(),g=f(d),b=f(g),O=f(b);O.__change=[qn,_],ke(O,Y=>c(h,Y),()=>n(h));var N=p(O,2);{var S=Y=>{var G=ha();se(()=>q(G,`${a()??""}
                (deshabilitado)`)),L(Y,G)},$=Y=>{var G=Xn(),ne=f(G,!0);u(G),se(()=>q(ne,a())),L(Y,G)};re(N,Y=>{r()?Y(S):Y($,!1)})}u(b),u(g);var M=p(g,2),k=f(M),R=p(f(k),2),W=f(R);Ie(W),u(R),u(k);var H=p(k,2),A=p(f(H),2),Q=f(A);return Ie(Q),u(A),u(H),u(M),u(d),se(()=>{et(W,"placeholder",l()),W.disabled=r(),et(Q,"placeholder",v()),Q.disabled=r()}),ye(W,o),ye(Q,s),L(e,d),Re({enable:m,disable:E})}Ve(["change"]);function bt(e,t){const a=[];for(let r=e;r<=t;r++){const o=dn(r);a.push(o)}return a}function pt(e,t,a){const r=Array(a),o=Ot(e.blue,t.blue,a);if(o.length!==a)return console.error(`ERROR: blue interpolated values ${o.length} don't match intervals ${a}`),[];const s=Ot(e.green,t.green,a);if(s.length!==a)return console.error(`ERROR: green interpolated values ${s.length} don't match intervals ${a}`),[];const l=Ot(e.red,t.red,a);if(l.length!==a)return console.error(`ERROR: red interpolated values ${l.length} don't match intervals ${a}`),[];for(var v=0;v<a;v++){const h=Math.floor(o[v]),_=Math.floor(s[v]),m=Math.floor(l[v]);r[v]={blue:h,green:_,red:m}}return r}var Jn=(e,t)=>t(),Qn=()=>{},Zn=ee('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function Ta(e,t){we(t,!0);async function a(){await navigator.clipboard.writeText(t.rawResultLines),alert(oe.lineasCopiadas)}var r=Zn();r.__click=[Jn,a],r.__keydown=[Qn],se(()=>et(r,"title",oe.copiar)),L(e,r),Re()}Ve(["click","keydown"]);var er=(e,t)=>t(),tr=ee('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ar(e,t){we(t,!0);const a=oe.aplicarAlpha,r="0",o="FF";let s=y(""),l=y(""),v=y("0"),h=y("FF"),_=y("0"),m=y("FF"),E=y("0"),d=y("FF"),g=y("0"),b=y("FF"),O=y("0"),N=y("FF"),S=y(!1),$=y(!0),M=y(!0),k=y(!0),R=y(!0),W=y(void 0),H=y(void 0),A=y(void 0),Q=y(void 0),Y=y(void 0),G=y(!1);function ne(){var i,he,D,I;(i=n(H))==null||i.disable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable()}function fe(){var i,he,D,I;n($)&&n(M)&&n(k)&&n(R)&&((i=n(H))==null||i.enable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable())}function F(){var i;(i=n(W))==null||i.disable()}function V(){var i;n($)&&n(M)&&n(k)&&n(R)&&((i=n(W))==null||i.enable())}function X(){const i=[],he=n(s).split(`
`);for(const D of he){if(D.length==0)continue;const I=Ye(D);I!=null&&i.push(I)}if(!n(S)){const D=$e(n(v)),I=$e(n(h));if(D>=I){alert("El inicio de alpha total debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){let Z=Math.floor(j.length*x/i.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,_e=be(i[x].content);fn(_e,ve),i[x].content=xe(_e);const de=Ee(i[x]);x>0&&(te+=`
`),te+=de}c(l,C(te));return}if(!n($)){const D=$e(n(_)),I=$e(n(m));if(D>=I){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){let Z=Math.floor(j.length*x/i.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,_e=be(i[x].content);vn(_e,ve),i[x].content=xe(_e);const de=Ee(i[x]);x>0&&(te+=`
`),te+=de}c(l,C(te))}if(!n(M)){const D=$e(n(E)),I=$e(n(d));if(D>=I){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){let Z=Math.floor(j.length*x/i.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,_e=be(i[x].content);hn(_e,ve),i[x].content=xe(_e);const de=Ee(i[x]);x>0&&(te+=`
`),te+=de}c(l,C(te))}if(!n(k)){const D=$e(n(g)),I=$e(n(b));if(D>=I){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){let Z=Math.floor(j.length*x/i.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,_e=be(i[x].content);gn(_e,ve),i[x].content=xe(_e);const de=Ee(i[x]);x>0&&(te+=`
`),te+=de}c(l,C(te))}if(!n(R)){const D=$e(n(O)),I=$e(n(N));if(D>=I){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(D<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(I>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const j=bt(D,I);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){let Z=Math.floor(j.length*x/i.length);Z>=j.length&&(Z=j.length-1);const ve=`&H${j[Z]}&`,_e=be(i[x].content);bn(_e,ve),i[x].content=xe(_e);const de=Ee(i[x]);x>0&&(te+=`
`),te+=de}c(l,C(te))}}He(()=>{for(let i=1;i<=10;i++)c(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${i}
`)});var K=tr();qe(i=>{Xe.title=a});var ae=f(K);ae.textContent=a;var P=p(ae,4);ke(Be(P,{label:"Alpha total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>fe(),get startValue(){return n(v)},set startValue(i){c(v,C(i))},get endValue(){return n(h)},set endValue(i){c(h,C(i))},get disabled(){return n(S)},set disabled(i){c(S,C(i))}}),i=>c(W,C(i)),()=>n(W));var U=p(P,2);ke(Be(U,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(_)},set startValue(i){c(_,C(i))},get endValue(){return n(m)},set endValue(i){c(m,C(i))},get disabled(){return n($)},set disabled(i){c($,C(i))}}),i=>c(H,C(i)),()=>n(H));var J=p(U,2);ke(Be(J,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(E)},set startValue(i){c(E,C(i))},get endValue(){return n(d)},set endValue(i){c(d,C(i))},get disabled(){return n(M)},set disabled(i){c(M,C(i))}}),i=>c(A,C(i)),()=>n(A));var z=p(J,2);ke(Be(z,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(g)},set startValue(i){c(g,C(i))},get endValue(){return n(b)},set endValue(i){c(b,C(i))},get disabled(){return n(k)},set disabled(i){c(k,C(i))}}),i=>c(Q,C(i)),()=>n(Q));var le=p(z,2);ke(Be(le,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(O)},set startValue(i){c(O,C(i))},get endValue(){return n(N)},set endValue(i){c(N,C(i))},get disabled(){return n(R)},set disabled(i){c(R,C(i))}}),i=>c(Y,C(i)),()=>n(Y));var ce=p(le,2),w=f(ce);Ie(w),it(),u(ce);var T=p(ce,2),B=f(T),pe=f(B,!0);u(B);var Fe=p(B,2),Ce=f(Fe);De(Ce),u(Fe),u(T);var Te=p(T,2);Te.__click=[er,X];var vt=f(Te,!0);u(Te);var tt=p(Te,2),Me=f(tt),at=f(Me),ht=p(at);Ta(ht,{get rawResultLines(){return n(l)}}),u(Me);var Ae=p(Me,2),ie=f(Ae);De(ie),u(Ae),u(tt),u(K),se(()=>{q(pe,oe.subtitulos),q(vt,oe.aplicarAlpha),q(at,`${oe.resultado} `)}),ze(w,()=>n(G),i=>c(G,i)),ye(Ce,()=>n(s),i=>c(s,i)),ye(ie,()=>n(l),i=>c(l,i)),L(e,K),Re()}Ve(["click"]);var nr=(e,t)=>t(),rr=ee('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function or(e,t){we(t,!0);const a=oe.aplicarColor,r="&HFFFFFF&",o="&H000000&";let s=y(""),l=y(""),v=y(r),h=y(o),_=y(r),m=y(o),E=y(r),d=y(o),g=y(r),b=y(o),O=y(r),N=y(o),S=y(!1),$=y(!0),M=y(!0),k=y(!0),R=y(!0),W=y(void 0),H=y(void 0),A=y(void 0),Q=y(void 0),Y=y(void 0),G=y(!1);function ne(){var i,he,D,I;(i=n(H))==null||i.disable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable()}function fe(){var i,he,D,I;n($)&&n(M)&&n(k)&&n(R)&&((i=n(H))==null||i.enable(),(he=n(A))==null||he.disable(),(D=n(Q))==null||D.disable(),(I=n(Y))==null||I.disable())}function F(){var i;(i=n(W))==null||i.disable()}function V(){var i;n($)&&n(M)&&n(k)&&n(R)&&((i=n(W))==null||i.enable())}function X(){const i=[],he=n(s).split(`
`);for(const D of he){if(D.length==0)continue;const I=Ye(D);I!=null&&i.push(I)}if(!n(S)){const D=Ge(n(v));if(D==null){alert(`Color total de inicio inválido: ${n(v)}`);return}const I=Ge(n(h));if(I==null){alert(`Color total de fin inválido: ${n(h)}`);return}const j=pt(D,I,i.length);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){const Z=j[x],ue=be(i[x].content);pn(ue,Z.blue,Z.green,Z.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(te+=`
`),te+=ve}c(l,C(te));return}if(!n($)){const D=Ge(n(_));if(D==null){alert(`Color 1 de inicio inválido: ${n(_)}`);return}const I=Ge(n(m));if(I==null){alert(`Color 1 de fin inválido: ${n(m)}`);return}const j=pt(D,I,i.length);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){const Z=j[x],ue=be(i[x].content);_n(ue,Z.blue,Z.green,Z.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(te+=`
`),te+=ve}c(l,C(te))}if(!n(M)){const D=Ge(n(E));if(D==null){alert(`Color 2 de inicio inválido: ${n(E)}`);return}const I=Ge(n(d));if(I==null){alert(`Color 2 de fin inválido: ${n(d)}`);return}const j=pt(D,I,i.length);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){const Z=j[x],ue=be(i[x].content);mn(ue,Z.blue,Z.green,Z.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(te+=`
`),te+=ve}c(l,C(te))}if(!n(k)){const D=Ge(n(g));if(D==null){alert(`Color 3 de inicio inválido: ${n(g)}`);return}const I=Ge(n(b));if(I==null){alert(`Color 3 de fin inválido: ${n(b)}`);return}const j=pt(D,I,i.length);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){const Z=j[x],ue=be(i[x].content);xn(ue,Z.blue,Z.green,Z.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(te+=`
`),te+=ve}c(l,C(te))}if(!n(R)){const D=Ge(n(O));if(D==null){alert(`Color 4 de inicio inválido: ${n(O)}`);return}const I=Ge(n(N));if(I==null){alert(`Color 4 de fin inválido: ${n(N)}`);return}const j=pt(D,I,i.length);n(G)&&j.reverse();let te="";for(let x=0;x<i.length;x++){const Z=j[x],ue=be(i[x].content);En(ue,Z.blue,Z.green,Z.red),i[x].content=xe(ue);const ve=Ee(i[x]);x>0&&(te+=`
`),te+=ve}c(l,C(te))}}He(()=>{c(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var K=rr();qe(i=>{Xe.title=a});var ae=f(K);ae.textContent=a;var P=p(ae,4);ke(Be(P,{label:"Color total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>ne(),onDisabled:()=>fe(),get startValue(){return n(v)},set startValue(i){c(v,C(i))},get endValue(){return n(h)},set endValue(i){c(h,C(i))},get disabled(){return n(S)},set disabled(i){c(S,C(i))}}),i=>c(W,C(i)),()=>n(W));var U=p(P,2);ke(Be(U,{label:"Color 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(_)},set startValue(i){c(_,C(i))},get endValue(){return n(m)},set endValue(i){c(m,C(i))},get disabled(){return n($)},set disabled(i){c($,C(i))}}),i=>c(H,C(i)),()=>n(H));var J=p(U,2);ke(Be(J,{label:"Color 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(E)},set startValue(i){c(E,C(i))},get endValue(){return n(d)},set endValue(i){c(d,C(i))},get disabled(){return n(M)},set disabled(i){c(M,C(i))}}),i=>c(A,C(i)),()=>n(A));var z=p(J,2);ke(Be(z,{label:"Color 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(g)},set startValue(i){c(g,C(i))},get endValue(){return n(b)},set endValue(i){c(b,C(i))},get disabled(){return n(k)},set disabled(i){c(k,C(i))}}),i=>c(Q,C(i)),()=>n(Q));var le=p(z,2);ke(Be(le,{label:"Color 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>F(),onDisabled:()=>V(),get startValue(){return n(O)},set startValue(i){c(O,C(i))},get endValue(){return n(N)},set endValue(i){c(N,C(i))},get disabled(){return n(R)},set disabled(i){c(R,C(i))}}),i=>c(Y,C(i)),()=>n(Y));var ce=p(le,2),w=f(ce);Ie(w),it(),u(ce);var T=p(ce,2),B=f(T),pe=f(B,!0);u(B);var Fe=p(B,2),Ce=f(Fe);De(Ce),u(Fe),u(T);var Te=p(T,2);Te.__click=[nr,X];var vt=f(Te,!0);u(Te);var tt=p(Te,2),Me=f(tt),at=f(Me),ht=p(at);Ta(ht,{get rawResultLines(){return n(l)}}),u(Me);var Ae=p(Me,2),ie=f(Ae);De(ie),u(Ae),u(tt),u(K),se(()=>{q(pe,oe.subtitulos),q(vt,oe.aplicarColor),q(at,`${oe.resultado} `)}),ze(w,()=>n(G),i=>c(G,i)),ye(Ce,()=>n(s),i=>c(s,i)),ye(ie,()=>n(l),i=>c(l,i)),L(e,K),Re()}Ve(["click"]);var sr=(e,t)=>t(),ir=()=>{},lr=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function cr(e,t){we(t,!0);const a=oe.aplicarSecuenciaPosiciones;let r=y(""),o=y(""),s=y(""),l=y(!1);Ca(()=>{v(n(r),n(o),n(l))});function v(ne,fe,F){if(fe.length==0)return;const V=[];{const ae=ne.split(`
`);for(const P of ae){if(P.length==0)continue;const U=Ye(P);if(U==null)continue;const J=be(U.content);if(ut(J)==null){alert(`Línea base sin \\pos copiada: '${P}'`),console.log(P);return}V.push(U)}}const X=[];{const ae=fe.split(`
`);for(const P of ae){if(P.length==0)continue;const U=Ye(P);if(U==null)continue;const J=be(U.content);if(ut(J)==null){alert(`Línea objetivo sin \\pos: '${P}'`),console.log(P);return}X.push(U)}}let K="";for(let ae=0;ae<X.length;ae++){const P=X[ae],U=be(P.content),J=ut(U);if(J==null){const T=Ee(P);alert(`Línea objetivo sin \\pos: '${T}'`),console.log(T);return}let z=J.x,le=J.y;F&&V.reverse();const ce=h(V),w=[];for(let T=0;T<V.length;T++){const B=ce[T][0],pe=ce[T][1],Fe=z+B,Ce=le+pe;z=Fe,le=Ce,yn(U,Fe,Ce),P.content=xe(U);const Te=V[T];P.start=Te.start,P.end=Te.end,w.push(structuredClone(P))}F&&(V.reverse(),w.reverse());for(const T of w)K+=Ee(T)+`
`}c(s,C(K))}function h(ne){const F=[[0,0]];for(let V=0;V<ne.length-1;V++){const X=ne[V],K=ne[V+1],ae=be(X.content),P=ut(ae);if(P==null)return alert(`Línea base sin \\pos: '${Ee(X)}'`),console.log(X),[];const U=be(K.content),J=ut(U);if(J==null)return alert(`Línea base sin \\pos: '${Ee(K)}'`),console.log(K),[];const z=J.x-P.x,le=J.y-P.y;F.push([z,le])}return F}async function _(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{c(r,n(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),c(r,n(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),c(o,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var m=lr();qe(ne=>{Xe.title=a});var E=f(m);E.textContent=a;var d=p(E,2),g=p(f(d),2),b=f(g);De(b),u(g),u(d);var O=p(d,2),N=f(O);Ie(N),it(),u(O);var S=p(O,2),$=f(S),M=f($,!0);u($);var k=p($,2),R=f(k);De(R),u(k),u(S);var W=p(S,2),H=f(W),A=f(H),Q=p(A);Q.__click=[sr,_],Q.__keydown=[ir],u(H);var Y=p(H,2),G=f(Y);De(G),u(Y),u(W),u(m),se(()=>{q(M,oe.subtitulos),q(A,`${oe.resultado} `)}),ye(b,()=>n(r),ne=>c(r,ne)),ze(N,()=>n(l),ne=>c(l,ne)),ye(R,()=>n(o),ne=>c(o,ne)),ye(G,()=>n(s),ne=>c(s,ne)),L(e,m),Re()}Ve(["click","keydown"]);var ur=(e,t)=>t(),dr=()=>{},fr=ee('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vr(e,t){we(t,!0);const a=oe.dividirSilabas;let r=y(""),o=y(""),s=y("");function l(){if(n(o).length==0)return;const R=n(o).split(`
`);let W="";for(let H=0;H<R.length;H++){const A=R[H];if(A.length==0)continue;const Q=Ye(A);if(Q==null){console.error(`line ${H+1}: invalid line`);break}Cn(Q);const Y=Ee(Q);H>0&&(W+=`
`),W+=Y}c(s,C(W))}async function v(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}He(()=>{c(r,n(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),c(r,n(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),c(r,n(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`),c(o,C(n(r))),l()});var h=fr();qe(R=>{Xe.title=a});var _=f(h);_.textContent=a;var m=p(_,2),E=f(m),d=f(E);u(E);var g=p(E,2),b=f(g);De(b),b.__input=l,u(g),u(m);var O=p(m,2),N=f(O),S=f(N),$=p(S);$.__click=[ur,v],$.__keydown=[dr],u(N);var M=p(N,2),k=f(M);De(k),u(M),u(O),u(h),se(()=>{q(d,`${oe.subtitulos} (romaji)`),et(b,"placeholder",n(r)),q(S,`${oe.resultado} `)}),ye(b,()=>n(o),R=>c(o,R)),ye(k,()=>n(s),R=>c(s,R)),L(e,h),Re()}Ve(["input","click","keydown"]);var hr=ee('<p class="error svelte-tm085k"> </p>'),gr=ee("<button> </button>"),br=ee('<p class="preview"> <b> </b></p>'),pr=(e,t)=>t(),_r=()=>{},mr=ee('<section class="svelte-tm085k"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <!> <div class="mb-2"><label class="label mt-2" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function xr(e,t){we(t,!0);const a=oe.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let o=y(r),s=y(C([])),l=y(""),v=y(C([])),h=y(0),_=y("");function m(){const F=Ye(n(o));if(F==null)return;const V=be(F.content);Kt(V);const X=0;let K=n(v)[n(h)].index+1,ae=0;for(let B=0;B<=n(h);B++){const pe=n(v)[B];pe.centiseconds!=null&&(ae+=pe.centiseconds)}const P=zt(F.start),U=zt(F.end),J=V.slice(X,K);F.content=xe(J);const z=ae/100;F.end=It(P+z),c(l,C(Ee(F)));let le=!0,ce=0;for(;le;){const B=V[K+1];if((B==null?void 0:B.name)!="text"){le=!1;break}if(le=B.value.replaceAll(" ","").length===0,le&&(K+=2,ce++),ce>n(v).length)break}let w=0;for(let B=n(h)+1+ce;B<n(v).length;B++){const pe=n(v)[B];pe.centiseconds!=null&&(w+=pe.centiseconds)}const T=V.slice(K);F.end=It(U),F.start=It(U-w/100),F.content=xe(T),c(l,n(l)+(`
`+Ee(F))),c(s,C([xe(J.filter(B=>B.name=="text")),xe(T.filter(B=>B.name=="text"))]))}async function E(){await navigator.clipboard.writeText(n(l)),alert("¡Líneas copiadas al portapapeles!")}function d(){c(s,C([])),c(l,""),c(v,C([])),c(h,0),c(_,"");const F=Ye(n(o));if(F==null)return c(_,`Línea de karaoke inválida. Se esperaba el formato: <${r}>.`),[];const V=be(F.content);Kt(V);for(let X=0;X<V.length;X++){const K=V[X];if(K.name!="text")continue;n(v).push({index:X,text:K.value.replaceAll(" ",""),centiseconds:null});const ae=X-1;if(ae<0)continue;const P=V[ae];if(P.name!="effect")continue;const U=P.tags.find(z=>z.name===Ke.kLowerCase||z.name===Ke.kUpperCase||z.name===Ke.kf||z.name===Ke.ko);U==null||!(U.name===Ke.kLowerCase||U.name===Ke.kUpperCase||U.name===Ke.kf||U.name===Ke.ko)||(n(v)[n(v).length-1].centiseconds=U.value)}return c(h,C(Math.floor(n(v).length/2))),m(),n(v)}He(()=>{d()});var g=mr();qe(F=>{Xe.title=a});var b=f(g);b.textContent=a;var O=p(b,2),N=p(f(O),2),S=f(N);Ie(S),et(S,"placeholder",r),S.__input=d,u(N),u(O);var $=p(O,2);{var M=F=>{var V=hr(),X=f(V,!0);u(V),se(()=>q(X,n(_))),L(F,V)};re($,F=>{n(_)!=""&&F(M)})}var k=p($,2),R=p(f(k),2);ft(R,21,()=>n(v),dt,(F,V,X)=>{var K=Oe(),ae=me(K);{var P=U=>{var J=gr();J.__click=()=>{c(h,C(X)),m()};var z=f(J,!0);u(J),se(()=>{Qe(J,`button ${(X===n(h)?"is-link":"")??""}`),et(J,"title",`${n(V).text}: ${n(V).centiseconds} centésimas`),q(z,n(V).text)}),L(U,J)};re(ae,U=>{n(V).text.replaceAll(" ","").length>0&&U(P)})}L(F,K)}),u(R),u(k);var W=p(k,2),H=p(f(W),2);ft(H,17,()=>n(s),dt,(F,V,X)=>{var K=br(),ae=f(K);ae.nodeValue=`Línea ${X+1}: `;var P=p(ae),U=f(P,!0);u(P),u(K),se(()=>q(U,n(V))),L(F,K)}),u(W);var A=p(W,2),Q=f(A),Y=f(Q),G=p(Y);G.__click=[pr,E],G.__keydown=[_r],u(Q);var ne=p(Q,2),fe=f(ne);De(fe),u(ne),u(A),u(g),se(()=>q(Y,`${oe.resultado} `)),ye(S,()=>n(o),F=>c(o,F)),ye(fe,()=>n(l),F=>c(l,F)),L(e,g),Re()}Ve(["input","click","keydown"]);var Wt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Wt||(Wt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Jt||(Jt={}));var Qt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Qt||(Qt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=["user","model","function","system"];var ea;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(ea||(ea={}));var ta;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ta||(ta={}));var aa;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(aa||(aa={}));var na;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(na||(na={}));var mt;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(mt||(mt={}));var ra;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(ra||(ra={}));var oa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(oa||(oa={}));var sa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(sa||(sa={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class lt extends Le{constructor(t,a){super(t),this.response=a}}class Aa extends Le{constructor(t,a,r,o){super(t),this.status=a,this.statusText=r,this.errorDetails=o}}class Ze extends Le{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="https://generativelanguage.googleapis.com",yr="v1beta",Cr="0.21.0",Sr="genai-js";var st;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(st||(st={}));class kr{constructor(t,a,r,o,s){this.model=t,this.task=a,this.apiKey=r,this.stream=o,this.requestOptions=s}toString(){var t,a;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||yr;let s=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||Er}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function wr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Sr}/${Cr}`),t.join(" ")}async function Rr(e){var t;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",wr(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ze(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,s]of r.entries()){if(o==="x-goog-api-key")throw new Ze(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ze(`Header name ${o} can only be set using the apiClient field`);a.append(o,s)}}return a}async function Tr(e,t,a,r,o,s){const l=new kr(e,t,a,r,s);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},Lr(s)),{method:"POST",headers:await Rr(l),body:o})}}async function yt(e,t,a,r,o,s={},l=fetch){const{url:v,fetchOptions:h}=await Tr(e,t,a,r,o,s);return Ar(v,h,l)}async function Ar(e,t,a=fetch){let r;try{r=await a(e,t)}catch(o){Or(o,e)}return r.ok||await Ir(r,e),r}function Or(e,t){let a=e;throw e instanceof Aa||e instanceof Ze||(a=new Le(`Error fetching from ${t.toString()}: ${e.message}`),a.stack=e.stack),a}async function Ir(e,t){let a="",r;try{const o=await e.json();a=o.error.message,o.error.details&&(a+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Aa(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,r)}function Lr(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const a=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>a.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{a.abort()}),t.signal=a.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return Nr(e)}else if(e.promptFeedback)throw new lt(`Text not available. ${Je(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ia(e)[0]}else if(e.promptFeedback)throw new lt(`Function call not available. ${Je(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ct(e.candidates[0]))throw new lt(`${Je(e)}`,e);return ia(e)}else if(e.promptFeedback)throw new lt(`Function call not available. ${Je(e)}`,e)},e}function Nr(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.text&&s.push(l.text),l.executableCode&&s.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&s.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function ia(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.functionCall&&s.push(l.functionCall);if(s.length>0)return s}const Dr=[mt.RECITATION,mt.SAFETY,mt.LANGUAGE];function Ct(e){return!!e.finishReason&&Dr.includes(e.finishReason)}function Je(e){var t,a,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((a=e.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const s=e.candidates[0];Ct(s)&&(o+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(o+=`: ${s.finishMessage}`))}return o}function xt(e){return this instanceof xt?(this.v=e,this):new xt(e)}function Fr(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a.apply(e,t||[]),o,s=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(d){r[d]&&(o[d]=function(g){return new Promise(function(b,O){s.push([d,g,b,O])>1||v(d,g)})})}function v(d,g){try{h(r[d](g))}catch(b){E(s[0][3],b)}}function h(d){d.value instanceof xt?Promise.resolve(d.value.v).then(_,m):E(s[0][2],d)}function _(d){v("next",d)}function m(d){v("throw",d)}function E(d,g){d(g),s.shift(),s.length&&v(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Vr(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=Hr(t),[r,o]=a.tee();return{stream:jr(r),response:Mr(o)}}async function Mr(e){const t=[],a=e.getReader();for(;;){const{done:r,value:o}=await a.read();if(r)return Ht($r(t));t.push(o)}}function jr(e){return Fr(this,arguments,function*(){const a=e.getReader();for(;;){const{value:r,done:o}=yield xt(a.read());if(o)break;yield yield xt(Ht(r))}})}function Hr(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return s();function s(){return t.read().then(({value:l,done:v})=>{if(v){if(o.trim()){r.error(new Le("Failed to parse stream"));return}r.close();return}o+=l;let h=o.match(la),_;for(;h;){try{_=JSON.parse(h[1])}catch{r.error(new Le(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(_),o=o.substring(h[0].length),h=o.match(la)}return s()})}}})}function $r(e){const t=e[e.length-1],a={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const o of r.candidates){const s=o.index;if(a.candidates||(a.candidates=[]),a.candidates[s]||(a.candidates[s]={index:o.index}),a.candidates[s].citationMetadata=o.citationMetadata,a.candidates[s].groundingMetadata=o.groundingMetadata,a.candidates[s].finishReason=o.finishReason,a.candidates[s].finishMessage=o.finishMessage,a.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){a.candidates[s].content||(a.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const v of o.content.parts)v.text&&(l.text=v.text),v.functionCall&&(l.functionCall=v.functionCall),v.executableCode&&(l.executableCode=v.executableCode),v.codeExecutionResult&&(l.codeExecutionResult=v.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),a.candidates[s].content.parts.push(l)}}r.usageMetadata&&(a.usageMetadata=r.usageMetadata)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(e,t,a,r){const o=await yt(t,st.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),r);return Vr(o)}async function Ia(e,t,a,r){const s=await(await yt(t,st.GENERATE_CONTENT,e,!1,JSON.stringify(a),r)).json();return{response:Ht(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Et(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const a of e)typeof a=="string"?t.push({text:a}):t.push(a);return Gr(t)}function Gr(e){const t={role:"user",parts:[]},a={role:"function",parts:[]};let r=!1,o=!1;for(const s of e)"functionResponse"in s?(a.parts.push(s),o=!0):(t.parts.push(s),r=!0);if(r&&o)throw new Le("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Le("No content is provided for sending chat message.");return r?t:a}function Pr(e,t){var a;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(a=t==null?void 0:t.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new Ze("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const s=Et(e);r.contents=[s]}return{generateContentRequest:r}}function ca(e){let t;return e.contents?t=e:t={contents:[Et(e)]},e.systemInstruction&&(t.systemInstruction=La(e.systemInstruction)),t}function Br(e){return typeof e=="string"||Array.isArray(e)?{content:Et(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ur={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Kr(e){let t=!1;for(const a of e){const{role:r,parts:o}=a;if(!t&&r!=="user")throw new Le(`First content should be with role 'user', got ${r}`);if(!Zt.includes(r))throw new Le(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Zt)}`);if(!Array.isArray(o))throw new Le("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Le("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const v of o)for(const h of ua)h in v&&(s[h]+=1);const l=Ur[r];for(const v of ua)if(!l.includes(v)&&s[v]>0)throw new Le(`Content with role '${r}' can't contain '${v}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="SILENT_ERROR";class zr{constructor(t,a,r,o={}){this.model=a,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(Kr(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,a={}){var r,o,s,l,v,h;await this._sendPromise;const _=Et(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,_]},E=Object.assign(Object.assign({},this._requestOptions),a);let d;return this._sendPromise=this._sendPromise.then(()=>Ia(this._apiKey,this.model,m,E)).then(g=>{var b;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(_);const O=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(O)}else{const O=Je(g.response);O&&console.warn(`sendMessage() was unsuccessful. ${O}. Inspect response object for details.`)}d=g}),await this._sendPromise,d}async sendMessageStream(t,a={}){var r,o,s,l,v,h;await this._sendPromise;const _=Et(t),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(v=this.params)===null||v===void 0?void 0:v.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,_]},E=Object.assign(Object.assign({},this._requestOptions),a),d=Oa(this._apiKey,this.model,m,E);return this._sendPromise=this._sendPromise.then(()=>d).catch(g=>{throw new Error(da)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(_);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Je(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==da&&console.error(g)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(e,t,a,r){return(await yt(t,st.COUNT_TOKENS,e,!1,JSON.stringify(a),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(e,t,a,r){return(await yt(t,st.EMBED_CONTENT,e,!1,JSON.stringify(a),r)).json()}async function Xr(e,t,a,r){const o=a.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await yt(t,st.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,a,r={}){this.apiKey=t,this._requestOptions=r,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=La(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(t,a={}){var r;const o=ca(t),s=Object.assign(Object.assign({},this._requestOptions),a);return Ia(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}async generateContentStream(t,a={}){var r;const o=ca(t),s=Object.assign(Object.assign({},this._requestOptions),a);return Oa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}startChat(t){var a;return new zr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},t),this._requestOptions)}async countTokens(t,a={}){const r=Pr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),a);return Yr(this.apiKey,this.model,r,o)}async embedContent(t,a={}){const r=Br(t),o=Object.assign(Object.assign({},this._requestOptions),a);return qr(this.apiKey,this.model,r,o)}async batchEmbedContents(t,a={}){const r=Object.assign(Object.assign({},this._requestOptions),a);return Xr(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.apiKey=t}getGenerativeModel(t,a){if(!t.model)throw new Le("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fa(this.apiKey,t,a)}getGenerativeModelFromCachedContent(t,a,r){if(!t.name)throw new Ze("Cached content must contain a `name` field.");if(!t.model)throw new Ze("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const l of o)if(a!=null&&a[l]&&t[l]&&(a==null?void 0:a[l])!==t[l]){if(l==="model"){const v=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(v===h)continue}throw new Ze(`Different value for "${l}" specified in modelParams (${a[l]}) and cachedContent (${t[l]})`)}const s=Object.assign(Object.assign({},a),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new fa(this.apiKey,s,r)}}function Jr(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const Na=["automático","carteles","diálogos","karaokes"],Qr=Ne.enum(Na);async function Zr(e,t,a){const r={errors:[],warnings:[]};if(e==="carteles")return r;const o=t.scriptInfo.properties.get("WrapStyle")??"",s="0";o!==s&&r.errors.push({location:"Script info, wrap style",error:`Se esperaba "${s}", pero se encontró "${o}"`,text:o,ignoreRule:""});const l=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",v="yes";l!==v&&r.errors.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${v}", pero se encontró "${l}"`,text:l,ignoreRule:""});const h="Español";let _=0,m="";for(let E=0;E<t.events.lines.length;E++){const d=t.events.lines[E],g=E+1;if(e==="automático"&&d.effect.includes("template syl")){console.info(`template syl detectado en línea ${g}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&d.type==Yt||d.content===""||e==="karaokes"&&d.style!==h||e==="karaokes"&&d.type!==Yt||e==="karaokes"&&d.effect!=="karaoke")continue;if(e==="karaokes"&&d.effect==="fx")break;const b=d.effect.split(" ").filter(S=>S.startsWith("ignorar-"));if(b.includes("ignorar-linea"))continue;a.validateLineStyleExists&&!b.includes("ignorar-estilo")&&!no(t,d.style)&&r.errors.push({location:`Línea ${g}`,error:"Estilo no encontrado",text:d.style,ignoreRule:"ignorar-estilo"});const O=be(d.content);let N=xe(O.filter(S=>S.name==="text"));if(a.geminiEnabled&&e==="diálogos"){const S=lo(N);m+=`
Línea ${g}: ${S}`}if(a.validateTextStart&&!b.includes("ignorar-inicio")){const S=eo(N);S!=null&&r.errors.push({location:`Línea ${g}`,error:S,text:d.content,ignoreRule:"ignorar-inicio"})}if(a.validateTextSpaces&&!b.includes("ignorar-espacios")){const S=ro(N);S!=null&&r.errors.push({location:`Línea ${g}`,error:S,text:d.content,ignoreRule:"ignorar-espacios"})}if(a.validateTextEnd&&!b.includes("ignorar-fin")){const S=to(N);S!=null&&r.errors.push({location:`Línea ${g}`,error:S,text:d.content,ignoreRule:"ignorar-fin"})}if(a.validateTextPunctuation&&!b.includes("ignorar-puntuacion")){const S=ao(N);S!=null&&r.errors.push({location:`Línea ${g}`,error:S,text:d.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&_++}if(a.geminiEnabled&&a.geminiApiKey!==""&&e==="diálogos"){const E=await io(m,a.geminiApiKey);for(const d of E.errores){let g=t.events.lines[d.numeroLinea-1];g==null&&(g=Sn());let b=d.mensajeError;b.endsWith(".")&&b.substring(0,b.length-2),r.warnings.push({location:`Línea ${d.numeroLinea}`,error:b,text:g.content,ignoreRule:"ignorar-llm"})}}return e==="karaokes"&&_===0&&r.errors.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${h}"`,text:"",ignoreRule:""}),r}function eo(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function to(e){e=Jr(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(a=>e.endsWith(a))?null:`No tiene un fin de línea válido: ${t.map(a=>`"${a}"`).join(", ")}`}function ao(e){for(let t=0;t<e.length;t++){const a=[",",";","."],r=e[t];if(!a.includes(r))continue;if(t+1>=e.length)break;let o=e[t+1];if(o==="\\"&&e[t+2]==="N"&&(o="\\N"),r==="."&&o=="."||r==="."&&e[t-1]==="."&&e[t-2]==="."||(r==="."||r===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(o))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function no(e,t){return e.styles.styles.some(a=>t===a.name)}function ro(e){return e.includes("  ")?"hay dos espacios seguidos":null}function oo(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}const so=Ne.object({errores:Ne.object({numeroLinea:Ne.number().default(0),mensajeError:Ne.string().default("")}).array()});async function io(e,t){try{const s=new Wr(t).getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:`
            Valida todos los textos que recibas y retorna un JSON con la estructura:
            {
                "errores": [
                    "numeroLinea": 1,
                    "mensajeError": "descripción del error y consejor de cómo corregirlo"
                ]
            }
            Considera 'N' como un espacio ' '.
            Ignora los espacios consecutivos, no son errores.
            Considera como errores sólo las faltas ortográficas graves.
            Frases vulgares, de uso poco común o muletillas están bien.
            Retorna sólo el JSON como texto plano.
        `}),l={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"text/plain"};let _=(await s.startChat({generationConfig:l,history:[]}).sendMessage(e)).response.text();return _=_.replaceAll("```json",""),_=_.replaceAll("```",""),so.parse(JSON.parse(_))}catch(a){console.error("error al validar subs con gemini",a);let r=`${a}`;return r.includes("API key not valid")&&(r="API KEY inválida."),{errores:[{numeroLinea:0,mensajeError:`Error al validar subtítulos con Google Gemini: ${r}`}]}}}function lo(e){let t="";for(let a=0;a<e.length;a++){const r=e[a],o=e[a+1]??"",s=e[a+2]??"",l=e[a-1]??"";if(r==="\\"&&o==="N"){if(a++,s===" "||l===" ")continue;t+=" ";continue}t+=r}return t}const St=Ne.object({userSubsMode:Qr.default("automático"),geminiEnabled:Ne.boolean().default(!1),geminiApiKey:Ne.string().default(""),validateLineStyleExists:Ne.boolean().default(!0),validateTextStart:Ne.boolean().default(!0),validateTextEnd:Ne.boolean().default(!0),validateTextSpaces:Ne.boolean().default(!0),validateTextPunctuation:Ne.boolean().default(!0)}),Da="asu.validarDialogos.options";function co(e){localStorage.setItem(Da,JSON.stringify(e))}function uo(){try{const e=localStorage.getItem(Da)??"";return St.parse(JSON.parse(e))}catch(e){return console.error("error al cargar opciones de validar diálogos",e),St.parse({})}}async function fo(e,t,a){t(!t()),await a()}var vo=ee('<div class="area svelte-on5caf"><textarea readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function ho(e,t){we(t,!0);let a=je(t,"rawMode",7),r=y(C(t.text)),o=y(1),s=y(void 0);async function l(){v(),await Sa(),h()}function v(){if(a()){c(r,C(t.text));return}const b=be(t.text).filter(N=>N.name==="text");let O=xe(b);O=O.replaceAll("\\N",""),c(r,C(O))}function h(){c(o,C(_()))}function _(){return n(s)==null?1:Math.ceil(n(s).scrollHeight/n(s).clientHeight)}He(async()=>{await l()});var m=vo(),E=f(m);De(E),ke(E,b=>c(s,b),()=>n(s));var d=p(E,2);d.__click=[fo,a,l];var g=f(d,!0);u(d),u(m),se(()=>{Qe(E,`textarea ${(t.kind==="error"?"is-danger":"is-warning")??""} svelte-on5caf`),kn(E,n(r)),et(E,"rows",n(o)),q(g,a()?"Ocultar etiquetas":"Ver etiquetas")}),L(e,m),Re()}Ve(["click"]);var go=ee('<p class="ignore-rule m-1">Para ignorar, colocar <b> </b> en campo de efecto.</p>'),bo=ee('<span><p class="m-1"><b> </b> </p> <!> <!></span>');function va(e,t){we(t,!0);var a=bo(),r=f(a),o=f(r),s=f(o,!0);u(o);var l=p(o);u(r);var v=p(r,2);{var h=E=>{ho(E,{get kind(){return t.kind},get text(){return t.subtitleError.text},rawMode:!1})};re(v,E=>{t.subtitleError.text!=""&&E(h)})}var _=p(v,2);{var m=E=>{var d=go(),g=p(f(d)),b=f(g,!0);u(g),it(),u(d),se(()=>q(b,t.subtitleError.ignoreRule)),L(E,d)};re(_,E=>{t.subtitleError.ignoreRule!=""&&E(m)})}u(a),se(E=>{Qe(a,`file-error ${(t.kind==="error"?"has-text-danger":"has-text-warning")??""}`),q(s,t.subtitleError.location),q(l,`:
        ${E??""}`)},[()=>t.subtitleError.error+(t.subtitleError.error.endsWith(".")?"":".")]),L(e,a),Re()}var po=(e,t)=>t(),_o=(e,t)=>t(),mo=(e,t)=>t.onAccept&&t.onAccept(),xo=ee('<button class="button is-success svelte-1eoe9jy"> </button>'),Eo=ee('<div class="modal"><div class="modal-background"></div> <div class="modal-card"><header class="modal-card-head"><p class="modal-card-title"> </p> <button class="delete svelte-1eoe9jy" aria-label="close"></button></header> <section class="modal-card-body"><!></section> <footer class="modal-card-foot"><button class="button svelte-1eoe9jy"> </button> <!></footer></div></div>');function yo(e,t){we(t,!0);let a=je(t,"cancelButtonText",3,"Cancelar"),r=je(t,"acceptButtonText",3,"Aceptar"),o=je(t,"acceptButtonDisabled",3,!1);const s="is-active";let l=y(void 0);function v(){n(l)!=null&&(n(l).classList.add(s),t.onOpen!=null&&t.onOpen())}function h(){n(l)!=null&&(n(l).classList.remove(s),t.onClose!=null&&t.onClose())}var _=Eo(),m=p(f(_),2),E=f(m),d=f(E),g=f(d,!0);u(d);var b=p(d,2);b.__click=[po,h],u(E);var O=p(E,2),N=f(O);{var S=H=>{var A=Oe(),Q=me(A);Ln(Q,()=>t.children),L(H,A)};re(N,H=>{t.children!=null&&H(S)})}u(O);var $=p(O,2),M=f($);M.__click=[_o,h];var k=f(M,!0);u(M);var R=p(M,2);{var W=H=>{var A=xo();A.__click=[mo,t];var Q=f(A,!0);u(A),se(()=>{A.disabled=o(),q(Q,r())}),L(H,A)};re(R,H=>{t.onAccept!=null&&H(W)})}return u($),u(m),u(_),ke(_,H=>c(l,H),()=>n(l)),se(()=>{q(g,t.title),q(k,a())}),L(e,_),Re({open:v,close:h})}Ve(["click"]);function Co(e,t){confirm("¿Reiniciar configuración?")&&t(St.parse({}))}var So=ee("<option> </option>"),ko=ee(`<div class="field"><label class="label" for="">API KEY</label> <div class="control"><input class="input" type="password" placeholder="Ingresa tu API KEY"></div></div> <p><a href="https://aistudio.google.com/apikey" target="_blank">Clic aquí para obtener una API KEY.</a></p> <p>Las validaciones de Google Gemini serán siempre advertencias
                debido a su tendencia a tener falsos positivos.</p>`,1),wo=ee('<button class="button is-danger is-outlined is-fullwidth mb-2">Reiniciar configuración</button> <div class="select is-fullwidth mb-2"><select></select></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label> <!></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div> <div class="field"><label class="checkbox"><input type="checkbox"> </label></div>',1);function Ro(e,t){we(t,!0);let a=je(t,"options",15),r=y(void 0);function o(){var l;(l=n(r))==null||l.open()}function s(){var l;(l=n(r))==null||l.close()}return ke(yo(e,{title:"Configuración",cancelButtonText:"Volver",onClose:()=>co(a()),children:(l,v)=>{var h=wo(),_=me(h);_.__click=[Co,a];var m=p(_,2),E=f(m);ft(E,21,()=>Na,dt,(z,le)=>{var ce=So(),w={},T=f(ce);u(ce),se(()=>{w!==(w=n(le))&&(ce.value=(ce.__value=n(le))==null?"":n(le)),q(T,`Modo ${n(le)??""}`)}),L(z,ce)}),u(E),u(m);var d=p(m,2),g=f(d),b=f(g);Ie(b);var O=p(b);u(g);var N=p(g,2);{var S=z=>{var le=ko(),ce=me(le),w=p(f(ce),2),T=f(w);Ie(T),u(w),u(ce),it(4),ye(T,()=>a().geminiApiKey,B=>a(a().geminiApiKey=B,!0)),L(z,le)};re(N,z=>{a().geminiEnabled&&z(S)})}u(d);var $=p(d,2),M=f($),k=f(M);Ie(k);var R=p(k);u(M),u($);var W=p($,2),H=f(W),A=f(H);Ie(A);var Q=p(A);u(H),u(W);var Y=p(W,2),G=f(Y),ne=f(G);Ie(ne);var fe=p(ne);u(G),u(Y);var F=p(Y,2),V=f(F),X=f(V);Ie(X);var K=p(X);u(V),u(F);var ae=p(F,2),P=f(ae),U=f(P);Ie(U);var J=p(U);u(P),u(ae),se(()=>{q(O,` ${oe.validateWithGemini}`),q(R,` ${oe.validateLineStyleExists}`),q(Q,` ${oe.validateTextStart}`),q(fe,` ${oe.validateTextEnd}`),q(K,` ${oe.validateTextSpaces}`),q(J,` ${oe.validateTextPunctuation}`)}),Vn(E,()=>a().userSubsMode,z=>a(a().userSubsMode=z,!0)),ze(b,()=>a().geminiEnabled,z=>a(a().geminiEnabled=z,!0)),ze(k,()=>a().validateLineStyleExists,z=>a(a().validateLineStyleExists=z,!0)),ze(A,()=>a().validateTextStart,z=>a(a().validateTextStart=z,!0)),ze(ne,()=>a().validateTextEnd,z=>a(a().validateTextEnd=z,!0)),ze(X,()=>a().validateTextSpaces,z=>a(a().validateTextSpaces=z,!0)),ze(U,()=>a().validateTextPunctuation,z=>a(a().validateTextPunctuation=z,!0)),L(l,h)},$$slots:{default:!0}}),l=>c(r,C(l)),()=>n(r)),Re({open:o,close:s})}Ve(["click"]);async function To(e,t,a,r,o,s,l,v,h,_){var m,E;try{if(n(t).geminiEnabled&&n(t).geminiApiKey===""){alert("Ingrese el API KEY de Google Gemini."),(m=n(a))==null||m.open();return}if(n(t).geminiEnabled&&!confirm("Google Gemini habilitado. ¿Continuar?"))return;const d=[...((E=n(r))==null?void 0:E.files)??[]];c(o,0),c(s,0),c(l,C([])),c(v,!0);for(const g of d){const b=await g.text(),O=wn(b);if(O==null){console.error("archivo inválido",g.name);continue}c(h,C(oo(g.name,n(t).userSubsMode)));const N=await Zr(n(h),O,n(t));c(o,n(o)+N.errors.length),c(s,n(s)+N.warnings.length),n(l).push({subsType:n(h),fileName:g.name,errors:N.errors,warnings:N.warnings,errorsVisible:!1,warningsVisible:!1})}}catch(d){console.error("error al procesar archivos",d)}finally{n(r)!=null&&(n(r).value=""),c(v,!1),await _()}}var Ao=(e,t)=>{var a;return(a=n(t))==null?void 0:a.open()},Oo=ee('<span class="tag is-dark"> </span>'),Io=ee('<span class="tag is-dark"> </span>'),Lo=ee('<span class="tag is-dark"> </span>'),No=ee('<span class="tag is-dark"> </span>'),Do=ee('<span class="tag is-dark"> </span>'),Fo=ee('<span class="tag is-dark"> </span>'),Vo=ee('<div class="result-info svelte-1jx7rzy"><div class="counter svelte-1jx7rzy">PROCESANDO</div> <div class="image-container svelte-1jx7rzy"><img class="result-image svelte-1jx7rzy" src="img/nagato.gif" alt="Suzumiya Haruhi" title="Suzumiya Haruhi"></div> <div class="counter svelte-1jx7rzy">SUBTÍTULOS</div></div>'),Mo=ee('<img class="result-image svelte-1jx7rzy" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),jo=ee('<img class="result-image svelte-1jx7rzy" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),Ho=ee(`<img class="result-image svelte-1jx7rzy" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),$o=ee('<img class="result-image svelte-1jx7rzy" src="img/new-game.gif" alt="New Game!" title="New Game!">'),Go=ee("<div> <!></div>"),Po=ee("<div> </div>"),Bo=(e,t)=>n(t).errorsVisible=!n(t).errorsVisible,Uo=ee('<div class="file-errors svelte-1jx7rzy"></div>'),Ko=ee('<div class="errors-list svelte-1jx7rzy"><button class="button is-danger is-outlined svelte-1jx7rzy"> </button> <!></div>'),zo=(e,t)=>n(t).warningsVisible=!n(t).warningsVisible,Yo=ee('<div class="file-errors svelte-1jx7rzy"></div>'),qo=ee('<div class="warnings-list svelte-1jx7rzy"><button class="button is-warning is-outlined svelte-1jx7rzy"> </button> <!></div>'),Xo=ee('<div class="result svelte-1jx7rzy"><span> </span> <!> <!> <!></div>'),Wo=ee('<div class="result-info svelte-1jx7rzy"><div> </div> <div class="image-container svelte-1jx7rzy"><!></div> <div> </div></div> <!>',1),Jo=ee('<section class="svelte-1jx7rzy"><h1></h1> <div class="options mb-4 svelte-1jx7rzy"><button class="button is-link mb-2 btn-settings is-fullwidth svelte-1jx7rzy">Configuración</button> <div class="options-info svelte-1jx7rzy"><span class="tag is-dark"> </span> <!> <!> <!> <!> <!> <!></div></div> <div class="file is-fullwidth mb-2 svelte-1jx7rzy"><label class="file-label"><input class="file-input" type="file" accept=".ass" multiple> <span class="file-cta svelte-1jx7rzy"><span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Cargar subtítulos</span></span></label></div> <!> <!></section> <!>',1);function Qo(e,t){we(t,!0);const a=oe.validarDialogos;let r=y("diálogos"),o=y(void 0),s=y(0),l=y(0),v=y(C([])),h=y(!1),_=y(C(St.parse({}))),m=y(void 0);function E(w){return w.errors.length>0?"has-text-danger":w.warnings.length>0?"has-text-warning":"has-text-success"}async function d(){await Sa();const w=document.querySelector(".result-info");w!=null&&w.scrollIntoView({behavior:"smooth"})}He(()=>{c(_,C(uo()))});var g=Jo();qe(w=>{Xe.title=a});var b=me(g),O=f(b);O.textContent=a;var N=p(O,2),S=f(N);S.__click=[Ao,m];var $=p(S,2),M=f($),k=f(M);u(M);var R=p(M,2);{var W=w=>{var T=Oo(),B=f(T,!0);u(T),se(()=>q(B,oe.validateWithGemini)),L(w,T)};re(R,w=>{n(_).geminiEnabled&&w(W)})}var H=p(R,2);{var A=w=>{var T=Io(),B=f(T,!0);u(T),se(()=>q(B,oe.validateLineStyleExists)),L(w,T)};re(H,w=>{n(_).validateLineStyleExists&&w(A)})}var Q=p(H,2);{var Y=w=>{var T=Lo(),B=f(T,!0);u(T),se(()=>q(B,oe.validateTextStart)),L(w,T)};re(Q,w=>{n(_).validateTextStart&&w(Y)})}var G=p(Q,2);{var ne=w=>{var T=No(),B=f(T,!0);u(T),se(()=>q(B,oe.validateTextEnd)),L(w,T)};re(G,w=>{n(_).validateTextEnd&&w(ne)})}var fe=p(G,2);{var F=w=>{var T=Do(),B=f(T,!0);u(T),se(()=>q(B,oe.validateTextSpaces)),L(w,T)};re(fe,w=>{n(_).validateTextSpaces&&w(F)})}var V=p(fe,2);{var X=w=>{var T=Fo(),B=f(T,!0);u(T),se(()=>q(B,oe.validateTextPunctuation)),L(w,T)};re(V,w=>{n(_).validateTextPunctuation&&w(X)})}u($),u(N);var K=p(N,2),ae=f(K),P=f(ae);P.__change=[To,_,m,o,s,l,v,h,r,d],ke(P,w=>c(o,w),()=>n(o)),it(2),u(ae),u(K);var U=p(K,2);{var J=w=>{var T=Vo();L(w,T)};re(U,w=>{n(h)&&w(J)})}var z=p(U,2);{var le=w=>{var T=Wo(),B=me(T),pe=f(B),Fe=f(pe);u(pe);var Ce=p(pe,2),Te=f(Ce);{var vt=Ae=>{var ie=Mo();L(Ae,ie)},tt=Ae=>{var ie=Oe(),i=me(ie);{var he=I=>{var j=jo();L(I,j)},D=I=>{var j=Oe(),te=me(j);{var x=ue=>{var ve=Ho();L(ue,ve)},Z=ue=>{var ve=Oe(),_e=me(ve);{var de=ge=>{var Se=$o();L(ge,Se)};re(_e,ge=>{n(l)>0&&ge(de)},!0)}L(ue,ve)};re(te,ue=>{n(s)>0?ue(x):ue(Z,!1)},!0)}L(I,j)};re(i,I=>{n(s)>10?I(he):I(D,!1)},!0)}L(Ae,ie)};re(Te,Ae=>{n(s)===0&&n(l)===0?Ae(vt):Ae(tt,!1)})}u(Ce);var Me=p(Ce,2),at=f(Me);u(Me),u(B);var ht=p(B,2);ft(ht,17,()=>n(v),dt,(Ae,ie,i)=>{var he=Xo(),D=f(he),I=f(D,!0);u(D);var j=p(D,2);{var te=de=>{var ge=Go(),Se=f(ge),nt=p(Se);{var gt=rt=>{var Ue=ha("Ignorado.");L(rt,Ue)};re(nt,rt=>{n(ie).subsType==="carteles"&&rt(gt)})}u(ge),se(()=>{Qe(ge,`has-text-success text-${n(ie).subsType??""} svelte-1jx7rzy`),q(Se,`¡Todo en orden! Detectado como ${n(ie).subsType??""}. `)}),L(de,ge)},x=de=>{var ge=Po(),Se=f(ge);u(ge),se(nt=>{Qe(ge,Dn(nt),"svelte-1jx7rzy"),q(Se,`Detectado como ${n(ie).subsType??""}.`)},[()=>E(n(ie))]),L(de,ge)};re(j,de=>{n(ie).errors.length==0&&n(ie).warnings.length==0?de(te):de(x,!1)})}var Z=p(j,2);{var ue=de=>{var ge=Ko(),Se=f(ge);Se.__click=[Bo,ie];var nt=f(Se);u(Se);var gt=p(Se,2);{var rt=Ue=>{var ot=Uo();ft(ot,21,()=>n(ie).errors,dt,(kt,wt)=>{va(kt,{kind:"error",get subtitleError(){return n(wt)}})}),u(ot),L(Ue,ot)};re(gt,Ue=>{n(ie).errorsVisible&&Ue(rt)})}u(ge),se(()=>q(nt,`${(n(ie).errorsVisible?"Ocultar errores":"Ver errores")??""}: ${n(ie).errors.length??""}`)),L(de,ge)};re(Z,de=>{n(ie).errors.length>0&&de(ue)})}var ve=p(Z,2);{var _e=de=>{var ge=qo(),Se=f(ge);Se.__click=[zo,ie];var nt=f(Se);u(Se);var gt=p(Se,2);{var rt=Ue=>{var ot=Yo();ft(ot,21,()=>n(ie).warnings,dt,(kt,wt)=>{va(kt,{kind:"warning",get subtitleError(){return n(wt)}})}),u(ot),L(Ue,ot)};re(gt,Ue=>{n(ie).warningsVisible&&Ue(rt)})}u(ge),se(()=>q(nt,`${(n(ie).warningsVisible?"Ocultar advertencias":"Ver advertencias")??""}: ${n(ie).warnings.length??""}`)),L(de,ge)};re(ve,de=>{n(ie).warnings.length>0&&de(_e)})}u(he),se(de=>{Qe(D,`name ${de??""} text-${n(ie).subsType??""} svelte-1jx7rzy`),q(I,n(ie).fileName)},[()=>E(n(ie))]),L(Ae,he)}),se(()=>{Qe(pe,`counter ${(n(s)==0?"has-text-success":"has-text-danger")??""} svelte-1jx7rzy`),q(Fe,`ERRORES: ${n(s)??""}`),Qe(Me,`counter ${(n(l)==0?"has-text-success":"has-text-warning")??""} svelte-1jx7rzy`),q(at,`ADVERTENCIAS: ${n(l)??""}`)}),L(w,T)};re(z,w=>{!n(h)&&n(v).length>0&&w(le)})}u(b);var ce=p(b,2);ke(Ro(ce,{get options(){return n(_)},set options(w){c(_,C(w))}}),w=>c(m,C(w)),()=>n(m)),se(()=>{q(k,`Modo ${n(_).userSubsMode??""}`),P.disabled=n(h)}),L(e,g),Re()}Ve(["click","change"]);function Zo(e,t){we(t,!0);let a=y("");He(()=>{qt.subscribe(m=>{m!=null&&c(a,C(m))});const h=new URLSearchParams(location.search).get("pagina")??"",_=Rn(h)?h:"inicio";qt.set(_)});var r=Oe(),o=me(r);{var s=v=>{Yn(v)},l=v=>{var h=Oe(),_=me(h);{var m=d=>{Pn(d,{})},E=d=>{var g=Oe(),b=me(g);{var O=S=>{cr(S,{})},N=S=>{var $=Oe(),M=me($);{var k=W=>{ar(W,{})},R=W=>{var H=Oe(),A=me(H);{var Q=G=>{or(G,{})},Y=G=>{var ne=Oe(),fe=me(ne);{var F=X=>{Qo(X,{})},V=X=>{var K=Oe(),ae=me(K);{var P=J=>{xr(J,{})},U=J=>{var z=Oe(),le=me(z);{var ce=T=>{vr(T,{})},w=T=>{var B=Oe(),pe=me(B);{var Fe=Ce=>{Kn(Ce,{})};re(pe,Ce=>{n(a)=="acercaDe"&&Ce(Fe)},!0)}L(T,B)};re(le,T=>{n(a)=="karaokes.dividirSilabas"?T(ce):T(w,!1)},!0)}L(J,z)};re(ae,J=>{n(a)=="karaokes.dividirKaraoke"?J(P):J(U,!1)},!0)}L(X,K)};re(fe,X=>{n(a)=="dialogos.validarDialogos"?X(F):X(V,!1)},!0)}L(G,ne)};re(A,G=>{n(a)=="carteles.aplicarColor"?G(Q):G(Y,!1)},!0)}L(W,H)};re(M,W=>{n(a)=="carteles.aplicarAlpha"?W(k):W(R,!1)},!0)}L(S,$)};re(b,S=>{n(a)=="carteles.aplicarSecuenciaPosiciones"?S(O):S(N,!1)},!0)}L(d,g)};re(_,d=>{n(a)=="carteles.copiarMovimiento"?d(m):d(E,!1)},!0)}L(v,h)};re(o,v=>{n(a)=="inicio"?v(s):v(l,!1)})}L(e,r),Re()}var es=ee('<section class="svelte-70scd4"><!></section>');function ls(e){var t=es(),a=f(t);Zo(a,{}),u(t),L(e,t)}export{ls as component,is as universal};
