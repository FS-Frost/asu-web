import{d as Ue,e as Ke,a as le,t as be,s as ce,b as ln,c as Be}from"../chunks/CF_PhKuc.js";import"../chunks/CEJQm8eT.js";import{ah as Ia,_ as Va,ai as sn,p as $a,H as je,I as un,G as cn,g as l,K as dn,L as Pa,M as ma,N as xa,R as la,ar as fn,O as Xa,P as Wa,Q as vn,aw as ya,au as Ya,ax as Ha,ay as pn,a8 as gn,az as bn,aA as hn,a7 as _n,al as mn,a4 as xn,v as yn,y as kn,aB as La,aC as Fa,a5 as An,j as Ma,aD as qa,aE as Nn,aF as En,ak as $n,aG as Sn,b as Ja,x as Za,z as Ve,ae as Qe,l as v,aH as Xe,D as x,F as k,E as _,B as ke,C as Pe,ag as S,aI as da,A as Oe}from"../chunks/Bf27f5Ts.js";import{p as ra,i as $e}from"../chunks/y_7jc0in.js";import{p as C,b as Fe}from"../chunks/Bwo36f8E.js";import{c as wn,z as Qa,r as aa,d as Ce,t as ue,b as ua,s as Sa,e as Cn,a as Ba,i as Rn}from"../chunks/CdxQmwGD.js";import{i as Ln}from"../chunks/9dEYUNHJ.js";function Fn(e){var t=sn,n=$a;Ia(null),Va(null);try{return e()}finally{Ia(t),Va(n)}}function et(e,t,n,r=n){e.addEventListener(t,()=>Fn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),wn()}function va(e,t){return t}function Dn(e,t,n,r){for(var i=[],o=t.length,c=0;c<o;c++)pn(t[c].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var p=n.parentNode;gn(p),p.append(n),r.clear(),Ze(e,t[0].prev,t[o-1].next)}bn(i,()=>{for(var b=0;b<o;b++){var m=t[b];a||(r.delete(m.k),Ze(e,m.prev,m.next)),hn(m.e,!a)}})}function pa(e,t,n,r,i,o=null){var c=e,a={flags:t,items:new Map,first:null},p=(t&qa)!==0;if(p){var b=e;c=je?ma(_n(b)):b.appendChild(mn())}je&&un();var m=null,z=!1,y=xn(()=>{var F=n();return yn(F)?F:F==null?[]:Ya(F)});cn(()=>{var F=l(y),h=F.length;if(z&&h===0)return;z=h===0;let E=!1;if(je){var R=c.data===dn;R!==(h===0)&&(c=Pa(),ma(c),xa(!1),E=!0)}if(je){for(var D=null,T,j=0;j<h;j++){if(la.nodeType===8&&la.data===fn){c=la,E=!0,xa(!1);break}var N=F[j],w=r(N,j);T=at(la,a,D,null,N,w,j,i,t,n),a.items.set(w,T),D=T}h>0&&ma(Pa())}je||Tn(F,a,c,i,t,r,n),o!==null&&(h===0?m?Xa(m):m=Wa(()=>o(c)):m!==null&&vn(m,()=>{m=null})),E&&xa(!0),l(y)}),je&&(c=la)}function Tn(e,t,n,r,i,o,c){var I,Y,te,U;var a=(i&Nn)!==0,p=(i&(La|Fa))!==0,b=e.length,m=t.items,z=t.first,y=z,F,h=null,E,R=[],D=[],T,j,N,w;if(a)for(w=0;w<b;w+=1)T=e[w],j=o(T,w),N=m.get(j),N!==void 0&&((I=N.a)==null||I.measure(),(E??(E=new Set)).add(N));for(w=0;w<b;w+=1){if(T=e[w],j=o(T,w),N=m.get(j),N===void 0){var L=y?y.e.nodes_start:n;h=at(L,t,h,h===null?t.first:h.next,T,j,w,r,i,c),m.set(j,h),R=[],D=[],y=h.next;continue}if(p&&In(N,T,w,i),N.e.f&ya&&(Xa(N.e),a&&((Y=N.a)==null||Y.unfix(),(E??(E=new Set)).delete(N))),N!==y){if(F!==void 0&&F.has(N)){if(R.length<D.length){var K=D[0],M;h=K.prev;var Q=R[0],$=R[R.length-1];for(M=0;M<R.length;M+=1)Oa(R[M],K,n);for(M=0;M<D.length;M+=1)F.delete(D[M]);Ze(t,Q.prev,$.next),Ze(t,h,Q),Ze(t,$,K),y=K,h=$,w-=1,R=[],D=[]}else F.delete(N),Oa(N,y,n),Ze(t,N.prev,N.next),Ze(t,N,h===null?t.first:h.next),Ze(t,h,N),h=N;continue}for(R=[],D=[];y!==null&&y.k!==j;)y.e.f&ya||(F??(F=new Set)).add(y),D.push(y),y=y.next;if(y===null)continue;N=y}R.push(N),h=N,y=N.next}if(y!==null||F!==void 0){for(var A=F===void 0?[]:Ya(F);y!==null;)y.e.f&ya||A.push(y),y=y.next;var G=A.length;if(G>0){var ae=i&qa&&b===0?n:null;if(a){for(w=0;w<G;w+=1)(te=A[w].a)==null||te.measure();for(w=0;w<G;w+=1)(U=A[w].a)==null||U.fix()}Dn(t,A,ae,m)}}a&&kn(()=>{var B;if(E!==void 0)for(N of E)(B=N.a)==null||B.apply()}),$a.first=t.first&&t.first.e,$a.last=h&&h.e}function In(e,t,n,r){r&La&&Ha(e.v,t),r&Fa?Ha(e.i,n):e.i=n}function at(e,t,n,r,i,o,c,a,p,b){var m=(p&La)!==0,z=(p&En)===0,y=m?z?An(i):Ma(i):i,F=p&Fa?Ma(c):c,h={i:F,v:y,k:o,a:null,e:null,prev:n,next:r};try{return h.e=Wa(()=>a(e,y,F,b),je),h.e.prev=n&&n.e,h.e.next=r&&r.e,n===null?t.first=h:(n.next=h,n.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function Oa(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var c=$n(o);i.before(o),o=c}}function Ze(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ae(e,t,n=t){var r=Sn();et(e,"input",i=>{var o=i?e.defaultValue:e.value;if(o=ka(e)?Aa(o):o,n(o),r&&o!==(o=t())){var c=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(a,e.value.length))}}),(je&&e.defaultValue!==e.value||Ja(t)==null&&e.value)&&n(ka(e)?Aa(e.value):e.value),Za(()=>{var i=t();ka(e)&&i===Aa(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Da(e,t,n=t){et(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(je&&e.defaultChecked!==e.checked||Ja(t)==null)&&n(e.checked),Za(()=>{var r=t();e.checked=!!r})}function ka(e){var t=e.type;return t==="number"||t==="range"}function Aa(e){return e===""?null:+e}const Vn=!0,jl=Object.freeze(Object.defineProperty({__proto__:null,prerender:Vn},Symbol.toStringTag,{value:"Module"}));function se(e){return parseInt(e,16)}function fa(e){return Math.floor(e).toString(16).padStart(2,"0").toUpperCase()}function Na(e,t,n){const r=e>t;let i=t,o=e;r&&(i=e,o=t);const a=(i-o)/n;let p=o;const b=[o];for(let m=1;m<n;m++)p+=a,b.push(p);return b[n-1]=i,r&&b.reverse(),b}const Pn=/^(\(.*\)|\\?.)$/,ea=e=>{const t=e.toString();return Pn.test(t)?t:`(?:${t})`},Hn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Mn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,W=e=>{const t=n=>W(`(?<${n}>${`${e}`.replace(Hn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>W(`${e}${f(...n)}`),{referenceTo:n=>W(`${e}\\k<${n}>`)}),or:(...n)=>W(`(?:${e}|${f(...n)})`),after:(...n)=>W(`(?<=${f(...n)})${e}`),before:(...n)=>W(`${e}(?=${f(...n)})`),notAfter:(...n)=>W(`(?<!${f(...n)})${e}`),notBefore:(...n)=>W(`${e}(?!${f(...n)})`),times:Object.assign(n=>W(`${ea(e)}{${n}}`),{any:()=>W(`${ea(e)}*`),atLeast:n=>W(`${ea(e)}{${n},}`),atMost:n=>W(`${ea(e)}{0,${n}}`),between:(n,r)=>W(`${ea(e)}{${n},${r}}`)}),optionally:()=>W(`${ea(e)}?`),as:t,groupedAs:t,grouped:()=>W(`${e}`.replace(Mn,"($1$3)$2")),at:{lineStart:()=>W(`^${e}`),lineEnd:()=>W(`${e}$`)}}},Bn=/[.*+?^${}()|[\]\\/]/g,Re=e=>W(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`),On=(...e)=>W(`(?:${e.map(t=>f(t)).join("|")})`),zn=W(".");W("\\b\\w+\\b");W("\\w");W("\\b");const Ie=W("\\d");W("\\s");const Gn=Object.assign(W("[a-zA-Z]"),{lowercase:W("[a-z]"),uppercase:W("[A-Z]")});W("\\t");W("\\n");W("\\r");W("\\W+"),W("\\W"),W("\\B"),W("\\D"),W("\\S"),Object.assign(W("[^a-zA-Z]"),{lowercase:W("[^a-z]"),uppercase:W("[^A-Z]")}),W("[^\\t]"),W("[^\\n]"),W("[^\\r]");const f=(...e)=>W(e.map(t=>typeof t=="string"?t.replace(Bn,"\\$&"):t).join("")),pe=(...e)=>W(`${ea(f(...e))}+`),H=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(f(...e).toString(),[...t||""].join(""))},jn=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,Un=/^[^\\]+/g,tt=/(?<sil>(?:sha|shi|shu|she|sho|cha|chi|chu|che|cho|tsu|kya|kyi|kyu|kye|kyo|gya|gyi|gyu|gye|gyo|sya|syu|syi|sye|syo|zya|zyu|zyi|zye|zyo|jya|jyu|jyi|jye|jyo|tya|tyi|tyu|tye|tyo|dya|dyi|dyu|dye|dyo|nya|nyi|nyu|nye|nyo|hya|hyi|hyu|hye|hyo|fya|fyi|fyu|fye|fyo|bya|byi|byu|bye|byo|pya|pyi|pyu|pye|pyo|mya|myi|myu|mye|myo|rya|ryi|ryu|rye|ryo|vya|vyi|vyu|vye|vyo|ka|ki|ku|ke|ko|ga|gi|gu|ge|go|sa|su|si|se|so|za|zu|zi|ze|zo|ja|ju|ji|je|jo|ta|ti|tu|te|to|da|di|du|de|do|na|ni|nu|ne|no|ha|hi|hu|he|ho|fa|fi|fu|fe|fo|ba|bi|bu|be|bo|pa|pi|pu|pe|po|ma|mi|mu|me|mo|ya|yi|yu|ye|yo|ra|ri|ru|re|ro|wa|wo|va|vi|vu|ve|vo|a|i|u|e|o|n|t)[^a-zA-Z\d\s:]*\s?)/g,za=pe(Ie).and(f(":")).and(Ie.times(2)).and(f(":")).and(Ie.times(2)).and(f(".")).and(Ie.times(2)),Kn=On("Dialogue","Comment").groupedAs("type").and(f(": ")).and(pe(Ie).optionally().groupedAs("layer")).and(f(",")).and(za.optionally().groupedAs("start")).and(f(",")).and(za.optionally().groupedAs("end")).and(f(",")).and(pe(Re(",").optionally()).groupedAs("style")).and(f(",")).and(pe(Re(",")).optionally().groupedAs("actor")).and(f(",")).and(pe(Ie).optionally().groupedAs("marginLeft")).and(f(",")).and(pe(Ie).optionally().groupedAs("marginRight")).and(f(",")).and(pe(Ie).optionally().groupedAs("marginVertical")).and(f(",")).and(pe(Re(",")).optionally().groupedAs("effect")).and(f(",")).and(pe(zn).optionally().groupedAs("content")),Xn=H(Kn),Wn=f("-").optionally().and(pe(Ie)),O=Wn.and(f(".").and(pe(Ie)).optionally()),nt=f("\\").and("a").and(O.groupedAs("a_value")),Yn=H(nt),Ee=Gn.or(Ie).times(2),rt=f("&H").and(Ee.groupedAs("color_bgr_blue")).and(Ee.groupedAs("color_bgr_green")).and(Ee.groupedAs("color_bgr_red")).and(f("&")),ot=f("\\c").and(rt),lt=f("\\1c").and(f("&H")).and(Ee.groupedAs("color1_bgr_blue")).and(Ee.groupedAs("color1_bgr_green")).and(Ee.groupedAs("color1_bgr_red")).and(f("&")),st=f("\\2c").and(f("&H")).and(Ee.groupedAs("color2_bgr_blue")).and(Ee.groupedAs("color2_bgr_green")).and(Ee.groupedAs("color2_bgr_red")).and(f("&")),it=f("\\3c").and(f("&H")).and(Ee.groupedAs("color3_bgr_blue")).and(Ee.groupedAs("color3_bgr_green")).and(Ee.groupedAs("color3_bgr_red")).and(f("&")),ut=f("\\4c").and(f("&H")).and(Ee.groupedAs("color4_bgr_blue")).and(Ee.groupedAs("color4_bgr_green")).and(Ee.groupedAs("color4_bgr_red")).and(f("&")),qn=H(rt),Jn=H(ot),Zn=H(lt),Qn=H(st),er=H(it),ar=H(ut),ct=f("\\").and("alpha").and(pe(Re("\\")).groupedAs("alpha_value")),tr=H(ct),dt=f("\\").and("1a").and(pe(Re("\\")).groupedAs("alpha1_value")),nr=H(dt),ft=f("\\").and("2a").and(pe(Re("\\")).groupedAs("alpha2_value")),rr=H(ft),vt=f("\\").and("3a").and(pe(Re("\\")).groupedAs("alpha3_value")),or=H(vt),pt=f("\\").and("4a").and(pe(Re("\\")).groupedAs("alpha4_value")),lr=H(pt),gt=f("\\").and("k").and(O.groupedAs("k_lower_case_value")),sr=H(gt),bt=f("\\").and("K").and(O.groupedAs("k_upper_case_value")),ir=H(bt),ht=f("\\").and("kf").and(O.groupedAs("kf_value")),ur=H(ht),_t=f("\\").and("ko").and(O.groupedAs("ko_value")),cr=H(_t),mt=f("\\").and("q").and(O.groupedAs("q_value")),dr=H(mt),xt=f("\\").and("s").and(O.groupedAs("s_value")),fr=H(xt),yt=f("\\").and("u").and(O.groupedAs("u_value")),vr=H(yt),kt=f("\\").and("r").and(pe(Re("\\")).groupedAs("r_value")),pr=H(kt),At=f("\\").and("fe").and(O.groupedAs("fe_value")),gr=H(At),Nt=f("\\").and("fn").and(pe(Re("\\")).groupedAs("fn_value")),br=H(Nt),Et=f("\\").and("p").and(O.groupedAs("p_value")),hr=H(Et),$t=f("\\").and("pbo").and(O.groupedAs("pbo_value")),_r=H($t),St=f("\\").and("an").and(O.groupedAs("an_value")),mr=H(St),wt=f("\\").and("b").and(O.groupedAs("b_value")),xr=H(wt),Ct=f("\\").and("be").and(O.groupedAs("be_value")),yr=H(Ct),Rt=f("\\").and("blur").and(O.groupedAs("blur_value")),kr=H(Rt),Lt=f("\\").and("bord").and(O.groupedAs("bord_value")),Ar=H(Lt),Ft=f("\\").and("xbord").and(O.groupedAs("xbord_value")),Nr=H(Ft),Dt=f("\\").and("ybord").and(O.groupedAs("ybord_value")),Er=H(Dt),Tt=f("\\").and("shad").and(O.groupedAs("shad_value")),$r=H(Tt),It=f("\\").and("xshad").and(O.groupedAs("xshad_value")),Sr=H(It),Vt=f("\\").and("yshad").and(O.groupedAs("yshad_value")),wr=H(Vt),Pt=f("\\").and("fax").and(O.groupedAs("fax_value")),Cr=H(Pt),Ht=f("\\").and("fay").and(O.groupedAs("fay_value")),Rr=H(Ht),Mt=f("\\").and("fscx").and(O.groupedAs("fscx_value")),Lr=H(Mt),Bt=f("\\").and("fscy").and(O.groupedAs("fscy_value")),Fr=H(Bt),Ot=f("\\").and("fsp").and(O.groupedAs("fsp_value")),Dr=H(Ot),zt=f("\\").and("fr").and(O.groupedAs("fr_value")),Tr=H(zt),Gt=f("\\").and("frx").and(O.groupedAs("frx_value")),Ir=H(Gt),jt=f("\\").and("fry").and(O.groupedAs("fry_value")),Vr=H(jt),Ut=f("\\").and("frz").and(O.groupedAs("frz_value")),Pr=H(Ut),Kt=f("\\").and("i").and(f("1").or("0").groupedAs("i_value")),Hr=H(Kt),Xt=f("\\").and("fs").and(O.groupedAs("fs_value")),Mr=H(Xt),Wt=f("\\").and("pos").and(f("(")).and(O.groupedAs("pos_x")).and(f(",")).and(O.groupedAs("pos_y")).and(f(")")),Br=H(Wt),Yt=f("\\").and("org").and(f("(")).and(O.groupedAs("org_x")).and(f(",")).and(O.groupedAs("org_y")).and(f(")")),Or=H(Yt),qt=f("\\").and("fad").and(f("(")).and(O.groupedAs("in")).and(f(",")).and(O.groupedAs("out")).and(f(")")),zr=H(qt),Jt=f("\\").and("fade").and(f("(")).and(O.groupedAs("fade_alpha1")).and(f(",")).and(O.groupedAs("fade_alpha2")).and(f(",")).and(O.groupedAs("fade_alpha3")).and(f(",")).and(O.groupedAs("fade_t1")).and(f(",")).and(O.groupedAs("fade_t2")).and(f(",")).and(O.groupedAs("fade_t3")).and(f(",")).and(O.groupedAs("fade_t4")).and(f(")")),Gr=H(Jt),jr=f(",").and(O.groupedAs("move_t1")).and(f(",")).and(O.groupedAs("move_t2")).optionally(),Zt=f("\\").and("move").and(f("(")).and(O.groupedAs("move_x1")).and(f(",")).and(O.groupedAs("move_y1")).and(f(",")).and(O.groupedAs("move_x2")).and(f(",")).and(O.groupedAs("move_y2")).and(jr).and(f(")")),Ur=H(Zt),Qt=f("\\").and("clip").and(f("(")).and(pe(Re(")")).groupedAs("clip_args")).and(f(")")),Kr=H(Qt),en=f("\\").and("iclip").and(f("(")).and(pe(Re(")")).groupedAs("iclip_args")).and(f(")")),Xr=H(en),Wr=f("\\").and(pe(Re("\\")).groupedAs("unknown_value")),an=Ct.or(ct).or(Ft).or(Dt).or(It).or(Vt).or(en).or(Zt).or(Rt).or(Lt).or(Tt).or(Mt).or(Bt).or(Jt).or(Qt).or(Ot).or(Wt).or(Yt).or(qt).or($t).or(Gt).or(jt).or(Ut).or(Pt).or(Ht).or(_t).or(ht).or(zt).or(Xt).or(At).or(Nt).or(St).or(lt).or(st).or(it).or(ut).or(dt).or(ft).or(vt).or(pt).or(ot).or(mt).or(yt).or(xt).or(Et).or(kt).or(Kt).or(wt).or(nt).or(gt).or(bt).or(Wr),Yr=f("\\").at.lineStart().and("t").and(f("(")).and(O.groupedAs("arg1").and(f(",")).optionally()).and(O.groupedAs("arg2").and(f(",")).optionally()).and(O.groupedAs("arg3").and(f(",")).optionally()).and(pe(an).groupedAs("tags")).and(f(")")),qr=H(an),tn=H(Yr);function Ea(e){const t=Math.floor(e/3600),n=Math.floor((e/3600-t)*60);return e=e-t*3600-n*60,{hours:t,minutes:n,seconds:e}}function Ga(e){var a,p,b;const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=e.match(t);if(!n||n.length===0)return null;const r=Math.floor(Number(((a=n.groups)==null?void 0:a.h)??"0")),i=Math.floor(Number(((p=n.groups)==null?void 0:p.m)??"0")),o=Number(((b=n.groups)==null?void 0:b.s)??"0"),c={hours:r,minutes:i,seconds:o};return Ta(c),c}function Ta(e){e.seconds>=60&&(e.seconds-=60,e.minutes++),e.minutes>=60&&(e.minutes-=60,e.hours++),e.hours>=9&&(e.hours=9,e.minutes=59,e.seconds=59.99)}function ja(e){Ta(e);const t=e.hours.toFixed(0),n=e.minutes.toFixed(0).padStart(2,"0"),r=e.seconds.toFixed(2).padStart(5,"0");return`${t}:${n}:${r}`}function ga(e){return Ta(e),e.hours*3600+e.minutes*60+e.seconds}var wa;(function(e){e[e.DOWN_LEFT=1]="DOWN_LEFT",e[e.DOWN_CENTER=2]="DOWN_CENTER",e[e.DOWN_RIGHT=3]="DOWN_RIGHT",e[e.CENTER_LEFT=4]="CENTER_LEFT",e[e.CENTER_CENTER=5]="CENTER_CENTER",e[e.CENTER_RIGHT=6]="CENTER_RIGHT",e[e.UP_LEFT=7]="UP_LEFT",e[e.UP_CENTER=8]="UP_CENTER",e[e.UP_RIGHT=9]="UP_RIGHT"})(wa||(wa={}));const Jr=Qa.nativeEnum(wa);var Ca;(function(e){e[e.ANSI=0]="ANSI",e[e.DEFAULT=1]="DEFAULT",e[e.SYMBOL=2]="SYMBOL",e[e.MAC=77]="MAC",e[e.SHIFT_JIS=128]="SHIFT_JIS",e[e.HANGEUL=129]="HANGEUL",e[e.JOHAB=130]="JOHAB",e[e.GB2312=134]="GB2312",e[e.CHINESE_BIG5=136]="CHINESE_BIG5",e[e.GREEK=161]="GREEK",e[e.TURKISH=162]="TURKISH",e[e.VIETNAMESE=163]="VIETNAMESE",e[e.HEBREW=177]="HEBREW",e[e.ARAB=178]="ARAB",e[e.BALTIC=186]="BALTIC",e[e.RUSSIAN=204]="RUSSIAN",e[e.THAI=222]="THAI",e[e.EASTERN_EUROPE=238]="EASTERN_EUROPE",e[e.OEM=255]="OEM"})(Ca||(Ca={}));const Zr=Qa.nativeEnum(Ca);function Qr(){return{format:"Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text",lines:[]}}function eo(){return{data:[]}}function ao(){return{files:[]}}function to(){return{files:[]}}function no(){return{comments:[],properties:new Map}}function ro(){return{comments:[],properties:new Map}}function oo(){return{format:"Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding",styles:[]}}const lo="[Script Info]",so="[Aegisub Project Garbage]",io="[V4+ Styles]",uo="[Graphics]",co="[Fonts]",fo="[Events]",vo="[Aegisub Extradata]",ba="; ",Ua="Data: ";function po(e){const t={scriptInfo:ro(),aegisubProjectGarbage:no(),styles:oo(),fonts:ao(),graphics:to(),events:Qr(),extraData:eo()},n="scriptInfo",r="projectGarbage",i="styles",o="fonts",c="graphics",a="events",p="extraData";let b="",m="";const z=e.split(`
`);for(let y=0;y<z.length;y++){const F=y+1,h=go(z[y]);if(h.length===0)continue;switch(h){case lo:b=n;continue;case so:b=r;continue;case io:b=i;continue;case co:b=o;continue;case uo:b=c;continue;case fo:b=a;continue;case vo:b=p;continue}let E="";switch(b){case n:E=bo(t,h);break;case r:E=ho(t,h);break;case i:E=_o(t,h);break;case o:m=mo(t,h,m);break;case c:m=xo(t,h,m);break;case a:E=yo(t,h);break;case p:ko(t,h);break;default:console.error(`failed to parse line ${F}`);break}if(E.length>0)return console.error(`failed to parse ass file at line ${F}: ${E}
Line:
${h}`),null}return t}function go(e){return e=e.replaceAll("\\uFEFF",""),e=e.replaceAll("\r",""),e}function ha(e){var i,o;const t=/(?<key>.+):\s+(?<value>.*)\s*/,n={key:"",value:""},r=e.match(t);return!r||r.length===0?[n,`not a key-value pair: ${e}`]:(n.key=((i=r.groups)==null?void 0:i.key)??"",n.value=((o=r.groups)==null?void 0:o.value)??"",[n,""])}function bo(e,t){if(t.startsWith(ba)){const i=t.substring(ba.length);return e.scriptInfo.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.scriptInfo.properties.set(n.key,n.value),"")}function ho(e,t){if(t.startsWith(ba)){const i=t.substring(ba.length);return e.aegisubProjectGarbage.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.aegisubProjectGarbage.properties.set(n.key,n.value),"")}function _o(e,t){const n=/Style: (?<name>.*)\s*,\s*(?<fontName>.*)\s*,\s*(?<fontSize>\d+(?:\.\d+)?)\s*,\s*&H(?<alpha1>[A-Fa-f0-9]{2})(?<color1>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha2>[A-Fa-f0-9]{2})(?<color2>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha3>[A-Fa-f0-9]{2})(?<color3>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha4>[A-Fa-f0-9]{2})(?<color4>[A-Fa-f0-9]{6})\s*,\s*(?<bold>0|-1)\s*,\s*(?<italic>0|-1)\s*,\s*(?<underline>0|-1)\s*,\s*(?<strikeout>0|-1)\s*,\s*(?<scaleX>\d+(?:\.\d+)?)\s*,\s*(?<scaleY>\d+(?:\.\d+)?)\s*,\s*(?<spacing>\d+(?:\.\d+)?)\s*,\s*(?<angle>-?\d+(?:\.\d+)?)\s*,\s*(?<borderStyle>\d+)\s*,\s*(?<outline>\d+(?:\.\d+)?)\s*,\s*(?<shadow>\d+(?:\.\d+)?)\s*,\s*(?<alignment>[1-9])\s*,\s*(?<marginLeft>\d+)\s*,\s*(?<marginRight>\d+)\s*,\s*(?<marginVertical>\d+)\s*,\s*(?<encoding>\d+)/;if(!t.startsWith("Style: "))return"";const r=t.match(n);if(!r||r.length===0||!r.groups)return`failed to parse style: not a style: ${t}`;const i=Jr.safeParse(Number(r.groups.alignment));if(!i.success)return`failed to parse style: invalid alignment: ${t}`;const o=i.data,c=Zr.safeParse(Number(r.groups.encoding));if(!c.success)return`failed to parse style: invalid encoding: ${r.groups.encoding}`;const a=c.data,p={name:r.groups.name??"",fontName:r.groups.fontName??"",fontSize:Number(r.groups.fontSize??"0"),primaryAlpha:r.groups.alpha1,primaryColor:r.groups.color1,secondaryAlpha:r.groups.alpha2,secondaryColor:r.groups.color2,outlineAlpha:r.groups.alpha3,outlineColor:r.groups.color3,backAlpha:r.groups.alpha4,backColor:r.groups.color4,bold:Number(r.groups.bold),italic:Number(r.groups.italic),underline:Number(r.groups.underline),strikeOut:Number(r.groups.strikeout),scaleX:Number(r.groups.scaleX),scaleY:Number(r.groups.scaleY),spacing:Number(r.groups.spacing),angle:Number(r.groups.angle),borderStyle:Number(r.groups.borderStyle),outline:Number(r.groups.outline),shadow:Number(r.groups.shadow),alignment:o,marginLeft:Number(r.groups.marginLeft),marginRight:Number(r.groups.marginRight),marginVertical:Number(r.groups.marginVertical),encoding:a};return e.styles.styles.push(p),""}function mo(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="fontname"){const a=r.value;let p={name:"",data:[]},b=e.fonts.files.findIndex(m=>m.name===a);return e.fonts.files.push(p),b=e.fonts.files.length-1,p=e.fonts.files[b],p.name=a,n=a,a}const o=e.fonts.files.findLastIndex(a=>a.name==n);return o<0?"":(e.fonts.files[o].data.push(t),n)}function xo(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="filename"){const a=r.value;let p={name:"",data:[]},b=e.graphics.files.findIndex(m=>m.name===a);return e.graphics.files.push(p),b=e.graphics.files.length-1,p=e.graphics.files[b],p.name=a,n=a,a}const o=e.graphics.files.findLastIndex(a=>a.name==n);return o<0?"":(e.graphics.files[o].data.push(t),n)}function yo(e,t){if(t.startsWith("Format:"))return e.events.format=t,"";const n=Ge(t);return n==null?`not a event (dialogue / comment): ${n}`:(e.events.lines.push(n),"")}function ko(e,t){if(!t.startsWith(Ua))return;const n=t.substring(Ua.length);e.extraData.data.push(n)}function Ao(e){const t=[],n=e.content.split(" ");for(let p=0;p<n.length;p++){const b=n[p];if(No(b)){const m=b.matchAll(tt);for(const z of m)t.push({text:z[1],durationInMs:0})}else t.push({text:b,durationInMs:0});p!=n.length-1&&(t[t.length-1].text+=" ")}const r=Oo(e),i=Math.floor(Math.round(r*100/t.length)),o=t.length*i;for(const p of t)p.durationInMs=i;if(!(o===r*100)){const b=r*100-o;t[t.length-1].durationInMs+=b}const a=[];for(const p of t)a.push({name:"effect",tags:[{name:g.kf,value:p.durationInMs}]},{name:"text",value:p.text});e.content=xe(a)}function No(e){for(;e.length>0;){const t=e.match(tt);if(!t||t.length===0)return!1;e=e.substring(t[0].length)}return!0}var g;(function(e){e.a="a",e.alpha="alpha",e.alpha1="1a",e.alpha2="2a",e.alpha3="3a",e.alpha4="4a",e.an="an",e.b="b",e.be="be",e.blur="blur",e.bord="bord",e.clip="clip",e.color="c",e.color1="1c",e.color2="2c",e.color3="3c",e.color4="4c",e.fad="fad",e.fade="fade",e.fax="fax",e.fay="fay",e.fe="fe",e.fn="fn",e.fr="fr",e.frx="frx",e.fry="fry",e.frz="frz",e.fs="fs",e.fscx="fscx",e.fscy="fscy",e.fsp="fsp",e.i="i",e.iclip="iclip",e.kLowerCase="k",e.kUpperCase="K",e.kf="kf",e.ko="ko",e.move="move",e.org="org",e.p="p",e.pbo="pbo",e.pos="pos",e.q="q",e.r="r",e.s="s",e.shad="shad",e.t="t",e.text="text",e.u="u",e.unknown="unknown",e.xbord="xbord",e.xshad="xshad",e.ybord="ybord",e.yshad="yshad"})(g||(g={}));function ca(e,t){var m,z,y,F,h,E,R,D,T,j,N,w,L,K,M,Q,$,A,G,ae,I,Y,te,U,B,q,re,ne,fe,ve,de,J,ie,he,Te,Se,Ne,Le,ta,We,He,Ye,na,qe,Je,u,_e,V,P,X,Z;const n=e.substring(1),r=e.match(tn);if(r&&r.length>0)return Eo(e,t,n,r);const i=e.match(Un);if(i&&i.length>0){const s=i[0];return t.push({name:g.text,value:s}),e=e.substring(s.length),e.length>0&&ca(e,t),t}const o=e.match(qr);if(!o||o.length==0)return t;function c(s,d,ee){return s.push(d),e=e.substring(ee),e.length>0&&ca(e,s),s}let a=(m=o[0].match(Ur))==null?void 0:m.groups;if(a!=null){const s=Number((a==null?void 0:a.move_x1)??"0"),d=Number((a==null?void 0:a.move_y1)??"0"),ee=Number((a==null?void 0:a.move_x2)??"0"),oe=Number((a==null?void 0:a.move_y2)??"0"),me=a!=null&&a.move_t1?Number(a.move_t1):null,we=a!=null&&a.move_t2?Number(a.move_t2):null,_a={name:g.move,x1:s,y1:d,x2:ee,y2:oe,t1:me,t2:we};return c(t,_a,o[0].length)}if(a=(z=o[0].match(tr))==null?void 0:z.groups,a!=null){const s=(a==null?void 0:a.alpha_value)??"",d={name:g.alpha,value:s};return c(t,d,o[0].length)}if(a=(y=o[0].match(Nr))==null?void 0:y.groups,a!=null){const s=Number((a==null?void 0:a.xbord_value)??"0"),d={name:g.xbord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(F=o[0].match(Er))==null?void 0:F.groups,a!=null){const s=Number((a==null?void 0:a.ybord_value)??"0"),d={name:g.ybord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(h=o[0].match(Sr))==null?void 0:h.groups,a!=null){const s=Number((a==null?void 0:a.xshad_value)??"0"),d={name:g.xshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(E=o[0].match(wr))==null?void 0:E.groups,a!=null){const s=Number((a==null?void 0:a.yshad_value)??"0"),d={name:g.yshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(R=o[0].match(Xr))==null?void 0:R.groups,a!=null){const s=(a==null?void 0:a.iclip_args)??"",d={name:g.iclip,drawCommands:s};return c(t,d,o[0].length)}if(a=(D=o[0].match(kr))==null?void 0:D.groups,a!=null){const s=Number((a==null?void 0:a.blur_value)??"0"),d={name:g.blur,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(T=o[0].match(Ar))==null?void 0:T.groups,a!=null){const s=Number((a==null?void 0:a.bord_value)??"0"),d={name:g.bord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(j=o[0].match($r))==null?void 0:j.groups,a!=null){const s=Number((a==null?void 0:a.shad_value)??"0"),d={name:g.shad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(N=o[0].match(Lr))==null?void 0:N.groups,a!=null){const s=Number((a==null?void 0:a.fscx_value)??"0"),d={name:g.fscx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(w=o[0].match(Fr))==null?void 0:w.groups,a!=null){const s=Number((a==null?void 0:a.fscy_value)??"0"),d={name:g.fscy,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(L=o[0].match(Gr))==null?void 0:L.groups,a!=null){const s=Number((a==null?void 0:a.fade_alpha1)??"0"),d=Number((a==null?void 0:a.fade_alpha2)??"0"),ee=Number((a==null?void 0:a.fade_alpha3)??"0"),oe=Number((a==null?void 0:a.fade_t1)??"0"),me=Number((a==null?void 0:a.fade_t2)??"0"),we=Number((a==null?void 0:a.fade_t3)??"0"),_a=Number((a==null?void 0:a.fade_t4)??"0"),on={name:g.fade,alpha1:s,alpha2:d,alpha3:ee,t1:oe,t2:me,t3:we,t4:_a};return c(t,on,o[0].length)}if(a=(K=o[0].match(Kr))==null?void 0:K.groups,a!=null){const s=(a==null?void 0:a.clip_args)??"",d={name:g.clip,drawCommands:s};return c(t,d,o[0].length)}if(a=(M=o[0].match(Dr))==null?void 0:M.groups,a!=null){const s=Number((a==null?void 0:a.fsp_value)??"0"),d={name:g.fsp,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Q=o[0].match(Br))==null?void 0:Q.groups,a!=null){const s=Number((a==null?void 0:a.pos_x)??"0"),d=Number((a==null?void 0:a.pos_y)??"0"),ee={name:g.pos,x:s,y:d};return c(t,ee,o[0].length)}if(a=($=o[0].match(Or))==null?void 0:$.groups,a!=null){const s=Number((a==null?void 0:a.org_x)??"0"),d=Number((a==null?void 0:a.org_y)??"0"),ee={name:g.org,x:s,y:d};return c(t,ee,o[0].length)}if(a=(A=o[0].match(zr))==null?void 0:A.groups,a!=null){const s=Number((a==null?void 0:a.in)??"0"),d=Number((a==null?void 0:a.out)??"0"),ee={name:g.fad,in:s,out:d};return c(t,ee,o[0].length)}if(a=(G=o[0].match(Ir))==null?void 0:G.groups,a!=null){const s=Number((a==null?void 0:a.frx_value)??"0"),d={name:g.frx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ae=o[0].match(Vr))==null?void 0:ae.groups,a!=null){const s=Number((a==null?void 0:a.fry_value)??"0"),d={name:g.fry,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(I=o[0].match(Pr))==null?void 0:I.groups,a!=null){const s=Number((a==null?void 0:a.frz_value)??"0"),d={name:g.frz,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Y=o[0].match(Cr))==null?void 0:Y.groups,a!=null){const s=Number((a==null?void 0:a.fax_value)??"0"),d={name:g.fax,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(te=o[0].match(Rr))==null?void 0:te.groups,a!=null){const s=Number((a==null?void 0:a.fay_value)??"0"),d={name:g.fay,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(U=o[0].match(_r))==null?void 0:U.groups,a!=null){const s=Number((a==null?void 0:a.pbo_value)??"0"),d={name:g.pbo,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(B=o[0].match(gr))==null?void 0:B.groups,a!=null){const s=Number((a==null?void 0:a.fe_value)??"0"),d={name:g.fe,encodingId:Number(s)};return c(t,d,o[0].length)}if(a=(q=o[0].match(br))==null?void 0:q.groups,a!=null){const s=(a==null?void 0:a.fn_value)??"",d={name:g.fn,font:s};return c(t,d,o[0].length)}if(a=(re=o[0].match(mr))==null?void 0:re.groups,a!=null){const s=Number((a==null?void 0:a.an_value)??"0"),d={name:g.an,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ne=o[0].match(yr))==null?void 0:ne.groups,a!=null){const s=Number((a==null?void 0:a.be_value)??"0"),d={name:g.be,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(fe=o[0].match(Tr))==null?void 0:fe.groups,a!=null){const s=Number((a==null?void 0:a.fr_value)??"0"),d={name:g.fr,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ve=o[0].match(Mr))==null?void 0:ve.groups,a!=null){const s=Number((a==null?void 0:a.fs_value)??"0"),d={name:g.fs,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(de=o[0].match(cr))==null?void 0:de.groups,a!=null){const s=Number((a==null?void 0:a.ko_value)??"0"),d={name:g.ko,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(J=o[0].match(ur))==null?void 0:J.groups,a!=null){const s=Number((a==null?void 0:a.kf_value)??"0"),d={name:g.kf,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ie=o[0].match(Zn))==null?void 0:ie.groups,a!=null){const s=Number(se((a==null?void 0:a.color1_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color1_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color1_bgr_red)??"0")),oe={name:g.color1,blue:s,green:d,red:ee};return c(t,oe,o[0].length)}if(a=(he=o[0].match(Qn))==null?void 0:he.groups,a!=null){const s=Number(se((a==null?void 0:a.color2_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color2_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color2_bgr_red)??"0")),oe={name:g.color2,blue:s,green:d,red:ee};return c(t,oe,o[0].length)}if(a=(Te=o[0].match(er))==null?void 0:Te.groups,a!=null){const s=Number(se((a==null?void 0:a.color3_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color3_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color3_bgr_red)??"0")),oe={name:g.color3,blue:s,green:d,red:ee};return c(t,oe,o[0].length)}if(a=(Se=o[0].match(ar))==null?void 0:Se.groups,a!=null){const s=Number(se((a==null?void 0:a.color4_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color4_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color4_bgr_red)??"0")),oe={name:g.color4,blue:s,green:d,red:ee};return c(t,oe,o[0].length)}if(a=(Ne=o[0].match(nr))==null?void 0:Ne.groups,a!=null){const s=a.alpha1_value??"",d={name:g.alpha1,value:s};return c(t,d,o[0].length)}if(a=(Le=o[0].match(rr))==null?void 0:Le.groups,a!=null){const s=a.alpha2_value??"",d={name:g.alpha2,value:s};return c(t,d,o[0].length)}if(a=(ta=o[0].match(or))==null?void 0:ta.groups,a!=null){const s=a.alpha3_value??"",d={name:g.alpha3,value:s};return c(t,d,o[0].length)}if(a=(We=o[0].match(lr))==null?void 0:We.groups,a!=null){const s=a.alpha4_value??"",d={name:g.alpha4,value:s};return c(t,d,o[0].length)}if(a=(He=o[0].match(sr))==null?void 0:He.groups,a!=null){const s=Number((a==null?void 0:a.k_lower_case_value)??"0"),d={name:g.kLowerCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Ye=o[0].match(ir))==null?void 0:Ye.groups,a!=null){const s=Number((a==null?void 0:a.k_upper_case_value)??"0"),d={name:g.kUpperCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(na=o[0].match(dr))==null?void 0:na.groups,a!=null){const s=Number((a==null?void 0:a.q_value)??"0"),d={name:g.q,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(qe=o[0].match(fr))==null?void 0:qe.groups,a!=null){const s=Number((a==null?void 0:a.s_value)??"0"),d={name:g.s,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Je=o[0].match(vr))==null?void 0:Je.groups,a!=null){const s=Number((a==null?void 0:a.u_value)??"0"),d={name:g.u,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(u=o[0].match(pr))==null?void 0:u.groups,a!=null){const s=(a==null?void 0:a.r_value)??"",d={name:g.r,style:s};return c(t,d,o[0].length)}if(a=(_e=o[0].match(hr))==null?void 0:_e.groups,a!=null){const s=Number((a==null?void 0:a.p_value)??"0"),d={name:g.p,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(V=o[0].match(Hr))==null?void 0:V.groups,a!=null){const s=Number((a==null?void 0:a.i_value)??"0"),d={name:g.i,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(P=o[0].match(Jn))==null?void 0:P.groups,a!=null){const s=Number(se((a==null?void 0:a.color_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color_bgr_green)??"0")),ee=Number(se((a==null?void 0:a.color_bgr_red)??"0")),oe={name:g.color,blue:s,green:d,red:ee};return c(t,oe,o[0].length)}if(a=(X=o[0].match(xr))==null?void 0:X.groups,a!=null){const s=Number((a==null?void 0:a.b_value)??"0"),d={name:g.b,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Z=o[0].match(Yn))==null?void 0:Z.groups,a!=null){const s=Number((a==null?void 0:a.a_value)??"0"),d={name:g.a,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}const p=o[0],b={name:g.unknown,value:p};return c(t,b,o[0].length)}function Eo(e,t,n,r){var i;if(n.startsWith(g.t)){const o=(i=r[0].match(tn))==null?void 0:i.groups,c=(o==null?void 0:o.tags)??"",a=[];ca(c,a);const p=o!=null&&o.arg1?Number(o.arg1):null,b=o!=null&&o.arg2?Number(o.arg2):null,m=o!=null&&o.arg3?Number(o.arg3):null,z={name:g.t,accel:null,t1:null,t2:null,tags:a};p!==null&&b!==null&&m!==null?(z.t1=p,z.t2=b,z.accel=m):p!==null&&b!==null&&m===null?(z.t1=p,z.t2=b,z.accel=null):p!==null&&(z.accel=p),t.push(z)}return e=e.substring(r[0].length),e.length>0&&ca(e,t),t}function ge(e){var r,i,o;const t=[],n=e.matchAll(jn);for(const c of n){if((r=c.groups)!=null&&r.fx){const a=c.groups.fx.substring(1,c.groups.fx.length-1),p=[];ca(a,p),t.push({name:"effect",tags:p});continue}if((i=c.groups)!=null&&i.txt){t.push({name:"text",value:(o=c.groups)==null?void 0:o.txt});continue}}return t}function nn(e){let t="";for(const n of e.tags)switch(n.name){case g.t:{const r={name:"effect",tags:n.tags},i=nn(r);n.t1!==null&&n.t2!==null&&n.accel!==null?t+=`\\t(${n.t1},${n.t2},${n.accel},${i})`:n.t1!==null&&n.t2!==null&&n.accel===null?t+=`\\t(${n.t1},${n.t2},${i})`:n.accel!==null?t+=`\\t(${n.accel},${i})`:t+=`\\t(${i})`;break}case g.pos:case g.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case g.move:t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null&&(t+=`,${n.t1},${n.t2}`),t+=")";break;case g.clip:case g.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case g.fad:t+=`\\fad(${n.in},${n.out})`;break;case g.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case g.fe:t+=`\\fe${n.encodingId}`;break;case g.fn:t+=`\\fn${n.font}`;break;case g.r:t+=`\\r${n.style}`;break;case g.color:case g.color1:case g.color2:case g.color3:case g.color4:{const r=fa(n.blue),i=fa(n.green),o=fa(n.red);t+=`\\${n.name}&H${r}${i}${o}&`;break}case g.text:case g.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function xe(e){let t="";for(const n of e){if(n.name=="text"){t+=n.value;continue}t+="{"+nn(n)+"}"}return t}function Ka(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(r.name!="effect")continue;const i=e[n+1];if(i.name!="effect"){n++;continue}if(i==null)break;r.tags.push(...i.tags),t.push(n+1)}for(const n of t)e.splice(n,1)}function oa(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.pos,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function $o(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.move,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function So(e,t,n,r){const i={name:g.color,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function wo(e,t,n,r){const i={name:g.color1,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Co(e,t,n,r){const i={name:g.color2,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Ro(e,t,n,r){const i={name:g.color3,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Lo(e,t,n,r){const i={name:g.color4,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Fo(e,t){const n={name:g.alpha,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Do(e,t){const n={name:g.alpha1,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function To(e,t){const n={name:g.alpha2,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Io(e,t){const n={name:g.alpha3,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Vo(e,t){const n={name:g.alpha4,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Po(e,t,n){const r={name:g.pos,x:t,y:n},[i,o]=De(e,r.name,r);return i||(o.x=t,o.y=n),o}function Ho(e,t,n,r,i,o=null,c=null){const a={name:g.move,x1:t,y1:n,x2:r,y2:i,t1:o,t2:c},[p,b]=De(e,a.name,a);return p||(b.x1=t,b.y1=n,b.x2=r,b.y2=i,b.t1=o,b.t2=c),b}function De(e,t,n){const r=e.find(o=>o.name=="effect");if((r==null?void 0:r.name)!="effect")return e.unshift({name:"effect",tags:[n]}),[!0,n];const i=r.tags.find(o=>o.name==t);return(i==null?void 0:i.name)!=t?(r.tags.push(n),[!0,n]):[!1,i]}function Mo(e,t){const n=e.find(i=>i.name=="effect");if((n==null?void 0:n.name)!="effect")return;const r=n.tags.findIndex(i=>i.name===t);r<0||n.tags.splice(r,1)}const Bo="Dialogue",Ra="Comment";function Ge(e){const t=e.match(Xn);if(t==null)return null;const n=t.groups,r=Ga((n==null?void 0:n.start)??"");if(r==null)return null;const i=Ga((n==null?void 0:n.end)??"");return i==null?null:{type:(n==null?void 0:n.type)===Ra?Ra:Bo,layer:Number((n==null?void 0:n.layer)??"0"),start:r,end:i,style:(n==null?void 0:n.style)??"",actor:(n==null?void 0:n.actor)??"",marginLeft:Number((n==null?void 0:n.marginLeft)??"0"),marginRight:Number((n==null?void 0:n.marginRight)??"0"),marginVertical:Number((n==null?void 0:n.marginVertical)??"0"),effect:(n==null?void 0:n.effect)??"",content:(n==null?void 0:n.content)??""}}function ye(e){let t=e.type;return t+=": ",t+=Math.floor(e.layer),t+=",",t+=ja(e.start),t+=",",t+=ja(e.end),t+=",",t+=e.style,t+=",",t+=e.actor,t+=",",t+=Math.floor(e.marginLeft),t+=",",t+=Math.floor(e.marginRight),t+=",",t+=Math.floor(e.marginVertical),t+=",",t+=e.effect,t+=",",t+=e.content,t}function Oo(e){return ga(e.end)-ga(e.start)}function Me(e){const t=e.match(qn);if(t==null)return null;const n=t.groups;return{blue:se((n==null?void 0:n.color_bgr_blue)??""),green:se((n==null?void 0:n.color_bgr_green)??""),red:se((n==null?void 0:n.color_bgr_red)??"")}}var zo=(e,t)=>t(),Go=(e,t)=>t(),jo=()=>{},Uo=be('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Ko(e,t){Ve(t,!0);const n=ue.copiarMovimiento;let r=S("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),i=S(""),o=S("");function c(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const $=l(i).split(`
`);console.log($);const A=Ge(l(r));if(A==null){console.error("invalid base line",l(r));return}const G=ge(A.content),ae=$o(G);if(ae==null){console.error("base move not found");return}const I=ae.x2-ae.x1,Y=ae.y2-ae.y1;let te="";for(let U=0;U<$.length;U++){const B=$[U];if(B.length==0)continue;const q=Ge(B);if(q==null){console.error(`line ${U+1}: invalid line`);break}const re=ge(q.content),ne=oa(re);if(ne==null){console.error(`line ${U+1}: pos not found`);break}Mo(re,g.pos);const fe=ne.x,ve=ne.y,de=ne.x+I,J=ne.y+Y;Ho(re,fe,ve,de,J,ae.t1,ae.t2);const ie=xe(re);q.content=ie;const he=ye(q);console.log(he),U>0&&(te+=`
`),te+=he}v(o,C(te))}async function a(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{for(let $=1;$<=10;$++){const A=182+$*5,G=421+$*7;v(i,l(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${A},${G})}LINEA ${$}
`)}});var p=Uo();Ke($=>{Xe.title=n});var b=x(p);b.textContent=n;var m=k(b,2),z=k(x(m),2),y=x(z);aa(y),_(z),_(m);var F=k(m,2),h=x(F),E=x(h,!0);_(h);var R=k(h,2),D=x(R);Ce(D),_(R),_(F);var T=k(F,2);T.__click=[zo,c];var j=x(T,!0);_(T);var N=k(T,2),w=x(N),L=x(w),K=k(L);K.__click=[Go,a],K.__keydown=[jo],_(w);var M=k(w,2),Q=x(M);Ce(Q),_(M),_(N),_(p),ke(()=>{ce(E,ue.subtitulos),ce(j,ue.copiarMovimiento),ce(L,`${ue.resultado} `)}),Ae(y,()=>l(r),$=>v(r,$)),Ae(D,()=>l(i),$=>v(i,$)),Ae(Q,()=>l(o),$=>v(o,$)),le(e,p),Pe()}Ue(["click","keydown"]);var Xo=be(`<div class="text-column"><h1></h1> <div class="kagamin svelte-eb8v8f"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-eb8v8f"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-eb8v8f"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li> <li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-eb8v8f"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Wo(e,t){Ve(t,!1);const n=ue.acercaDe;Ln();var r=Xo();Ke(o=>{Xe.title=n});var i=x(r);i.textContent=n,da(20),_(r),le(e,r),Pe()}var Yo=be('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function qo(e){var t=Yo();Ke(n=>{Xe.title="Asu"}),le(e,t)}var Jo=(e,t)=>t(),Zo=be("<b> </b>"),Qo=be('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function ze(e,t){Ve(t,!0);let n=ra(t,"label",3,""),r=ra(t,"disabled",15,!1),i=ra(t,"startValue",15,""),o=ra(t,"endValue",15,""),c=ra(t,"startPlaceholder",3,""),a=ra(t,"endPlaceholder",3,""),p=S(void 0);function b(){var $;if(($=l(p))!=null&&$.checked){m();return}z()}function m(){r()&&(r(!1),l(p)&&(l(p).checked=!0),t.onEnabled&&t.onEnabled())}function z(){r()||(r(!0),l(p)&&(l(p).checked=!1),t.onDisabled&&t.onDisabled())}Qe(()=>{l(p)&&(l(p).checked=!r())});var y=Qo(),F=x(y),h=x(F),E=x(h);E.__change=[Jo,b],Fe(E,$=>v(p,$),()=>l(p));var R=k(E,2);{var D=$=>{var A=ln();ke(()=>ce(A,`${n()??""}
                (deshabilitado)`)),le($,A)},T=$=>{var A=Zo(),G=x(A,!0);_(A),ke(()=>ce(G,n())),le($,A)};$e(R,$=>{r()?$(D):$(T,!1)})}_(h),_(F);var j=k(F,2),N=x(j),w=k(x(N),2),L=x(w);aa(L),_(w),_(N);var K=k(N,2),M=k(x(K),2),Q=x(M);return aa(Q),_(M),_(K),_(j),_(y),ke(()=>{ua(L,"placeholder",c()),L.disabled=r(),ua(Q,"placeholder",a()),Q.disabled=r()}),Ae(L,i),Ae(Q,o),le(e,y),Pe({enable:m,disable:z})}Ue(["change"]);function sa(e,t){const n=[];for(let r=e;r<=t;r++){const i=fa(r);n.push(i)}return n}function ia(e,t,n){const r=Array(n),i=Na(e.blue,t.blue,n);if(i.length!==n)return console.error(`ERROR: blue interpolated values ${i.length} don't match intervals ${n}`),[];const o=Na(e.green,t.green,n);if(o.length!==n)return console.error(`ERROR: green interpolated values ${o.length} don't match intervals ${n}`),[];const c=Na(e.red,t.red,n);if(c.length!==n)return console.error(`ERROR: red interpolated values ${c.length} don't match intervals ${n}`),[];for(var a=0;a<n;a++){const p=Math.floor(i[a]),b=Math.floor(o[a]),m=Math.floor(c[a]);r[a]={blue:p,green:b,red:m}}return r}var el=(e,t)=>t(),al=()=>{},tl=be('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function rn(e,t){Ve(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ue.lineasCopiadas)}var r=tl();r.__click=[el,n],r.__keydown=[al],ke(()=>ua(r,"title",ue.copiar)),le(e,r),Pe()}Ue(["click","keydown"]);var nl=(e,t)=>t(),rl=be('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ol(e,t){Ve(t,!0);const n=ue.aplicarAlpha,r="0",i="FF";let o=S(""),c=S(""),a=S("0"),p=S("FF"),b=S("0"),m=S("FF"),z=S("0"),y=S("FF"),F=S("0"),h=S("FF"),E=S("0"),R=S("FF"),D=S(!1),T=S(!0),j=S(!0),N=S(!0),w=S(!0),L=S(void 0),K=S(void 0),M=S(void 0),Q=S(void 0),$=S(void 0),A=S(!1);function G(){var u,_e,V,P;(u=l(K))==null||u.disable(),(_e=l(M))==null||_e.disable(),(V=l(Q))==null||V.disable(),(P=l($))==null||P.disable()}function ae(){var u,_e,V,P;l(T)&&l(j)&&l(N)&&l(w)&&((u=l(K))==null||u.enable(),(_e=l(M))==null||_e.disable(),(V=l(Q))==null||V.disable(),(P=l($))==null||P.disable())}function I(){var u;(u=l(L))==null||u.disable()}function Y(){var u;l(T)&&l(j)&&l(N)&&l(w)&&((u=l(L))==null||u.enable())}function te(){const u=[],_e=l(o).split(`
`);for(const V of _e){if(V.length==0)continue;const P=Ge(V);P!=null&&u.push(P)}if(!l(D)){const V=se(l(a)),P=se(l(p));if(V>=P){alert("El inicio de alpha total debe ser menor al fin.");return}if(V<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(P>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const X=sa(V,P);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){let d=Math.floor(X.length*s/u.length);d>=X.length&&(d=X.length-1);const oe=`&H${X[d]}&`,me=ge(u[s].content);Fo(me,oe),u[s].content=xe(me);const we=ye(u[s]);s>0&&(Z+=`
`),Z+=we}v(c,C(Z));return}if(!l(T)){const V=se(l(b)),P=se(l(m));if(V>=P){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(V<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(P>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const X=sa(V,P);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){let d=Math.floor(X.length*s/u.length);d>=X.length&&(d=X.length-1);const oe=`&H${X[d]}&`,me=ge(u[s].content);Do(me,oe),u[s].content=xe(me);const we=ye(u[s]);s>0&&(Z+=`
`),Z+=we}v(c,C(Z))}if(!l(j)){const V=se(l(z)),P=se(l(y));if(V>=P){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(V<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(P>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const X=sa(V,P);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){let d=Math.floor(X.length*s/u.length);d>=X.length&&(d=X.length-1);const oe=`&H${X[d]}&`,me=ge(u[s].content);To(me,oe),u[s].content=xe(me);const we=ye(u[s]);s>0&&(Z+=`
`),Z+=we}v(c,C(Z))}if(!l(N)){const V=se(l(F)),P=se(l(h));if(V>=P){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(V<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(P>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const X=sa(V,P);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){let d=Math.floor(X.length*s/u.length);d>=X.length&&(d=X.length-1);const oe=`&H${X[d]}&`,me=ge(u[s].content);Io(me,oe),u[s].content=xe(me);const we=ye(u[s]);s>0&&(Z+=`
`),Z+=we}v(c,C(Z))}if(!l(w)){const V=se(l(E)),P=se(l(R));if(V>=P){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(V<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(P>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const X=sa(V,P);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){let d=Math.floor(X.length*s/u.length);d>=X.length&&(d=X.length-1);const oe=`&H${X[d]}&`,me=ge(u[s].content);Vo(me,oe),u[s].content=xe(me);const we=ye(u[s]);s>0&&(Z+=`
`),Z+=we}v(c,C(Z))}}Qe(()=>{for(let u=1;u<=10;u++)v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${u}
`)});var U=rl();Ke(u=>{Xe.title=n});var B=x(U);B.textContent=n;var q=k(B,4);Fe(ze(q,{label:"Alpha total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>G(),onDisabled:()=>ae(),get startValue(){return l(a)},set startValue(u){v(a,C(u))},get endValue(){return l(p)},set endValue(u){v(p,C(u))},get disabled(){return l(D)},set disabled(u){v(D,C(u))}}),u=>v(L,C(u)),()=>l(L));var re=k(q,2);Fe(ze(re,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(b)},set startValue(u){v(b,C(u))},get endValue(){return l(m)},set endValue(u){v(m,C(u))},get disabled(){return l(T)},set disabled(u){v(T,C(u))}}),u=>v(K,C(u)),()=>l(K));var ne=k(re,2);Fe(ze(ne,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(z)},set startValue(u){v(z,C(u))},get endValue(){return l(y)},set endValue(u){v(y,C(u))},get disabled(){return l(j)},set disabled(u){v(j,C(u))}}),u=>v(M,C(u)),()=>l(M));var fe=k(ne,2);Fe(ze(fe,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(F)},set startValue(u){v(F,C(u))},get endValue(){return l(h)},set endValue(u){v(h,C(u))},get disabled(){return l(N)},set disabled(u){v(N,C(u))}}),u=>v(Q,C(u)),()=>l(Q));var ve=k(fe,2);Fe(ze(ve,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(E)},set startValue(u){v(E,C(u))},get endValue(){return l(R)},set endValue(u){v(R,C(u))},get disabled(){return l(w)},set disabled(u){v(w,C(u))}}),u=>v($,C(u)),()=>l($));var de=k(ve,2),J=x(de);aa(J),da(),_(de);var ie=k(de,2),he=x(ie),Te=x(he,!0);_(he);var Se=k(he,2),Ne=x(Se);Ce(Ne),_(Se),_(ie);var Le=k(ie,2);Le.__click=[nl,te];var ta=x(Le,!0);_(Le);var We=k(Le,2),He=x(We),Ye=x(He),na=k(Ye);rn(na,{get rawResultLines(){return l(c)}}),_(He);var qe=k(He,2),Je=x(qe);Ce(Je),_(qe),_(We),_(U),ke(()=>{ce(Te,ue.subtitulos),ce(ta,ue.aplicarAlpha),ce(Ye,`${ue.resultado} `)}),Da(J,()=>l(A),u=>v(A,u)),Ae(Ne,()=>l(o),u=>v(o,u)),Ae(Je,()=>l(c),u=>v(c,u)),le(e,U),Pe()}Ue(["click"]);var ll=(e,t)=>t(),sl=be('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function il(e,t){Ve(t,!0);const n=ue.aplicarColor,r="&HFFFFFF&",i="&H000000&";let o=S(""),c=S(""),a=S(r),p=S(i),b=S(r),m=S(i),z=S(r),y=S(i),F=S(r),h=S(i),E=S(r),R=S(i),D=S(!1),T=S(!0),j=S(!0),N=S(!0),w=S(!0),L=S(void 0),K=S(void 0),M=S(void 0),Q=S(void 0),$=S(void 0),A=S(!1);function G(){var u,_e,V,P;(u=l(K))==null||u.disable(),(_e=l(M))==null||_e.disable(),(V=l(Q))==null||V.disable(),(P=l($))==null||P.disable()}function ae(){var u,_e,V,P;l(T)&&l(j)&&l(N)&&l(w)&&((u=l(K))==null||u.enable(),(_e=l(M))==null||_e.disable(),(V=l(Q))==null||V.disable(),(P=l($))==null||P.disable())}function I(){var u;(u=l(L))==null||u.disable()}function Y(){var u;l(T)&&l(j)&&l(N)&&l(w)&&((u=l(L))==null||u.enable())}function te(){const u=[],_e=l(o).split(`
`);for(const V of _e){if(V.length==0)continue;const P=Ge(V);P!=null&&u.push(P)}if(!l(D)){const V=Me(l(a));if(V==null){alert(`Color total de inicio inválido: ${l(a)}`);return}const P=Me(l(p));if(P==null){alert(`Color total de fin inválido: ${l(p)}`);return}const X=ia(V,P,u.length);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){const d=X[s],ee=ge(u[s].content);So(ee,d.blue,d.green,d.red),u[s].content=xe(ee);const oe=ye(u[s]);s>0&&(Z+=`
`),Z+=oe}v(c,C(Z));return}if(!l(T)){const V=Me(l(b));if(V==null){alert(`Color 1 de inicio inválido: ${l(b)}`);return}const P=Me(l(m));if(P==null){alert(`Color 1 de fin inválido: ${l(m)}`);return}const X=ia(V,P,u.length);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){const d=X[s],ee=ge(u[s].content);wo(ee,d.blue,d.green,d.red),u[s].content=xe(ee);const oe=ye(u[s]);s>0&&(Z+=`
`),Z+=oe}v(c,C(Z))}if(!l(j)){const V=Me(l(z));if(V==null){alert(`Color 2 de inicio inválido: ${l(z)}`);return}const P=Me(l(y));if(P==null){alert(`Color 2 de fin inválido: ${l(y)}`);return}const X=ia(V,P,u.length);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){const d=X[s],ee=ge(u[s].content);Co(ee,d.blue,d.green,d.red),u[s].content=xe(ee);const oe=ye(u[s]);s>0&&(Z+=`
`),Z+=oe}v(c,C(Z))}if(!l(N)){const V=Me(l(F));if(V==null){alert(`Color 3 de inicio inválido: ${l(F)}`);return}const P=Me(l(h));if(P==null){alert(`Color 3 de fin inválido: ${l(h)}`);return}const X=ia(V,P,u.length);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){const d=X[s],ee=ge(u[s].content);Ro(ee,d.blue,d.green,d.red),u[s].content=xe(ee);const oe=ye(u[s]);s>0&&(Z+=`
`),Z+=oe}v(c,C(Z))}if(!l(w)){const V=Me(l(E));if(V==null){alert(`Color 4 de inicio inválido: ${l(E)}`);return}const P=Me(l(R));if(P==null){alert(`Color 4 de fin inválido: ${l(R)}`);return}const X=ia(V,P,u.length);l(A)&&X.reverse();let Z="";for(let s=0;s<u.length;s++){const d=X[s],ee=ge(u[s].content);Lo(ee,d.blue,d.green,d.red),u[s].content=xe(ee);const oe=ye(u[s]);s>0&&(Z+=`
`),Z+=oe}v(c,C(Z))}}Qe(()=>{v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var U=sl();Ke(u=>{Xe.title=n});var B=x(U);B.textContent=n;var q=k(B,4);Fe(ze(q,{label:"Color total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>G(),onDisabled:()=>ae(),get startValue(){return l(a)},set startValue(u){v(a,C(u))},get endValue(){return l(p)},set endValue(u){v(p,C(u))},get disabled(){return l(D)},set disabled(u){v(D,C(u))}}),u=>v(L,C(u)),()=>l(L));var re=k(q,2);Fe(ze(re,{label:"Color 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(b)},set startValue(u){v(b,C(u))},get endValue(){return l(m)},set endValue(u){v(m,C(u))},get disabled(){return l(T)},set disabled(u){v(T,C(u))}}),u=>v(K,C(u)),()=>l(K));var ne=k(re,2);Fe(ze(ne,{label:"Color 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(z)},set startValue(u){v(z,C(u))},get endValue(){return l(y)},set endValue(u){v(y,C(u))},get disabled(){return l(j)},set disabled(u){v(j,C(u))}}),u=>v(M,C(u)),()=>l(M));var fe=k(ne,2);Fe(ze(fe,{label:"Color 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(F)},set startValue(u){v(F,C(u))},get endValue(){return l(h)},set endValue(u){v(h,C(u))},get disabled(){return l(N)},set disabled(u){v(N,C(u))}}),u=>v(Q,C(u)),()=>l(Q));var ve=k(fe,2);Fe(ze(ve,{label:"Color 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>I(),onDisabled:()=>Y(),get startValue(){return l(E)},set startValue(u){v(E,C(u))},get endValue(){return l(R)},set endValue(u){v(R,C(u))},get disabled(){return l(w)},set disabled(u){v(w,C(u))}}),u=>v($,C(u)),()=>l($));var de=k(ve,2),J=x(de);aa(J),da(),_(de);var ie=k(de,2),he=x(ie),Te=x(he,!0);_(he);var Se=k(he,2),Ne=x(Se);Ce(Ne),_(Se),_(ie);var Le=k(ie,2);Le.__click=[ll,te];var ta=x(Le,!0);_(Le);var We=k(Le,2),He=x(We),Ye=x(He),na=k(Ye);rn(na,{get rawResultLines(){return l(c)}}),_(He);var qe=k(He,2),Je=x(qe);Ce(Je),_(qe),_(We),_(U),ke(()=>{ce(Te,ue.subtitulos),ce(ta,ue.aplicarColor),ce(Ye,`${ue.resultado} `)}),Da(J,()=>l(A),u=>v(A,u)),Ae(Ne,()=>l(o),u=>v(o,u)),Ae(Je,()=>l(c),u=>v(c,u)),le(e,U),Pe()}Ue(["click"]);var ul=(e,t)=>t(),cl=(e,t)=>t(),dl=()=>{},fl=be('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vl(e,t){Ve(t,!0);const n=ue.aplicarSecuenciaPosiciones;let r=S(""),i=S(""),o=S(""),c=S(!1);function a(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const I=[];{const U=l(r).split(`
`);for(const B of U){if(B.length==0)continue;const q=Ge(B);if(q==null)continue;const re=ge(q.content);if(oa(re)==null){alert(`Línea base sin \\pos copiada: '${B}'`),console.log(B);return}I.push(q)}}const Y=[];{const U=l(i).split(`
`);for(const B of U){if(B.length==0)continue;const q=Ge(B);if(q==null)continue;const re=ge(q.content);if(oa(re)==null){alert(`Línea objetivo sin \\pos: '${B}'`),console.log(B);return}Y.push(q)}}let te="";for(let U=0;U<Y.length;U++){const B=Y[U],q=ge(B.content),re=oa(q);if(re==null){const J=ye(B);alert(`Línea objetivo sin \\pos: '${J}'`),console.log(J);return}let ne=re.x,fe=re.y;l(c)&&I.reverse();const ve=p(I),de=[];for(let J=0;J<I.length;J++){const ie=ve[J][0],he=ve[J][1],Te=ne+ie,Se=fe+he;ne=Te,fe=Se,Po(q,Te,Se),B.content=xe(q);const Ne=I[J];B.start=Ne.start,B.end=Ne.end,de.push(structuredClone(B))}l(c)&&(I.reverse(),de.reverse());for(const J of de)te+=ye(J)+`
`}v(o,C(te))}function p(I){const te=[[0,0]];for(let U=0;U<I.length-1;U++){const B=I[U],q=I[U+1],re=ge(B.content),ne=oa(re);if(ne==null)return alert(`Línea base sin \\pos: '${ye(B)}'`),console.log(B),[];const fe=ge(q.content),ve=oa(fe);if(ve==null)return alert(`Línea base sin \\pos: '${ye(q)}'`),console.log(q),[];const de=ve.x-ne.x,J=ve.y-ne.y;te.push([de,J])}return te}async function b(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),v(r,l(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),v(i,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var m=fl();Ke(I=>{Xe.title=n});var z=x(m);z.textContent=n;var y=k(z,2),F=k(x(y),2),h=x(F);Ce(h),_(F),_(y);var E=k(y,2),R=x(E);aa(R),da(),_(E);var D=k(E,2),T=x(D),j=x(T,!0);_(T);var N=k(T,2),w=x(N);Ce(w),_(N),_(D);var L=k(D,2);L.__click=[ul,a];var K=x(L,!0);_(L);var M=k(L,2),Q=x(M),$=x(Q),A=k($);A.__click=[cl,b],A.__keydown=[dl],_(Q);var G=k(Q,2),ae=x(G);Ce(ae),_(G),_(M),_(m),ke(()=>{ce(j,ue.subtitulos),ce(K,ue.aplicarSecuenciaPosiciones),ce($,`${ue.resultado} `)}),Ae(h,()=>l(r),I=>v(r,I)),Da(R,()=>l(c),I=>v(c,I)),Ae(w,()=>l(i),I=>v(i,I)),Ae(ae,()=>l(o),I=>v(o,I)),le(e,m),Pe()}Ue(["click","keydown"]);var pl=(e,t)=>t(),gl=(e,t)=>t(),bl=()=>{},hl=be('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function _l(e,t){Ve(t,!0);const n=ue.dividirSilabas;let r=S(""),i=S("");function o(){if(l(r).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const L=l(r).split(`
`);let K="";for(let M=0;M<L.length;M++){const Q=L[M];if(Q.length==0)continue;const $=Ge(Q);if($==null){console.error(`line ${M+1}: invalid line`);break}Ao($);const A=ye($);M>0&&(K+=`
`),K+=A}v(i,C(K))}async function c(){await navigator.clipboard.writeText(l(i)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),v(r,l(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),v(r,l(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`)});var a=hl();Ke(L=>{Xe.title=n});var p=x(a);p.textContent=n;var b=k(p,2),m=x(b),z=x(m);_(m);var y=k(m,2),F=x(y);Ce(F),_(y),_(b);var h=k(b,2);h.__click=[pl,o];var E=x(h,!0);_(h);var R=k(h,2),D=x(R),T=x(D),j=k(T);j.__click=[gl,c],j.__keydown=[bl],_(D);var N=k(D,2),w=x(N);Ce(w),_(N),_(R),_(a),ke(()=>{ce(z,`${ue.subtitulos} (romaji)`),ce(E,ue.dividirSilabas),ce(T,`${ue.resultado} `)}),Ae(F,()=>l(r),L=>v(r,L)),Ae(w,()=>l(i),L=>v(i,L)),le(e,a),Pe()}Ue(["click","keydown"]);var ml=(e,t)=>t(),xl=be("<button> </button>"),yl=be('<p class="preview"> <b> </b></p>'),kl=(e,t)=>t(),Al=()=>{},Nl=be('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <button class="button is-link is-fullwidth">Actualizar karaoke</button> <div class="mb-2"><label class="label" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function El(e,t){Ve(t,!0);const n=ue.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let i=S(r),o=S(C([])),c=S(""),a=S(C([])),p=S(0);function b(){const G=Ge(l(i));if(G==null)return;const ae=ge(G.content);Ka(ae);const I=0;let Y=l(a)[l(p)].index+1,te=0;for(let J=0;J<=l(p);J++){const ie=l(a)[J];ie.centiseconds!=null&&(te+=ie.centiseconds)}const U=ga(G.start),B=ga(G.end),q=ae.slice(I,Y);G.content=xe(q);const re=te/100;G.end=Ea(U+re),v(c,C(ye(G)));let ne=!0,fe=0;for(;ne;){const J=ae[Y+1];if((J==null?void 0:J.name)!="text"){ne=!1;break}if(ne=J.value.replaceAll(" ","").length===0,ne&&(Y+=2,fe++),fe>l(a).length)break}let ve=0;for(let J=l(p)+1+fe;J<l(a).length;J++){const ie=l(a)[J];ie.centiseconds!=null&&(ve+=ie.centiseconds)}const de=ae.slice(Y);G.end=Ea(B),G.start=Ea(B-ve/100),G.content=xe(de),v(c,l(c)+(`
`+ye(G))),v(o,C([xe(q.filter(J=>J.name=="text")),xe(de.filter(J=>J.name=="text"))]))}async function m(){await navigator.clipboard.writeText(l(c)),alert("¡Líneas copiadas al portapapeles!")}function z(){v(a,C([]));const G=Ge(l(i));if(G==null)return[];const ae=ge(G.content);Ka(ae);for(let I=0;I<ae.length;I++){const Y=ae[I];if(Y.name!="text")continue;l(a).push({index:I,text:Y.value.replaceAll(" ",""),centiseconds:null});const te=I-1;if(te<0)continue;const U=ae[te];if(U.name!="effect")continue;const B=U.tags.find(re=>re.name===g.kLowerCase||re.name===g.kUpperCase||re.name===g.kf||re.name===g.ko);B==null||!(B.name===g.kLowerCase||B.name===g.kUpperCase||B.name===g.kf||B.name===g.ko)||(l(a)[l(a).length-1].centiseconds=B.value)}return v(p,C(Math.floor(l(a).length/2))),l(a)}Qe(()=>{z(),b()});var y=Nl();Ke(G=>{Xe.title=n});var F=x(y);F.textContent=n;var h=k(F,2),E=k(x(h),2),R=x(E);aa(R),ua(R,"placeholder",r),_(E),_(h);var D=k(h,2);D.__click=[ml,z];var T=k(D,2),j=k(x(T),2);pa(j,21,()=>l(a),va,(G,ae,I)=>{var Y=Be(),te=Oe(Y);{var U=B=>{var q=xl();q.__click=()=>{v(p,C(I)),b()};var re=x(q,!0);_(q),ke(()=>{Sa(q,`button ${(I===l(p)?"is-link":"")??""}`),ua(q,"title",`${l(ae).text}: ${l(ae).centiseconds} centésimas`),ce(re,l(ae).text)}),le(B,q)};$e(te,B=>{l(ae).text.replaceAll(" ","").length>0&&B(U)})}le(G,Y)}),_(j),_(T);var N=k(T,2),w=k(x(N),2);pa(w,17,()=>l(o),va,(G,ae,I)=>{var Y=yl(),te=x(Y);te.nodeValue=`Línea ${I+1}: `;var U=k(te),B=x(U,!0);_(U),_(Y),ke(()=>ce(B,l(ae))),le(G,Y)}),_(N);var L=k(N,2),K=x(L),M=x(K),Q=k(M);Q.__click=[kl,m],Q.__keydown=[Al],_(K);var $=k(K,2),A=x($);Ce(A),_($),_(L),_(y),ke(()=>ce(M,`${ue.resultado} `)),Ae(R,()=>l(i),G=>v(i,G)),Ae(A,()=>l(c),G=>v(c,G)),le(e,y),Pe()}Ue(["click","keydown"]);function $l(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}async function Sl(e,t,n,r,i){var c;const o=[...((c=l(t))==null?void 0:c.files)??[]];v(n,0),v(r,C([]));for(const a of o){const p=await a.text(),b=po(p);if(b==null){console.error("archivo inválido",a.name);continue}const m=i(b);v(n,l(n)+m.length),l(r).push({fileName:a.name,errors:m})}l(t)!=null&&(l(t).value="")}var wl=be("<div><b> </b></div>"),Cl=be('<div class="text-success svelte-1o3wv6c">¡Todo en orden!</div>'),Rl=be(`<span class="ignore-rule svelte-1o3wv6c">Para ignorar, colocar <b> </b> en
                                campo de efecto.</span>`),Ll=be('<span class="file-error svelte-1o3wv6c"> <textarea class="textarea is-danger svelte-1o3wv6c" readonly="" rows="1"></textarea> <!></span>'),Fl=be('<div class="result svelte-1o3wv6c"><span> </span> <!> <div class="file-errors svelte-1o3wv6c"></div></div>'),Dl=be('<section class="svelte-1o3wv6c"><h1></h1> <input type="file" accept=".ass" multiple> <!> <!></section>');function Tl(e,t){Ve(t,!0);const n=ue.validarDialogos;let r=S(void 0),i=S(0),o=S(C([]));function c(E){const R=[],D=E.scriptInfo.properties.get("WrapStyle")??"",T="0";D!==T&&R.push({location:"Script info, wrap style",error:`Se esperaba "${T}", pero se encontró "${D}"`,text:D,ignoreRule:""});const j=E.scriptInfo.properties.get("ScaledBorderAndShadow")??"",N="yes";j!==N&&R.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${N}", pero se encontró "${j}"`,text:j,ignoreRule:""});for(let w=0;w<E.events.lines.length;w++){const L=E.events.lines[w],K=w+1;if(L.type==Ra||L.content==="")continue;const M=L.effect.split(" ").filter(A=>A.startsWith("ignorar-"));if(M.includes("ignorar-linea"))continue;E.styles.styles.some(A=>L.style===A.name)||R.push({location:`Línea ${K}`,error:"Estilo no encontrado",text:L.style,ignoreRule:"ignorar-estilo"});const Q=ge(L.content);let $=xe(Q.filter(A=>A.name==="text"));if(!M.includes("ignorar-inicio")){const A=a($);A!=null&&R.push({location:`Línea ${K}`,error:A,text:L.content,ignoreRule:"ignorar-inicio"})}if(!M.includes("ignorar-espacios")){const A=p($);A!=null&&R.push({location:`Línea ${K}`,error:A,text:L.content,ignoreRule:"ignorar-espacios"})}if(!M.includes("ignorar-fin")){$=$l($," ");const A=[".",",",";","...","!","?",":","~","-..."];A.some(G=>$.endsWith(G))||R.push({location:`Línea ${K}`,error:`No tiene un fin de línea válido: ${A.map(G=>`"${G}"`).join(", ")}`,text:L.content,ignoreRule:"ignorar-fin"})}}return R}function a(E){return E.startsWith("... ")?"los tres puntos van pegados":(E.startsWith("...")&&(E=E.substring(3)),/^(-\s|¡|¿|")*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(E)?null:"inicio inválido")}function p(E){return E.includes("  ")?"hay dos espacios seguidos":null}var b=Dl();Ke(E=>{Xe.title=n});var m=x(b);m.textContent=n;var z=k(m,2);z.__change=[Sl,r,i,o,c],Fe(z,E=>v(r,E),()=>l(r));var y=k(z,2);{var F=E=>{var R=wl(),D=x(R),T=x(D);_(D),_(R),ke(()=>{Sa(R,`text-${(l(i)==0?"success":"failed")??""} mt-2 svelte-1o3wv6c`),ce(T,`Errores detectados: ${l(i)??""}`)}),le(E,R)};$e(y,E=>{l(o).length>0&&E(F)})}var h=k(y,2);pa(h,17,()=>l(o),va,(E,R)=>{var D=Fl(),T=x(D),j=x(T,!0);_(T);var N=k(T,2);{var w=K=>{var M=Cl();le(K,M)};$e(N,K=>{l(R).errors.length==0&&K(w)})}var L=k(N,2);pa(L,21,()=>l(R).errors,va,(K,M)=>{var Q=Ll(),$=x(Q),A=k($);Ce(A);var G=k(A,2);{var ae=I=>{var Y=Rl(),te=k(x(Y)),U=x(te,!0);_(te),da(),_(Y),ke(()=>ce(U,l(M).ignoreRule)),le(I,Y)};$e(G,I=>{l(M).ignoreRule!=""&&I(ae)})}_(Q),ke(()=>{ce($,`${l(M).location??""}: ${l(M).error??""}. `),Cn(A,l(M).text)}),le(K,Q)}),_(L),_(D),ke(()=>{Sa(T,`name text-${(l(R).errors.length==0?"success":"failed")??""} svelte-1o3wv6c`),ce(j,l(R).fileName)}),le(E,D)}),_(b),le(e,b),Pe()}Ue(["change"]);function Il(e,t){Ve(t,!0);let n=S("");Qe(()=>{Ba.subscribe(m=>{m!=null&&v(n,C(m))});const p=new URLSearchParams(location.search).get("pagina")??"",b=Rn(p)?p:"inicio";Ba.set(b)});var r=Be(),i=Oe(r);{var o=a=>{qo(a)},c=a=>{var p=Be(),b=Oe(p);{var m=y=>{Ko(y,{})},z=y=>{var F=Be(),h=Oe(F);{var E=D=>{vl(D,{})},R=D=>{var T=Be(),j=Oe(T);{var N=L=>{ol(L,{})},w=L=>{var K=Be(),M=Oe(K);{var Q=A=>{il(A,{})},$=A=>{var G=Be(),ae=Oe(G);{var I=te=>{Tl(te,{})},Y=te=>{var U=Be(),B=Oe(U);{var q=ne=>{El(ne,{})},re=ne=>{var fe=Be(),ve=Oe(fe);{var de=ie=>{_l(ie,{})},J=ie=>{var he=Be(),Te=Oe(he);{var Se=Ne=>{Wo(Ne,{})};$e(Te,Ne=>{l(n)=="acercaDe"&&Ne(Se)},!0)}le(ie,he)};$e(ve,ie=>{l(n)=="karaokes.dividirSilabas"?ie(de):ie(J,!1)},!0)}le(ne,fe)};$e(B,ne=>{l(n)=="karaokes.dividirKaraoke"?ne(q):ne(re,!1)},!0)}le(te,U)};$e(ae,te=>{l(n)=="dialogos.validarDialogos"?te(I):te(Y,!1)},!0)}le(A,G)};$e(M,A=>{l(n)=="carteles.aplicarColor"?A(Q):A($,!1)},!0)}le(L,K)};$e(j,L=>{l(n)=="carteles.aplicarAlpha"?L(N):L(w,!1)},!0)}le(D,T)};$e(h,D=>{l(n)=="carteles.aplicarSecuenciaPosiciones"?D(E):D(R,!1)},!0)}le(y,F)};$e(b,y=>{l(n)=="carteles.copiarMovimiento"?y(m):y(z,!1)},!0)}le(a,p)};$e(i,a=>{l(n)=="inicio"?a(o):a(c,!1)})}le(e,r),Pe()}var Vl=be('<section class="svelte-70scd4"><!></section>');function Ul(e){var t=Vl(),n=x(t);Il(n,{}),_(t),le(e,t)}export{Ul as component,jl as universal};
