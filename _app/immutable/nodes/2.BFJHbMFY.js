import{d as De,t as Q,e as qe,s as ae,a as M,b as oa,c as Se}from"../chunks/CwJ6XYGs.js";import"../chunks/BF8XUEzE.js";import{a9 as It,aa as Nt,ab as ka,J as wt,X as pt,Q as Ge,ag as Sa,ae as Aa,R as Ra,O as sa,g as n,j as Ta,V as Oa,W as Lt,Y as _t,a0 as rt,am as Ia,Z as ia,_ as St,$ as Na,av as la,aq as ca,N as La,m as Da,H as Dt,aw as mt,a3 as Fa,ax as At,ay as Ma,az as Rt,aA as Ft,aB as Va,ap as Ha,aC as Ga,aD as ua,aE as $a,ad as ja,T as Ba,n as Pa,aF as Ua,b as da,a2 as fa,a1 as va,y as ye,a as ha,a7 as x,l as c,a6 as Fe,aG as Xe,C as h,E,D as f,A as oe,B as we,aH as et,z as be,a8 as Ka}from"../chunks/CCHRc5u3.js";import{a as Ya,p as C,i as ne,b as Ce}from"../chunks/CBNot3_l.js";import{f as qa,p as Ke,h as fe,i as Xa,j as ot,r as za,T as Ue,k as Ja,l as pe,m as _e,t as ue,n as Ye,o as Re,B as Wa,c as Qa,q as Za,u as en,b as tt,v as tn,w as Et,x as Ve,y as an,z as nn,A as rn,C as on,D as sn,E as He,F as ln,G as cn,H as un,I as dn,J as fn,K as vn,L as hn,s as We,M as Mt,N as Vt,O as xt,P as Qe,Q as Ht,R as gn,S as bn,U as pn,a as Gt,V as _n}from"../chunks/BCkH9Zrl.js";import{p as Le}from"../chunks/C-7UMIG7.js";function mn(e){var t=ka,a=wt;It(null),Nt(null);try{return e()}finally{It(t),Nt(a)}}function Tt(e,t,a,r=a){e.addEventListener(t,()=>mn(a));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),qa()}function st(e,t){return t}function En(e,t,a,r){for(var o=[],s=t.length,l=0;l<s;l++)Va(t[l].e,o,!0);var d=s>0&&o.length===0&&a!==null;if(d){var v=a.parentNode;Ha(v),v.append(a),r.clear(),ze(e,t[0].prev,t[s-1].next)}Ga(o,()=>{for(var p=0;p<s;p++){var _=t[p];d||(r.delete(_.k),ze(e,_.prev,_.next)),ua(_.e,!d)}})}function it(e,t,a,r,o,s=null){var l=e,d={items:new Map,first:null},v=(t&la)!==0;if(v){var p=e;l=Ge?pt(Sa(p)):p.appendChild(Aa())}Ge&&Ra();var _=null,w=!1,u=Ta(()=>{var g=a();return La(g)?g:g==null?[]:ca(g)});sa(()=>{var g=n(u),b=g.length;if(w&&b===0)return;w=b===0;let S=!1;if(Ge){var O=l.data===Oa;O!==(b===0)&&(l=Lt(),pt(l),_t(!1),S=!0)}if(Ge){for(var y=null,D,V=0;V<b;V++){if(rt.nodeType===8&&rt.data===Ia){l=rt,S=!0,_t(!1);break}var A=g[V],T=r(A,V);D=ga(rt,d,y,null,A,T,V,o,t,a),d.items.set(T,D),y=D}b>0&&pt(Lt())}Ge||xn(g,d,l,o,t,r,a),s!==null&&(b===0?_?ia(_):_=St(()=>s(l)):_!==null&&Na(_,()=>{_=null})),S&&_t(!0),n(u)}),Ge&&(l=rt)}function xn(e,t,a,r,o,s,l){var k,F,K,$;var d=(o&Ma)!==0,v=(o&(Rt|At))!==0,p=e.length,_=t.items,w=t.first,u=w,g,b=null,S,O=[],y=[],D,V,A,T;if(d)for(T=0;T<p;T+=1)D=e[T],V=s(D,T),A=_.get(V),A!==void 0&&((k=A.a)==null||k.measure(),(S??(S=new Set)).add(A));for(T=0;T<p;T+=1){if(D=e[T],V=s(D,T),A=_.get(V),A===void 0){var q=u?u.e.nodes_start:a;b=ga(q,t,b,b===null?t.first:b.next,D,V,T,r,o,l),_.set(V,b),O=[],y=[],u=b.next;continue}if(v&&Cn(A,D,T,o),A.e.f&mt&&(ia(A.e),d&&((F=A.a)==null||F.unfix(),(S??(S=new Set)).delete(A))),A!==u){if(g!==void 0&&g.has(A)){if(O.length<y.length){var G=y[0],I;b=G.prev;var J=O[0],X=O[O.length-1];for(I=0;I<O.length;I+=1)$t(O[I],G,a);for(I=0;I<y.length;I+=1)g.delete(y[I]);ze(t,J.prev,X.next),ze(t,b,J),ze(t,X,G),u=G,b=X,T-=1,O=[],y=[]}else g.delete(A),$t(A,u,a),ze(t,A.prev,A.next),ze(t,A,b===null?t.first:b.next),ze(t,b,A),b=A;continue}for(O=[],y=[];u!==null&&u.k!==V;)u.e.f&mt||(g??(g=new Set)).add(u),y.push(u),u=u.next;if(u===null)continue;A=u}O.push(A),b=A,u=A.next}if(u!==null||g!==void 0){for(var U=g===void 0?[]:ca(g);u!==null;)u.e.f&mt||U.push(u),u=u.next;var te=U.length;if(te>0){var se=o&la&&p===0?a:null;if(d){for(T=0;T<te;T+=1)(K=U[T].a)==null||K.measure();for(T=0;T<te;T+=1)($=U[T].a)==null||$.fix()}En(t,U,se,_)}}d&&Fa(()=>{var ee;if(S!==void 0)for(A of S)(ee=A.a)==null||ee.apply()}),wt.first=t.first&&t.first.e,wt.last=b&&b.e}function Cn(e,t,a,r){r&Rt&&Ft(e.v,t),r&At?Ft(e.i,a):e.i=a}function ga(e,t,a,r,o,s,l,d,v,p){var _=(v&Rt)!==0,w=(v&$a)===0,u=_?w?Da(o):Dt(o):o,g=v&At?Dt(l):l,b={i:g,v:u,k:s,a:null,e:null,prev:a,next:r};try{return b.e=St(()=>d(e,u,g,p),Ge),b.e.prev=a&&a.e,b.e.next=r&&r.e,a===null?t.first=b:(a.next=b,a.e.next=b.e),r!==null&&(r.prev=b,r.e.prev=b.e),b}finally{}}function $t(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,o=t?t.e.nodes_start:a,s=e.e.nodes_start;s!==r;){var l=ja(s);o.before(s),s=l}}function ze(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function yn(e,t,...a){var r=e,o=Pa,s;sa(()=>{o!==(o=t())&&(s&&(ua(s),s=null),s=St(()=>o(r,...a)))},Ba),Ge&&(r=rt)}function ba(e){var t,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(a=ba(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function wn(){for(var e,t,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(t=ba(e))&&(r&&(r+=" "),r+=t);return r}function kn(e){return typeof e=="object"?wn(e):e??""}function me(e,t,a=t){var r=Ua();Tt(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=Ct(e)?yt(s):s,a(s),r&&s!==(s=t())){var l=e.selectionStart,d=e.selectionEnd;e.value=s??"",d!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(d,e.value.length))}}),(Ge&&e.defaultValue!==e.value||da(t)==null&&e.value)&&a(Ct(e)?yt(e.value):e.value),fa(()=>{var o=t();Ct(e)&&o===yt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function bt(e,t,a=t){Tt(e,"change",r=>{var o=r?e.defaultChecked:e.checked;a(o)}),(Ge&&e.defaultChecked!==e.checked||da(t)==null)&&a(e.checked),fa(()=>{var r=t();e.checked=!!r})}function Ct(e){var t=e.type;return t==="number"||t==="range"}function yt(e){return e===""?null:+e}function pa(e,t,a){if(e.multiple)return Rn(e,t);for(var r of e.options){var o=ut(r);if(Ya(o,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Sn(e,t){va(()=>{var a=new MutationObserver(()=>{var r=e.__value;pa(e,r)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function An(e,t,a=t){var r=!0;Tt(e,"change",o=>{var s=o?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(s),ut);else{var d=e.querySelector(s)??e.querySelector("option:not([disabled])");l=d&&ut(d)}a(l)}),va(()=>{var o=t();if(pa(e,o,r),r&&o===void 0){var s=e.querySelector(":checked");s!==null&&(o=ut(s),a(o))}e.__value=o,r=!1}),Sn(e)}function Rn(e,t){for(var a of e.options)a.selected=~t.indexOf(ut(a))}function ut(e){return"__value"in e?e.__value:e.value}const Tn=!0,Yo=Object.freeze(Object.defineProperty({__proto__:null,prerender:Tn},Symbol.toStringTag,{value:"Module"}));var On=(e,t)=>t(),In=()=>{},Nn=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Ln(e,t){ye(t,!0);const a=ue.copiarMovimiento;let r=x("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),o=x(""),s=x("");ha(()=>{l(n(r),n(o))});function l(I,J){if(J.length==0)return;const X=J.split(`
`);console.log(X);const U=Ke(I);if(U==null){console.error("invalid base line",I);return}const te=fe(U.content),se=Xa(te);if(se==null){console.error("base move not found");return}const k=se.x2-se.x1,F=se.y2-se.y1;let K="";for(let $=0;$<X.length;$++){const ee=X[$];if(ee.length==0)continue;const j=Ke(ee);if(j==null){console.error(`line ${$+1}: invalid line`);break}const Y=fe(j.content),z=ot(Y);if(z==null){console.error(`line ${$+1}: pos not found`);break}za(Y,Ue.pos);const re=z.x,ie=z.y,ve=z.x+k,ge=z.y+F;Ja(Y,re,ie,ve,ge,se.t1,se.t2);const W=pe(Y);j.content=W;const N=_e(j);console.log(N),$>0&&(K+=`
`),K+=N}c(s,C(K))}async function d(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}Fe(()=>{for(let I=1;I<=10;I++){const J=182+I*5,X=421+I*7;c(o,n(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${J},${X})}LINEA ${I}
`)}});var v=Nn();qe(I=>{Xe.title=a});var p=h(v);p.textContent=a;var _=E(p,2),w=E(h(_),2),u=h(w);Ye(u),f(w),f(_);var g=E(_,2),b=h(g),S=h(b,!0);f(b);var O=E(b,2),y=h(O);Re(y),f(O),f(g);var D=E(g,2),V=h(D),A=h(V),T=E(A);T.__click=[On,d],T.__keydown=[In],f(V);var q=E(V,2),G=h(q);Re(G),f(q),f(D),f(v),oe(()=>{ae(S,ue.subtitulos),ae(A,`${ue.resultado} `)}),me(u,()=>n(r),I=>c(r,I)),me(y,()=>n(o),I=>c(o,I)),me(G,()=>n(s),I=>c(s,I)),M(e,v),we()}De(["click","keydown"]);var Dn=Q('<span class="version svelte-1ghhrj6"><a target="_blank"> </a></span>'),Fn=Q(`<div class="text-column"><h1></h1> <!> <div class="kagamin svelte-1ghhrj6"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-1ghhrj6"></div> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <hr class="svelte-1ghhrj6"> <p>Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- <b>[EC] DarkAngel</b>: por desarrollar <b>SyncRajoEndline</b> y por
            la idea de separar sílabas en karaokes.</li> <li>- <b>[GX] Gonxas</b>: por el hardcore testing y el script para crear
            archivos AVS.</li> <li>- <b>[Sr] Hell</b>: por proveer un servicio de host.</li></ul> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <hr class="svelte-1ghhrj6"> <p>Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function Mn(e,t){ye(t,!0);const a=ue.acercaDe;let r=x(C(Wa.parse({})));Fe(async()=>{Qa.subscribe(v=>{v!=null&&c(r,C(v))})});var o=Fn();qe(v=>{Xe.title=a});var s=h(o);s.textContent=a;var l=E(s,2);{var d=v=>{var p=Dn(),_=h(p),w=h(_);f(_),f(p),oe((u,g)=>{tt(_,"href",u),ae(w,`Versión ${n(r).ref??""}.${g??""} desplegada
                por
                ${n(r).actor??""}`)},[()=>Za(n(r).actor,n(r).repo,n(r).sha),()=>en(n(r).sha)]),M(v,p)};ne(l,v=>{n(r).sha!=""&&v(d)})}et(20),f(o),M(e,o),we()}var Vn=Q('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Hn(e){var t=Vn();qe(a=>{Xe.title="Asu"}),M(e,t)}var Gn=(e,t)=>t(),$n=Q("<b> </b>"),jn=Q('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function $e(e,t){ye(t,!0);let a=Le(t,"label",3,""),r=Le(t,"disabled",15,!1),o=Le(t,"startValue",15,""),s=Le(t,"endValue",15,""),l=Le(t,"startPlaceholder",3,""),d=Le(t,"endPlaceholder",3,""),v=x(void 0);function p(){var X;if((X=n(v))!=null&&X.checked){_();return}w()}function _(){r()&&(r(!1),n(v)&&(n(v).checked=!0),t.onEnabled&&t.onEnabled())}function w(){r()||(r(!0),n(v)&&(n(v).checked=!1),t.onDisabled&&t.onDisabled())}Fe(()=>{n(v)&&(n(v).checked=!r())});var u=jn(),g=h(u),b=h(g),S=h(b);S.__change=[Gn,p],Ce(S,X=>c(v,X),()=>n(v));var O=E(S,2);{var y=X=>{var U=oa();oe(()=>ae(U,`${a()??""}
                (deshabilitado)`)),M(X,U)},D=X=>{var U=$n(),te=h(U,!0);f(U),oe(()=>ae(te,a())),M(X,U)};ne(O,X=>{r()?X(y):X(D,!1)})}f(b),f(g);var V=E(g,2),A=h(V),T=E(h(A),2),q=h(T);Ye(q),f(T),f(A);var G=E(A,2),I=E(h(G),2),J=h(I);return Ye(J),f(I),f(G),f(V),f(u),oe(()=>{tt(q,"placeholder",l()),q.disabled=r(),tt(J,"placeholder",d()),J.disabled=r()}),me(q,o),me(J,s),M(e,u),we({enable:_,disable:w})}De(["change"]);function lt(e,t){const a=[];for(let r=e;r<=t;r++){const o=tn(r);a.push(o)}return a}function ct(e,t,a){const r=Array(a),o=Et(e.blue,t.blue,a);if(o.length!==a)return console.error(`ERROR: blue interpolated values ${o.length} don't match intervals ${a}`),[];const s=Et(e.green,t.green,a);if(s.length!==a)return console.error(`ERROR: green interpolated values ${s.length} don't match intervals ${a}`),[];const l=Et(e.red,t.red,a);if(l.length!==a)return console.error(`ERROR: red interpolated values ${l.length} don't match intervals ${a}`),[];for(var d=0;d<a;d++){const v=Math.floor(o[d]),p=Math.floor(s[d]),_=Math.floor(l[d]);r[d]={blue:v,green:p,red:_}}return r}var Bn=(e,t)=>t(),Pn=()=>{},Un=Q('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function _a(e,t){ye(t,!0);async function a(){await navigator.clipboard.writeText(t.rawResultLines),alert(ue.lineasCopiadas)}var r=Un();r.__click=[Bn,a],r.__keydown=[Pn],oe(()=>tt(r,"title",ue.copiar)),M(e,r),we()}De(["click","keydown"]);var Kn=(e,t)=>t(),Yn=Q('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function qn(e,t){ye(t,!0);const a=ue.aplicarAlpha,r="0",o="FF";let s=x(""),l=x(""),d=x("0"),v=x("FF"),p=x("0"),_=x("FF"),w=x("0"),u=x("FF"),g=x("0"),b=x("FF"),S=x("0"),O=x("FF"),y=x(!1),D=x(!0),V=x(!0),A=x(!0),T=x(!0),q=x(void 0),G=x(void 0),I=x(void 0),J=x(void 0),X=x(void 0),U=x(!1);function te(){var i,Z,R,L;(i=n(G))==null||i.disable(),(Z=n(I))==null||Z.disable(),(R=n(J))==null||R.disable(),(L=n(X))==null||L.disable()}function se(){var i,Z,R,L;n(D)&&n(V)&&n(A)&&n(T)&&((i=n(G))==null||i.enable(),(Z=n(I))==null||Z.disable(),(R=n(J))==null||R.disable(),(L=n(X))==null||L.disable())}function k(){var i;(i=n(q))==null||i.disable()}function F(){var i;n(D)&&n(V)&&n(A)&&n(T)&&((i=n(q))==null||i.enable())}function K(){const i=[],Z=n(s).split(`
`);for(const R of Z){if(R.length==0)continue;const L=Ke(R);L!=null&&i.push(L)}if(!n(y)){const R=Ve(n(d)),L=Ve(n(v));if(R>=L){alert("El inicio de alpha total debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(L>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const H=lt(R,L);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){let P=Math.floor(H.length*m/i.length);P>=H.length&&(P=H.length-1);const ce=`&H${H[P]}&`,ke=fe(i[m].content);an(ke,ce),i[m].content=pe(ke);const Pe=_e(i[m]);m>0&&(B+=`
`),B+=Pe}c(l,C(B));return}if(!n(D)){const R=Ve(n(p)),L=Ve(n(_));if(R>=L){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(L>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const H=lt(R,L);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){let P=Math.floor(H.length*m/i.length);P>=H.length&&(P=H.length-1);const ce=`&H${H[P]}&`,ke=fe(i[m].content);nn(ke,ce),i[m].content=pe(ke);const Pe=_e(i[m]);m>0&&(B+=`
`),B+=Pe}c(l,C(B))}if(!n(V)){const R=Ve(n(w)),L=Ve(n(u));if(R>=L){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(L>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const H=lt(R,L);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){let P=Math.floor(H.length*m/i.length);P>=H.length&&(P=H.length-1);const ce=`&H${H[P]}&`,ke=fe(i[m].content);rn(ke,ce),i[m].content=pe(ke);const Pe=_e(i[m]);m>0&&(B+=`
`),B+=Pe}c(l,C(B))}if(!n(A)){const R=Ve(n(g)),L=Ve(n(b));if(R>=L){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(L>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const H=lt(R,L);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){let P=Math.floor(H.length*m/i.length);P>=H.length&&(P=H.length-1);const ce=`&H${H[P]}&`,ke=fe(i[m].content);on(ke,ce),i[m].content=pe(ke);const Pe=_e(i[m]);m>0&&(B+=`
`),B+=Pe}c(l,C(B))}if(!n(T)){const R=Ve(n(S)),L=Ve(n(O));if(R>=L){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(L>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const H=lt(R,L);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){let P=Math.floor(H.length*m/i.length);P>=H.length&&(P=H.length-1);const ce=`&H${H[P]}&`,ke=fe(i[m].content);sn(ke,ce),i[m].content=pe(ke);const Pe=_e(i[m]);m>0&&(B+=`
`),B+=Pe}c(l,C(B))}}Fe(()=>{for(let i=1;i<=10;i++)c(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${i}
`)});var $=Yn();qe(i=>{Xe.title=a});var ee=h($);ee.textContent=a;var j=E(ee,4);Ce($e(j,{label:"Alpha total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>te(),onDisabled:()=>se(),get startValue(){return n(d)},set startValue(i){c(d,C(i))},get endValue(){return n(v)},set endValue(i){c(v,C(i))},get disabled(){return n(y)},set disabled(i){c(y,C(i))}}),i=>c(q,C(i)),()=>n(q));var Y=E(j,2);Ce($e(Y,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(p)},set startValue(i){c(p,C(i))},get endValue(){return n(_)},set endValue(i){c(_,C(i))},get disabled(){return n(D)},set disabled(i){c(D,C(i))}}),i=>c(G,C(i)),()=>n(G));var z=E(Y,2);Ce($e(z,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(w)},set startValue(i){c(w,C(i))},get endValue(){return n(u)},set endValue(i){c(u,C(i))},get disabled(){return n(V)},set disabled(i){c(V,C(i))}}),i=>c(I,C(i)),()=>n(I));var re=E(z,2);Ce($e(re,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(g)},set startValue(i){c(g,C(i))},get endValue(){return n(b)},set endValue(i){c(b,C(i))},get disabled(){return n(A)},set disabled(i){c(A,C(i))}}),i=>c(J,C(i)),()=>n(J));var ie=E(re,2);Ce($e(ie,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(S)},set startValue(i){c(S,C(i))},get endValue(){return n(O)},set endValue(i){c(O,C(i))},get disabled(){return n(T)},set disabled(i){c(T,C(i))}}),i=>c(X,C(i)),()=>n(X));var ve=E(ie,2),ge=h(ve);Ye(ge),et(),f(ve);var W=E(ve,2),N=h(W),Ee=h(N,!0);f(N);var xe=E(N,2),he=h(xe);Re(he),f(xe),f(W);var de=E(W,2);de.__click=[Kn,K];var Ie=h(de,!0);f(de);var je=E(de,2),Ne=h(je),Me=h(Ne),Te=E(Me);_a(Te,{get rawResultLines(){return n(l)}}),f(Ne);var Oe=E(Ne,2),Be=h(Oe);Re(Be),f(Oe),f(je),f($),oe(()=>{ae(Ee,ue.subtitulos),ae(Ie,ue.aplicarAlpha),ae(Me,`${ue.resultado} `)}),bt(ge,()=>n(U),i=>c(U,i)),me(he,()=>n(s),i=>c(s,i)),me(Be,()=>n(l),i=>c(l,i)),M(e,$),we()}De(["click"]);var Xn=(e,t)=>t(),zn=Q('<section class="svelte-do1mnp"><h1></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Jn(e,t){ye(t,!0);const a=ue.aplicarColor,r="&HFFFFFF&",o="&H000000&";let s=x(""),l=x(""),d=x(r),v=x(o),p=x(r),_=x(o),w=x(r),u=x(o),g=x(r),b=x(o),S=x(r),O=x(o),y=x(!1),D=x(!0),V=x(!0),A=x(!0),T=x(!0),q=x(void 0),G=x(void 0),I=x(void 0),J=x(void 0),X=x(void 0),U=x(!1);function te(){var i,Z,R,L;(i=n(G))==null||i.disable(),(Z=n(I))==null||Z.disable(),(R=n(J))==null||R.disable(),(L=n(X))==null||L.disable()}function se(){var i,Z,R,L;n(D)&&n(V)&&n(A)&&n(T)&&((i=n(G))==null||i.enable(),(Z=n(I))==null||Z.disable(),(R=n(J))==null||R.disable(),(L=n(X))==null||L.disable())}function k(){var i;(i=n(q))==null||i.disable()}function F(){var i;n(D)&&n(V)&&n(A)&&n(T)&&((i=n(q))==null||i.enable())}function K(){const i=[],Z=n(s).split(`
`);for(const R of Z){if(R.length==0)continue;const L=Ke(R);L!=null&&i.push(L)}if(!n(y)){const R=He(n(d));if(R==null){alert(`Color total de inicio inválido: ${n(d)}`);return}const L=He(n(v));if(L==null){alert(`Color total de fin inválido: ${n(v)}`);return}const H=ct(R,L,i.length);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){const P=H[m],le=fe(i[m].content);ln(le,P.blue,P.green,P.red),i[m].content=pe(le);const ce=_e(i[m]);m>0&&(B+=`
`),B+=ce}c(l,C(B));return}if(!n(D)){const R=He(n(p));if(R==null){alert(`Color 1 de inicio inválido: ${n(p)}`);return}const L=He(n(_));if(L==null){alert(`Color 1 de fin inválido: ${n(_)}`);return}const H=ct(R,L,i.length);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){const P=H[m],le=fe(i[m].content);cn(le,P.blue,P.green,P.red),i[m].content=pe(le);const ce=_e(i[m]);m>0&&(B+=`
`),B+=ce}c(l,C(B))}if(!n(V)){const R=He(n(w));if(R==null){alert(`Color 2 de inicio inválido: ${n(w)}`);return}const L=He(n(u));if(L==null){alert(`Color 2 de fin inválido: ${n(u)}`);return}const H=ct(R,L,i.length);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){const P=H[m],le=fe(i[m].content);un(le,P.blue,P.green,P.red),i[m].content=pe(le);const ce=_e(i[m]);m>0&&(B+=`
`),B+=ce}c(l,C(B))}if(!n(A)){const R=He(n(g));if(R==null){alert(`Color 3 de inicio inválido: ${n(g)}`);return}const L=He(n(b));if(L==null){alert(`Color 3 de fin inválido: ${n(b)}`);return}const H=ct(R,L,i.length);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){const P=H[m],le=fe(i[m].content);dn(le,P.blue,P.green,P.red),i[m].content=pe(le);const ce=_e(i[m]);m>0&&(B+=`
`),B+=ce}c(l,C(B))}if(!n(T)){const R=He(n(S));if(R==null){alert(`Color 4 de inicio inválido: ${n(S)}`);return}const L=He(n(O));if(L==null){alert(`Color 4 de fin inválido: ${n(O)}`);return}const H=ct(R,L,i.length);n(U)&&H.reverse();let B="";for(let m=0;m<i.length;m++){const P=H[m],le=fe(i[m].content);fn(le,P.blue,P.green,P.red),i[m].content=pe(le);const ce=_e(i[m]);m>0&&(B+=`
`),B+=ce}c(l,C(B))}}Fe(()=>{c(s,n(s)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),c(s,n(s)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var $=zn();qe(i=>{Xe.title=a});var ee=h($);ee.textContent=a;var j=E(ee,4);Ce($e(j,{label:"Color total",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>te(),onDisabled:()=>se(),get startValue(){return n(d)},set startValue(i){c(d,C(i))},get endValue(){return n(v)},set endValue(i){c(v,C(i))},get disabled(){return n(y)},set disabled(i){c(y,C(i))}}),i=>c(q,C(i)),()=>n(q));var Y=E(j,2);Ce($e(Y,{label:"Color 1",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(p)},set startValue(i){c(p,C(i))},get endValue(){return n(_)},set endValue(i){c(_,C(i))},get disabled(){return n(D)},set disabled(i){c(D,C(i))}}),i=>c(G,C(i)),()=>n(G));var z=E(Y,2);Ce($e(z,{label:"Color 2",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(w)},set startValue(i){c(w,C(i))},get endValue(){return n(u)},set endValue(i){c(u,C(i))},get disabled(){return n(V)},set disabled(i){c(V,C(i))}}),i=>c(I,C(i)),()=>n(I));var re=E(z,2);Ce($e(re,{label:"Color 3",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(g)},set startValue(i){c(g,C(i))},get endValue(){return n(b)},set endValue(i){c(b,C(i))},get disabled(){return n(A)},set disabled(i){c(A,C(i))}}),i=>c(J,C(i)),()=>n(J));var ie=E(re,2);Ce($e(ie,{label:"Color 4",startPlaceholder:r,endPlaceholder:o,onEnabled:()=>k(),onDisabled:()=>F(),get startValue(){return n(S)},set startValue(i){c(S,C(i))},get endValue(){return n(O)},set endValue(i){c(O,C(i))},get disabled(){return n(T)},set disabled(i){c(T,C(i))}}),i=>c(X,C(i)),()=>n(X));var ve=E(ie,2),ge=h(ve);Ye(ge),et(),f(ve);var W=E(ve,2),N=h(W),Ee=h(N,!0);f(N);var xe=E(N,2),he=h(xe);Re(he),f(xe),f(W);var de=E(W,2);de.__click=[Xn,K];var Ie=h(de,!0);f(de);var je=E(de,2),Ne=h(je),Me=h(Ne),Te=E(Me);_a(Te,{get rawResultLines(){return n(l)}}),f(Ne);var Oe=E(Ne,2),Be=h(Oe);Re(Be),f(Oe),f(je),f($),oe(()=>{ae(Ee,ue.subtitulos),ae(Ie,ue.aplicarColor),ae(Me,`${ue.resultado} `)}),bt(ge,()=>n(U),i=>c(U,i)),me(he,()=>n(s),i=>c(s,i)),me(Be,()=>n(l),i=>c(l,i)),M(e,$),we()}De(["click"]);var Wn=(e,t)=>t(),Qn=()=>{},Zn=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function er(e,t){ye(t,!0);const a=ue.aplicarSecuenciaPosiciones;let r=x(""),o=x(""),s=x(""),l=x(!1);ha(()=>{d(n(r),n(o),n(l))});function d(te,se,k){if(se.length==0)return;const F=[];{const ee=te.split(`
`);for(const j of ee){if(j.length==0)continue;const Y=Ke(j);if(Y==null)continue;const z=fe(Y.content);if(ot(z)==null){alert(`Línea base sin \\pos copiada: '${j}'`),console.log(j);return}F.push(Y)}}const K=[];{const ee=se.split(`
`);for(const j of ee){if(j.length==0)continue;const Y=Ke(j);if(Y==null)continue;const z=fe(Y.content);if(ot(z)==null){alert(`Línea objetivo sin \\pos: '${j}'`),console.log(j);return}K.push(Y)}}let $="";for(let ee=0;ee<K.length;ee++){const j=K[ee],Y=fe(j.content),z=ot(Y);if(z==null){const W=_e(j);alert(`Línea objetivo sin \\pos: '${W}'`),console.log(W);return}let re=z.x,ie=z.y;k&&F.reverse();const ve=v(F),ge=[];for(let W=0;W<F.length;W++){const N=ve[W][0],Ee=ve[W][1],xe=re+N,he=ie+Ee;re=xe,ie=he,vn(Y,xe,he),j.content=pe(Y);const de=F[W];j.start=de.start,j.end=de.end,ge.push(structuredClone(j))}k&&(F.reverse(),ge.reverse());for(const W of ge)$+=_e(W)+`
`}c(s,C($))}function v(te){const k=[[0,0]];for(let F=0;F<te.length-1;F++){const K=te[F],$=te[F+1],ee=fe(K.content),j=ot(ee);if(j==null)return alert(`Línea base sin \\pos: '${_e(K)}'`),console.log(K),[];const Y=fe($.content),z=ot(Y);if(z==null)return alert(`Línea base sin \\pos: '${_e($)}'`),console.log($),[];const re=z.x-j.x,ie=z.y-j.y;k.push([re,ie])}return k}async function p(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}Fe(()=>{c(r,n(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),c(r,n(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),c(r,n(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),c(o,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var _=Zn();qe(te=>{Xe.title=a});var w=h(_);w.textContent=a;var u=E(w,2),g=E(h(u),2),b=h(g);Re(b),f(g),f(u);var S=E(u,2),O=h(S);Ye(O),et(),f(S);var y=E(S,2),D=h(y),V=h(D,!0);f(D);var A=E(D,2),T=h(A);Re(T),f(A),f(y);var q=E(y,2),G=h(q),I=h(G),J=E(I);J.__click=[Wn,p],J.__keydown=[Qn],f(G);var X=E(G,2),U=h(X);Re(U),f(X),f(q),f(_),oe(()=>{ae(V,ue.subtitulos),ae(I,`${ue.resultado} `)}),me(b,()=>n(r),te=>c(r,te)),bt(O,()=>n(l),te=>c(l,te)),me(T,()=>n(o),te=>c(o,te)),me(U,()=>n(s),te=>c(s,te)),M(e,_),we()}De(["click","keydown"]);var tr=(e,t)=>t(),ar=()=>{},nr=Q('<section class="svelte-jzi2e1"><h1></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea"></textarea></div></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function rr(e,t){ye(t,!0);const a=ue.dividirSilabas;let r=x(""),o=x(""),s=x("");function l(){if(n(o).length==0)return;const T=n(o).split(`
`);let q="";for(let G=0;G<T.length;G++){const I=T[G];if(I.length==0)continue;const J=Ke(I);if(J==null){console.error(`line ${G+1}: invalid line`);break}hn(J);const X=_e(J);G>0&&(q+=`
`),q+=X}c(s,C(q))}async function d(){await navigator.clipboard.writeText(n(s)),alert("¡Líneas copiadas al portapapeles!")}Fe(()=>{c(r,n(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),c(r,n(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),c(r,n(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`),c(o,C(n(r))),l()});var v=nr();qe(T=>{Xe.title=a});var p=h(v);p.textContent=a;var _=E(p,2),w=h(_),u=h(w);f(w);var g=E(w,2),b=h(g);Re(b),b.__input=l,f(g),f(_);var S=E(_,2),O=h(S),y=h(O),D=E(y);D.__click=[tr,d],D.__keydown=[ar],f(O);var V=E(O,2),A=h(V);Re(A),f(V),f(S),f(v),oe(()=>{ae(u,`${ue.subtitulos} (romaji)`),tt(b,"placeholder",n(r)),ae(y,`${ue.resultado} `)}),me(b,()=>n(o),T=>c(o,T)),me(A,()=>n(s),T=>c(s,T)),M(e,v),we()}De(["input","click","keydown"]);var or=Q('<p class="error svelte-tm085k"> </p>'),sr=Q("<button> </button>"),ir=Q('<p class="preview"> <b> </b></p>'),lr=(e,t)=>t(),cr=()=>{},ur=Q('<section class="svelte-tm085k"><h1></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <!> <div class="mb-2"><label class="label mt-2" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function dr(e,t){ye(t,!0);const a=ue.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let o=x(r),s=x(C([])),l=x(""),d=x(C([])),v=x(0),p=x("");function _(){const k=Ke(n(o));if(k==null)return;const F=fe(k.content);Mt(F);const K=0;let $=n(d)[n(v)].index+1,ee=0;for(let N=0;N<=n(v);N++){const Ee=n(d)[N];Ee.centiseconds!=null&&(ee+=Ee.centiseconds)}const j=Vt(k.start),Y=Vt(k.end),z=F.slice(K,$);k.content=pe(z);const re=ee/100;k.end=xt(j+re),c(l,C(_e(k)));let ie=!0,ve=0;for(;ie;){const N=F[$+1];if((N==null?void 0:N.name)!="text"){ie=!1;break}if(ie=N.value.replaceAll(" ","").length===0,ie&&($+=2,ve++),ve>n(d).length)break}let ge=0;for(let N=n(v)+1+ve;N<n(d).length;N++){const Ee=n(d)[N];Ee.centiseconds!=null&&(ge+=Ee.centiseconds)}const W=F.slice($);k.end=xt(Y),k.start=xt(Y-ge/100),k.content=pe(W),c(l,n(l)+(`
`+_e(k))),c(s,C([pe(z.filter(N=>N.name=="text")),pe(W.filter(N=>N.name=="text"))]))}async function w(){await navigator.clipboard.writeText(n(l)),alert("¡Líneas copiadas al portapapeles!")}function u(){c(s,C([])),c(l,""),c(d,C([])),c(v,0),c(p,"");const k=Ke(n(o));if(k==null)return c(p,`Línea de karaoke inválida. Se esperaba el formato: <${r}>.`),[];const F=fe(k.content);Mt(F);for(let K=0;K<F.length;K++){const $=F[K];if($.name!="text")continue;n(d).push({index:K,text:$.value.replaceAll(" ",""),centiseconds:null});const ee=K-1;if(ee<0)continue;const j=F[ee];if(j.name!="effect")continue;const Y=j.tags.find(re=>re.name===Ue.kLowerCase||re.name===Ue.kUpperCase||re.name===Ue.kf||re.name===Ue.ko);Y==null||!(Y.name===Ue.kLowerCase||Y.name===Ue.kUpperCase||Y.name===Ue.kf||Y.name===Ue.ko)||(n(d)[n(d).length-1].centiseconds=Y.value)}return c(v,C(Math.floor(n(d).length/2))),_(),n(d)}Fe(()=>{u()});var g=ur();qe(k=>{Xe.title=a});var b=h(g);b.textContent=a;var S=E(b,2),O=E(h(S),2),y=h(O);Ye(y),tt(y,"placeholder",r),y.__input=u,f(O),f(S);var D=E(S,2);{var V=k=>{var F=or(),K=h(F,!0);f(F),oe(()=>ae(K,n(p))),M(k,F)};ne(D,k=>{n(p)!=""&&k(V)})}var A=E(D,2),T=E(h(A),2);it(T,21,()=>n(d),st,(k,F,K)=>{var $=Se(),ee=be($);{var j=Y=>{var z=sr();z.__click=()=>{c(v,C(K)),_()};var re=h(z,!0);f(z),oe(()=>{We(z,`button ${(K===n(v)?"is-link":"")??""}`),tt(z,"title",`${n(F).text}: ${n(F).centiseconds} centésimas`),ae(re,n(F).text)}),M(Y,z)};ne(ee,Y=>{n(F).text.replaceAll(" ","").length>0&&Y(j)})}M(k,$)}),f(T),f(A);var q=E(A,2),G=E(h(q),2);it(G,17,()=>n(s),st,(k,F,K)=>{var $=ir(),ee=h($);ee.nodeValue=`Línea ${K+1}: `;var j=E(ee),Y=h(j,!0);f(j),f($),oe(()=>ae(Y,n(F))),M(k,$)}),f(q);var I=E(q,2),J=h(I),X=h(J),U=E(X);U.__click=[lr,w],U.__keydown=[cr],f(J);var te=E(J,2),se=h(te);Re(se),f(te),f(I),f(g),oe(()=>ae(X,`${ue.resultado} `)),me(y,()=>n(o),k=>c(o,k)),me(se,()=>n(l),k=>c(l,k)),M(e,g),we()}De(["input","click","keydown"]);var jt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(jt||(jt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Bt||(Bt={}));var Pt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Pt||(Pt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut=["user","model","function","system"];var Kt;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Kt||(Kt={}));var Yt;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Yt||(Yt={}));var qt;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(qt||(qt={}));var Xt;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Xt||(Xt={}));var dt;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(dt||(dt={}));var zt;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(zt||(zt={}));var Jt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Jt||(Jt={}));var Wt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Wt||(Wt={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class nt extends Ae{constructor(t,a){super(t),this.response=a}}class ma extends Ae{constructor(t,a,r,o){super(t),this.status=a,this.statusText=r,this.errorDetails=o}}class Ze extends Ae{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="https://generativelanguage.googleapis.com",vr="v1beta",hr="0.21.0",gr="genai-js";var at;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(at||(at={}));class br{constructor(t,a,r,o,s){this.model=t,this.task=a,this.apiKey=r,this.stream=o,this.requestOptions=s}toString(){var t,a;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||vr;let s=`${((a=this.requestOptions)===null||a===void 0?void 0:a.baseUrl)||fr}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function pr(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${gr}/${hr}`),t.join(" ")}async function _r(e){var t;const a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",pr(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let r=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ze(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,s]of r.entries()){if(o==="x-goog-api-key")throw new Ze(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ze(`Header name ${o} can only be set using the apiClient field`);a.append(o,s)}}return a}async function mr(e,t,a,r,o,s){const l=new br(e,t,a,r,s);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},yr(s)),{method:"POST",headers:await _r(l),body:o})}}async function ht(e,t,a,r,o,s={},l=fetch){const{url:d,fetchOptions:v}=await mr(e,t,a,r,o,s);return Er(d,v,l)}async function Er(e,t,a=fetch){let r;try{r=await a(e,t)}catch(o){xr(o,e)}return r.ok||await Cr(r,e),r}function xr(e,t){let a=e;throw e instanceof ma||e instanceof Ze||(a=new Ae(`Error fetching from ${t.toString()}: ${e.message}`),a.stack=e.stack),a}async function Cr(e,t){let a="",r;try{const o=await e.json();a=o.error.message,o.error.details&&(a+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new ma(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,r)}function yr(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const a=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>a.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{a.abort()}),t.signal=a.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),gt(e.candidates[0]))throw new nt(`${Je(e)}`,e);return wr(e)}else if(e.promptFeedback)throw new nt(`Text not available. ${Je(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),gt(e.candidates[0]))throw new nt(`${Je(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Qt(e)[0]}else if(e.promptFeedback)throw new nt(`Function call not available. ${Je(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),gt(e.candidates[0]))throw new nt(`${Je(e)}`,e);return Qt(e)}else if(e.promptFeedback)throw new nt(`Function call not available. ${Je(e)}`,e)},e}function wr(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.text&&s.push(l.text),l.executableCode&&s.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&s.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function Qt(e){var t,a,r,o;const s=[];if(!((a=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||a===void 0)&&a.parts)for(const l of(o=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)l.functionCall&&s.push(l.functionCall);if(s.length>0)return s}const kr=[dt.RECITATION,dt.SAFETY,dt.LANGUAGE];function gt(e){return!!e.finishReason&&kr.includes(e.finishReason)}function Je(e){var t,a,r;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((a=e.promptFeedback)===null||a===void 0)&&a.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const s=e.candidates[0];gt(s)&&(o+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(o+=`: ${s.finishMessage}`))}return o}function ft(e){return this instanceof ft?(this.v=e,this):new ft(e)}function Sr(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=a.apply(e,t||[]),o,s=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(u){r[u]&&(o[u]=function(g){return new Promise(function(b,S){s.push([u,g,b,S])>1||d(u,g)})})}function d(u,g){try{v(r[u](g))}catch(b){w(s[0][3],b)}}function v(u){u.value instanceof ft?Promise.resolve(u.value.v).then(p,_):w(s[0][2],u)}function p(u){d("next",u)}function _(u){d("throw",u)}function w(u,g){u(g),s.shift(),s.length&&d(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ar(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),a=Or(t),[r,o]=a.tee();return{stream:Tr(r),response:Rr(o)}}async function Rr(e){const t=[],a=e.getReader();for(;;){const{done:r,value:o}=await a.read();if(r)return Ot(Ir(t));t.push(o)}}function Tr(e){return Sr(this,arguments,function*(){const a=e.getReader();for(;;){const{value:r,done:o}=yield ft(a.read());if(o)break;yield yield ft(Ot(r))}})}function Or(e){const t=e.getReader();return new ReadableStream({start(r){let o="";return s();function s(){return t.read().then(({value:l,done:d})=>{if(d){if(o.trim()){r.error(new Ae("Failed to parse stream"));return}r.close();return}o+=l;let v=o.match(Zt),p;for(;v;){try{p=JSON.parse(v[1])}catch{r.error(new Ae(`Error parsing JSON response: "${v[1]}"`));return}r.enqueue(p),o=o.substring(v[0].length),v=o.match(Zt)}return s()})}}})}function Ir(e){const t=e[e.length-1],a={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const o of r.candidates){const s=o.index;if(a.candidates||(a.candidates=[]),a.candidates[s]||(a.candidates[s]={index:o.index}),a.candidates[s].citationMetadata=o.citationMetadata,a.candidates[s].groundingMetadata=o.groundingMetadata,a.candidates[s].finishReason=o.finishReason,a.candidates[s].finishMessage=o.finishMessage,a.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){a.candidates[s].content||(a.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const d of o.content.parts)d.text&&(l.text=d.text),d.functionCall&&(l.functionCall=d.functionCall),d.executableCode&&(l.executableCode=d.executableCode),d.codeExecutionResult&&(l.codeExecutionResult=d.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),a.candidates[s].content.parts.push(l)}}r.usageMetadata&&(a.usageMetadata=r.usageMetadata)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(e,t,a,r){const o=await ht(t,at.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),r);return Ar(o)}async function xa(e,t,a,r){const s=await(await ht(t,at.GENERATE_CONTENT,e,!1,JSON.stringify(a),r)).json();return{response:Ot(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function vt(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const a of e)typeof a=="string"?t.push({text:a}):t.push(a);return Nr(t)}function Nr(e){const t={role:"user",parts:[]},a={role:"function",parts:[]};let r=!1,o=!1;for(const s of e)"functionResponse"in s?(a.parts.push(s),o=!0):(t.parts.push(s),r=!0);if(r&&o)throw new Ae("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Ae("No content is provided for sending chat message.");return r?t:a}function Lr(e,t){var a;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(a=t==null?void 0:t.cachedContent)===null||a===void 0?void 0:a.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new Ze("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(o)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const s=vt(e);r.contents=[s]}return{generateContentRequest:r}}function ea(e){let t;return e.contents?t=e:t={contents:[vt(e)]},e.systemInstruction&&(t.systemInstruction=Ca(e.systemInstruction)),t}function Dr(e){return typeof e=="string"||Array.isArray(e)?{content:vt(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Fr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Mr(e){let t=!1;for(const a of e){const{role:r,parts:o}=a;if(!t&&r!=="user")throw new Ae(`First content should be with role 'user', got ${r}`);if(!Ut.includes(r))throw new Ae(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Ut)}`);if(!Array.isArray(o))throw new Ae("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Ae("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of o)for(const v of ta)v in d&&(s[v]+=1);const l=Fr[r];for(const d of ta)if(!l.includes(d)&&s[d]>0)throw new Ae(`Content with role '${r}' can't contain '${d}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="SILENT_ERROR";class Vr{constructor(t,a,r,o={}){this.model=a,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(Mr(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,a={}){var r,o,s,l,d,v;await this._sendPromise;const p=vt(t),_={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},w=Object.assign(Object.assign({},this._requestOptions),a);let u;return this._sendPromise=this._sendPromise.then(()=>xa(this._apiKey,this.model,_,w)).then(g=>{var b;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(p);const S=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(S)}else{const S=Je(g.response);S&&console.warn(`sendMessage() was unsuccessful. ${S}. Inspect response object for details.`)}u=g}),await this._sendPromise,u}async sendMessageStream(t,a={}){var r,o,s,l,d,v;await this._sendPromise;const p=vt(t),_={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,p]},w=Object.assign(Object.assign({},this._requestOptions),a),u=Ea(this._apiKey,this.model,_,w);return this._sendPromise=this._sendPromise.then(()=>u).catch(g=>{throw new Error(aa)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(p);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Je(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==aa&&console.error(g)}),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr(e,t,a,r){return(await ht(t,at.COUNT_TOKENS,e,!1,JSON.stringify(a),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gr(e,t,a,r){return(await ht(t,at.EMBED_CONTENT,e,!1,JSON.stringify(a),r)).json()}async function $r(e,t,a,r){const o=a.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await ht(t,at.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,a,r={}){this.apiKey=t,this._requestOptions=r,a.model.includes("/")?this.model=a.model:this.model=`models/${a.model}`,this.generationConfig=a.generationConfig||{},this.safetySettings=a.safetySettings||[],this.tools=a.tools,this.toolConfig=a.toolConfig,this.systemInstruction=Ca(a.systemInstruction),this.cachedContent=a.cachedContent}async generateContent(t,a={}){var r;const o=ea(t),s=Object.assign(Object.assign({},this._requestOptions),a);return xa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}async generateContentStream(t,a={}){var r;const o=ea(t),s=Object.assign(Object.assign({},this._requestOptions),a);return Ea(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),s)}startChat(t){var a;return new Vr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},t),this._requestOptions)}async countTokens(t,a={}){const r=Lr(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),a);return Hr(this.apiKey,this.model,r,o)}async embedContent(t,a={}){const r=Dr(t),o=Object.assign(Object.assign({},this._requestOptions),a);return Gr(this.apiKey,this.model,r,o)}async batchEmbedContents(t,a={}){const r=Object.assign(Object.assign({},this._requestOptions),a);return $r(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.apiKey=t}getGenerativeModel(t,a){if(!t.model)throw new Ae("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new na(this.apiKey,t,a)}getGenerativeModelFromCachedContent(t,a,r){if(!t.name)throw new Ze("Cached content must contain a `name` field.");if(!t.model)throw new Ze("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const l of o)if(a!=null&&a[l]&&t[l]&&(a==null?void 0:a[l])!==t[l]){if(l==="model"){const d=a.model.startsWith("models/")?a.model.replace("models/",""):a.model,v=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(d===v)continue}throw new Ze(`Different value for "${l}" specified in modelParams (${a[l]}) and cachedContent (${t[l]})`)}const s=Object.assign(Object.assign({},a),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new na(this.apiKey,s,r)}}function Br(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}const ya=["automático","carteles","diálogos","karaokes"],Pr=Qe.enum(ya);async function Ur(e,t,a){const r={errors:[],warnings:[]};if(e==="carteles")return r;const o=t.scriptInfo.properties.get("WrapStyle")??"",s="0";o!==s&&r.errors.push({location:"Script info, wrap style",error:`Se esperaba "${s}", pero se encontró "${o}"`,text:o,ignoreRule:""});const l=t.scriptInfo.properties.get("ScaledBorderAndShadow")??"",d="yes";l!==d&&r.errors.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${d}", pero se encontró "${l}"`,text:l,ignoreRule:""});let v=0;const p="Español";let _="";for(let w=0;w<t.events.lines.length;w++){const u=t.events.lines[w],g=w+1;if(e!=="karaokes"&&u.effect.includes("template syl")){console.info(`template syl detectado en línea ${g}, pasando a modo karaokes`),e="karaokes";continue}if(e=="diálogos"&&u.type==Ht||u.content===""||e==="karaokes"&&u.style!==p||e==="karaokes"&&u.type!==Ht||e==="karaokes"&&u.effect!=="karaoke")continue;if(e==="karaokes"&&u.effect==="fx")break;const b=u.effect.split(" ").filter(y=>y.startsWith("ignorar-"));if(b.includes("ignorar-linea"))continue;Xr(t,u.style)||r.errors.push({location:`Línea ${g}`,error:"Estilo no encontrado",text:u.style,ignoreRule:"ignorar-estilo"});const S=fe(u.content);let O=pe(S.filter(y=>y.name==="text"));if(a!=null&&a.geminiEnabled&&e==="diálogos"){const y=Zr(O);_+=`
Línea ${g}: ${y}`}if(!b.includes("ignorar-inicio")){const y=Kr(O);y!=null&&r.errors.push({location:`Línea ${g}`,error:y,text:u.content,ignoreRule:"ignorar-inicio"})}if(!b.includes("ignorar-espacios")){const y=zr(O);y!=null&&r.errors.push({location:`Línea ${g}`,error:y,text:u.content,ignoreRule:"ignorar-espacios"})}if(!b.includes("ignorar-fin")){const y=Yr(O);y!=null&&r.errors.push({location:`Línea ${g}`,error:y,text:u.content,ignoreRule:"ignorar-fin"})}if(!b.includes("ignorar-puntuacion")){const y=qr(O);y!=null&&r.errors.push({location:`Línea ${g}`,error:y,text:u.content,ignoreRule:"ignorar-puntuacion"})}e==="karaokes"&&v++}if(a!=null&&a.geminiEnabled&&(a==null?void 0:a.geminiApiKey)!==""&&e==="diálogos"){const w=a.geminiApiKey??"",u=await Qr(_,w);for(const g of u.errores){let b=t.events.lines[g.numeroLinea-1];b==null&&(b=gn());let S=g.mensajeError;S.endsWith(".")&&S.substring(0,S.length-2),r.warnings.push({location:`Línea ${g.numeroLinea}`,error:S,text:b.content,ignoreRule:"ignorar-llm"})}}return e==="karaokes"&&v===0&&r.errors.push({location:`Línea ${t.events.lines.length}`,error:`No se encontraron líneas de karaoke con estilo "${p}"`,text:"",ignoreRule:""}),r}function Kr(e){return e.startsWith("... ")?"los tres puntos van pegados":(e.startsWith("...")&&(e=e.substring(3)),/^(-\s|¡|¿|"|“)*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(e)?null:"inicio inválido")}function Yr(e){e=Br(e," ");const t=[".",",",";","...","!","?",":","~","-..."];return t.some(a=>e.endsWith(a))?null:`No tiene un fin de línea válido: ${t.map(a=>`"${a}"`).join(", ")}`}function qr(e){for(let t=0;t<e.length;t++){const a=[",",";","."],r=e[t];if(!a.includes(r))continue;if(t+1>=e.length)break;let o=e[t+1];if(o==="\\"&&e[t+2]==="N"&&(o="\\N"),r==="."&&o=="."||r==="."&&e[t-1]==="."&&e[t-2]==="."||(r==="."||r===",")&&!Number.isNaN(Number(e[t-1]))&&!Number.isNaN(Number(e[t+1])))continue;if(![" ","\\N"].includes(o))return"La coma (,) y el punto y coma (;) deben ser seguidos de un espacio o salto de línea"}return null}function Xr(e,t){return e.styles.styles.some(a=>t===a.name)}function zr(e){return e.includes("  ")?"hay dos espacios seguidos":null}function Jr(e,t){return t!=="automático"?t:(e=e.toLocaleLowerCase(),e.includes("carteles")?"carteles":e.includes("subs")?"diálogos":e.includes("karaoke")?"karaokes":"diálogos")}const Wr=Qe.object({errores:Qe.object({numeroLinea:Qe.number().default(0),mensajeError:Qe.string().default("")}).array()});async function Qr(e,t){try{const s=new jr(t).getGenerativeModel({model:"gemini-2.0-flash",systemInstruction:`
            Valida todos los textos que recibas y retorna un JSON con la estructura:
            {
                "errores": [
                    "numeroLinea": 1,
                    "mensajeError": "descripción del error"
                ]
            }
            Considera 'N' como un espacio ' '.
            Ignora los espacios consecutivos, son son errores.
            Retorna sólo el JSON como texto plano.
        `}),l={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"text/plain"};let p=(await s.startChat({generationConfig:l,history:[]}).sendMessage(e)).response.text();return p=p.replaceAll("```json",""),p=p.replaceAll("```",""),Wr.parse(JSON.parse(p))}catch(a){console.error("error al validar subs con gemini",a);let r=`${a}`;return r.includes("API key not valid")&&(r="API KEY inválida."),{errores:[{numeroLinea:0,mensajeError:`Error al validar subtítulos con Google Gemini: ${r}`}]}}}function Zr(e){let t="";for(let a=0;a<e.length;a++){const r=e[a],o=e[a+1]??"",s=e[a+2]??"",l=e[a-1]??"";if(r==="\\"&&o==="N"){if(a++,s===" "||l===" ")continue;t+=" ";continue}t+=r}return t}const kt=Qe.object({userSubsMode:Pr.default("automático"),geminiEnabled:Qe.boolean().default(!1),geminiApiKey:Qe.string().default("")}),wa="asu.validarDialogos.options";function eo(e){localStorage.setItem(wa,JSON.stringify(e))}function to(){try{const e=localStorage.getItem(wa)??"";return kt.parse(JSON.parse(e))}catch(e){return console.error("error al cargar opciones de validar diálogos",e),kt.parse({})}}async function ao(e,t,a){t(!t()),await a()}var no=Q('<div class="area svelte-on5caf"><textarea readonly=""></textarea> <button class="button" aria-label="alternar"> </button></div>');function ro(e,t){ye(t,!0);let a=Le(t,"rawMode",7),r=x(C(t.text)),o=x(1),s=x(void 0);async function l(){d(),await Ka(),v()}function d(){if(a()){c(r,C(t.text));return}const b=fe(t.text).filter(O=>O.name==="text");let S=pe(b);S=S.replaceAll("\\N",""),c(r,C(S))}function v(){c(o,C(p()))}function p(){return n(s)==null?1:Math.ceil(n(s).scrollHeight/n(s).clientHeight)}Fe(async()=>{await l()});var _=no(),w=h(_);Re(w),Ce(w,b=>c(s,b),()=>n(s));var u=E(w,2);u.__click=[ao,a,l];var g=h(u,!0);f(u),f(_),oe(()=>{We(w,`textarea ${(t.kind==="error"?"is-danger":"is-warning")??""} svelte-on5caf`),bn(w,n(r)),tt(w,"rows",n(o)),ae(g,a()?"Ocultar etiquetas":"Ver etiquetas")}),M(e,_),we()}De(["click"]);var oo=Q('<p class="ignore-rule m-1">Para ignorar, colocar <b> </b> en campo de efecto.</p>'),so=Q('<span><p class="m-1"> </p> <!> <!></span>');function ra(e,t){ye(t,!0);var a=so(),r=h(a),o=h(r);f(r);var s=E(r,2);{var l=p=>{ro(p,{get kind(){return t.kind},get text(){return t.subtitleError.text},rawMode:!1})};ne(s,p=>{t.subtitleError.text!=""&&p(l)})}var d=E(s,2);{var v=p=>{var _=oo(),w=E(h(_)),u=h(w,!0);f(w),et(),f(_),oe(()=>ae(u,t.subtitleError.ignoreRule)),M(p,_)};ne(d,p=>{t.subtitleError.ignoreRule!=""&&p(v)})}f(a),oe(p=>{We(a,`file-error ${(t.kind==="error"?"has-text-danger":"has-text-warning")??""}`),ae(o,`${(t.kind==="error"?"Error":"Advertencia")??""}:
        ${t.subtitleError.location??""}:
        ${p??""}`)},[()=>t.subtitleError.error+(t.subtitleError.error.endsWith(".")?"":".")]),M(e,a),we()}var io=(e,t)=>t(),lo=(e,t)=>t(),co=(e,t)=>t.onAccept&&t.onAccept(),uo=Q('<button class="button is-success"> </button>'),fo=Q('<div class="modal"><div class="modal-background"></div> <div class="modal-card"><header class="modal-card-head"><p class="modal-card-title"> </p> <button class="delete" aria-label="close"></button></header> <section class="modal-card-body"><!></section> <footer class="modal-card-foot"><button class="button"> </button> <!></footer></div></div>');function vo(e,t){ye(t,!0);let a=Le(t,"cancelButtonText",3,"Cancelar"),r=Le(t,"acceptButtonText",3,"Aceptar"),o=Le(t,"acceptButtonDisabled",3,!1);const s="is-active";let l=x(void 0);function d(){n(l)!=null&&(n(l).classList.add(s),t.onOpen!=null&&t.onOpen())}function v(){n(l)!=null&&(n(l).classList.remove(s),t.onClose!=null&&t.onClose())}var p=fo(),_=E(h(p),2),w=h(_),u=h(w),g=h(u,!0);f(u);var b=E(u,2);b.__click=[io,v],f(w);var S=E(w,2),O=h(S);{var y=G=>{var I=Se(),J=be(I);yn(J,()=>t.children),M(G,I)};ne(O,G=>{t.children!=null&&G(y)})}f(S);var D=E(S,2),V=h(D);V.__click=[lo,v];var A=h(V,!0);f(V);var T=E(V,2);{var q=G=>{var I=uo();I.__click=[co,t];var J=h(I,!0);f(I),oe(()=>{I.disabled=o(),ae(J,r())}),M(G,I)};ne(T,G=>{t.onAccept!=null&&G(q)})}return f(D),f(_),f(p),Ce(p,G=>c(l,G),()=>n(l)),oe(()=>{ae(g,t.title),ae(A,a())}),M(e,p),we({open:d,close:v})}De(["click"]);var ho=Q("<option> </option>"),go=Q(`<div class="field"><label class="label" for="">API KEY</label> <div class="control"><input class="input" type="password" placeholder="Ingresa tu API KEY"></div></div> <p><a href="https://aistudio.google.com/apikey" target="_blank">Clic aquí para obtener una API KEY.</a></p> <p>Las validaciones de Google Gemini serán siempre advertencias
                debido a su tendencia a tener falsos positivos.</p>`,1),bo=Q('<div class="select is-fullwidth mb-2"><select></select></div> <div class="field"><label class="checkbox"><input type="checkbox"> Habilitar validación con Google Gemini (experimental)</label> <!></div>',1);function po(e,t){ye(t,!0);let a=Le(t,"options",15),r=x(void 0);function o(){var l;(l=n(r))==null||l.open()}function s(){var l;(l=n(r))==null||l.close()}return Ce(vo(e,{title:"Configuración",cancelButtonText:"Volver",onClose:()=>eo(a()),children:(l,d)=>{var v=bo(),p=be(v),_=h(p);it(_,21,()=>ya,st,(O,y)=>{var D=ho(),V={},A=h(D);f(D),oe(()=>{V!==(V=n(y))&&(D.value=(D.__value=n(y))==null?"":n(y)),ae(A,`Modo ${n(y)??""}`)}),M(O,D)}),f(_),f(p);var w=E(p,2),u=h(w),g=h(u);Ye(g),et(),f(u);var b=E(u,2);{var S=O=>{var y=go(),D=be(y),V=E(h(D),2),A=h(V);Ye(A),f(V),f(D),et(4),me(A,()=>a().geminiApiKey,T=>a(a().geminiApiKey=T,!0)),M(O,y)};ne(b,O=>{a().geminiEnabled&&O(S)})}f(w),An(_,()=>a().userSubsMode,O=>a(a().userSubsMode=O,!0)),bt(g,()=>a().geminiEnabled,O=>a(a().geminiEnabled=O,!0)),M(l,v)},$$slots:{default:!0}}),l=>c(r,C(l)),()=>n(r)),we({open:o,close:s})}async function _o(e,t,a,r,o,s,l,d,v){var p,_;try{if(n(t).geminiEnabled&&n(t).geminiApiKey===""){alert("Ingrese el API KEY de Google Gemini."),(p=n(a))==null||p.open();return}if(n(t).geminiEnabled&&!confirm("Google Gemini habilitado. ¿Continuar?"))return;const w=[...((_=n(r))==null?void 0:_.files)??[]];c(o,0),c(s,0),c(l,C([])),c(d,!0);for(const u of w){const g=await u.text(),b=pn(g);if(b==null){console.error("archivo inválido",u.name);continue}c(v,C(Jr(u.name,n(t).userSubsMode)));const S=await Ur(n(v),b,{geminiEnabled:n(t).geminiEnabled,geminiApiKey:n(t).geminiApiKey});c(o,n(o)+S.errors.length),c(s,n(s)+S.warnings.length),n(l).push({subsType:n(v),fileName:u.name,errors:S.errors,warnings:S.warnings,errorsVisible:!1,warningsVisible:!1})}}catch(w){console.error("error al procesar archivos",w)}finally{n(r)!=null&&(n(r).value=""),c(d,!1)}}var mo=(e,t)=>{var a;return(a=n(t))==null?void 0:a.open()},Eo=Q('<span class="tag is-dark">Google Gemini habilitado</span>'),xo=Q('<div class="result-info svelte-15xcv5f"><div class="counter svelte-15xcv5f">PROCESANDO</div> <div class="image-container svelte-15xcv5f"><img class="result-image svelte-15xcv5f" src="img/nagato.gif" alt="Suzumiya Haruhi" title="Suzumiya Haruhi"></div> <div class="counter svelte-15xcv5f">SUBTÍTULOS</div></div>'),Co=Q('<img class="result-image svelte-15xcv5f" src="img/lucky-star-yay.gif" alt="Lucky Star" title="Lucky Star">'),yo=Q('<img class="result-image svelte-15xcv5f" src="img/nichijou.webp" alt="Nichijou" title="Nichijou">'),wo=Q(`<img class="result-image svelte-15xcv5f" src="img/under-arrest.gif" alt="You're Under Arrest" title="You're Under Arrest">`),ko=Q('<img class="result-image svelte-15xcv5f" src="img/new-game.gif" alt="New Game!" title="New Game!">'),So=Q("<div> <!></div>"),Ao=Q("<div> </div>"),Ro=(e,t)=>n(t).errorsVisible=!n(t).errorsVisible,To=Q('<div class="file-errors svelte-15xcv5f"></div>'),Oo=Q('<div class="errors-list svelte-15xcv5f"><button class="button has-text-danger svelte-15xcv5f"> </button> <!></div>'),Io=(e,t)=>n(t).warningsVisible=!n(t).warningsVisible,No=Q('<div class="file-errors svelte-15xcv5f"></div>'),Lo=Q('<div class="warnings-list svelte-15xcv5f"><button class="button has-text-warning svelte-15xcv5f"> </button> <!></div>'),Do=Q('<div class="result svelte-15xcv5f"><span> </span> <!> <!> <!></div>'),Fo=Q('<div class="result-info svelte-15xcv5f"><div> </div> <div class="image-container svelte-15xcv5f"><!></div> <div> </div></div> <!>',1),Mo=Q('<section class="svelte-15xcv5f"><h1></h1> <div class="options mb-4 svelte-15xcv5f"><button class="button is-link mb-2 btn-settings svelte-15xcv5f">Configuración</button> <div class="options-info"><span class="tag is-dark"> </span> <!></div></div> <div class="file is-fullwidth svelte-15xcv5f"><label class="file-label"><input class="file-input" type="file" accept=".ass" multiple> <span class="file-cta"><span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Cargar subtítulos</span></span></label></div> <!> <!></section> <!>',1);function Vo(e,t){ye(t,!0);const a=ue.validarDialogos;let r=x("diálogos"),o=x(void 0),s=x(0),l=x(0),d=x(C([])),v=x(!1),p=x(C(kt.parse({}))),_=x(void 0);function w(k){return k.errors.length>0?"has-text-danger":k.warnings.length>0?"has-text-warning":"has-text-success"}Fe(()=>{c(p,C(to()))});var u=Mo();qe(k=>{Xe.title=a});var g=be(u),b=h(g);b.textContent=a;var S=E(b,2),O=h(S);O.__click=[mo,_];var y=E(O,2),D=h(y),V=h(D);f(D);var A=E(D,2);{var T=k=>{var F=Eo();M(k,F)};ne(A,k=>{n(p).geminiEnabled&&k(T)})}f(y),f(S);var q=E(S,2),G=h(q),I=h(G);I.__change=[_o,p,_,o,s,l,d,v,r],Ce(I,k=>c(o,k),()=>n(o)),et(2),f(G),f(q);var J=E(q,2);{var X=k=>{var F=xo();M(k,F)};ne(J,k=>{n(v)&&k(X)})}var U=E(J,2);{var te=k=>{var F=Fo(),K=be(F),$=h(K),ee=h($);f($);var j=E($,2),Y=h(j);{var z=W=>{var N=Co();M(W,N)},re=W=>{var N=Se(),Ee=be(N);{var xe=de=>{var Ie=yo();M(de,Ie)},he=de=>{var Ie=Se(),je=be(Ie);{var Ne=Te=>{var Oe=wo();M(Te,Oe)},Me=Te=>{var Oe=Se(),Be=be(Oe);{var i=Z=>{var R=ko();M(Z,R)};ne(Be,Z=>{n(l)>0&&Z(i)},!0)}M(Te,Oe)};ne(je,Te=>{n(s)>0?Te(Ne):Te(Me,!1)},!0)}M(de,Ie)};ne(Ee,de=>{n(s)>10?de(xe):de(he,!1)},!0)}M(W,N)};ne(Y,W=>{n(s)===0&&n(l)===0?W(z):W(re,!1)})}f(j);var ie=E(j,2),ve=h(ie);f(ie),f(K);var ge=E(K,2);it(ge,17,()=>n(d),st,(W,N,Ee)=>{var xe=Do(),he=h(xe),de=h(he,!0);f(he);var Ie=E(he,2);{var je=i=>{var Z=So(),R=h(Z),L=E(R);{var H=B=>{var m=oa("Ignorado.");M(B,m)};ne(L,B=>{n(N).subsType==="carteles"&&B(H)})}f(Z),oe(()=>{We(Z,`has-text-success text-${n(N).subsType??""} svelte-15xcv5f`),ae(R,`¡Todo en orden! Detectado como ${n(N).subsType??""}. `)}),M(i,Z)},Ne=i=>{var Z=Ao(),R=h(Z);f(Z),oe(L=>{We(Z,kn(L),"svelte-15xcv5f"),ae(R,`Detectado como ${n(N).subsType??""}.`)},[()=>w(n(N))]),M(i,Z)};ne(Ie,i=>{n(N).errors.length==0&&n(N).warnings.length==0?i(je):i(Ne,!1)})}var Me=E(Ie,2);{var Te=i=>{var Z=Oo(),R=h(Z);R.__click=[Ro,N];var L=h(R);f(R);var H=E(R,2);{var B=m=>{var P=To();it(P,21,()=>n(N).errors,st,(le,ce)=>{ra(le,{kind:"error",get subtitleError(){return n(ce)}})}),f(P),M(m,P)};ne(H,m=>{n(N).errorsVisible&&m(B)})}f(Z),oe(()=>ae(L,`${(n(N).errorsVisible?"Ocultar errores":"Ver errores")??""}: ${n(N).errors.length??""}`)),M(i,Z)};ne(Me,i=>{n(N).errors.length>0&&i(Te)})}var Oe=E(Me,2);{var Be=i=>{var Z=Lo(),R=h(Z);R.__click=[Io,N];var L=h(R);f(R);var H=E(R,2);{var B=m=>{var P=No();it(P,21,()=>n(N).warnings,st,(le,ce)=>{ra(le,{kind:"warning",get subtitleError(){return n(ce)}})}),f(P),M(m,P)};ne(H,m=>{n(N).warningsVisible&&m(B)})}f(Z),oe(()=>ae(L,`${(n(N).warningsVisible?"Ocultar advertencias":"Ver advertencias")??""}: ${n(N).warnings.length??""}`)),M(i,Z)};ne(Oe,i=>{n(N).warnings.length>0&&i(Be)})}f(xe),oe(i=>{We(he,`name ${i??""} text-${n(N).subsType??""} svelte-15xcv5f`),ae(de,n(N).fileName)},[()=>w(n(N))]),M(W,xe)}),oe(()=>{We($,`counter ${(n(s)==0?"has-text-success":"has-text-danger")??""} svelte-15xcv5f`),ae(ee,`Errores: ${n(s)??""}`),We(ie,`counter ${(n(l)==0?"has-text-success":"has-text-warning")??""} svelte-15xcv5f`),ae(ve,`Advertencias: ${n(l)??""}`)}),M(k,F)};ne(U,k=>{!n(v)&&n(d).length>0&&k(te)})}f(g);var se=E(g,2);Ce(po(se,{get options(){return n(p)},set options(k){c(p,C(k))}}),k=>c(_,C(k)),()=>n(_)),oe(()=>{ae(V,`Modo ${n(p).userSubsMode??""}`),I.disabled=n(v)}),M(e,u),we()}De(["click","change"]);function Ho(e,t){ye(t,!0);let a=x("");Fe(()=>{Gt.subscribe(_=>{_!=null&&c(a,C(_))});const v=new URLSearchParams(location.search).get("pagina")??"",p=_n(v)?v:"inicio";Gt.set(p)});var r=Se(),o=be(r);{var s=d=>{Hn(d)},l=d=>{var v=Se(),p=be(v);{var _=u=>{Ln(u,{})},w=u=>{var g=Se(),b=be(g);{var S=y=>{er(y,{})},O=y=>{var D=Se(),V=be(D);{var A=q=>{qn(q,{})},T=q=>{var G=Se(),I=be(G);{var J=U=>{Jn(U,{})},X=U=>{var te=Se(),se=be(te);{var k=K=>{Vo(K,{})},F=K=>{var $=Se(),ee=be($);{var j=z=>{dr(z,{})},Y=z=>{var re=Se(),ie=be(re);{var ve=W=>{rr(W,{})},ge=W=>{var N=Se(),Ee=be(N);{var xe=he=>{Mn(he,{})};ne(Ee,he=>{n(a)=="acercaDe"&&he(xe)},!0)}M(W,N)};ne(ie,W=>{n(a)=="karaokes.dividirSilabas"?W(ve):W(ge,!1)},!0)}M(z,re)};ne(ee,z=>{n(a)=="karaokes.dividirKaraoke"?z(j):z(Y,!1)},!0)}M(K,$)};ne(se,K=>{n(a)=="dialogos.validarDialogos"?K(k):K(F,!1)},!0)}M(U,te)};ne(I,U=>{n(a)=="carteles.aplicarColor"?U(J):U(X,!1)},!0)}M(q,G)};ne(V,q=>{n(a)=="carteles.aplicarAlpha"?q(A):q(T,!1)},!0)}M(y,D)};ne(b,y=>{n(a)=="carteles.aplicarSecuenciaPosiciones"?y(S):y(O,!1)},!0)}M(u,g)};ne(p,u=>{n(a)=="carteles.copiarMovimiento"?u(_):u(w,!1)},!0)}M(d,v)};ne(o,d=>{n(a)=="inicio"?d(s):d(l,!1)})}M(e,r),we()}var Go=Q('<section class="svelte-70scd4"><!></section>');function qo(e){var t=Go(),a=h(t);Ho(a,{}),f(t),M(e,t)}export{qo as component,Yo as universal};
