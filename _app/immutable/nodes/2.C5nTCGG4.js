import{d as Ue,e as Ke,a as le,t as ye,s as de,b as ln,c as Be}from"../chunks/CF_PhKuc.js";import"../chunks/CEJQm8eT.js";import{ah as Ia,_ as Ta,ai as sn,p as $a,H as je,I as un,G as cn,g as l,K as dn,L as Va,M as ma,N as xa,R as la,ar as fn,O as Ka,P as Xa,Q as vn,aw as ya,au as qa,ax as Pa,ay as pn,a8 as gn,az as bn,aA as hn,a7 as _n,al as mn,a4 as xn,v as yn,y as kn,aB as La,aC as Ra,a5 as An,j as Ha,aD as Wa,aE as Nn,aF as En,ak as $n,aG as Sn,b as Ya,x as Ja,z as Ve,ae as Qe,l as v,aH as Xe,D as x,F as A,E as m,B as Ne,C as Pe,ag as E,aI as da,A as Oe}from"../chunks/Bf27f5Ts.js";import{p as ra,i as Re}from"../chunks/y_7jc0in.js";import{p as S,b as Fe}from"../chunks/Bwo36f8E.js";import{c as Cn,z as Za,r as aa,d as Ce,t as ue,b as ua,s as Qa,e as wn,a as Ma,i as Ln}from"../chunks/D5wU_ylY.js";import{i as Rn}from"../chunks/9dEYUNHJ.js";function Fn(e){var t=sn,n=$a;Ia(null),Ta(null);try{return e()}finally{Ia(t),Ta(n)}}function et(e,t,n,r=n){e.addEventListener(t,()=>Fn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Cn()}function va(e,t){return t}function Dn(e,t,n,r){for(var i=[],o=t.length,c=0;c<o;c++)pn(t[c].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var p=n.parentNode;gn(p),p.append(n),r.clear(),Ze(e,t[0].prev,t[o-1].next)}bn(i,()=>{for(var b=0;b<o;b++){var y=t[b];a||(r.delete(y.k),Ze(e,y.prev,y.next)),hn(y.e,!a)}})}function pa(e,t,n,r,i,o=null){var c=e,a={flags:t,items:new Map,first:null},p=(t&Wa)!==0;if(p){var b=e;c=je?ma(_n(b)):b.appendChild(mn())}je&&un();var y=null,N=!1,_=xn(()=>{var $=n();return yn($)?$:$==null?[]:qa($)});cn(()=>{var $=l(_),h=$.length;if(N&&h===0)return;N=h===0;let O=!1;if(je){var j=c.data===dn;j!==(h===0)&&(c=Va(),ma(c),xa(!1),O=!0)}if(je){for(var P=null,w,B=0;B<h;B++){if(la.nodeType===8&&la.data===fn){c=la,O=!0,xa(!1);break}var k=$[B],C=r(k,B);w=at(la,a,P,null,k,C,B,i,t,n),a.items.set(C,w),P=w}h>0&&ma(Va())}je||In($,a,c,i,t,r,n),o!==null&&(h===0?y?Ka(y):y=Xa(()=>o(c)):y!==null&&vn(y,()=>{y=null})),O&&xa(!0),l(_)}),je&&(c=la)}function In(e,t,n,r,i,o,c){var M,ee,te,X;var a=(i&Nn)!==0,p=(i&(La|Ra))!==0,b=e.length,y=t.items,N=t.first,_=N,$,h=null,O,j=[],P=[],w,B,k,C;if(a)for(C=0;C<b;C+=1)w=e[C],B=o(w,C),k=y.get(B),k!==void 0&&((M=k.a)==null||M.measure(),(O??(O=new Set)).add(k));for(C=0;C<b;C+=1){if(w=e[C],B=o(w,C),k=y.get(B),k===void 0){var H=_?_.e.nodes_start:n;h=at(H,t,h,h===null?t.first:h.next,w,B,C,r,i,c),y.set(B,h),j=[],P=[],_=h.next;continue}if(p&&Tn(k,w,C,i),k.e.f&ya&&(Ka(k.e),a&&((ee=k.a)==null||ee.unfix(),(O??(O=new Set)).delete(k))),k!==_){if($!==void 0&&$.has(k)){if(j.length<P.length){var z=P[0],G;h=z.prev;var Q=j[0],L=j[j.length-1];for(G=0;G<j.length;G+=1)Ba(j[G],z,n);for(G=0;G<P.length;G+=1)$.delete(P[G]);Ze(t,Q.prev,L.next),Ze(t,h,Q),Ze(t,L,z),_=z,h=L,C-=1,j=[],P=[]}else $.delete(k),Ba(k,_,n),Ze(t,k.prev,k.next),Ze(t,k,h===null?t.first:h.next),Ze(t,h,k),h=k;continue}for(j=[],P=[];_!==null&&_.k!==B;)_.e.f&ya||($??($=new Set)).add(_),P.push(_),_=_.next;if(_===null)continue;k=_}j.push(k),h=k,_=k.next}if(_!==null||$!==void 0){for(var I=$===void 0?[]:qa($);_!==null;)_.e.f&ya||I.push(_),_=_.next;var K=I.length;if(K>0){var ae=i&Wa&&b===0?n:null;if(a){for(C=0;C<K;C+=1)(te=I[C].a)==null||te.measure();for(C=0;C<K;C+=1)(X=I[C].a)==null||X.fix()}Dn(t,I,ae,y)}}a&&kn(()=>{var T;if(O!==void 0)for(k of O)(T=k.a)==null||T.apply()}),$a.first=t.first&&t.first.e,$a.last=h&&h.e}function Tn(e,t,n,r){r&La&&Pa(e.v,t),r&Ra?Pa(e.i,n):e.i=n}function at(e,t,n,r,i,o,c,a,p,b){var y=(p&La)!==0,N=(p&En)===0,_=y?N?An(i):Ha(i):i,$=p&Ra?Ha(c):c,h={i:$,v:_,k:o,a:null,e:null,prev:n,next:r};try{return h.e=Xa(()=>a(e,_,$,b),je),h.e.prev=n&&n.e,h.e.next=r&&r.e,n===null?t.first=h:(n.next=h,n.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function Ba(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var c=$n(o);i.before(o),o=c}}function Ze(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ke(e,t,n=t){var r=Sn();et(e,"input",i=>{var o=i?e.defaultValue:e.value;if(o=ka(e)?Aa(o):o,n(o),r&&o!==(o=t())){var c=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(a,e.value.length))}}),(je&&e.defaultValue!==e.value||Ya(t)==null&&e.value)&&n(ka(e)?Aa(e.value):e.value),Ja(()=>{var i=t();ka(e)&&i===Aa(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Fa(e,t,n=t){et(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(je&&e.defaultChecked!==e.checked||Ya(t)==null)&&n(e.checked),Ja(()=>{var r=t();e.checked=!!r})}function ka(e){var t=e.type;return t==="number"||t==="range"}function Aa(e){return e===""?null:+e}const Vn=!0,zl=Object.freeze(Object.defineProperty({__proto__:null,prerender:Vn},Symbol.toStringTag,{value:"Module"}));function se(e){return parseInt(e,16)}function fa(e){return Math.floor(e).toString(16).padStart(2,"0").toUpperCase()}function Na(e,t,n){const r=e>t;let i=t,o=e;r&&(i=e,o=t);const a=(i-o)/n;let p=o;const b=[o];for(let y=1;y<n;y++)p+=a,b.push(p);return b[n-1]=i,r&&b.reverse(),b}const Pn=/^(\(.*\)|\\?.)$/,ea=e=>{const t=e.toString();return Pn.test(t)?t:`(?:${t})`},Hn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,Mn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/,q=e=>{const t=n=>q(`(?<${n}>${`${e}`.replace(Hn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>q(`${e}${f(...n)}`),{referenceTo:n=>q(`${e}\\k<${n}>`)}),or:(...n)=>q(`(?:${e}|${f(...n)})`),after:(...n)=>q(`(?<=${f(...n)})${e}`),before:(...n)=>q(`${e}(?=${f(...n)})`),notAfter:(...n)=>q(`(?<!${f(...n)})${e}`),notBefore:(...n)=>q(`${e}(?!${f(...n)})`),times:Object.assign(n=>q(`${ea(e)}{${n}}`),{any:()=>q(`${ea(e)}*`),atLeast:n=>q(`${ea(e)}{${n},}`),atMost:n=>q(`${ea(e)}{0,${n}}`),between:(n,r)=>q(`${ea(e)}{${n},${r}}`)}),optionally:()=>q(`${ea(e)}?`),as:t,groupedAs:t,grouped:()=>q(`${e}`.replace(Mn,"($1$3)$2")),at:{lineStart:()=>q(`^${e}`),lineEnd:()=>q(`${e}$`)}}},Bn=/[.*+?^${}()|[\]\\/]/g,we=e=>q(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`),On=(...e)=>q(`(?:${e.map(t=>f(t)).join("|")})`),zn=q(".");q("\\b\\w+\\b");q("\\w");q("\\b");const Te=q("\\d");q("\\s");const Gn=Object.assign(q("[a-zA-Z]"),{lowercase:q("[a-z]"),uppercase:q("[A-Z]")});q("\\t");q("\\n");q("\\r");q("\\W+"),q("\\W"),q("\\B"),q("\\D"),q("\\S"),Object.assign(q("[^a-zA-Z]"),{lowercase:q("[^a-z]"),uppercase:q("[^A-Z]")}),q("[^\\t]"),q("[^\\n]"),q("[^\\r]");const f=(...e)=>q(e.map(t=>typeof t=="string"?t.replace(Bn,"\\$&"):t).join("")),pe=(...e)=>q(`${ea(f(...e))}+`),D=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(f(...e).toString(),[...t||""].join(""))},jn=/(?<fx>{[^{]*})|(?<txt>{*[^{]*)/g,Un=/^[^\\]+/g,tt=/(?<sil>(?:sha|shi|shu|she|sho|cha|chi|chu|che|cho|tsu|kya|kyi|kyu|kye|kyo|gya|gyi|gyu|gye|gyo|sya|syu|syi|sye|syo|zya|zyu|zyi|zye|zyo|jya|jyu|jyi|jye|jyo|tya|tyi|tyu|tye|tyo|dya|dyi|dyu|dye|dyo|nya|nyi|nyu|nye|nyo|hya|hyi|hyu|hye|hyo|fya|fyi|fyu|fye|fyo|bya|byi|byu|bye|byo|pya|pyi|pyu|pye|pyo|mya|myi|myu|mye|myo|rya|ryi|ryu|rye|ryo|vya|vyi|vyu|vye|vyo|ka|ki|ku|ke|ko|ga|gi|gu|ge|go|sa|su|si|se|so|za|zu|zi|ze|zo|ja|ju|ji|je|jo|ta|ti|tu|te|to|da|di|du|de|do|na|ni|nu|ne|no|ha|hi|hu|he|ho|fa|fi|fu|fe|fo|ba|bi|bu|be|bo|pa|pi|pu|pe|po|ma|mi|mu|me|mo|ya|yi|yu|ye|yo|ra|ri|ru|re|ro|wa|wo|va|vi|vu|ve|vo|a|i|u|e|o|n|t)[^a-zA-Z\d\s:]*\s?)/g,Oa=pe(Te).and(f(":")).and(Te.times(2)).and(f(":")).and(Te.times(2)).and(f(".")).and(Te.times(2)),Kn=On("Dialogue","Comment").groupedAs("type").and(f(": ")).and(pe(Te).optionally().groupedAs("layer")).and(f(",")).and(Oa.optionally().groupedAs("start")).and(f(",")).and(Oa.optionally().groupedAs("end")).and(f(",")).and(pe(we(",").optionally()).groupedAs("style")).and(f(",")).and(pe(we(",")).optionally().groupedAs("actor")).and(f(",")).and(pe(Te).optionally().groupedAs("marginLeft")).and(f(",")).and(pe(Te).optionally().groupedAs("marginRight")).and(f(",")).and(pe(Te).optionally().groupedAs("marginVertical")).and(f(",")).and(pe(we(",")).optionally().groupedAs("effect")).and(f(",")).and(pe(zn).optionally().groupedAs("content")),Xn=D(Kn),qn=f("-").optionally().and(pe(Te)),V=qn.and(f(".").and(pe(Te)).optionally()),nt=f("\\").and("a").and(V.groupedAs("a_value")),Wn=D(nt),Ee=Gn.or(Te).times(2),rt=f("&H").and(Ee.groupedAs("color_bgr_blue")).and(Ee.groupedAs("color_bgr_green")).and(Ee.groupedAs("color_bgr_red")).and(f("&")),ot=f("\\c").and(rt),lt=f("\\1c").and(f("&H")).and(Ee.groupedAs("color1_bgr_blue")).and(Ee.groupedAs("color1_bgr_green")).and(Ee.groupedAs("color1_bgr_red")).and(f("&")),st=f("\\2c").and(f("&H")).and(Ee.groupedAs("color2_bgr_blue")).and(Ee.groupedAs("color2_bgr_green")).and(Ee.groupedAs("color2_bgr_red")).and(f("&")),it=f("\\3c").and(f("&H")).and(Ee.groupedAs("color3_bgr_blue")).and(Ee.groupedAs("color3_bgr_green")).and(Ee.groupedAs("color3_bgr_red")).and(f("&")),ut=f("\\4c").and(f("&H")).and(Ee.groupedAs("color4_bgr_blue")).and(Ee.groupedAs("color4_bgr_green")).and(Ee.groupedAs("color4_bgr_red")).and(f("&")),Yn=D(rt),Jn=D(ot),Zn=D(lt),Qn=D(st),er=D(it),ar=D(ut),ct=f("\\").and("alpha").and(pe(we("\\")).groupedAs("alpha_value")),tr=D(ct),dt=f("\\").and("1a").and(pe(we("\\")).groupedAs("alpha1_value")),nr=D(dt),ft=f("\\").and("2a").and(pe(we("\\")).groupedAs("alpha2_value")),rr=D(ft),vt=f("\\").and("3a").and(pe(we("\\")).groupedAs("alpha3_value")),or=D(vt),pt=f("\\").and("4a").and(pe(we("\\")).groupedAs("alpha4_value")),lr=D(pt),gt=f("\\").and("k").and(V.groupedAs("k_lower_case_value")),sr=D(gt),bt=f("\\").and("K").and(V.groupedAs("k_upper_case_value")),ir=D(bt),ht=f("\\").and("kf").and(V.groupedAs("kf_value")),ur=D(ht),_t=f("\\").and("ko").and(V.groupedAs("ko_value")),cr=D(_t),mt=f("\\").and("q").and(V.groupedAs("q_value")),dr=D(mt),xt=f("\\").and("s").and(V.groupedAs("s_value")),fr=D(xt),yt=f("\\").and("u").and(V.groupedAs("u_value")),vr=D(yt),kt=f("\\").and("r").and(pe(we("\\")).groupedAs("r_value")),pr=D(kt),At=f("\\").and("fe").and(V.groupedAs("fe_value")),gr=D(At),Nt=f("\\").and("fn").and(pe(we("\\")).groupedAs("fn_value")),br=D(Nt),Et=f("\\").and("p").and(V.groupedAs("p_value")),hr=D(Et),$t=f("\\").and("pbo").and(V.groupedAs("pbo_value")),_r=D($t),St=f("\\").and("an").and(V.groupedAs("an_value")),mr=D(St),Ct=f("\\").and("b").and(V.groupedAs("b_value")),xr=D(Ct),wt=f("\\").and("be").and(V.groupedAs("be_value")),yr=D(wt),Lt=f("\\").and("blur").and(V.groupedAs("blur_value")),kr=D(Lt),Rt=f("\\").and("bord").and(V.groupedAs("bord_value")),Ar=D(Rt),Ft=f("\\").and("xbord").and(V.groupedAs("xbord_value")),Nr=D(Ft),Dt=f("\\").and("ybord").and(V.groupedAs("ybord_value")),Er=D(Dt),It=f("\\").and("shad").and(V.groupedAs("shad_value")),$r=D(It),Tt=f("\\").and("xshad").and(V.groupedAs("xshad_value")),Sr=D(Tt),Vt=f("\\").and("yshad").and(V.groupedAs("yshad_value")),Cr=D(Vt),Pt=f("\\").and("fax").and(V.groupedAs("fax_value")),wr=D(Pt),Ht=f("\\").and("fay").and(V.groupedAs("fay_value")),Lr=D(Ht),Mt=f("\\").and("fscx").and(V.groupedAs("fscx_value")),Rr=D(Mt),Bt=f("\\").and("fscy").and(V.groupedAs("fscy_value")),Fr=D(Bt),Ot=f("\\").and("fsp").and(V.groupedAs("fsp_value")),Dr=D(Ot),zt=f("\\").and("fr").and(V.groupedAs("fr_value")),Ir=D(zt),Gt=f("\\").and("frx").and(V.groupedAs("frx_value")),Tr=D(Gt),jt=f("\\").and("fry").and(V.groupedAs("fry_value")),Vr=D(jt),Ut=f("\\").and("frz").and(V.groupedAs("frz_value")),Pr=D(Ut),Kt=f("\\").and("i").and(f("1").or("0").groupedAs("i_value")),Hr=D(Kt),Xt=f("\\").and("fs").and(V.groupedAs("fs_value")),Mr=D(Xt),qt=f("\\").and("pos").and(f("(")).and(V.groupedAs("pos_x")).and(f(",")).and(V.groupedAs("pos_y")).and(f(")")),Br=D(qt),Wt=f("\\").and("org").and(f("(")).and(V.groupedAs("org_x")).and(f(",")).and(V.groupedAs("org_y")).and(f(")")),Or=D(Wt),Yt=f("\\").and("fad").and(f("(")).and(V.groupedAs("in")).and(f(",")).and(V.groupedAs("out")).and(f(")")),zr=D(Yt),Jt=f("\\").and("fade").and(f("(")).and(V.groupedAs("fade_alpha1")).and(f(",")).and(V.groupedAs("fade_alpha2")).and(f(",")).and(V.groupedAs("fade_alpha3")).and(f(",")).and(V.groupedAs("fade_t1")).and(f(",")).and(V.groupedAs("fade_t2")).and(f(",")).and(V.groupedAs("fade_t3")).and(f(",")).and(V.groupedAs("fade_t4")).and(f(")")),Gr=D(Jt),jr=f(",").and(V.groupedAs("move_t1")).and(f(",")).and(V.groupedAs("move_t2")).optionally(),Zt=f("\\").and("move").and(f("(")).and(V.groupedAs("move_x1")).and(f(",")).and(V.groupedAs("move_y1")).and(f(",")).and(V.groupedAs("move_x2")).and(f(",")).and(V.groupedAs("move_y2")).and(jr).and(f(")")),Ur=D(Zt),Qt=f("\\").and("clip").and(f("(")).and(pe(we(")")).groupedAs("clip_args")).and(f(")")),Kr=D(Qt),en=f("\\").and("iclip").and(f("(")).and(pe(we(")")).groupedAs("iclip_args")).and(f(")")),Xr=D(en),qr=f("\\").and(pe(we("\\")).groupedAs("unknown_value")),an=wt.or(ct).or(Ft).or(Dt).or(Tt).or(Vt).or(en).or(Zt).or(Lt).or(Rt).or(It).or(Mt).or(Bt).or(Jt).or(Qt).or(Ot).or(qt).or(Wt).or(Yt).or($t).or(Gt).or(jt).or(Ut).or(Pt).or(Ht).or(_t).or(ht).or(zt).or(Xt).or(At).or(Nt).or(St).or(lt).or(st).or(it).or(ut).or(dt).or(ft).or(vt).or(pt).or(ot).or(mt).or(yt).or(xt).or(Et).or(kt).or(Kt).or(Ct).or(nt).or(gt).or(bt).or(qr),Wr=f("\\").at.lineStart().and("t").and(f("(")).and(V.groupedAs("arg1").and(f(",")).optionally()).and(V.groupedAs("arg2").and(f(",")).optionally()).and(V.groupedAs("arg3").and(f(",")).optionally()).and(pe(an).groupedAs("tags")).and(f(")")),Yr=D(an),tn=D(Wr);function Ea(e){const t=Math.floor(e/3600),n=Math.floor((e/3600-t)*60);return e=e-t*3600-n*60,{hours:t,minutes:n,seconds:e}}function za(e){var a,p,b;const t=/(?<h>\d+):(?<m>[0-9]{1,2}?):(?<s>[0-9]{1,2}(?:\.[0-9]{1,2})?)/,n=e.match(t);if(!n||n.length===0)return null;const r=Math.floor(Number(((a=n.groups)==null?void 0:a.h)??"0")),i=Math.floor(Number(((p=n.groups)==null?void 0:p.m)??"0")),o=Number(((b=n.groups)==null?void 0:b.s)??"0"),c={hours:r,minutes:i,seconds:o};return Da(c),c}function Da(e){e.seconds>=60&&(e.seconds-=60,e.minutes++),e.minutes>=60&&(e.minutes-=60,e.hours++),e.hours>=9&&(e.hours=9,e.minutes=59,e.seconds=59.99)}function Ga(e){Da(e);const t=e.hours.toFixed(0),n=e.minutes.toFixed(0).padStart(2,"0"),r=e.seconds.toFixed(2).padStart(5,"0");return`${t}:${n}:${r}`}function ga(e){return Da(e),e.hours*3600+e.minutes*60+e.seconds}var Sa;(function(e){e[e.DOWN_LEFT=1]="DOWN_LEFT",e[e.DOWN_CENTER=2]="DOWN_CENTER",e[e.DOWN_RIGHT=3]="DOWN_RIGHT",e[e.CENTER_LEFT=4]="CENTER_LEFT",e[e.CENTER_CENTER=5]="CENTER_CENTER",e[e.CENTER_RIGHT=6]="CENTER_RIGHT",e[e.UP_LEFT=7]="UP_LEFT",e[e.UP_CENTER=8]="UP_CENTER",e[e.UP_RIGHT=9]="UP_RIGHT"})(Sa||(Sa={}));const Jr=Za.nativeEnum(Sa);var Ca;(function(e){e[e.ANSI=0]="ANSI",e[e.DEFAULT=1]="DEFAULT",e[e.SYMBOL=2]="SYMBOL",e[e.MAC=77]="MAC",e[e.SHIFT_JIS=128]="SHIFT_JIS",e[e.HANGEUL=129]="HANGEUL",e[e.JOHAB=130]="JOHAB",e[e.GB2312=134]="GB2312",e[e.CHINESE_BIG5=136]="CHINESE_BIG5",e[e.GREEK=161]="GREEK",e[e.TURKISH=162]="TURKISH",e[e.VIETNAMESE=163]="VIETNAMESE",e[e.HEBREW=177]="HEBREW",e[e.ARAB=178]="ARAB",e[e.BALTIC=186]="BALTIC",e[e.RUSSIAN=204]="RUSSIAN",e[e.THAI=222]="THAI",e[e.EASTERN_EUROPE=238]="EASTERN_EUROPE",e[e.OEM=255]="OEM"})(Ca||(Ca={}));const Zr=Za.nativeEnum(Ca);function Qr(){return{format:"Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text",lines:[]}}function eo(){return{data:[]}}function ao(){return{files:[]}}function to(){return{files:[]}}function no(){return{comments:[],properties:new Map}}function ro(){return{comments:[],properties:new Map}}function oo(){return{format:"Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding",styles:[]}}const lo="[Script Info]",so="[Aegisub Project Garbage]",io="[V4+ Styles]",uo="[Graphics]",co="[Fonts]",fo="[Events]",vo="[Aegisub Extradata]",ba="; ",ja="Data: ";function po(e){const t={scriptInfo:ro(),aegisubProjectGarbage:no(),styles:oo(),fonts:ao(),graphics:to(),events:Qr(),extraData:eo()},n="scriptInfo",r="projectGarbage",i="styles",o="fonts",c="graphics",a="events",p="extraData";let b="",y="";const N=e.split(`
`);for(let _=0;_<N.length;_++){const $=_+1,h=go(N[_]);if(h.length===0)continue;switch(h){case lo:b=n;continue;case so:b=r;continue;case io:b=i;continue;case co:b=o;continue;case uo:b=c;continue;case fo:b=a;continue;case vo:b=p;continue}let O="";switch(b){case n:O=bo(t,h);break;case r:O=ho(t,h);break;case i:O=_o(t,h);break;case o:y=mo(t,h,y);break;case c:y=xo(t,h,y);break;case a:O=yo(t,h);break;case p:ko(t,h);break;default:console.error(`failed to parse line ${$}`);break}if(O.length>0)return console.error(`failed to parse ass file at line ${$}: ${O}
Line:
${h}`),null}return t}function go(e){return e=e.replaceAll("\\uFEFF",""),e=e.replaceAll("\r",""),e}function ha(e){var i,o;const t=/(?<key>.+):\s+(?<value>.*)\s*/,n={key:"",value:""},r=e.match(t);return!r||r.length===0?[n,`not a key-value pair: ${e}`]:(n.key=((i=r.groups)==null?void 0:i.key)??"",n.value=((o=r.groups)==null?void 0:o.value)??"",[n,""])}function bo(e,t){if(t.startsWith(ba)){const i=t.substring(ba.length);return e.scriptInfo.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.scriptInfo.properties.set(n.key,n.value),"")}function ho(e,t){if(t.startsWith(ba)){const i=t.substring(ba.length);return e.aegisubProjectGarbage.comments.push(i),""}const[n,r]=ha(t);return r.length>0?`failed to parse script info line: ${r}`:(e.aegisubProjectGarbage.properties.set(n.key,n.value),"")}function _o(e,t){const n=/Style: (?<name>.*)\s*,\s*(?<fontName>.*)\s*,\s*(?<fontSize>\d+(?:\.\d+)?)\s*,\s*&H(?<alpha1>[A-Fa-f0-9]{2})(?<color1>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha2>[A-Fa-f0-9]{2})(?<color2>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha3>[A-Fa-f0-9]{2})(?<color3>[A-Fa-f0-9]{6})\s*,\s*&H(?<alpha4>[A-Fa-f0-9]{2})(?<color4>[A-Fa-f0-9]{6})\s*,\s*(?<bold>0|-1)\s*,\s*(?<italic>0|-1)\s*,\s*(?<underline>0|-1)\s*,\s*(?<strikeout>0|-1)\s*,\s*(?<scaleX>\d+(?:\.\d+)?)\s*,\s*(?<scaleY>\d+(?:\.\d+)?)\s*,\s*(?<spacing>\d+(?:\.\d+)?)\s*,\s*(?<angle>-?\d+(?:\.\d+)?)\s*,\s*(?<borderStyle>\d+)\s*,\s*(?<outline>\d+(?:\.\d+)?)\s*,\s*(?<shadow>\d+(?:\.\d+)?)\s*,\s*(?<alignment>[1-9])\s*,\s*(?<marginLeft>\d+)\s*,\s*(?<marginRight>\d+)\s*,\s*(?<marginVertical>\d+)\s*,\s*(?<encoding>\d+)/;if(!t.startsWith("Style: "))return"";const r=t.match(n);if(!r||r.length===0||!r.groups)return`failed to parse style: not a style: ${t}`;const i=Jr.safeParse(Number(r.groups.alignment));if(!i.success)return`failed to parse style: invalid alignment: ${t}`;const o=i.data,c=Zr.safeParse(Number(r.groups.encoding));if(!c.success)return`failed to parse style: invalid encoding: ${r.groups.encoding}`;const a=c.data,p={name:r.groups.name??"",fontName:r.groups.fontName??"",fontSize:Number(r.groups.fontSize??"0"),primaryAlpha:r.groups.alpha1,primaryColor:r.groups.color1,secondaryAlpha:r.groups.alpha2,secondaryColor:r.groups.color2,outlineAlpha:r.groups.alpha3,outlineColor:r.groups.color3,backAlpha:r.groups.alpha4,backColor:r.groups.color4,bold:Number(r.groups.bold),italic:Number(r.groups.italic),underline:Number(r.groups.underline),strikeOut:Number(r.groups.strikeout),scaleX:Number(r.groups.scaleX),scaleY:Number(r.groups.scaleY),spacing:Number(r.groups.spacing),angle:Number(r.groups.angle),borderStyle:Number(r.groups.borderStyle),outline:Number(r.groups.outline),shadow:Number(r.groups.shadow),alignment:o,marginLeft:Number(r.groups.marginLeft),marginRight:Number(r.groups.marginRight),marginVertical:Number(r.groups.marginVertical),encoding:a};return e.styles.styles.push(p),""}function mo(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="fontname"){const a=r.value;let p={name:"",data:[]},b=e.fonts.files.findIndex(y=>y.name===a);return e.fonts.files.push(p),b=e.fonts.files.length-1,p=e.fonts.files[b],p.name=a,n=a,a}const o=e.fonts.files.findLastIndex(a=>a.name==n);return o<0?"":(e.fonts.files[o].data.push(t),n)}function xo(e,t,n){const[r,i]=ha(t);if(i.length===0&&r.key=="filename"){const a=r.value;let p={name:"",data:[]},b=e.graphics.files.findIndex(y=>y.name===a);return e.graphics.files.push(p),b=e.graphics.files.length-1,p=e.graphics.files[b],p.name=a,n=a,a}const o=e.graphics.files.findLastIndex(a=>a.name==n);return o<0?"":(e.graphics.files[o].data.push(t),n)}function yo(e,t){if(t.startsWith("Format:"))return e.events.format=t,"";const n=Ge(t);return n==null?`not a event (dialogue / comment): ${n}`:(e.events.lines.push(n),"")}function ko(e,t){if(!t.startsWith(ja))return;const n=t.substring(ja.length);e.extraData.data.push(n)}function Ao(e){const t=[],n=e.content.split(" ");for(let p=0;p<n.length;p++){const b=n[p];if(No(b)){const y=b.matchAll(tt);for(const N of y)t.push({text:N[1],durationInMs:0})}else t.push({text:b,durationInMs:0});p!=n.length-1&&(t[t.length-1].text+=" ")}const r=Oo(e),i=Math.floor(Math.round(r*100/t.length)),o=t.length*i;for(const p of t)p.durationInMs=i;if(!(o===r*100)){const b=r*100-o;t[t.length-1].durationInMs+=b}const a=[];for(const p of t)a.push({name:"effect",tags:[{name:g.kf,value:p.durationInMs}]},{name:"text",value:p.text});e.content=me(a)}function No(e){for(;e.length>0;){const t=e.match(tt);if(!t||t.length===0)return!1;e=e.substring(t[0].length)}return!0}var g;(function(e){e.a="a",e.alpha="alpha",e.alpha1="1a",e.alpha2="2a",e.alpha3="3a",e.alpha4="4a",e.an="an",e.b="b",e.be="be",e.blur="blur",e.bord="bord",e.clip="clip",e.color="c",e.color1="1c",e.color2="2c",e.color3="3c",e.color4="4c",e.fad="fad",e.fade="fade",e.fax="fax",e.fay="fay",e.fe="fe",e.fn="fn",e.fr="fr",e.frx="frx",e.fry="fry",e.frz="frz",e.fs="fs",e.fscx="fscx",e.fscy="fscy",e.fsp="fsp",e.i="i",e.iclip="iclip",e.kLowerCase="k",e.kUpperCase="K",e.kf="kf",e.ko="ko",e.move="move",e.org="org",e.p="p",e.pbo="pbo",e.pos="pos",e.q="q",e.r="r",e.s="s",e.shad="shad",e.t="t",e.text="text",e.u="u",e.unknown="unknown",e.xbord="xbord",e.xshad="xshad",e.ybord="ybord",e.yshad="yshad"})(g||(g={}));function ca(e,t){var y,N,_,$,h,O,j,P,w,B,k,C,H,z,G,Q,L,I,K,ae,M,ee,te,X,T,W,re,ne,fe,ve,ce,Y,ie,be,Ie,$e,Ae,Le,ta,qe,He,We,na,Ye,Je,u,he,R,F,U,J;const n=e.substring(1),r=e.match(tn);if(r&&r.length>0)return Eo(e,t,n,r);const i=e.match(Un);if(i&&i.length>0){const s=i[0];return t.push({name:g.text,value:s}),e=e.substring(s.length),e.length>0&&ca(e,t),t}const o=e.match(Yr);if(!o||o.length==0)return t;function c(s,d,Z){return s.push(d),e=e.substring(Z),e.length>0&&ca(e,s),s}let a=(y=o[0].match(Ur))==null?void 0:y.groups;if(a!=null){const s=Number((a==null?void 0:a.move_x1)??"0"),d=Number((a==null?void 0:a.move_y1)??"0"),Z=Number((a==null?void 0:a.move_x2)??"0"),oe=Number((a==null?void 0:a.move_y2)??"0"),_e=a!=null&&a.move_t1?Number(a.move_t1):null,Se=a!=null&&a.move_t2?Number(a.move_t2):null,_a={name:g.move,x1:s,y1:d,x2:Z,y2:oe,t1:_e,t2:Se};return c(t,_a,o[0].length)}if(a=(N=o[0].match(tr))==null?void 0:N.groups,a!=null){const s=(a==null?void 0:a.alpha_value)??"",d={name:g.alpha,value:s};return c(t,d,o[0].length)}if(a=(_=o[0].match(Nr))==null?void 0:_.groups,a!=null){const s=Number((a==null?void 0:a.xbord_value)??"0"),d={name:g.xbord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=($=o[0].match(Er))==null?void 0:$.groups,a!=null){const s=Number((a==null?void 0:a.ybord_value)??"0"),d={name:g.ybord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(h=o[0].match(Sr))==null?void 0:h.groups,a!=null){const s=Number((a==null?void 0:a.xshad_value)??"0"),d={name:g.xshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(O=o[0].match(Cr))==null?void 0:O.groups,a!=null){const s=Number((a==null?void 0:a.yshad_value)??"0"),d={name:g.yshad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(j=o[0].match(Xr))==null?void 0:j.groups,a!=null){const s=(a==null?void 0:a.iclip_args)??"",d={name:g.iclip,drawCommands:s};return c(t,d,o[0].length)}if(a=(P=o[0].match(kr))==null?void 0:P.groups,a!=null){const s=Number((a==null?void 0:a.blur_value)??"0"),d={name:g.blur,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(w=o[0].match(Ar))==null?void 0:w.groups,a!=null){const s=Number((a==null?void 0:a.bord_value)??"0"),d={name:g.bord,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(B=o[0].match($r))==null?void 0:B.groups,a!=null){const s=Number((a==null?void 0:a.shad_value)??"0"),d={name:g.shad,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(k=o[0].match(Rr))==null?void 0:k.groups,a!=null){const s=Number((a==null?void 0:a.fscx_value)??"0"),d={name:g.fscx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(C=o[0].match(Fr))==null?void 0:C.groups,a!=null){const s=Number((a==null?void 0:a.fscy_value)??"0"),d={name:g.fscy,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(H=o[0].match(Gr))==null?void 0:H.groups,a!=null){const s=Number((a==null?void 0:a.fade_alpha1)??"0"),d=Number((a==null?void 0:a.fade_alpha2)??"0"),Z=Number((a==null?void 0:a.fade_alpha3)??"0"),oe=Number((a==null?void 0:a.fade_t1)??"0"),_e=Number((a==null?void 0:a.fade_t2)??"0"),Se=Number((a==null?void 0:a.fade_t3)??"0"),_a=Number((a==null?void 0:a.fade_t4)??"0"),on={name:g.fade,alpha1:s,alpha2:d,alpha3:Z,t1:oe,t2:_e,t3:Se,t4:_a};return c(t,on,o[0].length)}if(a=(z=o[0].match(Kr))==null?void 0:z.groups,a!=null){const s=(a==null?void 0:a.clip_args)??"",d={name:g.clip,drawCommands:s};return c(t,d,o[0].length)}if(a=(G=o[0].match(Dr))==null?void 0:G.groups,a!=null){const s=Number((a==null?void 0:a.fsp_value)??"0"),d={name:g.fsp,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Q=o[0].match(Br))==null?void 0:Q.groups,a!=null){const s=Number((a==null?void 0:a.pos_x)??"0"),d=Number((a==null?void 0:a.pos_y)??"0"),Z={name:g.pos,x:s,y:d};return c(t,Z,o[0].length)}if(a=(L=o[0].match(Or))==null?void 0:L.groups,a!=null){const s=Number((a==null?void 0:a.org_x)??"0"),d=Number((a==null?void 0:a.org_y)??"0"),Z={name:g.org,x:s,y:d};return c(t,Z,o[0].length)}if(a=(I=o[0].match(zr))==null?void 0:I.groups,a!=null){const s=Number((a==null?void 0:a.in)??"0"),d=Number((a==null?void 0:a.out)??"0"),Z={name:g.fad,in:s,out:d};return c(t,Z,o[0].length)}if(a=(K=o[0].match(Tr))==null?void 0:K.groups,a!=null){const s=Number((a==null?void 0:a.frx_value)??"0"),d={name:g.frx,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ae=o[0].match(Vr))==null?void 0:ae.groups,a!=null){const s=Number((a==null?void 0:a.fry_value)??"0"),d={name:g.fry,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(M=o[0].match(Pr))==null?void 0:M.groups,a!=null){const s=Number((a==null?void 0:a.frz_value)??"0"),d={name:g.frz,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ee=o[0].match(wr))==null?void 0:ee.groups,a!=null){const s=Number((a==null?void 0:a.fax_value)??"0"),d={name:g.fax,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(te=o[0].match(Lr))==null?void 0:te.groups,a!=null){const s=Number((a==null?void 0:a.fay_value)??"0"),d={name:g.fay,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(X=o[0].match(_r))==null?void 0:X.groups,a!=null){const s=Number((a==null?void 0:a.pbo_value)??"0"),d={name:g.pbo,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(T=o[0].match(gr))==null?void 0:T.groups,a!=null){const s=Number((a==null?void 0:a.fe_value)??"0"),d={name:g.fe,encodingId:Number(s)};return c(t,d,o[0].length)}if(a=(W=o[0].match(br))==null?void 0:W.groups,a!=null){const s=(a==null?void 0:a.fn_value)??"",d={name:g.fn,font:s};return c(t,d,o[0].length)}if(a=(re=o[0].match(mr))==null?void 0:re.groups,a!=null){const s=Number((a==null?void 0:a.an_value)??"0"),d={name:g.an,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ne=o[0].match(yr))==null?void 0:ne.groups,a!=null){const s=Number((a==null?void 0:a.be_value)??"0"),d={name:g.be,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(fe=o[0].match(Ir))==null?void 0:fe.groups,a!=null){const s=Number((a==null?void 0:a.fr_value)??"0"),d={name:g.fr,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ve=o[0].match(Mr))==null?void 0:ve.groups,a!=null){const s=Number((a==null?void 0:a.fs_value)??"0"),d={name:g.fs,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ce=o[0].match(cr))==null?void 0:ce.groups,a!=null){const s=Number((a==null?void 0:a.ko_value)??"0"),d={name:g.ko,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Y=o[0].match(ur))==null?void 0:Y.groups,a!=null){const s=Number((a==null?void 0:a.kf_value)??"0"),d={name:g.kf,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(ie=o[0].match(Zn))==null?void 0:ie.groups,a!=null){const s=Number(se((a==null?void 0:a.color1_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color1_bgr_green)??"0")),Z=Number(se((a==null?void 0:a.color1_bgr_red)??"0")),oe={name:g.color1,blue:s,green:d,red:Z};return c(t,oe,o[0].length)}if(a=(be=o[0].match(Qn))==null?void 0:be.groups,a!=null){const s=Number(se((a==null?void 0:a.color2_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color2_bgr_green)??"0")),Z=Number(se((a==null?void 0:a.color2_bgr_red)??"0")),oe={name:g.color2,blue:s,green:d,red:Z};return c(t,oe,o[0].length)}if(a=(Ie=o[0].match(er))==null?void 0:Ie.groups,a!=null){const s=Number(se((a==null?void 0:a.color3_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color3_bgr_green)??"0")),Z=Number(se((a==null?void 0:a.color3_bgr_red)??"0")),oe={name:g.color3,blue:s,green:d,red:Z};return c(t,oe,o[0].length)}if(a=($e=o[0].match(ar))==null?void 0:$e.groups,a!=null){const s=Number(se((a==null?void 0:a.color4_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color4_bgr_green)??"0")),Z=Number(se((a==null?void 0:a.color4_bgr_red)??"0")),oe={name:g.color4,blue:s,green:d,red:Z};return c(t,oe,o[0].length)}if(a=(Ae=o[0].match(nr))==null?void 0:Ae.groups,a!=null){const s=a.alpha1_value??"",d={name:g.alpha1,value:s};return c(t,d,o[0].length)}if(a=(Le=o[0].match(rr))==null?void 0:Le.groups,a!=null){const s=a.alpha2_value??"",d={name:g.alpha2,value:s};return c(t,d,o[0].length)}if(a=(ta=o[0].match(or))==null?void 0:ta.groups,a!=null){const s=a.alpha3_value??"",d={name:g.alpha3,value:s};return c(t,d,o[0].length)}if(a=(qe=o[0].match(lr))==null?void 0:qe.groups,a!=null){const s=a.alpha4_value??"",d={name:g.alpha4,value:s};return c(t,d,o[0].length)}if(a=(He=o[0].match(sr))==null?void 0:He.groups,a!=null){const s=Number((a==null?void 0:a.k_lower_case_value)??"0"),d={name:g.kLowerCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(We=o[0].match(ir))==null?void 0:We.groups,a!=null){const s=Number((a==null?void 0:a.k_upper_case_value)??"0"),d={name:g.kUpperCase,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(na=o[0].match(dr))==null?void 0:na.groups,a!=null){const s=Number((a==null?void 0:a.q_value)??"0"),d={name:g.q,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Ye=o[0].match(fr))==null?void 0:Ye.groups,a!=null){const s=Number((a==null?void 0:a.s_value)??"0"),d={name:g.s,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(Je=o[0].match(vr))==null?void 0:Je.groups,a!=null){const s=Number((a==null?void 0:a.u_value)??"0"),d={name:g.u,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(u=o[0].match(pr))==null?void 0:u.groups,a!=null){const s=(a==null?void 0:a.r_value)??"",d={name:g.r,style:s};return c(t,d,o[0].length)}if(a=(he=o[0].match(hr))==null?void 0:he.groups,a!=null){const s=Number((a==null?void 0:a.p_value)??"0"),d={name:g.p,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(R=o[0].match(Hr))==null?void 0:R.groups,a!=null){const s=Number((a==null?void 0:a.i_value)??"0"),d={name:g.i,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(F=o[0].match(Jn))==null?void 0:F.groups,a!=null){const s=Number(se((a==null?void 0:a.color_bgr_blue)??"0")),d=Number(se((a==null?void 0:a.color_bgr_green)??"0")),Z=Number(se((a==null?void 0:a.color_bgr_red)??"0")),oe={name:g.color,blue:s,green:d,red:Z};return c(t,oe,o[0].length)}if(a=(U=o[0].match(xr))==null?void 0:U.groups,a!=null){const s=Number((a==null?void 0:a.b_value)??"0"),d={name:g.b,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}if(a=(J=o[0].match(Wn))==null?void 0:J.groups,a!=null){const s=Number((a==null?void 0:a.a_value)??"0"),d={name:g.a,value:Number.isNaN(s)?0:s};return c(t,d,o[0].length)}const p=o[0],b={name:g.unknown,value:p};return c(t,b,o[0].length)}function Eo(e,t,n,r){var i;if(n.startsWith(g.t)){const o=(i=r[0].match(tn))==null?void 0:i.groups,c=(o==null?void 0:o.tags)??"",a=[];ca(c,a);const p=o!=null&&o.arg1?Number(o.arg1):null,b=o!=null&&o.arg2?Number(o.arg2):null,y=o!=null&&o.arg3?Number(o.arg3):null,N={name:g.t,accel:null,t1:null,t2:null,tags:a};p!==null&&b!==null&&y!==null?(N.t1=p,N.t2=b,N.accel=y):p!==null&&b!==null&&y===null?(N.t1=p,N.t2=b,N.accel=null):p!==null&&(N.accel=p),t.push(N)}return e=e.substring(r[0].length),e.length>0&&ca(e,t),t}function ge(e){var r,i,o;const t=[],n=e.matchAll(jn);for(const c of n){if((r=c.groups)!=null&&r.fx){const a=c.groups.fx.substring(1,c.groups.fx.length-1),p=[];ca(a,p),t.push({name:"effect",tags:p});continue}if((i=c.groups)!=null&&i.txt){t.push({name:"text",value:(o=c.groups)==null?void 0:o.txt});continue}}return t}function nn(e){let t="";for(const n of e.tags)switch(n.name){case g.t:{const r={name:"effect",tags:n.tags},i=nn(r);n.t1!==null&&n.t2!==null&&n.accel!==null?t+=`\\t(${n.t1},${n.t2},${n.accel},${i})`:n.t1!==null&&n.t2!==null&&n.accel===null?t+=`\\t(${n.t1},${n.t2},${i})`:n.accel!==null?t+=`\\t(${n.accel},${i})`:t+=`\\t(${i})`;break}case g.pos:case g.org:t+=`\\${n.name}(${n.x},${n.y})`;break;case g.move:t+=`\\move(${n.x1},${n.y1},${n.x2},${n.y2}`,n.t1!=null&&n.t2!=null&&(t+=`,${n.t1},${n.t2}`),t+=")";break;case g.clip:case g.iclip:t+=`\\${n.name}(${n.drawCommands})`;break;case g.fad:t+=`\\fad(${n.in},${n.out})`;break;case g.fade:t+=`\\fade(${n.alpha1},${n.alpha2},${n.alpha3},${n.t1},${n.t2},${n.t3},${n.t4})`;break;case g.fe:t+=`\\fe${n.encodingId}`;break;case g.fn:t+=`\\fn${n.font}`;break;case g.r:t+=`\\r${n.style}`;break;case g.color:case g.color1:case g.color2:case g.color3:case g.color4:{const r=fa(n.blue),i=fa(n.green),o=fa(n.red);t+=`\\${n.name}&H${r}${i}${o}&`;break}case g.text:case g.unknown:t+=n.value;break;default:t+=`\\${n.name}${n.value}`;break}return t}function me(e){let t="";for(const n of e){if(n.name=="text"){t+=n.value;continue}t+="{"+nn(n)+"}"}return t}function Ua(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(r.name!="effect")continue;const i=e[n+1];if(i.name!="effect"){n++;continue}if(i==null)break;r.tags.push(...i.tags),t.push(n+1)}for(const n of t)e.splice(n,1)}function oa(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.pos,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function $o(e){const t=e.find(i=>i.name=="effect");if((t==null?void 0:t.name)!="effect")return null;const n=g.move,r=t.tags.find(i=>i.name==n);return(r==null?void 0:r.name)!=n?null:r}function So(e,t,n,r){const i={name:g.color,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Co(e,t,n,r){const i={name:g.color1,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function wo(e,t,n,r){const i={name:g.color2,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Lo(e,t,n,r){const i={name:g.color3,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Ro(e,t,n,r){const i={name:g.color4,blue:t,green:n,red:r},[o,c]=De(e,i.name,i);return o||(c.blue=t,c.green=n,c.red=r),c}function Fo(e,t){const n={name:g.alpha,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Do(e,t){const n={name:g.alpha1,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Io(e,t){const n={name:g.alpha2,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function To(e,t){const n={name:g.alpha3,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Vo(e,t){const n={name:g.alpha4,value:t},[r,i]=De(e,n.name,n);return r||(i.value=t),i}function Po(e,t,n){const r={name:g.pos,x:t,y:n},[i,o]=De(e,r.name,r);return i||(o.x=t,o.y=n),o}function Ho(e,t,n,r,i,o=null,c=null){const a={name:g.move,x1:t,y1:n,x2:r,y2:i,t1:o,t2:c},[p,b]=De(e,a.name,a);return p||(b.x1=t,b.y1=n,b.x2=r,b.y2=i,b.t1=o,b.t2=c),b}function De(e,t,n){const r=e.find(o=>o.name=="effect");if((r==null?void 0:r.name)!="effect")return e.unshift({name:"effect",tags:[n]}),[!0,n];const i=r.tags.find(o=>o.name==t);return(i==null?void 0:i.name)!=t?(r.tags.push(n),[!0,n]):[!1,i]}function Mo(e,t){const n=e.find(i=>i.name=="effect");if((n==null?void 0:n.name)!="effect")return;const r=n.tags.findIndex(i=>i.name===t);r<0||n.tags.splice(r,1)}const Bo="Dialogue",wa="Comment";function Ge(e){const t=e.match(Xn);if(t==null)return null;const n=t.groups,r=za((n==null?void 0:n.start)??"");if(r==null)return null;const i=za((n==null?void 0:n.end)??"");return i==null?null:{type:(n==null?void 0:n.type)===wa?wa:Bo,layer:Number((n==null?void 0:n.layer)??"0"),start:r,end:i,style:(n==null?void 0:n.style)??"",actor:(n==null?void 0:n.actor)??"",marginLeft:Number((n==null?void 0:n.marginLeft)??"0"),marginRight:Number((n==null?void 0:n.marginRight)??"0"),marginVertical:Number((n==null?void 0:n.marginVertical)??"0"),effect:(n==null?void 0:n.effect)??"",content:(n==null?void 0:n.content)??""}}function xe(e){let t=e.type;return t+=": ",t+=Math.floor(e.layer),t+=",",t+=Ga(e.start),t+=",",t+=Ga(e.end),t+=",",t+=e.style,t+=",",t+=e.actor,t+=",",t+=Math.floor(e.marginLeft),t+=",",t+=Math.floor(e.marginRight),t+=",",t+=Math.floor(e.marginVertical),t+=",",t+=e.effect,t+=",",t+=e.content,t}function Oo(e){return ga(e.end)-ga(e.start)}function Me(e){const t=e.match(Yn);if(t==null)return null;const n=t.groups;return{blue:se((n==null?void 0:n.color_bgr_blue)??""),green:se((n==null?void 0:n.color_bgr_green)??""),red:se((n==null?void 0:n.color_bgr_red)??"")}}var zo=(e,t)=>t(),Go=(e,t)=>t(),jo=()=>{},Uo=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Movimiento base</label> <div class="control"><input class="input" type="text" placeholder="\\move(10,20,30,40)"></div></div> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function Ko(e,t){Ve(t,!0);const n=ue.copiarMovimiento;let r=E("Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\move(320,470,320,168,0,4963)}Urusai!"),i=E(""),o=E("");function c(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const L=l(i).split(`
`);console.log(L);const I=Ge(l(r));if(I==null){console.error("invalid base line",l(r));return}const K=ge(I.content),ae=$o(K);if(ae==null){console.error("base move not found");return}const M=ae.x2-ae.x1,ee=ae.y2-ae.y1;let te="";for(let X=0;X<L.length;X++){const T=L[X];if(T.length==0)continue;const W=Ge(T);if(W==null){console.error(`line ${X+1}: invalid line`);break}const re=ge(W.content),ne=oa(re);if(ne==null){console.error(`line ${X+1}: pos not found`);break}Mo(re,g.pos);const fe=ne.x,ve=ne.y,ce=ne.x+M,Y=ne.y+ee;Ho(re,fe,ve,ce,Y,ae.t1,ae.t2);const ie=me(re);W.content=ie;const be=xe(W);console.log(be),X>0&&(te+=`
`),te+=be}v(o,S(te))}async function a(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{for(let L=1;L<=10;L++){const I=182+L*5,K=421+L*7;v(i,l(i)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(${I},${K})}LINEA ${L}
`)}});var p=Uo();Ke(L=>{Xe.title=n});var b=x(p);b.textContent=n;var y=A(b,2),N=A(x(y),2),_=x(N);aa(_),m(N),m(y);var $=A(y,2),h=x($),O=x(h,!0);m(h);var j=A(h,2),P=x(j);Ce(P),m(j),m($);var w=A($,2);w.__click=[zo,c];var B=x(w,!0);m(w);var k=A(w,2),C=x(k),H=x(C),z=A(H);z.__click=[Go,a],z.__keydown=[jo],m(C);var G=A(C,2),Q=x(G);Ce(Q),m(G),m(k),m(p),Ne(()=>{de(O,ue.subtitulos),de(B,ue.copiarMovimiento),de(H,`${ue.resultado} `)}),ke(_,()=>l(r),L=>v(r,L)),ke(P,()=>l(i),L=>v(i,L)),ke(Q,()=>l(o),L=>v(o,L)),le(e,p),Pe()}Ue(["click","keydown"]);var Xo=ye(`<div class="text-column"><h1></h1> <div class="kagamin svelte-i9q0t3"><img src="img/kagamin.gif" alt="Lucky Star" title="Lucky Star" class="svelte-i9q0t3"></div> <p class="mt-2">Asu versión web, de <a href="https://github.com/FS-Frost" target="_blank">[FS] Frost</a> para <a href="http://syncrajo.net/" target="_blank">SyncRajo Fansub</a>.</p> <p class="mt-2">Agradecimientos por su ayuda a:</p> <ul><li>- [GX] Gonxas: hardcore testing y script para crear AVS.</li> <li>- [Sr] Hell: servicio de host.</li> <li>- [EC] DarkAngel: idea para separar sílabas en karaokes.</li></ul> <p class="mt-2">Asu es una herramienta para automatizar el procesamiento de subtítulos
        en formato SubStation Alpha Subtitles (SSA/ASS).</p> <p class="mt-2"><b>Visítanos en <a href="http://syncrajo.net/" target="_blank">http://syncrajo.net</a></b></p> <p class="mt-2">Versiones de Asu:</p> <ul><li><a href="https://github.com/FS-Frost/Asu.Utilidades" target="_blank">- (2014) Asu para .NET/C#</a></li> <li><a href="https://github.com/FS-Frost/asu-go2js" target="_blank">- (2022) Asu para Go y JavaScript</a></li> <li><a href="https://github.com/FS-Frost/asu-regex-js" target="_blank">- (2024) Asu para TypeScript</a></li></ul></div>`);function qo(e,t){Ve(t,!1);const n=ue.acercaDe;Rn();var r=Xo();Ke(o=>{Xe.title=n});var i=x(r);i.textContent=n,da(16),m(r),le(e,r),Pe()}var Wo=ye('<img class="wallpaper svelte-1ic3zkr" src="img/hyouka.jpg" alt="Hyouka" title="Hyouka">');function Yo(e){var t=Wo();Ke(n=>{Xe.title="Asu"}),le(e,t)}var Jo=(e,t)=>t(),Zo=ye("<b> </b>"),Qo=ye('<div class="field alpha-box svelte-9wq0vr"><div class="svelte-9wq0vr"><label class="checkbox"><input type="checkbox"> <!></label></div> <div class="alpha-inputs svelte-9wq0vr"><div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor inicial</label> <div class="control"><input class="input" type="text"></div></div> <div class="alpha-value svelte-9wq0vr"><label class="label" for="">Valor Final</label> <div class="control"><input class="input" type="text"></div></div></div></div>');function ze(e,t){Ve(t,!0);let n=ra(t,"label",3,""),r=ra(t,"disabled",15,!1),i=ra(t,"startValue",15,""),o=ra(t,"endValue",15,""),c=ra(t,"startPlaceholder",3,""),a=ra(t,"endPlaceholder",3,""),p=E(void 0);function b(){var L;if((L=l(p))!=null&&L.checked){y();return}N()}function y(){r()&&(r(!1),l(p)&&(l(p).checked=!0),t.onEnabled&&t.onEnabled())}function N(){r()||(r(!0),l(p)&&(l(p).checked=!1),t.onDisabled&&t.onDisabled())}Qe(()=>{l(p)&&(l(p).checked=!r())});var _=Qo(),$=x(_),h=x($),O=x(h);O.__change=[Jo,b],Fe(O,L=>v(p,L),()=>l(p));var j=A(O,2);{var P=L=>{var I=ln();Ne(()=>de(I,`${n()??""}
                (deshabilitado)`)),le(L,I)},w=L=>{var I=Zo(),K=x(I,!0);m(I),Ne(()=>de(K,n())),le(L,I)};Re(j,L=>{r()?L(P):L(w,!1)})}m(h),m($);var B=A($,2),k=x(B),C=A(x(k),2),H=x(C);aa(H),m(C),m(k);var z=A(k,2),G=A(x(z),2),Q=x(G);return aa(Q),m(G),m(z),m(B),m(_),Ne(()=>{ua(H,"placeholder",c()),H.disabled=r(),ua(Q,"placeholder",a()),Q.disabled=r()}),ke(H,i),ke(Q,o),le(e,_),Pe({enable:y,disable:N})}Ue(["change"]);function sa(e,t){const n=[];for(let r=e;r<=t;r++){const i=fa(r);n.push(i)}return n}function ia(e,t,n){const r=Array(n),i=Na(e.blue,t.blue,n);if(i.length!==n)return console.error(`ERROR: blue interpolated values ${i.length} don't match intervals ${n}`),[];const o=Na(e.green,t.green,n);if(o.length!==n)return console.error(`ERROR: green interpolated values ${o.length} don't match intervals ${n}`),[];const c=Na(e.red,t.red,n);if(c.length!==n)return console.error(`ERROR: red interpolated values ${c.length} don't match intervals ${n}`),[];for(var a=0;a<n;a++){const p=Math.floor(i[a]),b=Math.floor(o[a]),y=Math.floor(c[a]);r[a]={blue:p,green:b,red:y}}return r}var el=(e,t)=>t(),al=()=>{},tl=ye('<i class="fa-solid fa-copy clickable" role="button" tabindex="0"></i>');function rn(e,t){Ve(t,!0);async function n(){await navigator.clipboard.writeText(t.rawResultLines),alert(ue.lineasCopiadas)}var r=tl();r.__click=[el,n],r.__keydown=[al],Ne(()=>ua(r,"title",ue.copiar)),le(e,r),Pe()}Ue(["click","keydown"]);var nl=(e,t)=>t(),rl=ye('<section class="svelte-do1mnp"><h1 class="title is-5"></h1> <label class="label" for="">Configuración alpha</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function ol(e,t){Ve(t,!0);const n=ue.aplicarAlpha,r="0",i="FF";let o=E(""),c=E(""),a=E("0"),p=E("FF"),b=E("0"),y=E("FF"),N=E("0"),_=E("FF"),$=E("0"),h=E("FF"),O=E("0"),j=E("FF"),P=E(!1),w=E(!0),B=E(!0),k=E(!0),C=E(!0),H=E(void 0),z=E(void 0),G=E(void 0),Q=E(void 0),L=E(void 0),I=E(!1);function K(){var u,he,R,F;(u=l(z))==null||u.disable(),(he=l(G))==null||he.disable(),(R=l(Q))==null||R.disable(),(F=l(L))==null||F.disable()}function ae(){var u,he,R,F;l(w)&&l(B)&&l(k)&&l(C)&&((u=l(z))==null||u.enable(),(he=l(G))==null||he.disable(),(R=l(Q))==null||R.disable(),(F=l(L))==null||F.disable())}function M(){var u;(u=l(H))==null||u.disable()}function ee(){var u;l(w)&&l(B)&&l(k)&&l(C)&&((u=l(H))==null||u.enable())}function te(){const u=[],he=l(o).split(`
`);for(const R of he){if(R.length==0)continue;const F=Ge(R);F!=null&&u.push(F)}if(!l(P)){const R=se(l(a)),F=se(l(p));if(R>=F){alert("El inicio de alpha total debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha total debe ser mayor o igual a 00 (0).");return}if(F>255){alert("El fin de alpha total debe ser menor o igual a FF (255).");return}const U=sa(R,F);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){let d=Math.floor(U.length*s/u.length);d>=U.length&&(d=U.length-1);const oe=`&H${U[d]}&`,_e=ge(u[s].content);Fo(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(J+=`
`),J+=Se}v(c,S(J));return}if(!l(w)){const R=se(l(b)),F=se(l(y));if(R>=F){alert("El inicio de alpha 1 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 1 debe ser mayor o igual a 00 (0).");return}if(F>255){alert("El fin de alpha 1 debe ser menor o igual a FF (255).");return}const U=sa(R,F);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){let d=Math.floor(U.length*s/u.length);d>=U.length&&(d=U.length-1);const oe=`&H${U[d]}&`,_e=ge(u[s].content);Do(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(J+=`
`),J+=Se}v(c,S(J))}if(!l(B)){const R=se(l(N)),F=se(l(_));if(R>=F){alert("El inicio de alpha 2 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 2 debe ser mayor o igual a 00 (0).");return}if(F>255){alert("El fin de alpha 2 debe ser menor o igual a FF (255).");return}const U=sa(R,F);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){let d=Math.floor(U.length*s/u.length);d>=U.length&&(d=U.length-1);const oe=`&H${U[d]}&`,_e=ge(u[s].content);Io(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(J+=`
`),J+=Se}v(c,S(J))}if(!l(k)){const R=se(l($)),F=se(l(h));if(R>=F){alert("El inicio de alpha 3 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 3 debe ser mayor o igual a 00 (0).");return}if(F>255){alert("El fin de alpha 3 debe ser menor o igual a FF (255).");return}const U=sa(R,F);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){let d=Math.floor(U.length*s/u.length);d>=U.length&&(d=U.length-1);const oe=`&H${U[d]}&`,_e=ge(u[s].content);To(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(J+=`
`),J+=Se}v(c,S(J))}if(!l(C)){const R=se(l(O)),F=se(l(j));if(R>=F){alert("El inicio de alpha 4 debe ser menor al fin.");return}if(R<0){alert("El inicio de alpha 4 debe ser mayor o igual a 00 (0).");return}if(F>255){alert("El fin de alpha 4 debe ser menor o igual a FF (255).");return}const U=sa(R,F);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){let d=Math.floor(U.length*s/u.length);d>=U.length&&(d=U.length-1);const oe=`&H${U[d]}&`,_e=ge(u[s].content);Vo(_e,oe),u[s].content=me(_e);const Se=xe(u[s]);s>0&&(J+=`
`),J+=Se}v(c,S(J))}}Qe(()=>{for(let u=1;u<=10;u++)v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:05.00,Default,,0,0,0,,{\\pos(182,421)}LINEA ${u}
`)});var X=rl();Ke(u=>{Xe.title=n});var T=x(X);T.textContent=n;var W=A(T,4);Fe(ze(W,{label:"Alpha total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>K(),onDisabled:()=>ae(),get startValue(){return l(a)},set startValue(u){v(a,S(u))},get endValue(){return l(p)},set endValue(u){v(p,S(u))},get disabled(){return l(P)},set disabled(u){v(P,S(u))}}),u=>v(H,S(u)),()=>l(H));var re=A(W,2);Fe(ze(re,{label:"Alpha 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(b)},set startValue(u){v(b,S(u))},get endValue(){return l(y)},set endValue(u){v(y,S(u))},get disabled(){return l(w)},set disabled(u){v(w,S(u))}}),u=>v(z,S(u)),()=>l(z));var ne=A(re,2);Fe(ze(ne,{label:"Alpha 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(N)},set startValue(u){v(N,S(u))},get endValue(){return l(_)},set endValue(u){v(_,S(u))},get disabled(){return l(B)},set disabled(u){v(B,S(u))}}),u=>v(G,S(u)),()=>l(G));var fe=A(ne,2);Fe(ze(fe,{label:"Alpha 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l($)},set startValue(u){v($,S(u))},get endValue(){return l(h)},set endValue(u){v(h,S(u))},get disabled(){return l(k)},set disabled(u){v(k,S(u))}}),u=>v(Q,S(u)),()=>l(Q));var ve=A(fe,2);Fe(ze(ve,{label:"Alpha 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(O)},set startValue(u){v(O,S(u))},get endValue(){return l(j)},set endValue(u){v(j,S(u))},get disabled(){return l(C)},set disabled(u){v(C,S(u))}}),u=>v(L,S(u)),()=>l(L));var ce=A(ve,2),Y=x(ce);aa(Y),da(),m(ce);var ie=A(ce,2),be=x(ie),Ie=x(be,!0);m(be);var $e=A(be,2),Ae=x($e);Ce(Ae),m($e),m(ie);var Le=A(ie,2);Le.__click=[nl,te];var ta=x(Le,!0);m(Le);var qe=A(Le,2),He=x(qe),We=x(He),na=A(We);rn(na,{get rawResultLines(){return l(c)}}),m(He);var Ye=A(He,2),Je=x(Ye);Ce(Je),m(Ye),m(qe),m(X),Ne(()=>{de(Ie,ue.subtitulos),de(ta,ue.aplicarAlpha),de(We,`${ue.resultado} `)}),Fa(Y,()=>l(I),u=>v(I,u)),ke(Ae,()=>l(o),u=>v(o,u)),ke(Je,()=>l(c),u=>v(c,u)),le(e,X),Pe()}Ue(["click"]);var ll=(e,t)=>t(),sl=ye('<section class="svelte-do1mnp"><h1 class="title is-5"></h1> <label class="label" for="">Configuración de color</label> <!> <!> <!> <!> <!> <label class="checkbox reverse svelte-do1mnp"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <!></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function il(e,t){Ve(t,!0);const n=ue.aplicarColor,r="&HFFFFFF&",i="&H000000&";let o=E(""),c=E(""),a=E(r),p=E(i),b=E(r),y=E(i),N=E(r),_=E(i),$=E(r),h=E(i),O=E(r),j=E(i),P=E(!1),w=E(!0),B=E(!0),k=E(!0),C=E(!0),H=E(void 0),z=E(void 0),G=E(void 0),Q=E(void 0),L=E(void 0),I=E(!1);function K(){var u,he,R,F;(u=l(z))==null||u.disable(),(he=l(G))==null||he.disable(),(R=l(Q))==null||R.disable(),(F=l(L))==null||F.disable()}function ae(){var u,he,R,F;l(w)&&l(B)&&l(k)&&l(C)&&((u=l(z))==null||u.enable(),(he=l(G))==null||he.disable(),(R=l(Q))==null||R.disable(),(F=l(L))==null||F.disable())}function M(){var u;(u=l(H))==null||u.disable()}function ee(){var u;l(w)&&l(B)&&l(k)&&l(C)&&((u=l(H))==null||u.enable())}function te(){const u=[],he=l(o).split(`
`);for(const R of he){if(R.length==0)continue;const F=Ge(R);F!=null&&u.push(F)}if(!l(P)){const R=Me(l(a));if(R==null){alert(`Color total de inicio inválido: ${l(a)}`);return}const F=Me(l(p));if(F==null){alert(`Color total de fin inválido: ${l(p)}`);return}const U=ia(R,F,u.length);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){const d=U[s],Z=ge(u[s].content);So(Z,d.blue,d.green,d.red),u[s].content=me(Z);const oe=xe(u[s]);s>0&&(J+=`
`),J+=oe}v(c,S(J));return}if(!l(w)){const R=Me(l(b));if(R==null){alert(`Color 1 de inicio inválido: ${l(b)}`);return}const F=Me(l(y));if(F==null){alert(`Color 1 de fin inválido: ${l(y)}`);return}const U=ia(R,F,u.length);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){const d=U[s],Z=ge(u[s].content);Co(Z,d.blue,d.green,d.red),u[s].content=me(Z);const oe=xe(u[s]);s>0&&(J+=`
`),J+=oe}v(c,S(J))}if(!l(B)){const R=Me(l(N));if(R==null){alert(`Color 2 de inicio inválido: ${l(N)}`);return}const F=Me(l(_));if(F==null){alert(`Color 2 de fin inválido: ${l(_)}`);return}const U=ia(R,F,u.length);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){const d=U[s],Z=ge(u[s].content);wo(Z,d.blue,d.green,d.red),u[s].content=me(Z);const oe=xe(u[s]);s>0&&(J+=`
`),J+=oe}v(c,S(J))}if(!l(k)){const R=Me(l($));if(R==null){alert(`Color 3 de inicio inválido: ${l($)}`);return}const F=Me(l(h));if(F==null){alert(`Color 3 de fin inválido: ${l(h)}`);return}const U=ia(R,F,u.length);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){const d=U[s],Z=ge(u[s].content);Lo(Z,d.blue,d.green,d.red),u[s].content=me(Z);const oe=xe(u[s]);s>0&&(J+=`
`),J+=oe}v(c,S(J))}if(!l(C)){const R=Me(l(O));if(R==null){alert(`Color 4 de inicio inválido: ${l(O)}`);return}const F=Me(l(j));if(F==null){alert(`Color 4 de fin inválido: ${l(j)}`);return}const U=ia(R,F,u.length);l(I)&&U.reverse();let J="";for(let s=0;s<u.length;s++){const d=U[s],Z=ge(u[s].content);Ro(Z,d.blue,d.green,d.red),u[s].content=me(Z);const oe=xe(u[s]);s>0&&(J+=`
`),J+=oe}v(c,S(J))}}Qe(()=>{v(o,l(o)+`Dialogue: 0,0:00:00.00,0:00:00.02,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.02,0:00:00.06,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.06,0:00:00.10,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.10,0:00:00.14,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.14,0:00:00.18,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.18,0:00:00.23,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.23,0:00:00.27,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+`Dialogue: 0,0:00:00.27,0:00:00.31,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO
`),v(o,l(o)+"Dialogue: 0,0:00:00.31,0:00:00.35,Default,,0,0,0,,{\\fs42\\bord3\\shad0}TEXTO")});var X=sl();Ke(u=>{Xe.title=n});var T=x(X);T.textContent=n;var W=A(T,4);Fe(ze(W,{label:"Color total",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>K(),onDisabled:()=>ae(),get startValue(){return l(a)},set startValue(u){v(a,S(u))},get endValue(){return l(p)},set endValue(u){v(p,S(u))},get disabled(){return l(P)},set disabled(u){v(P,S(u))}}),u=>v(H,S(u)),()=>l(H));var re=A(W,2);Fe(ze(re,{label:"Color 1",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(b)},set startValue(u){v(b,S(u))},get endValue(){return l(y)},set endValue(u){v(y,S(u))},get disabled(){return l(w)},set disabled(u){v(w,S(u))}}),u=>v(z,S(u)),()=>l(z));var ne=A(re,2);Fe(ze(ne,{label:"Color 2",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(N)},set startValue(u){v(N,S(u))},get endValue(){return l(_)},set endValue(u){v(_,S(u))},get disabled(){return l(B)},set disabled(u){v(B,S(u))}}),u=>v(G,S(u)),()=>l(G));var fe=A(ne,2);Fe(ze(fe,{label:"Color 3",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l($)},set startValue(u){v($,S(u))},get endValue(){return l(h)},set endValue(u){v(h,S(u))},get disabled(){return l(k)},set disabled(u){v(k,S(u))}}),u=>v(Q,S(u)),()=>l(Q));var ve=A(fe,2);Fe(ze(ve,{label:"Color 4",startPlaceholder:r,endPlaceholder:i,onEnabled:()=>M(),onDisabled:()=>ee(),get startValue(){return l(O)},set startValue(u){v(O,S(u))},get endValue(){return l(j)},set endValue(u){v(j,S(u))},get disabled(){return l(C)},set disabled(u){v(C,S(u))}}),u=>v(L,S(u)),()=>l(L));var ce=A(ve,2),Y=x(ce);aa(Y),da(),m(ce);var ie=A(ce,2),be=x(ie),Ie=x(be,!0);m(be);var $e=A(be,2),Ae=x($e);Ce(Ae),m($e),m(ie);var Le=A(ie,2);Le.__click=[ll,te];var ta=x(Le,!0);m(Le);var qe=A(Le,2),He=x(qe),We=x(He),na=A(We);rn(na,{get rawResultLines(){return l(c)}}),m(He);var Ye=A(He,2),Je=x(Ye);Ce(Je),m(Ye),m(qe),m(X),Ne(()=>{de(Ie,ue.subtitulos),de(ta,ue.aplicarColor),de(We,`${ue.resultado} `)}),Fa(Y,()=>l(I),u=>v(I,u)),ke(Ae,()=>l(o),u=>v(o,u)),ke(Je,()=>l(c),u=>v(c,u)),le(e,X),Pe()}Ue(["click"]);var ul=(e,t)=>t(),cl=(e,t)=>t(),dl=()=>{},fl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Secuencia de posiciones</label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <label class="checkbox reverse"><input type="checkbox"> Aplicar inversamente</label> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function vl(e,t){Ve(t,!0);const n=ue.aplicarSecuenciaPosiciones;let r=E(""),i=E(""),o=E(""),c=E(!1);function a(){if(l(i).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const M=[];{const X=l(r).split(`
`);for(const T of X){if(T.length==0)continue;const W=Ge(T);if(W==null)continue;const re=ge(W.content);if(oa(re)==null){alert(`Línea base sin \\pos copiada: '${T}'`),console.log(T);return}M.push(W)}}const ee=[];{const X=l(i).split(`
`);for(const T of X){if(T.length==0)continue;const W=Ge(T);if(W==null)continue;const re=ge(W.content);if(oa(re)==null){alert(`Línea objetivo sin \\pos: '${T}'`),console.log(T);return}ee.push(W)}}let te="";for(let X=0;X<ee.length;X++){const T=ee[X],W=ge(T.content),re=oa(W);if(re==null){const Y=xe(T);alert(`Línea objetivo sin \\pos: '${Y}'`),console.log(Y);return}let ne=re.x,fe=re.y;l(c)&&M.reverse();const ve=p(M),ce=[];for(let Y=0;Y<M.length;Y++){const ie=ve[Y][0],be=ve[Y][1],Ie=ne+ie,$e=fe+be;ne=Ie,fe=$e,Po(W,Ie,$e),T.content=me(W);const Ae=M[Y];T.start=Ae.start,T.end=Ae.end,ce.push(structuredClone(T))}l(c)&&(M.reverse(),ce.reverse());for(const Y of ce)te+=xe(Y)+`
`}v(o,S(te))}function p(M){const te=[[0,0]];for(let X=0;X<M.length-1;X++){const T=M[X],W=M[X+1],re=ge(T.content),ne=oa(re);if(ne==null)return alert(`Línea base sin \\pos: '${xe(T)}'`),console.log(T),[];const fe=ge(W.content),ve=oa(fe);if(ve==null)return alert(`Línea base sin \\pos: '${xe(W)}'`),console.log(W),[];const ce=ve.x-ne.x,Y=ve.y-ne.y;te.push([ce,Y])}return te}async function b(){await navigator.clipboard.writeText(l(o)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.6,593.8)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.08,0:23:58.12,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.55,589.69)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.12,0:23:58.16,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.56,585.4)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.16,0:23:58.20,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.41,581.09)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.20,0:23:58.24,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.31,576.78)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.24,0:23:58.29,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.22,572.39)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.29,0:23:58.33,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.06,568.18)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.33,0:23:58.37,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(635.13,563.34)}Tama:
`),v(r,l(r)+`Dialogue: 1,0:23:58.37,0:23:58.41,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.99,558.77)}Tama:
`),v(r,l(r)+"Dialogue: 1,0:23:58.41,0:23:58.45,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(634.96,554.13)}Tama:"),v(i,"Dialogue: 1,0:23:58.04,0:23:58.08,Cartel,,0,0,0,,{\\fax-0.1\\fs56\\an4\\1c&H1E2357&\\3c&HF4F4F4&\\bord0\\blur0.4\\frz354.6\\frx4\\fry354\\pos(1039.6,593.8)}LINEA")});var y=fl();Ke(M=>{Xe.title=n});var N=x(y);N.textContent=n;var _=A(N,2),$=A(x(_),2),h=x($);Ce(h),m($),m(_);var O=A(_,2),j=x(O);aa(j),da(),m(O);var P=A(O,2),w=x(P),B=x(w,!0);m(w);var k=A(w,2),C=x(k);Ce(C),m(k),m(P);var H=A(P,2);H.__click=[ul,a];var z=x(H,!0);m(H);var G=A(H,2),Q=x(G),L=x(Q),I=A(L);I.__click=[cl,b],I.__keydown=[dl],m(Q);var K=A(Q,2),ae=x(K);Ce(ae),m(K),m(G),m(y),Ne(()=>{de(B,ue.subtitulos),de(z,ue.aplicarSecuenciaPosiciones),de(L,`${ue.resultado} `)}),ke(h,()=>l(r),M=>v(r,M)),Fa(j,()=>l(c),M=>v(c,M)),ke(C,()=>l(i),M=>v(i,M)),ke(ae,()=>l(o),M=>v(o,M)),le(e,y),Pe()}Ue(["click","keydown"]);var pl=(e,t)=>t(),gl=(e,t)=>t(),bl=()=>{},hl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for=""> </label> <div class="control"><textarea class="textarea" placeholder="Pega tus líneas aquí"></textarea></div></div> <button class="button is-link is-fullwidth"> </button> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function _l(e,t){Ve(t,!0);const n=ue.dividirSilabas;let r=E(""),i=E("");function o(){if(l(r).length==0){alert("Pega las líneas desde Aegisub para continuar.");return}const H=l(r).split(`
`);let z="";for(let G=0;G<H.length;G++){const Q=H[G];if(Q.length==0)continue;const L=Ge(Q);if(L==null){console.error(`line ${G+1}: invalid line`);break}Ao(L);const I=xe(L);G>0&&(z+=`
`),z+=I}v(i,S(z))}async function c(){await navigator.clipboard.writeText(l(i)),alert("¡Líneas copiadas al portapapeles!")}Qe(()=>{v(r,l(r)+`Comment: 0,0:01:15.11,0:01:17.74,Romaji,,0,0,0,karaoke,dareka wo mamoreru watashi ni natte
`),v(r,l(r)+`Comment: 0,0:01:17.85,0:01:20.44,Romaji,,0,0,0,karaoke,mune wo hatte itsuka omoerun da
`),v(r,l(r)+`Comment: 0,0:01:20.58,0:01:30.42,Romaji,,0,0,0,karaoke,ano hi kimi ni deaete yokatta
`)});var a=hl();Ke(H=>{Xe.title=n});var p=x(a);p.textContent=n;var b=A(p,2),y=x(b),N=x(y);m(y);var _=A(y,2),$=x(_);Ce($),m(_),m(b);var h=A(b,2);h.__click=[pl,o];var O=x(h,!0);m(h);var j=A(h,2),P=x(j),w=x(P),B=A(w);B.__click=[gl,c],B.__keydown=[bl],m(P);var k=A(P,2),C=x(k);Ce(C),m(k),m(j),m(a),Ne(()=>{de(N,`${ue.subtitulos} (romaji)`),de(O,ue.dividirSilabas),de(w,`${ue.resultado} `)}),ke($,()=>l(r),H=>v(r,H)),ke(C,()=>l(i),H=>v(i,H)),le(e,a),Pe()}Ue(["click","keydown"]);var ml=(e,t)=>t(),xl=ye("<button> </button>"),yl=ye('<p class="preview"> <b> </b></p>'),kl=(e,t)=>t(),Al=()=>{},Nl=ye('<section class="svelte-jzi2e1"><h1 class="title is-5"></h1> <div class="field"><label class="label" for="">Karaoke</label> <div class="control"><input class="input" type="text"></div></div> <button class="button is-link is-fullwidth">Actualizar karaoke</button> <div class="mb-2"><label class="label" for="">Sílaba divisoria</label> <div class="buttons"></div></div> <div class="field"><label class="label" for="">Vista previa</label> <!></div> <div class="field mt-2"><label class="label" for=""> <i class="fa-solid fa-copy clickable" role="button" tabindex="0" title="Copiar"></i></label> <div class="control"><textarea class="textarea"></textarea></div></div></section>');function El(e,t){Ve(t,!0);const n=ue.dividirKaraoke,r="Comment: 0,0:02:44.95,0:02:50.57,Romaji C,,0,0,0,karaoke,{\\kf32}ko{\\kf34}no {\\kf32}de{\\kf32}a{\\kf18}i {\\kf49}ga{\\kf31}{\\k0} {\\kf37}mi{\\kf31}n{\\kf34}na {\\kf19}wo {\\kf31}ka{\\kf34}e{\\kf63}ru {\\kf52}ka{\\kf33}na";let i=E(r),o=E(S([])),c=E(""),a=E(S([])),p=E(0);function b(){const K=Ge(l(i));if(K==null)return;const ae=ge(K.content);Ua(ae);const M=0;let ee=l(a)[l(p)].index+1,te=0;for(let Y=0;Y<=l(p);Y++){const ie=l(a)[Y];ie.centiseconds!=null&&(te+=ie.centiseconds)}const X=ga(K.start),T=ga(K.end),W=ae.slice(M,ee);K.content=me(W);const re=te/100;K.end=Ea(X+re),v(c,S(xe(K)));let ne=!0,fe=0;for(;ne;){const Y=ae[ee+1];if((Y==null?void 0:Y.name)!="text"){ne=!1;break}if(ne=Y.value.replaceAll(" ","").length===0,ne&&(ee+=2,fe++),fe>l(a).length)break}let ve=0;for(let Y=l(p)+1+fe;Y<l(a).length;Y++){const ie=l(a)[Y];ie.centiseconds!=null&&(ve+=ie.centiseconds)}const ce=ae.slice(ee);K.end=Ea(T),K.start=Ea(T-ve/100),K.content=me(ce),v(c,l(c)+(`
`+xe(K))),v(o,S([me(W.filter(Y=>Y.name=="text")),me(ce.filter(Y=>Y.name=="text"))]))}async function y(){await navigator.clipboard.writeText(l(c)),alert("¡Líneas copiadas al portapapeles!")}function N(){v(a,S([]));const K=Ge(l(i));if(K==null)return[];const ae=ge(K.content);Ua(ae);for(let M=0;M<ae.length;M++){const ee=ae[M];if(ee.name!="text")continue;l(a).push({index:M,text:ee.value.replaceAll(" ",""),centiseconds:null});const te=M-1;if(te<0)continue;const X=ae[te];if(X.name!="effect")continue;const T=X.tags.find(re=>re.name===g.kLowerCase||re.name===g.kUpperCase||re.name===g.kf||re.name===g.ko);T==null||!(T.name===g.kLowerCase||T.name===g.kUpperCase||T.name===g.kf||T.name===g.ko)||(l(a)[l(a).length-1].centiseconds=T.value)}return v(p,S(Math.floor(l(a).length/2))),l(a)}Qe(()=>{N(),b()});var _=Nl();Ke(K=>{Xe.title=n});var $=x(_);$.textContent=n;var h=A($,2),O=A(x(h),2),j=x(O);aa(j),ua(j,"placeholder",r),m(O),m(h);var P=A(h,2);P.__click=[ml,N];var w=A(P,2),B=A(x(w),2);pa(B,21,()=>l(a),va,(K,ae,M)=>{var ee=Be(),te=Oe(ee);{var X=T=>{var W=xl();W.__click=()=>{v(p,S(M)),b()};var re=x(W,!0);m(W),Ne(()=>{Qa(W,`button ${(M===l(p)?"is-link":"")??""}`),ua(W,"title",`${l(ae).text}: ${l(ae).centiseconds} centésimas`),de(re,l(ae).text)}),le(T,W)};Re(te,T=>{l(ae).text.replaceAll(" ","").length>0&&T(X)})}le(K,ee)}),m(B),m(w);var k=A(w,2),C=A(x(k),2);pa(C,17,()=>l(o),va,(K,ae,M)=>{var ee=yl(),te=x(ee);te.nodeValue=`Línea ${M+1}: `;var X=A(te),T=x(X,!0);m(X),m(ee),Ne(()=>de(T,l(ae))),le(K,ee)}),m(k);var H=A(k,2),z=x(H),G=x(z),Q=A(G);Q.__click=[kl,y],Q.__keydown=[Al],m(z);var L=A(z,2),I=x(L);Ce(I),m(L),m(H),m(_),Ne(()=>de(G,`${ue.resultado} `)),ke(j,()=>l(i),K=>v(i,K)),ke(I,()=>l(c),K=>v(c,K)),le(e,_),Pe()}Ue(["click","keydown"]);function $l(e,t){for(;e.endsWith(t);)e=e.substring(0,e.length-t.length);return e}async function Sl(e,t,n,r){var o;const i=[...((o=l(t))==null?void 0:o.files)??[]];v(n,S([]));for(const c of i){const a=await c.text(),p=po(a);if(p==null){console.error("archivo inválido",c.name);continue}const b=r(p);l(n).push({fileName:c.name,errors:b})}l(t)!=null&&(l(t).value="")}var Cl=ye(`<span class="ignore-rule svelte-o77fiq">Para ignorar, colocar <b> </b> en
                                campo de efecto.</span>`),wl=ye('<span class="file-error svelte-o77fiq"> <textarea class="textarea is-danger svelte-o77fiq" readonly="" rows="1"></textarea> <!></span>'),Ll=ye('<div class="result svelte-o77fiq"><span> </span> <div class="file-errors svelte-o77fiq"></div></div>'),Rl=ye('<section class="svelte-o77fiq"><h1 class="title is-5"></h1> <input type="file" accept=".ass" multiple> <!></section>');function Fl(e,t){Ve(t,!0);const n=ue.validarDialogos;let r=E(void 0),i=E(S([]));function o(N){const _=[],$=N.scriptInfo.properties.get("WrapStyle")??"",h="0";$!==h&&_.push({location:"Script info, wrap style",error:`Se esperaba "${h}", pero se encontró "${$}"`,text:$,ignoreRule:""});const O=N.scriptInfo.properties.get("ScaledBorderAndShadow")??"",j="yes";O!==j&&_.push({location:"Script info, scaled border and shadow",error:`Se esperaba "${j}", pero se encontró "${O}"`,text:O,ignoreRule:""});for(let P=0;P<N.events.lines.length;P++){const w=N.events.lines[P],B=P+1;if(w.type==wa||w.content==="")continue;const k=w.effect.split(" ").filter(z=>z.startsWith("ignorar-"));if(k.includes("ignorar-linea"))continue;N.styles.styles.some(z=>w.style===z.name)||_.push({location:`Línea ${B}`,error:"Estilo no encontrado",text:w.style,ignoreRule:"ignorar-estilo"});const C=ge(w.content);let H=me(C.filter(z=>z.name==="text"));if(!k.includes("ignorar-inicio")){const z=c(H);z!=null&&_.push({location:`Línea ${B}`,error:z,text:w.content,ignoreRule:"ignorar-inicio"})}if(!k.includes("ignorar-fin")){H=$l(H," ");const z=[".",",","...","!","?",":","~","-..."];z.some(G=>H.endsWith(G))||_.push({location:`Línea ${B}`,error:`No tiene un fin de línea válido: ${z.map(G=>`"${G}"`).join(", ")}`,text:w.content,ignoreRule:"ignorar-fin"})}}return _}function c(N){return N.startsWith("... ")?"los tres puntos van pegados":(N.startsWith("...")&&(N=N.substring(3)),/^(-\s|¡|¿|")*[A-zÁÉÍÓÚáéíóú0-9ñÑ]/gm.test(N)?null:"inicio inválido")}var a=Rl();Ke(N=>{Xe.title=n});var p=x(a);p.textContent=n;var b=A(p,2);b.__change=[Sl,r,i,o],Fe(b,N=>v(r,N),()=>l(r));var y=A(b,2);pa(y,17,()=>l(i),va,(N,_)=>{var $=Ll(),h=x($),O=x(h,!0);m(h);var j=A(h,2);pa(j,21,()=>l(_).errors,va,(P,w)=>{var B=wl(),k=x(B),C=A(k);Ce(C);var H=A(C,2);{var z=G=>{var Q=Cl(),L=A(x(Q)),I=x(L,!0);m(L),da(),m(Q),Ne(()=>de(I,l(w).ignoreRule)),le(G,Q)};Re(H,G=>{l(w).ignoreRule!=""&&G(z)})}m(B),Ne(()=>{de(k,`${l(w).location??""}: ${l(w).error??""} `),wn(C,l(w).text)}),le(P,B)}),m(j),m($),Ne(()=>{Qa(h,`name ${(l(_).errors.length==0?"success":"failed")??""} svelte-o77fiq`),de(O,l(_).fileName)}),le(N,$)}),m(a),le(e,a),Pe()}Ue(["change"]);function Dl(e,t){Ve(t,!0);let n=E("");Qe(()=>{Ma.subscribe(y=>{y!=null&&v(n,S(y))});const p=new URLSearchParams(location.search).get("pagina")??"",b=Ln(p)?p:"inicio";Ma.set(b)});var r=Be(),i=Oe(r);{var o=a=>{Yo(a)},c=a=>{var p=Be(),b=Oe(p);{var y=_=>{Ko(_,{})},N=_=>{var $=Be(),h=Oe($);{var O=P=>{vl(P,{})},j=P=>{var w=Be(),B=Oe(w);{var k=H=>{ol(H,{})},C=H=>{var z=Be(),G=Oe(z);{var Q=I=>{il(I,{})},L=I=>{var K=Be(),ae=Oe(K);{var M=te=>{Fl(te,{})},ee=te=>{var X=Be(),T=Oe(X);{var W=ne=>{El(ne,{})},re=ne=>{var fe=Be(),ve=Oe(fe);{var ce=ie=>{_l(ie,{})},Y=ie=>{var be=Be(),Ie=Oe(be);{var $e=Ae=>{qo(Ae,{})};Re(Ie,Ae=>{l(n)=="acercaDe"&&Ae($e)},!0)}le(ie,be)};Re(ve,ie=>{l(n)=="karaokes.dividirSilabas"?ie(ce):ie(Y,!1)},!0)}le(ne,fe)};Re(T,ne=>{l(n)=="karaokes.dividirKaraoke"?ne(W):ne(re,!1)},!0)}le(te,X)};Re(ae,te=>{l(n)=="dialogos.validarDialogos"?te(M):te(ee,!1)},!0)}le(I,K)};Re(G,I=>{l(n)=="carteles.aplicarColor"?I(Q):I(L,!1)},!0)}le(H,z)};Re(B,H=>{l(n)=="carteles.aplicarAlpha"?H(k):H(C,!1)},!0)}le(P,w)};Re(h,P=>{l(n)=="carteles.aplicarSecuenciaPosiciones"?P(O):P(j,!1)},!0)}le(_,$)};Re(b,_=>{l(n)=="carteles.copiarMovimiento"?_(y):_(N,!1)},!0)}le(a,p)};Re(i,a=>{l(n)=="inicio"?a(o):a(c,!1)})}le(e,r),Pe()}var Il=ye('<section class="svelte-70scd4"><!></section>');function Gl(e){var t=Il(),n=x(t);Dl(n,{}),m(t),le(e,t)}export{Gl as component,zl as universal};
