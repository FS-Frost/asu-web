import{z as g,A as I,B as F,E as H,H as L,C as Y,D as q,F as v,G as N,I as S,J as b,K as R,U as B,M as C,N as M,O as U,b as p,Q as z,S as G}from"./_3VyUnZK.js";function K(a,t,[r,f]=[0,0]){I&&r===0&&F();var i=a,s=null,c=null,u=B,k=r>0?H:0,n=!1;const D=(T,l=!0)=>{n=!0,A(l,T)},A=(T,l)=>{if(u===(u=T))return;let E=!1;if(I&&f!==-1){if(r===0){const e=i.data;e===L?f=0:e===Y?f=1/0:(f=parseInt(e.substring(1)),f!==f&&(f=u?1/0:-1))}const O=f>r;!!u===O&&(i=q(),v(i),N(!1),E=!0,f=-1)}u?(s?S(s):l&&(s=b(()=>l(i))),c&&R(c,()=>{c=null})):(c?S(c):l&&(c=b(()=>l(i,[r+1,f]))),s&&R(s,()=>{s=null})),E&&N(!0)};g(()=>{n=!1,t(D),n||A(null,null)},k),I&&(i=C)}function h(a,t){return a===t||(a==null?void 0:a[G])===t}function P(a={},t,r,f){return M(()=>{var i,s;return U(()=>{i=s,s=[],p(()=>{a!==r(...s)&&(t(a,...s),i&&h(r(...i),a)&&t(null,...i))})}),()=>{z(()=>{s&&h(r(...s),a)&&t(null,...s)})}}),a}export{P as b,K as i};
